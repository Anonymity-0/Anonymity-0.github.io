<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ÂâçË®Ä ÂÖ∂ÂÆû‰ªéÊú¨ÁßëÂºÄÂßãÔºåËÆ°ÁΩëÁõ∏ÂÖ≥ÁöÑËØæ‰∏ä‰∫Ü‰πüÊúâ‰∏âÊ¨°ÔºöÁ¨¨‰∏ÄÊ¨°ÊòØÂ§ß‰∫åÂú®CQU‰∏äÁöÑÔºåÂΩìÊó∂Áî®ÁöÑËá™È°∂Âêë‰∏ãÈÇ£Êú¨‰π¶Ôºå‰∏Ä‰∏äÊù•ÊñπËÄÅÂ∏àÂ∞±Êó†ÊïåÂÇ¨Áú†Ôºå‰∏çËøáÊòØÂºÄÂç∑ËÄÉËØïÔºåÊúÄÂêéÈù¢ÂêëËÄÉËØï‰∏¥Êó∂Â§ç‰π†‰πüÊãø‰∫Ü90&#43;ÔºõÁ¨¨‰∫åÊ¨°ÊòØËÄÉÁ†îÁöÑÊó∂ÂÄôÁúãÁöÑÊπñÁßëÂ§ßÁöÑÁΩëËØæÔºåËØ¥ÂÆûËØùËøô‰∏™ËÄÅÂ∏àÂä®ÁîªÂÅöÁöÑÂæàÂ•ΩÔºåÊØè‰∏™Áü•ËØÜÁÇπÂ•ΩÂÉèÈÉΩÂê¨ÊáÇ‰∫ÜÔºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÂΩ¢ÊàêÊàêÂ•óÁöÑÁ≥ªÁªüÔºõÁ¨¨‰∏âÊ¨°ÊòØÂú®USTC‰∏äÁöÑÈ´òÁ∫ßËÆ°ÁÆóÊú∫ÁΩëÁªúÔºå‰∏äÂ≠¶ÊúüÈÄâËøôÈó®ËØæÁöÑÊó∂ÂÄôÔºåËøòÊòØÊä±ÁùÄ‰∏ÄÁßçÊÉ≥Â≠¶‰∏úË•øÁöÑÂøÉÊÄÅÂéªÂê¨ÁöÑÔºåÊØïÁ´üÈÄâÁöÑÊó∂ÂÄôÂ∞±Âê¨ËøáËøôÈó®ËØæÂæàÁ°¨Ê†∏„ÄÇÈÅóÊÜæÁöÑÊòØÔºåÂ∞ùËØïÂê¨‰∫Ü‰∏Ä‰∏§ËäÇËØæÂêéËøòÊòØÊîæÂºÉ‰∫Ü„ÄÇÊú∫ÁºòÂ∑ßÂêà‰πã‰∏ãÔºåÁúãÂà∞‰∫Ücs144ÁöÑlabÔºåÊÉ≥ÁªôËá™Â∑±Á´ã‰∏Ä‰∏™Êñ∞ÂùëÔºåËøô‰∏™Â≠¶ÊúüÊêìÂá∫Êù•cs144„ÄÇËÆ°ÁΩëÁöÑÊ¶ÇÂøµÂÆûÂú®ÊòØÁéÑ‰πéÂèà‰∏çÂ•ΩÁêÜËß£ÔºåÊàñËÆ∏Êç¢ÁßçÊñπÂºèÔºåËØïËØïËá™Â∑±Âä®ÊâãÂÜôÂÜôÔºåÈ°∫‰æøÂ∞ùËØïËØªËØªËã±ÊñáÊñáÊ°£ÔºàÂΩìÁÑ∂ËøòÊòØ‰ºöÂÄüÂä©‰∏Ä‰∏ãÁøªËØëÂô®ÔºâÔºåËØù‰∏çÂ§öËØ¥Ôºåcs144ÔºåÂêØÂä®ÔºÅ
ÂâçÈù¢ÈÉΩÊòØ‰∏Ä‰∫õÈÖçÁΩÆÁõ∏ÂÖ≥Â∫üËØùÔºåÊ≠£ÂºèÂÜô‰ª£Á†ÅËØ∑Áúã[[#3.4 Writing webget]]
1 Set up GNU/Linux on your computer ÊñáÊ°£‰∏≠ÁªôÂá∫‰∫ÜÂá†ÁßçÁéØÂ¢ÉÁöÑÂÆâË£ÖÊñπÂºè
Recommended: Install the CS144 VirtualBox virtual-machine image (instructions at https://stanford.edu/class/cs144/vm howto/vm-howto-image.html). Use a Google Cloud virtual machine using our class‚Äôs coupon code (instructions at https://stanford.edu/class/cs144/vm howto). Run Ubuntu version 23.10, then install the required packages: sudo apt update &amp;amp;&amp;amp; sudo apt install git cmake gdb build-essential clang \clang-tidy clang-format gcc-doc pkg-config glibc-doc tcpdump tshark Use another GNU/Linux distribution, but be aware that you may hit roadblocks along the way and will need to be comfortable debugging them.'>
<title>Check0</title>

<link rel='canonical' href='https://anonymity-0.github.io/posts/cs144/check0/'>

<link rel="stylesheet" href="/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css"><meta property='og:title' content='Check0'>
<meta property='og:description' content='ÂâçË®Ä ÂÖ∂ÂÆû‰ªéÊú¨ÁßëÂºÄÂßãÔºåËÆ°ÁΩëÁõ∏ÂÖ≥ÁöÑËØæ‰∏ä‰∫Ü‰πüÊúâ‰∏âÊ¨°ÔºöÁ¨¨‰∏ÄÊ¨°ÊòØÂ§ß‰∫åÂú®CQU‰∏äÁöÑÔºåÂΩìÊó∂Áî®ÁöÑËá™È°∂Âêë‰∏ãÈÇ£Êú¨‰π¶Ôºå‰∏Ä‰∏äÊù•ÊñπËÄÅÂ∏àÂ∞±Êó†ÊïåÂÇ¨Áú†Ôºå‰∏çËøáÊòØÂºÄÂç∑ËÄÉËØïÔºåÊúÄÂêéÈù¢ÂêëËÄÉËØï‰∏¥Êó∂Â§ç‰π†‰πüÊãø‰∫Ü90&#43;ÔºõÁ¨¨‰∫åÊ¨°ÊòØËÄÉÁ†îÁöÑÊó∂ÂÄôÁúãÁöÑÊπñÁßëÂ§ßÁöÑÁΩëËØæÔºåËØ¥ÂÆûËØùËøô‰∏™ËÄÅÂ∏àÂä®ÁîªÂÅöÁöÑÂæàÂ•ΩÔºåÊØè‰∏™Áü•ËØÜÁÇπÂ•ΩÂÉèÈÉΩÂê¨ÊáÇ‰∫ÜÔºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÂΩ¢ÊàêÊàêÂ•óÁöÑÁ≥ªÁªüÔºõÁ¨¨‰∏âÊ¨°ÊòØÂú®USTC‰∏äÁöÑÈ´òÁ∫ßËÆ°ÁÆóÊú∫ÁΩëÁªúÔºå‰∏äÂ≠¶ÊúüÈÄâËøôÈó®ËØæÁöÑÊó∂ÂÄôÔºåËøòÊòØÊä±ÁùÄ‰∏ÄÁßçÊÉ≥Â≠¶‰∏úË•øÁöÑÂøÉÊÄÅÂéªÂê¨ÁöÑÔºåÊØïÁ´üÈÄâÁöÑÊó∂ÂÄôÂ∞±Âê¨ËøáËøôÈó®ËØæÂæàÁ°¨Ê†∏„ÄÇÈÅóÊÜæÁöÑÊòØÔºåÂ∞ùËØïÂê¨‰∫Ü‰∏Ä‰∏§ËäÇËØæÂêéËøòÊòØÊîæÂºÉ‰∫Ü„ÄÇÊú∫ÁºòÂ∑ßÂêà‰πã‰∏ãÔºåÁúãÂà∞‰∫Ücs144ÁöÑlabÔºåÊÉ≥ÁªôËá™Â∑±Á´ã‰∏Ä‰∏™Êñ∞ÂùëÔºåËøô‰∏™Â≠¶ÊúüÊêìÂá∫Êù•cs144„ÄÇËÆ°ÁΩëÁöÑÊ¶ÇÂøµÂÆûÂú®ÊòØÁéÑ‰πéÂèà‰∏çÂ•ΩÁêÜËß£ÔºåÊàñËÆ∏Êç¢ÁßçÊñπÂºèÔºåËØïËØïËá™Â∑±Âä®ÊâãÂÜôÂÜôÔºåÈ°∫‰æøÂ∞ùËØïËØªËØªËã±ÊñáÊñáÊ°£ÔºàÂΩìÁÑ∂ËøòÊòØ‰ºöÂÄüÂä©‰∏Ä‰∏ãÁøªËØëÂô®ÔºâÔºåËØù‰∏çÂ§öËØ¥Ôºåcs144ÔºåÂêØÂä®ÔºÅ
ÂâçÈù¢ÈÉΩÊòØ‰∏Ä‰∫õÈÖçÁΩÆÁõ∏ÂÖ≥Â∫üËØùÔºåÊ≠£ÂºèÂÜô‰ª£Á†ÅËØ∑Áúã[[#3.4 Writing webget]]
1 Set up GNU/Linux on your computer ÊñáÊ°£‰∏≠ÁªôÂá∫‰∫ÜÂá†ÁßçÁéØÂ¢ÉÁöÑÂÆâË£ÖÊñπÂºè
Recommended: Install the CS144 VirtualBox virtual-machine image (instructions at https://stanford.edu/class/cs144/vm howto/vm-howto-image.html). Use a Google Cloud virtual machine using our class‚Äôs coupon code (instructions at https://stanford.edu/class/cs144/vm howto). Run Ubuntu version 23.10, then install the required packages: sudo apt update &amp;amp;&amp;amp; sudo apt install git cmake gdb build-essential clang \clang-tidy clang-format gcc-doc pkg-config glibc-doc tcpdump tshark Use another GNU/Linux distribution, but be aware that you may hit roadblocks along the way and will need to be comfortable debugging them.'>
<meta property='og:url' content='https://anonymity-0.github.io/posts/cs144/check0/'>
<meta property='og:site_name' content='AGA&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='lab' /><meta property='article:published_time' content='2024-03-29T14:16:37&#43;08:00'/><meta property='article:modified_time' content='2024-03-29T14:16:37&#43;08:00'/>
<meta name="twitter:title" content="Check0">
<meta name="twitter:description" content="ÂâçË®Ä ÂÖ∂ÂÆû‰ªéÊú¨ÁßëÂºÄÂßãÔºåËÆ°ÁΩëÁõ∏ÂÖ≥ÁöÑËØæ‰∏ä‰∫Ü‰πüÊúâ‰∏âÊ¨°ÔºöÁ¨¨‰∏ÄÊ¨°ÊòØÂ§ß‰∫åÂú®CQU‰∏äÁöÑÔºåÂΩìÊó∂Áî®ÁöÑËá™È°∂Âêë‰∏ãÈÇ£Êú¨‰π¶Ôºå‰∏Ä‰∏äÊù•ÊñπËÄÅÂ∏àÂ∞±Êó†ÊïåÂÇ¨Áú†Ôºå‰∏çËøáÊòØÂºÄÂç∑ËÄÉËØïÔºåÊúÄÂêéÈù¢ÂêëËÄÉËØï‰∏¥Êó∂Â§ç‰π†‰πüÊãø‰∫Ü90&#43;ÔºõÁ¨¨‰∫åÊ¨°ÊòØËÄÉÁ†îÁöÑÊó∂ÂÄôÁúãÁöÑÊπñÁßëÂ§ßÁöÑÁΩëËØæÔºåËØ¥ÂÆûËØùËøô‰∏™ËÄÅÂ∏àÂä®ÁîªÂÅöÁöÑÂæàÂ•ΩÔºåÊØè‰∏™Áü•ËØÜÁÇπÂ•ΩÂÉèÈÉΩÂê¨ÊáÇ‰∫ÜÔºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÂΩ¢ÊàêÊàêÂ•óÁöÑÁ≥ªÁªüÔºõÁ¨¨‰∏âÊ¨°ÊòØÂú®USTC‰∏äÁöÑÈ´òÁ∫ßËÆ°ÁÆóÊú∫ÁΩëÁªúÔºå‰∏äÂ≠¶ÊúüÈÄâËøôÈó®ËØæÁöÑÊó∂ÂÄôÔºåËøòÊòØÊä±ÁùÄ‰∏ÄÁßçÊÉ≥Â≠¶‰∏úË•øÁöÑÂøÉÊÄÅÂéªÂê¨ÁöÑÔºåÊØïÁ´üÈÄâÁöÑÊó∂ÂÄôÂ∞±Âê¨ËøáËøôÈó®ËØæÂæàÁ°¨Ê†∏„ÄÇÈÅóÊÜæÁöÑÊòØÔºåÂ∞ùËØïÂê¨‰∫Ü‰∏Ä‰∏§ËäÇËØæÂêéËøòÊòØÊîæÂºÉ‰∫Ü„ÄÇÊú∫ÁºòÂ∑ßÂêà‰πã‰∏ãÔºåÁúãÂà∞‰∫Ücs144ÁöÑlabÔºåÊÉ≥ÁªôËá™Â∑±Á´ã‰∏Ä‰∏™Êñ∞ÂùëÔºåËøô‰∏™Â≠¶ÊúüÊêìÂá∫Êù•cs144„ÄÇËÆ°ÁΩëÁöÑÊ¶ÇÂøµÂÆûÂú®ÊòØÁéÑ‰πéÂèà‰∏çÂ•ΩÁêÜËß£ÔºåÊàñËÆ∏Êç¢ÁßçÊñπÂºèÔºåËØïËØïËá™Â∑±Âä®ÊâãÂÜôÂÜôÔºåÈ°∫‰æøÂ∞ùËØïËØªËØªËã±ÊñáÊñáÊ°£ÔºàÂΩìÁÑ∂ËøòÊòØ‰ºöÂÄüÂä©‰∏Ä‰∏ãÁøªËØëÂô®ÔºâÔºåËØù‰∏çÂ§öËØ¥Ôºåcs144ÔºåÂêØÂä®ÔºÅ
ÂâçÈù¢ÈÉΩÊòØ‰∏Ä‰∫õÈÖçÁΩÆÁõ∏ÂÖ≥Â∫üËØùÔºåÊ≠£ÂºèÂÜô‰ª£Á†ÅËØ∑Áúã[[#3.4 Writing webget]]
1 Set up GNU/Linux on your computer ÊñáÊ°£‰∏≠ÁªôÂá∫‰∫ÜÂá†ÁßçÁéØÂ¢ÉÁöÑÂÆâË£ÖÊñπÂºè
Recommended: Install the CS144 VirtualBox virtual-machine image (instructions at https://stanford.edu/class/cs144/vm howto/vm-howto-image.html). Use a Google Cloud virtual machine using our class‚Äôs coupon code (instructions at https://stanford.edu/class/cs144/vm howto). Run Ubuntu version 23.10, then install the required packages: sudo apt update &amp;amp;&amp;amp; sudo apt install git cmake gdb build-essential clang \clang-tidy clang-format gcc-doc pkg-config glibc-doc tcpdump tshark Use another GNU/Linux distribution, but be aware that you may hit roadblocks along the way and will need to be comfortable debugging them.">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu6c25cd778f8db4d2cb962eb2998a0673_130812_300x0_resize_box_3.png" width="300"
                            height="271" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üçö</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">AGA&#39;s Blog</a></h1>
            <h2 class="site-description">Hello World!</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/Anonymity-0'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://anonymity-0.github.io/" selected>English</option>
                        
                            <option value="https://anonymity-0.github.io/zh-cn/" >‰∏≠Êñá</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÂâçË®Ä">ÂâçË®Ä</a></li>
    <li><a href="#1-set-up-gnulinux-on-your-computer">1 Set up GNU/Linux on your computer</a></li>
    <li><a href="#2-networking-by-hand">2 Networking by hand</a>
      <ol>
        <li><a href="#21-fetch-a-web-page">2.1 Fetch a Web page</a></li>
        <li><a href="#22">2.2</a></li>
        <li><a href="#23">2.3</a></li>
      </ol>
    </li>
    <li><a href="#3-writing-a-network-program-using-an-os-stream-socket">3. Writing a network program using an OS stream socket</a>
      <ol>
        <li><a href="#31-lets-get-startedfetching-and-building-the-starter-code">3.1 Let‚Äôs get started‚Äîfetching and building the starter code</a></li>
        <li><a href="#32-modern-c-mostly-safe-but-still-fast-and-low-level">3.2 Modern C++: mostly safe but still fast and low-level</a></li>
        <li><a href="#33-ÈòÖËØªminnowÊîØÊåÅ‰ª£Á†Å">3.3 ÈòÖËØªMinnowÊîØÊåÅ‰ª£Á†Å</a>
          <ol>
            <li><a href="#explicitÂÖ≥ÈîÆÂ≠ó">explicitÂÖ≥ÈîÆÂ≠ó</a></li>
            <li><a href="#Âè≥ÂÄºÂºïÁî®">Âè≥ÂÄºÂºïÁî®</a></li>
            <li><a href="#stdmove">std::move()</a></li>
          </ol>
        </li>
        <li><a href="#34-writing-webget">3.4 Writing webget</a>
          <ol>
            <li><a href="#Â•óÊé•Â≠ó">Â•óÊé•Â≠ó</a></li>
            <li><a href="#Â•óÊé•Â≠ó‰∏éÊúçÂä°Á´ØËøõË°åÈÄö‰ø°ÊµÅÁ®ã">Â•óÊé•Â≠ó‰∏éÊúçÂä°Á´ØËøõË°åÈÄö‰ø°ÊµÅÁ®ã</a></li>
            <li><a href="#cÂ•óÊé•Â≠óÁºñÁ®ãÁõ∏ÂÖ≥ÂáΩÊï∞">c++Â•óÊé•Â≠óÁºñÁ®ãÁõ∏ÂÖ≥ÂáΩÊï∞</a></li>
            <li><a href="#httpÊä•ÊñáÊ†ºÂºè">httpÊä•ÊñáÊ†ºÂºè</a></li>
            <li><a href="#ÂÆûÁé∞‰ª£Á†Å">ÂÆûÁé∞‰ª£Á†Å</a></li>
            <li><a href="#‰ª£Á†ÅÊµãËØï">‰ª£Á†ÅÊµãËØï</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#4an-in-memory-reliable-byte-stream">4.An in-memory reliable byte stream</a>
      <ol>
        <li><a href="#ÂÆûÈ™åÁõÆÁöÑ">ÂÆûÈ™åÁõÆÁöÑÔºö</a></li>
        <li><a href="#ÂÆûÈ™åË¶ÅÊ±Ç">ÂÆûÈ™åË¶ÅÊ±ÇÔºö</a></li>
        <li><a href="#ÂÆûÈ™åÁªÜËäÇ">ÂÆûÈ™åÁªÜËäÇÔºö</a></li>
        <li><a href="#ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊé•Âè£ÂÆö‰πâ">ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊé•Âè£ÂÆö‰πâÔºö</a></li>
        <li><a href="#ÈùûÂ∏∏Êó†ËÅäÁöÑ‰ª£Á†ÅËß£ËØª">ÈùûÂ∏∏Êó†ËÅäÁöÑ‰ª£Á†ÅËß£ËØª</a></li>
        <li><a href="#ÂÆûÁé∞Êé•Âè£">ÂÆûÁé∞Êé•Âè£</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" >
                ËÆ°ÁÆóÊú∫ÁΩëÁªúÂü∫Á°ÄÁü•ËØÜ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/cs144/check0/">Check0</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 29, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    11 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="ÂâçË®Ä">ÂâçË®Ä</h2>
<p>ÂÖ∂ÂÆû‰ªéÊú¨ÁßëÂºÄÂßãÔºåËÆ°ÁΩëÁõ∏ÂÖ≥ÁöÑËØæ‰∏ä‰∫Ü‰πüÊúâ‰∏âÊ¨°ÔºöÁ¨¨‰∏ÄÊ¨°ÊòØÂ§ß‰∫åÂú®CQU‰∏äÁöÑÔºåÂΩìÊó∂Áî®ÁöÑËá™È°∂Âêë‰∏ãÈÇ£Êú¨‰π¶Ôºå‰∏Ä‰∏äÊù•ÊñπËÄÅÂ∏àÂ∞±Êó†ÊïåÂÇ¨Áú†Ôºå‰∏çËøáÊòØÂºÄÂç∑ËÄÉËØïÔºåÊúÄÂêéÈù¢ÂêëËÄÉËØï‰∏¥Êó∂Â§ç‰π†‰πüÊãø‰∫Ü90+ÔºõÁ¨¨‰∫åÊ¨°ÊòØËÄÉÁ†îÁöÑÊó∂ÂÄôÁúãÁöÑÊπñÁßëÂ§ßÁöÑÁΩëËØæÔºåËØ¥ÂÆûËØùËøô‰∏™ËÄÅÂ∏àÂä®ÁîªÂÅöÁöÑÂæàÂ•ΩÔºåÊØè‰∏™Áü•ËØÜÁÇπÂ•ΩÂÉèÈÉΩÂê¨ÊáÇ‰∫ÜÔºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÂΩ¢ÊàêÊàêÂ•óÁöÑÁ≥ªÁªüÔºõÁ¨¨‰∏âÊ¨°ÊòØÂú®USTC‰∏äÁöÑÈ´òÁ∫ßËÆ°ÁÆóÊú∫ÁΩëÁªúÔºå‰∏äÂ≠¶ÊúüÈÄâËøôÈó®ËØæÁöÑÊó∂ÂÄôÔºåËøòÊòØÊä±ÁùÄ‰∏ÄÁßçÊÉ≥Â≠¶‰∏úË•øÁöÑÂøÉÊÄÅÂéªÂê¨ÁöÑÔºåÊØïÁ´üÈÄâÁöÑÊó∂ÂÄôÂ∞±Âê¨ËøáËøôÈó®ËØæÂæàÁ°¨Ê†∏„ÄÇÈÅóÊÜæÁöÑÊòØÔºåÂ∞ùËØïÂê¨‰∫Ü‰∏Ä‰∏§ËäÇËØæÂêéËøòÊòØÊîæÂºÉ‰∫Ü„ÄÇÊú∫ÁºòÂ∑ßÂêà‰πã‰∏ãÔºåÁúãÂà∞‰∫Ücs144ÁöÑlabÔºåÊÉ≥ÁªôËá™Â∑±Á´ã‰∏Ä‰∏™Êñ∞ÂùëÔºåËøô‰∏™Â≠¶ÊúüÊêìÂá∫Êù•cs144„ÄÇËÆ°ÁΩëÁöÑÊ¶ÇÂøµÂÆûÂú®ÊòØÁéÑ‰πéÂèà‰∏çÂ•ΩÁêÜËß£ÔºåÊàñËÆ∏Êç¢ÁßçÊñπÂºèÔºåËØïËØïËá™Â∑±Âä®ÊâãÂÜôÂÜôÔºåÈ°∫‰æøÂ∞ùËØïËØªËØªËã±ÊñáÊñáÊ°£ÔºàÂΩìÁÑ∂ËøòÊòØ‰ºöÂÄüÂä©‰∏Ä‰∏ãÁøªËØëÂô®ÔºâÔºåËØù‰∏çÂ§öËØ¥Ôºåcs144ÔºåÂêØÂä®ÔºÅ</p>
<p>ÂâçÈù¢ÈÉΩÊòØ‰∏Ä‰∫õÈÖçÁΩÆÁõ∏ÂÖ≥Â∫üËØùÔºåÊ≠£ÂºèÂÜô‰ª£Á†ÅËØ∑Áúã[[#3.4 Writing webget]]</p>
<h2 id="1-set-up-gnulinux-on-your-computer">1 Set up GNU/Linux on your computer</h2>
<p>ÊñáÊ°£‰∏≠ÁªôÂá∫‰∫ÜÂá†ÁßçÁéØÂ¢ÉÁöÑÂÆâË£ÖÊñπÂºè</p>
<ol>
<li>Recommended: Install the CS144 VirtualBox virtual-machine image (instructions at <a class="link" href="https://stanford.edu/class/cs144/vm"  target="_blank" rel="noopener"
    >https://stanford.edu/class/cs144/vm</a> howto/vm-howto-image.html).</li>
<li>Use a Google Cloud virtual machine using our class‚Äôs coupon code (instructions at <a class="link" href="https://stanford.edu/class/cs144/vm"  target="_blank" rel="noopener"
    >https://stanford.edu/class/cs144/vm</a> howto).</li>
<li>Run Ubuntu version 23.10, then install the required packages: sudo apt update &amp;&amp; sudo apt install git cmake gdb build-essential clang \clang-tidy clang-format gcc-doc pkg-config glibc-doc tcpdump tshark</li>
<li>Use another GNU/Linux distribution, but be aware that you may hit roadblocks along the way and will need to be comfortable debugging them. Your code will be tested on Ubuntu 23.10 LTS with g++ 13.2 and must compile and run properly under those conditions.</li>
<li>If you have a 2020‚Äì24 MacBook (with the ARM64 M1/M2/M3 chips), VirtualBox will not successfully run. Instead, please install the UTM virtual machine software and our ARM64 virtual machine image from <a class="link" href="https://stanford.edu/class/cs144/vm"  target="_blank" rel="noopener"
    >https://stanford.edu/class/cs144/vm</a> howto/.</li>
</ol>
<p>ÊàëÊòØMACÁ≥ªÁªüÊâÄ‰ª•Â∞±ÊåâÁ¨¨‰∫îÁßçËøõË°åËôöÊãüÊú∫ÁöÑÂÆâË£ÖÔºà‰∏äÂ≠¶ÊúüÂ∑≤ÁªèË¢´ÊäòÁ£®Ëøá‰∏ÄÊ¨°Ôºâ</p>
<ol>
<li>‰∏ãËΩΩUTMÂπ∂ËøõË°åÂÆâË£ÖÔºàËøô‰∏ÄÊ≠•Ê≤°Âï•Â•Ω‰ªãÁªçÁöÑÔºâ</li>
<li>‰∏ãËΩΩ<a class="link" href="https://stanford.edu/class/cs144/vm_howto/"  target="_blank" rel="noopener"
    >Setting up your CS144 VM</a>Êèê‰æõÁöÑ<a class="link" href="https://web.stanford.edu/class/cs144/vm_files/cs144-arm64-2024.utm.tar.gz"  target="_blank" rel="noopener"
    >ARM64 GNU/Linux virtual machine image</a>,Âπ∂ÂØºÂÖ•UTM</li>
<li>ÂêØÂä®ËôöÊãüÊú∫,ÂàùÂßãÁî®Êà∑ÂíåÂØÜÁ†ÅÈÉΩÊòØ<code>cs144</code>
Âà∞ËøôÈáåÔºåËôöÊãüÊú∫Â∞±ÂÆâË£ÖÂÆåÊàê‰∫ÜÔºåÂºÄÂßãÂÆûÈ™åÔºÅ</li>
</ol>
<h2 id="2-networking-by-hand">2 Networking by hand</h2>
<p>Ëøô‰∏ÄËäÇ‰∏ªË¶ÅÊòØ‰ΩìÈ™å‰∏Ä‰∏ãÔºåÁî®ÂõæÂΩ¢ÂåñÊµèËßàÂô®ËÆøÈóÆÁΩëÈ°µÂíåÂú®ÁªàÁ´ØÊìç‰ΩúÁöÑÂå∫Âà´„ÄÇ</p>
<h3 id="21-fetch-a-web-page">2.1 Fetch a Web page</h3>
<ol>
<li>Âú®ÂõæÂΩ¢ÂåñÊµèËßàÂô®ËÆøÈóÆ<a class="link" href="http://cs144.keithw.org/hello"  target="_blank" rel="noopener"
    >cs144.keithw.org/hello</a>ÔºåÂèØ‰ª•ÁúãÂà∞‰∏ãÂõæÂÜÖÂÆπ
<img src="https://raw.githubusercontent.com/Anonymity-0/Picgo/main/img/202403161810392.png"
	
	
	
	loading="lazy"
	
	
></li>
<li>Âú®ËôöÊãüÊú∫ÁöÑÁªàÁ´ØËæìÂÖ• <code>telnet cs144.keithw.org http</code>ÔºåÁªìÊûúÂ¶Ç‰∏ã
<ul>
<li>Ëøô‰∏™ÂëΩ‰ª§ÊòØÁî®Êù•ÈÄöËøáTelnetÂçèËÆÆÊâãÂä®Ê®°Êãü‰∏Ä‰∏™ÁÆÄÂçïÁöÑHTTPËØ∑Ê±ÇÔºå‰ª•ËøûÊé•Âà∞ÂüüÂêç¬†<code>cs144.keithw.org</code>¬†‰∏äÊèê‰æõÁöÑHTTPÊúçÂä°„ÄÇ</li>
<li><strong>telnet</strong>¬†ÊòØ‰∏Ä‰∏™Âü∫‰∫éTCP/IPÂçèËÆÆÁöÑËøúÁ´ØÁôªÂΩïÂ∑•ÂÖ∑ÔºåÂÆÉÂÖÅËÆ∏Áî®Êà∑ÈÄöËøáÁΩëÁªú‰∏éËøúÁ®ã‰∏ªÊú∫‰∏äÁöÑÊåáÂÆöÁ´ØÂè£Âª∫Á´ãÁõ¥Êé•‰∫§‰∫íÂºèËøûÊé•„ÄÇ</li>
<li><strong>cs144.keithw.org</strong>¬†ÊòØË¶ÅËøûÊé•ÁöÑÁõÆÊ†áÊúçÂä°Âô®ÁöÑÂüüÂêç„ÄÇ</li>
<li><strong>http</strong>¬†ÊåáÂÆöË¶ÅËøûÊé•ÁöÑTCPÁ´ØÂè£Âè∑ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãHTTPÊúçÂä°ËøêË°åÂú®80Á´ØÂè£Ôºå‰ΩÜÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÁúÅÁï•‰∫ÜÁ´ØÂè£Âè∑ÔºåÂõ†‰∏∫<code>http</code>‰Ωú‰∏∫ÂèÇÊï∞ÂÆûÈôÖ‰∏äÊöóÁ§∫telnetÂ∫îËøûÊé•Âà∞HTTPÊúçÂä°ÁöÑÊ†áÂáÜÁ´ØÂè£80„ÄÇ</li>
<li><img src="https://raw.githubusercontent.com/Anonymity-0/Picgo/main/img/202403161813923.png"
	
	
	
	loading="lazy"
	
	
></li>
</ul>
</li>
<li>ÂΩì‰Ω†ÊâßË°åËøô‰∏™ÂëΩ‰ª§ÂêéÔºåtelnet‰ºöÂ∞ùËØï‰∏éËØ•ÊúçÂä°Âô®ÁöÑ80Á´ØÂè£Âª∫Á´ãËøûÊé•„ÄÇ‰∏ÄÊó¶ËøûÊé•ÊàêÂäüÔºå‰Ω†ÂèØ‰ª•Âú®telnet‰ºöËØù‰∏≠ÊâãÂ∑•ËæìÂÖ•HTTPËØ∑Ê±ÇÂ§¥ÂíåËØ∑Ê±Ç‰ΩìÊù•Ê®°ÊãüÊµèËßàÂô®‰∏éWebÊúçÂä°Âô®‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ
<ol>
<li>ËæìÂÖ•<code>GET /hello HTTP/1.1</code> ÔºåÂõûËΩ¶„ÄÇËøôÊòØ‰∏Ä‰∏™HTTPÂ§¥ÈÉ®‰ø°ÊÅØÔºåÂëäÁü•ÊúçÂä°Âô®ËØ∑Ê±ÇÁöÑÁõÆÊ†á‰∏ªÊú∫ÂêçÔºåÁ°Æ‰øùÊúçÂä°Âô®Áü•ÈÅì‰Ω†ËØ∑Ê±ÇÁöÑÊòØÂì™‰∏™Á´ôÁÇπÁöÑËµÑÊ∫êÔºåÂç≥‰ΩøÂ§ö‰∏™Á´ôÁÇπÂèØËÉΩÂÖ±‰∫´Âêå‰∏ÄIPÂú∞ÂùÄÂíåÁ´ØÂè£„ÄÇ</li>
<li>ËæìÂÖ•<code>Host: cs144.keithw.org</code>ÔºåÂõûËΩ¶„ÄÇËøôÊòØ‰∏Ä‰∏™HTTPÂ§¥ÈÉ®‰ø°ÊÅØÔºåÂëäÁü•ÊúçÂä°Âô®ËØ∑Ê±ÇÁöÑÁõÆÊ†á‰∏ªÊú∫ÂêçÔºåÁ°Æ‰øùÊúçÂä°Âô®Áü•ÈÅì‰Ω†ËØ∑Ê±ÇÁöÑÊòØÂì™‰∏™Á´ôÁÇπÁöÑËµÑÊ∫ê„ÄÇ</li>
<li>ËæìÂÖ•<code>Connection: close</code>ÔºåÂõûËΩ¶„ÄÇËøô‰πüÊòØ‰∏Ä‰∏™HTTPÂ§¥ÈÉ®‰ø°ÊÅØÔºåÊåáÁ§∫ÊúçÂä°Âô®Âú®ÂÆåÊàêÂìçÂ∫îÂêéÂÖ≥Èó≠TCPËøûÊé•ÔºåÂõ†‰∏∫Âú®HTTP/1.1‰∏≠ÈªòËÆ§ÈááÁî®ÊåÅ‰πÖËøûÊé•ÔºåËÄåËøôÈáåÊòéÁ°ÆË¶ÅÊ±Ç‰∏ÄÊ¨°ËØ∑Ê±ÇÁªìÊùüÂêéÂ∞±ÂÖ≥Èó≠ËøûÊé•„ÄÇ</li>
<li>Âú®ËæìÂÖ•ÂÆå‰∏äËø∞‰ø°ÊÅØÂêéÔºåÂÜçÊåâ‰∏ÄÊ¨°ÂõûËΩ¶ÈîÆÔºåÂèëÈÄÅ‰∏Ä‰∏™Á©∫Ë°å„ÄÇÂú®HTTPÂçèËÆÆ‰∏≠ÔºåÁ©∫Ë°åÊ†áÂøóÁùÄËØ∑Ê±ÇÂ§¥ÈÉ®ÁöÑÁªìÊùüÔºåÊé•‰∏ãÊù•ÊúçÂä°Âô®Â∞ÜËØªÂèñÂπ∂Â§ÑÁêÜ‰Ω†ÁöÑËØ∑Ê±Ç„ÄÇ</li>
<li>Â¶ÇÊûú‰∏ÄÂàáÊ≠£Â∏∏Ôºå‰Ω†Â∞ÜÂú®telnetÁ™óÂè£‰∏≠ÁúãÂà∞ÊúçÂä°Âô®ÂèëÂõûÁöÑÂìçÂ∫î„ÄÇ</li>
</ol>
</li>
</ol>
<h3 id="22">2.2</h3>
<p>Áï•</p>
<h3 id="23">2.3</h3>
<p>Áï•</p>
<h2 id="3-writing-a-network-program-using-an-os-stream-socket">3. Writing a network program using an OS stream socket</h2>
<p>ÂâçÈù¢Âè™ÊòØ‰∏Ä‰∫õÁõ¥ËßÇÁöÑ‰ΩìÈ™åÔºåÁé∞Âú®Ë¶ÅÁúüÊ≠£ÂºÄÂßãÁºñÁ®ã‰∫ÜÔºåÂú®Ëøô‰∏™ÂÆûÈ™å‰∏≠Ôºå‰Ω†Â∞Ü‰ΩøÁî®Êìç‰ΩúÁ≥ªÁªüÂÜÖÁΩÆÁöÑ‰º†ËæìÊéßÂà∂ÂçèËÆÆÊîØÊåÅ„ÄÇ‰Ω†ÈúÄË¶ÅÁºñÂÜô‰∏Ä‰∏™Âêç‰∏∫‚Äúwebget‚ÄùÁöÑÁ®ãÂ∫èÔºåÂàõÂª∫‰∏Ä‰∏™TCPÊµÅÂ•óÊé•Â≠óÔºåËøûÊé•Âà∞WebÊúçÂä°Âô®ÔºåÂπ∂Ëé∑Âèñ‰∏Ä‰∏™È°µÈù¢„ÄÇÂú®ÂêéÁª≠ÁöÑÂÆûÈ™å‰∏≠Ôºå‰Ω†Â∞ÜÂÆûÁé∞‰º†ËæìÊéßÂà∂ÂçèËÆÆÁöÑÂè¶‰∏ÄÈÉ®ÂàÜÔºåÂç≥Ëá™Â∑±ÂÆûÁé∞TCPÂçèËÆÆÔºåÂ∞Ü‰∏çÂèØÈù†ÁöÑÊï∞ÊçÆÊä•ËΩ¨Êç¢‰∏∫ÂèØÈù†ÁöÑÂ≠óËäÇÊµÅ„ÄÇ</p>
<h3 id="31-lets-get-startedfetching-and-building-the-starter-code">3.1 Let‚Äôs get started‚Äîfetching and building the starter code</h3>
<ol>
<li>
<p>Âú®ËôöÊãüÊú∫ÁöÑÁªàÁ´ØÁ™óÂè£ËøêË°å<code>git clone https://github.com/cs144/minnow</code> Ëé∑ÂæóÊ∫ê‰ª£Á†Å</p>
</li>
<li>
<p>Optional: Feel free to backup your repository to a private GitHub/GitLab/Bitbucket repository (e.g., using the instructions at <a class="link" href="https://stackoverflow.com/questions/10065526/"  target="_blank" rel="noopener"
    >https://stackoverflow.com/questions/10065526/</a> github-how-to-make-a-fork-of-public-repository-private), but please make absolutely sure that your work remains private.ÔºàÂèØÈÄâÈ°πÔºåÂÖ∂ÂÆûÂ∞±ÊòØËÆ©‰Ω†Â§á‰ªΩÔºâ</p>
</li>
<li>
<p>ËøõÂÖ•Êñá‰ª∂Â§π: <code>cd minnow</code></p>
</li>
<li>
<p>ÂàõÂª∫‰∏Ä‰∏™ÁõÆÂΩïÊù•ÁºñËØëÂÆûÈ™åËΩØ‰ª∂Ôºö<code>cmake -S . -B build</code></p>
</li>
<li>
<p>ÁºñËØëÊ∫êÊñá‰ª∂: <code>cmake --build build</code></p>
</li>
<li>
<p>ËøîÂõû‰∏äÂ±ÇÊñá‰ª∂Â§πÔºåÊâìÂºÄ <code>writeups/check0.md</code> Êñá‰ª∂ÔºåËøôÊòØÂÆûÈ™åÊ£ÄÊü•ÁÇπÊä•ÂëäÁöÑÊ®°Êùø„ÄÇ</p>
<ul>
<li>. <img src="https://raw.githubusercontent.com/Anonymity-0/Picgo/main/img/202403171228997.png"
	
	
	
	loading="lazy"
	
	
></li>
</ul>
</li>
</ol>
<h3 id="32-modern-c-mostly-safe-but-still-fast-and-low-level">3.2 Modern C++: mostly safe but still fast and low-level</h3>
<p>ÂÆûÈ™å‰Ωú‰∏öÂ∞Ü‰ΩøÁî®Áé∞‰ª£C++È£éÊ†ºÁºñÂÜôÔºåËøôÁßçÈ£éÊ†º‰ΩøÁî®ÊúÄËøëÔºà2011Âπ¥ÔºâÁöÑËØ≠Ë®ÄÁâπÊÄß‰ª•Â∞ΩÂèØËÉΩÂÆâÂÖ®Âú∞ËøõË°åÁºñÁ®ã„ÄÇËøôÂèØËÉΩ‰∏éËøáÂéªÁºñÂÜôC++ÁöÑÊñπÂºè‰∏çÂêå„ÄÇÂÖ≥‰∫éËøôÁßçÈ£éÊ†ºÁöÑÂèÇËÄÉÔºåËØ∑ÂèÇËßÅ<a class="link" href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"  target="_blank" rel="noopener"
    >C++ Core Guidelines</a>„ÄÇ</p>
<p>ÂÖ∑‰ΩìÊù•ËØ¥Ôºö</p>
<ul>
<li>‰ΩøÁî® <a class="link" href="https://en.cppreference.com"  target="_blank" rel="noopener"
    >https://en.cppreference.com</a> ‰Ωú‰∏∫ÁºñÁ®ãËµÑÊ∫ê„ÄÇÔºàÊàë‰ª¨Âª∫ËÆÆÊÇ®ÈÅøÂÖç‰ΩøÁî®cplusplus.comÔºåÂõ†‰∏∫ÂÆÉÂèØËÉΩÂ∑≤ÁªèËøáÊó∂„ÄÇÔºâ</li>
<li>‰∏çË¶Å‰ΩøÁî®malloc()Êàñfree()„ÄÇ</li>
<li>‰∏çË¶Å‰ΩøÁî®newÊàñdelete„ÄÇ</li>
<li>Â∞ΩÈáè‰∏ç‰ΩøÁî®ÂéüÂßãÊåáÈíàÔºà*ÔºâÔºåÂè™Âú®ÂøÖË¶ÅÊó∂‰ΩøÁî®‚ÄúÊô∫ËÉΩ‚ÄùÊåáÈíàÔºàunique_ptrÊàñshared_ptrÔºâÔºàÂú®CS144‰∏≠‰∏çÈúÄË¶Å‰ΩøÁî®Ëøô‰∫õÔºâ„ÄÇ</li>
<li>ÈÅøÂÖç‰ΩøÁî®Ê®°Êùø„ÄÅÁ∫øÁ®ã„ÄÅÈîÅÂíåËôöÂáΩÊï∞ÔºàÊÇ®Âú®CS144‰∏≠‰∏çÈúÄË¶Å‰ΩøÁî®Ëøô‰∫õÔºâ„ÄÇ</li>
<li>ÈÅøÂÖç‰ΩøÁî®CÈ£éÊ†ºÂ≠óÁ¨¶‰∏≤Ôºàchar *strÔºâÊàñÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞ÔºàÂ¶Çstrlen()Ôºåstrcpy()Ôºâ„ÄÇËøô‰∫õÂÆπÊòìÂá∫Èîô„ÄÇËØ∑ÊîπÁî®std::string„ÄÇ</li>
<li>‰∏çË¶Å‰ΩøÁî®CÈ£éÊ†ºÂº∫Âà∂ËΩ¨Êç¢Ôºà‰æãÂ¶ÇÔºå(FILE *)xÔºâ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÔºåËØ∑‰ΩøÁî®C++ÈùôÊÄÅÂº∫Âà∂ËΩ¨Êç¢ÔºàÈÄöÂ∏∏Âú®CS144‰∏≠‰∏çÈúÄË¶ÅËøôÊ†∑ÂÅöÔºâ„ÄÇ</li>
<li>‰ºòÂÖàÈÄöËøáÂ∏∏ÈáèÂºïÁî®‰º†ÈÄíÂáΩÊï∞ÂèÇÊï∞Ôºà‰æãÂ¶ÇÔºöconst Address &amp; addressÔºâ„ÄÇ</li>
<li>Èô§ÈùûÈúÄË¶Å‰øÆÊîπÔºåÂê¶Âàô‰ΩøÊØè‰∏™ÂèòÈáèÈÉΩ‰∏∫const„ÄÇ</li>
<li>Èô§ÈùûÈúÄË¶Å‰øÆÊîπÂØπË±°ÔºåÂê¶Âàô‰ΩøÊØè‰∏™ÊñπÊ≥ïÈÉΩ‰∏∫const„ÄÇ</li>
<li>ÈÅøÂÖç‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÔºåÂπ∂Â∞ΩÂèØËÉΩ‰ΩøÊØè‰∏™ÂèòÈáèÁöÑ‰ΩúÁî®ÂüüÊúÄÂ∞è„ÄÇ</li>
<li>Âú®Êèê‰∫§‰Ωú‰∏ö‰πãÂâçÔºåËøêË°å<code>cmake --build build --target tid</code>y‰ª•Ëé∑ÂèñÊúâÂÖ≥Â¶Ç‰ΩïÊ†πÊçÆC++ÁºñÁ®ãÂÆûË∑µÊîπËøõ‰ª£Á†ÅÁöÑÂª∫ËÆÆÔºåÂπ∂ËøêË°å<code>cmake --build build --target format</code>‰ª•‰∏ÄËá¥Âú∞Ê†ºÂºèÂåñ‰ª£Á†Å„ÄÇ</li>
</ul>
<h3 id="33-ÈòÖËØªminnowÊîØÊåÅ‰ª£Á†Å">3.3 ÈòÖËØªMinnowÊîØÊåÅ‰ª£Á†Å</h3>
<p>‰∏∫‰∫ÜÊîØÊåÅËøôÁßçÁºñÁ®ãÈ£éÊ†ºÔºåMinnow‰ΩøÁî®Á±ªÂ∞ÜÊìç‰ΩúÁ≥ªÁªüÁöÑÂáΩÊï∞Â∞ÅË£ÖÊàêÁé∞‰ª£C++ÁöÑÂΩ¢Âºè„ÄÇËøô‰∫õÁ±ª‰∏ªË¶ÅÊòØÂØπÊÇ®Âú®CS 110/111ËØæÁ®ã‰∏≠Â∑≤ÁªèÊé•Ëß¶ËøáÁöÑÊ¶ÇÂøµÔºåÂ¶ÇÂ•óÊé•Â≠óÂíåÊñá‰ª∂ÊèèËø∞Á¨¶ÔºåËøõË°åÂ∞ÅË£Ö„ÄÇ
ÊÇ®ÈúÄË¶ÅÈòÖËØªËøô‰∫õÁ±ªÁöÑÂÖ¨ÂÖ±Êé•Âè£ÔºåËøô‰∫õÊé•Âè£ÂÆö‰πâÂú®<code>util/socket.hh</code>Âíå<code>util/file descriptor.hh</code>Êñá‰ª∂‰∏≠ÁöÑ<code>public:</code>‰πãÂêéÁöÑÈÉ®ÂàÜ„ÄÇÁâπÂà´Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåSocketÊòØFileDescriptorÁöÑ‰∏ÄÁßçÁ±ªÂûãÔºåËÄåTCPSocketÂèàÊòØSocketÁöÑ‰∏ÄÁßçÁ±ªÂûã„ÄÇ</p>
<p>ËøôÊÆµËØù‰πç‰∏ÄÁúãÊàëÂ§¥ÈÉΩÂ§ß‰∫ÜÔºåÊü•ÈòÖ‰∫Ü‰∏Ä‰∏ãÂæóÂà∞ÁöÑËß£ÈáäÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>SocketÊòØÁΩëÁªúÁºñÁ®ã‰∏≠ÁöÑ‰∏Ä‰∏™Ê¶ÇÂøµÔºåÂÆÉÂÖÅËÆ∏Á®ãÂ∫èÈÄöËøáËÆ°ÁÆóÊú∫ÁΩëÁªúËøõË°åÈÄö‰ø°„ÄÇ</li>
<li>FileDescriptorÊòØ‰∏Ä‰∏™Êõ¥ÈÄöÁî®ÁöÑÊ¶ÇÂøµÔºåÂÆÉÈÄöÂ∏∏ÊåáÁöÑÊòØÊìç‰ΩúÁ≥ªÁªü‰∏≠ÁöÑ‰∏Ä‰∏™Êï¥Êï∞ÔºåÁî®‰∫éÊ†áËØÜÊâìÂºÄÁöÑÊñá‰ª∂„ÄÅÂ•óÊé•Â≠óÁ≠âËµÑÊ∫ê„ÄÇ</li>
<li>Âú®Minnow‰∏≠ÔºåSocketÊòØFileDescriptorÁöÑ‰∏Ä‰∏™Â≠êÁ±ªÔºåËøôÊÑèÂë≥ÁùÄSocketÊã•ÊúâFileDescriptorÁöÑÊâÄÊúâÂäüËÉΩÔºåÂπ∂‰∏îËøòÊúâ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÁΩëÁªúÈÄö‰ø°Áõ∏ÂÖ≥ÁöÑÂäüËÉΩ„ÄÇÂêåÊ†∑ÔºåTCPSocketÊòØSocketÁöÑÂ≠êÁ±ªÔºåÂÆÉÊèê‰æõ‰∫ÜÂØπTCPÔºà‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºâÂ•óÊé•Â≠óÁöÑ‰∏ìÈó®ÊîØÊåÅ„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúÂê¨Ëµ∑Êù•ËøòÊòØÂæàÊäΩË±°ÔºåÈÇ£Êàë‰ª¨ËøòÊòØÁúãÁúã‰ª£Á†ÅÂêß</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Socket</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FileDescriptor</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! Bind a socket to a specified address with [bind(2)](\ref man2::bind), usually for listen/accept
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="n">bind</span><span class="p">(</span> <span class="k">const</span> <span class="n">Address</span><span class="o">&amp;</span> <span class="n">address</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Bind a socket to a specified device
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">bind_to_device</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">device_name</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Connect a socket to a specified peer address with [connect(2)](\ref man2::connect)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">connect</span><span class="p">(</span> <span class="k">const</span> <span class="n">Address</span><span class="o">&amp;</span> <span class="n">address</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Shut down a socket via [shutdown(2)](\ref man2::shutdown)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">shutdown</span><span class="p">(</span> <span class="kt">int</span> <span class="n">how</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Get local address of socket with [getsockname(2)](\ref man2::getsockname)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Address</span> <span class="nf">local_address</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! Get peer address of socket with [getpeername(2)](\ref man2::getpeername)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Address</span> <span class="nf">peer_address</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Allow local address to be reused sooner via [SO_REUSEADDR](\ref man7::socket)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">set_reuseaddr</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Check for errors (will be seen on non-blocking sockets)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">throw_if_error</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂà∞<code>Socket</code>Á±ªÊòØ<code>FileDescriptor</code>ÁöÑÂ≠êÁ±ªÔºåÂÆÉÂÆö‰πâ‰∫Ü‰∏Ä‰∫õ‰∏éÂ•óÊé•Â≠óÁõ∏ÂÖ≥ÁöÑÊìç‰ΩúÔºåÂ¶ÇÁªëÂÆöÂú∞ÂùÄ„ÄÅËøûÊé•„ÄÅÂÖ≥Èó≠„ÄÅËé∑ÂèñÊú¨Âú∞ÂíåÂØπÁ≠âÂú∞ÂùÄÁ≠â„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TCPSocket</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Socket</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! \brief Construct from FileDescriptor (used by accept())
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//! \param[in] fd is the FileDescriptor from which to construct
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">explicit</span> <span class="n">TCPSocket</span><span class="p">(</span> <span class="n">FileDescriptor</span><span class="o">&amp;&amp;</span> <span class="n">fd</span> <span class="p">)</span> <span class="o">:</span> <span class="n">Socket</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span> <span class="n">fd</span> <span class="p">),</span> <span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">IPPROTO_TCP</span> <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! Default: construct an unbound, unconnected TCP socket
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">TCPSocket</span><span class="p">()</span> <span class="o">:</span> <span class="n">Socket</span><span class="p">(</span> <span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span> <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Mark a socket as listening for incoming connections
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">listen</span><span class="p">(</span> <span class="kt">int</span> <span class="n">backlog</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Accept a new incoming connection
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">TCPSocket</span> <span class="nf">accept</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>TCPSocket</code>Á±ªÊòØ<code>Socket</code>ÁöÑÂ≠êÁ±ªÔºåÂÆÉ‰∏ìÈó®Áî®‰∫éÂ§ÑÁêÜTCPÂ•óÊé•Â≠ó„ÄÇ</li>
<li><code>TCPSocket</code>Á±ªÊúâ‰∏§‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰∏Ä‰∏™ÊòØÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÔºåÁî®‰∫éÂàõÂª∫‰∏Ä‰∏™Êú™ÁªëÂÆö„ÄÅÊú™ËøûÊé•ÁöÑTCPÂ•óÊé•Â≠óÔºõÂè¶‰∏Ä‰∏™ÊòØ‰ªé<code>FileDescriptor</code>ÊûÑÈÄ†ÁöÑÔºåËøôÈÄöÂ∏∏ÊòØ<code>accept</code>ÊñπÊ≥ïÊé•ÂèóÊñ∞ËøûÊé•Êó∂‰ΩøÁî®ÁöÑ„ÄÇ</li>
<li>ÈáçÁÇπËÆ≤‰∏Ä‰∏ã<code>explicit TCPSocket( FileDescriptor&amp;&amp; fd ) : Socket( std::move( fd ), AF_INET, SOCK_STREAM, IPPROTO_TCP ) {}</code>Ëøô‰∏™ÈÉ®ÂàÜÔºåËøôÊòØ‰πãÂâçÊ≤°ÊúâÈÅáÂà∞ËøáÁöÑÔºàC++Â≠¶ÁöÑÊØîËæÉÊµÖÔºâ„ÄÇ
<ul>
<li>
<p>ÊÄªÁöÑÊù•ËØ¥Ôºå<code>explicit TCPSocket( FileDescriptor&amp;&amp; fd ) : Socket( std::move(fd), AF_INET, SOCK_STREAM, IPPROTO_TCP ) {}</code>Ë°®Á§∫<code>TCPSocke</code>tÊûÑÈÄ†ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™Âè≥ÂÄºÂºïÁî®ÁöÑ<code>FileDescriptor</code>Á±ªÂûãÁöÑÂèÇÊï∞fdÔºåÂπ∂‰ΩøÁî®Ëøô‰∏™ÂèÇÊï∞Êù•ÂàùÂßãÂåñ<code>Socket</code>ÂØπË±°„ÄÇ</p>
</li>
<li>
<p><code>explicit</code>ÂÖ≥ÈîÆÂ≠óË°®Á§∫Ëøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Âè™ËÉΩÊòæÂºèÂú∞Ë¢´Ë∞ÉÁî®Ôºå‰∏çËÉΩÈöêÂºèÂú∞ËΩ¨Êç¢Á±ªÂûã„ÄÇ</p>
</li>
<li>
<p><code>FileDescriptor&amp;&amp; fd</code>Ë°®Á§∫Ëøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Êé•Êî∂‰∏Ä‰∏™<code>FileDescriptor</code>Á±ªÂûãÁöÑÂèÇÊï∞Ôºå<code>&amp;&amp;</code>Ë°®Á§∫Ëøô‰∏™ÂèÇÊï∞ÊòØÂè≥ÂÄºÂºïÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåËøô‰∏™ÂèÇÊï∞ÂèØËÉΩÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÂØπË±°„ÄÇ</p>
</li>
<li>
<p><code>: Socket( std::move( fd ), AF_INET, SOCK_STREAM, IPPROTO_TCP )</code>¬†ËøôÈÉ®ÂàÜÊòØÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂàùÂßãÂåñÂàóË°®„ÄÇÂÆÉÁöÑ‰ΩúÁî®ÊòØÂàùÂßãÂåñËøô‰∏™<code>TCPSocket</code>ÂØπË±°ÁöÑÁà∂Á±ª<code>Socket</code>„ÄÇÂÆûÈôÖ‰∏äÊòØÂú®Ë∞ÉÁî®Âü∫Á±ª<code>Socket</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂπ∂‰º†ÈÄí‰∫ÜÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÔºåÂÆÉÂèØ‰ª•Á°Æ‰øùÂü∫Á±ªÊûÑÈÄ†ÂáΩÊï∞Âú®Ê¥æÁîüÁ±ªÊûÑÈÄ†ÂáΩÊï∞‰ΩìÊâßË°å‰πãÂâçË¢´Ë∞ÉÁî®Ôºå‰ªéËÄåÊ≠£Á°ÆÂàùÂßãÂåñÂü∫Á±ªÁöÑÈÉ®ÂàÜ„ÄÇ</p>
</li>
<li>
<p><code>std::move( fd )</code>Ë°®Á§∫Â∞Ü<code>fd</code>ÁöÑÊâÄÊúâÊùÉÁßªÂä®Áªô<code>Socket</code>ÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂ§çÂà∂„ÄÇ</p>
</li>
<li>
<p><code>AF_INET, SOCK_STREAM, IPPROTO_TCP</code>ÊòØÂàõÂª∫<code>Socket</code>Êó∂ÈúÄË¶ÅÁöÑÂèÇÊï∞ÔºåÂÆÉ‰ª¨ÂàÜÂà´Ë°®Á§∫‰ΩøÁî®ÁöÑÁΩëÁªúÂçèËÆÆÊóèÔºàIPv4ÔºâÔºåÂ•óÊé•Â≠óÁ±ªÂûãÔºàÊµÅÂºèÂ•óÊé•Â≠óÔºâÂíåÂçèËÆÆÔºàTCPÔºâ„ÄÇ</p>
</li>
</ul>
</li>
</ul>
<p>Â¶ÇÊûú‰Ω†ËßâÂæó‰∏äÈù¢Ëß£ÈáäÁöÑÂ¶ÇÊûúËøò‰∏çÂ§üÊ∏ÖÊô∞ÔºåÈÇ£ËØ¥Êòé<del>‰Ω†ÁöÑc++ÂíåÊàë‰∏ÄÊ†∑Â≠¶ÁöÑÂçäÊ°∂Ê∞¥</del>ÔºåÊé•‰∏ãÊù•ÊòØ‰∏Ä‰∫õ‰∏æ‰æãÁöÑÁü•ËØÜË°•ÂÖÖÔºö</p>
<h4 id="explicitÂÖ≥ÈîÆÂ≠ó">explicitÂÖ≥ÈîÆÂ≠ó</h4>
<p>Áî®‰∏Ä‰∏™Êõ¥ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•Ëß£Èáä<code>explicit</code>ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî®„ÄÇ
ÊÉ≥Ë±°‰∏Ä‰∏ã‰Ω†Êúâ‰∏Ä‰∏™Ë£ÖÈí±ÁöÑÈí±ÂåÖÔºåËøô‰∏™Èí±ÂåÖÂè™ËÉΩË£ÖÁ∫∏Â∏ÅÔºå‰∏çËÉΩË£ÖÁ°¨Â∏Å„ÄÇÁé∞Âú®Ôºå‰Ω†ÊÉ≥Ë¶ÅËÆæËÆ°‰∏Ä‰∏™ÂæÄÈí±ÂåÖÈáåÊîæÈí±ÁöÑÂäüËÉΩ„ÄÇ</p>
<ol>
<li><strong>Ê≤°Êúâ<code>explicit</code>ÁöÑÊÉÖÂÜµ</strong>Ôºö
‰Ω†ËÆæËÆ°‰∫Ü‰∏Ä‰∏™Èí±ÂåÖÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™Á∫∏Â∏ÅÈù¢È¢ùÁöÑÂèÇÊï∞ÔºåÊØîÂ¶Ç<code>100</code>ÔºåÁÑ∂ÂêéÈí±ÂåÖÈáåÂ∞±‰ºöËá™Âä®Êúâ<code>100</code>ÂùóÈí±„ÄÇËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ê≤°Êúâ‰ΩøÁî®<code>explicit</code>ÂÖ≥ÈîÆÂ≠ó„ÄÇ
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Wallet</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Wallet</span><span class="p">(</span><span class="kt">int</span> <span class="n">money</span><span class="p">)</span> <span class="o">:</span> <span class="n">money</span><span class="p">(</span><span class="n">money</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getMoney</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">money</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">money</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div>ËøôÊó∂Ôºå‰Ω†ÂèØ‰ª•ËøôÊ†∑‰ΩøÁî®Ëøô‰∏™Èí±ÂåÖÔºö
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Wallet</span> <span class="nf">wallet</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// ÊòéÁ°ÆÂú∞ÂàõÂª∫‰∏Ä‰∏™Êúâ100ÂùóÈí±ÁöÑÈí±ÂåÖ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Wallet</span> <span class="n">anotherWallet</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span> <span class="c1">// ËøôÈáåÈöêÂºèÂú∞Â∞Ü200Ëøô‰∏™Êï¥Êï∞ËΩ¨Êç¢Êàê‰∫Ü‰∏Ä‰∏™Èí±ÂåÖ
</span></span></span></code></pre></td></tr></table>
</div>
</div>Âú®Á¨¨‰∫åÁßçÊÉÖÂÜµ‰∏≠Ôºå‰Ω†Âè™ÊòØÂÜô‰∫Ü‰∏Ä‰∏™Êï∞Â≠ó<code>200</code>ÔºåÂπ∂Ê≤°ÊúâÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞Ôºå‰ΩÜÊòØÁºñËØëÂô®Âç¥Ëá™Âä®Â∏Æ‰Ω†ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Èí±ÂåÖÔºåÂπ∂‰∏îÈáåÈù¢Êúâ<code>200</code>ÂùóÈí±„ÄÇËøôÂ∞±ÊòØÊ≤°Êúâ<code>explicit</code>ÂÖ≥ÈîÆÂ≠óÁöÑÊûÑÈÄ†ÂáΩÊï∞ÂÖÅËÆ∏ÁöÑÈöêÂºèËΩ¨Êç¢„ÄÇ</li>
<li><strong>‰ΩøÁî®<code>explicit</code>ÁöÑÊÉÖÂÜµ</strong>Ôºö
Áé∞Âú®Ôºå‰Ω†ÂÜ≥ÂÆöÂú®ËÆæËÆ°Èí±ÂåÖÁöÑÊó∂ÂÄôÔºå‰∏çÂÖÅËÆ∏ËøôÁßçÈöêÂºèËΩ¨Êç¢Ôºå‰Ω†Â∏åÊúõÊØèÊ¨°ÂæÄÈí±ÂåÖÈáåÊîæÈí±ÈÉΩÂøÖÈ°ªÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøôÊó∂Ôºå‰Ω†ÂèØ‰ª•Âú®ÊûÑÈÄ†ÂáΩÊï∞ÂâçÂä†‰∏ä<code>explicit</code>ÂÖ≥ÈîÆÂ≠ó„ÄÇ
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Wallet</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">explicit</span> <span class="n">Wallet</span><span class="p">(</span><span class="kt">int</span> <span class="n">money</span><span class="p">)</span> <span class="o">:</span> <span class="n">money</span><span class="p">(</span><span class="n">money</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getMoney</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">money</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">money</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div>ËøôÊó∂ÔºåÂ¶ÇÊûú‰Ω†Â∞ùËØï‰πãÂâçÁöÑÈÇ£ÁßçÈöêÂºèËΩ¨Êç¢Ôºö
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Wallet</span> <span class="nf">wallet</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// Ëøô‰ªçÁÑ∂ÊòØÊ≠£Á°ÆÁöÑÔºåÂõ†‰∏∫ËøôÊòØÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Wallet</span> <span class="n">anotherWallet</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span> <span class="c1">// ËøôÂ∞ÜÊòØ‰∏Ä‰∏™ÈîôËØØÔºåÂõ†‰∏∫ÊûÑÈÄ†ÂáΩÊï∞ÊòØexplicitÁöÑÔºå‰∏çÂÖÅËÆ∏ÈöêÂºèËΩ¨Êç¢
</span></span></span></code></pre></td></tr></table>
</div>
</div>Á¨¨‰∫åË°å‰ª£Á†Å‰ºöÂØºËá¥ÁºñËØëÈîôËØØÔºåÂõ†‰∏∫ÁºñËØëÂô®‰∏çÂÜçÂÖÅËÆ∏‰Ω†Âè™ÊòØÂÜô‰∏Ä‰∏™Êï∞Â≠óÂ∞±Ëá™Âä®ÂàõÂª∫Èí±ÂåÖ„ÄÇ‰Ω†ÂøÖÈ°ªÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂÉèÁ¨¨‰∏ÄË°åÈÇ£Ê†∑„ÄÇ
ÊâÄ‰ª•Ôºå<code>explicit</code>ÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩúÁî®Â∞±ÊòØÈò≤Ê≠¢ÊûÑÈÄ†ÂáΩÊï∞ÁöÑÈöêÂºèË∞ÉÁî®ÔºåËÆ©Á±ªÂûãËΩ¨Êç¢Êõ¥Âä†ÊòéÁ°ÆÔºåÈÅøÂÖçÁ®ãÂ∫è‰∏≠Âá∫Áé∞ÊÑèÊÉ≥‰∏çÂà∞ÁöÑË°å‰∏∫„ÄÇ</li>
</ol>
<p>Âú®cs144ËøôÊÆµ‰ª£Á†Å‰∏≠ÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ùËØïËøôÊ†∑ÂÅöÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FileDescriptor</span> <span class="nf">fd</span><span class="p">(</span><span class="mi">1234</span><span class="p">);</span> <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TCPSocket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">fd</span><span class="p">;</span>    <span class="c1">// ËøôÂ∞ÜÂ§±Ë¥•ÔºåÂõ†‰∏∫TCPSocketÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊòØexplicitÁöÑ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊÆµ‰ª£Á†Å‰ºöÂ§±Ë¥•ÔºåÂõ†‰∏∫TCPSocketÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊòØexplicitÁöÑÔºåËøôÊÑèÂë≥ÁùÄÊàë‰ª¨‰∏çËÉΩ‰ΩøÁî®ÈöêÂºèÁ±ªÂûãËΩ¨Êç¢Â∞ÜFileDescriptorÁ±ªÂûãÁöÑÂÄºËΩ¨Êç¢‰∏∫TCPSocketÂØπË±°„ÄÇÊàë‰ª¨ÂøÖÈ°ªÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FileDescriptor</span> <span class="nf">fd</span><span class="p">(</span><span class="mi">1234</span><span class="p">);</span> <span class="c1">// ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TCPSocket</span> <span class="nf">socket</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">fd</span><span class="p">));</span> <span class="c1">// Ê≠£Á°ÆÔºåÊòéÁ°ÆÂú∞Ë∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Âè≥ÂÄºÂºïÁî®">Âè≥ÂÄºÂºïÁî®</h4>
<p>Âú®C++‰∏≠ÔºåÊàë‰ª¨Êúâ‰∏§ÁßçÁ±ªÂûãÁöÑÂºïÁî®ÔºöÂ∑¶ÂÄºÂºïÁî®ÂíåÂè≥ÂÄºÂºïÁî®„ÄÇ</p>
<p>Â∑¶ÂÄºÂºïÁî®ÊòØÊàë‰ª¨ÈÄöÂ∏∏ÊâÄËØ¥ÁöÑÂºïÁî®ÔºåÂÆÉÂºïÁî®ÁöÑÊòØ‰∏Ä‰∏™ÂÖ∑ÊúâÊòéÁ°ÆÂ≠òÂÇ®‰ΩçÁΩÆÁöÑÂØπË±°„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span>¬†<span class="n">a</span>¬†<span class="o">=</span>¬†<span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span><span class="o">&amp;</span>¬†<span class="n">ref</span>¬†<span class="o">=</span>¬†<span class="n">a</span><span class="p">;</span>¬†<span class="c1">//¬†Â∑¶ÂÄºÂºïÁî®
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âè≥ÂÄºÂºïÁî®ÊòØC++11ÂºïÂÖ•ÁöÑÊñ∞ÁâπÊÄßÔºåÂÆÉÂºïÁî®ÁöÑÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÂØπË±°ÔºåÊàñËÄÖËØ¥ÊòØ‰∏Ä‰∏™Â∞ÜË¶ÅÈîÄÊØÅÁöÑÂØπË±°„ÄÇËøôÁßçÂºïÁî®ÈÄöÂ∏∏Áî®‰∫éÁßªÂä®ËØ≠‰πâÂíåÂÆåÁæéËΩ¨Âèë„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">int</span><span class="o">&amp;&amp;</span>¬†<span class="n">rref</span>¬†<span class="o">=</span>¬†<span class="mi">5</span><span class="p">;</span>¬†<span class="c1">//¬†Âè≥ÂÄºÂºïÁî®
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊï∞Â≠ó5ÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÂØπË±°ÔºåÊàë‰ª¨ÂèØ‰ª•Áî®Âè≥ÂÄºÂºïÁî®Êù•ÂºïÁî®ÂÆÉ„ÄÇ</p>
<p><code>FileDescriptor&amp;&amp; fd</code>Â∞±ÊòØ‰∏Ä‰∏™Âè≥ÂÄºÂºïÁî®ÔºåÂÆÉÊåáÂêëÁöÑÊòØ‰∏Ä‰∏™<code>FileDescriptor</code>Á±ªÂûãÁöÑ‰∏¥Êó∂ÂØπË±°„ÄÇËøô‰∏™ÊûÑÈÄ†ÂáΩÊï∞ÁöÑ‰ΩúÁî®Â∞±ÊòØÔºåÁõ¥Êé•ÂèñËµ∞Ëøô‰∏™‰∏¥Êó∂ÂØπË±°ÁöÑÂÄºÔºåÁî®Êù•ÂàùÂßãÂåñ‰∏Ä‰∏™Êñ∞ÁöÑ<code>TCPSocket</code>ÂØπË±°ÔºåËÄå‰∏çÈúÄË¶ÅÂ§çÂà∂Ëøô‰∏™‰∏¥Êó∂ÂØπË±°„ÄÇ</p>
<p>ÂÅáËÆæÊúâ‰∏™FileDescriptorÂØπË±°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FileDescriptor</span> <span class="nf">fd1</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊàë‰ª¨Â∞ùËØïËøôÊ†∑ÂÅöÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TCPSocket</span> <span class="nf">socket1</span><span class="p">(</span><span class="n">fd1</span><span class="p">);</span> <span class="c1">// Ëøô‰ºöÂàõÂª∫‰∏Ä‰∏™ÂâØÊú¨
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÔºåfd1ÊòØ‰∏Ä‰∏™Â∑¶ÂÄºÂºïÁî®ÔºåÂõ†‰∏∫ÂÆÉÊòØ‰∏Ä‰∏™ÊúâÂêçÂ≠óÁöÑÂØπË±°„ÄÇÂΩìÊàë‰ª¨‰º†ÈÄífd1ÁªôTCPSocketÁöÑÊûÑÈÄ†ÂáΩÊï∞Êó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫fd1ÁöÑ‰∏Ä‰∏™ÂâØÊú¨„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// ‰ª•‰∏ãÊòØÂàõÂª∫TCPSocketÂØπË±°ÁöÑÊ≠£Á°ÆÊñπÂºèÔºå‰ΩøÁî®Âè≥ÂÄºÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TCPSocket</span> <span class="nf">socket1</span><span class="p">(</span><span class="n">FileDescriptor</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span> <span class="c1">// ÂàõÂª∫‰∫Ü‰∏Ä‰∏™‰∏¥Êó∂ÁöÑFileDescriptorÂØπË±°
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="stdmove">std::move()</h4>
<p>Âú®C++‰∏≠Ôºå<code>std::move</code>ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ê®°ÊùøÔºåÂÆÉÂ∞Ü‰∏Ä‰∏™Â∑¶ÂÄºÂºïÁî®ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®„ÄÇÂΩì‰Ω†Âú®‰ª£Á†Å‰∏≠ÁúãÂà∞<code>std::move(fd)</code>Êó∂ÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÂ∞Ü<code>fd</code>Ëøô‰∏™Â∑¶ÂÄºÂºïÁî®ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®„ÄÇËøôÊ†∑Ôºå‰Ω†Â∞±ÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÂØπË±°ÔºåËÄå‰∏çÈúÄË¶ÅÂàõÂª∫ÂÆÉÁöÑ‰∏Ä‰∏™ÂâØÊú¨„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp"> </span><span class="c1">// for std::move
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyObject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyObject</span><span class="p">(</span><span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="o">:</span> <span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyObject</span><span class="p">(</span><span class="n">MyObject</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="o">:</span> <span class="n">value</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">other</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// &#34;Á™ÉÂèñ&#34; other ÁöÑËµÑÊ∫ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyObject</span> <span class="n">obj1</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">MyObject</span> <span class="n">obj2</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">obj1</span><span class="p">));</span> <span class="c1">// ‰ΩøÁî® std::move Â∞Ü obj1 ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Áé∞Âú®Ôºåobj1 ÁöÑÂÄºÂ∑≤ÁªèË¢´ &#34;Á™ÉÂèñ&#34;Ôºåobj2 ÁöÑÂÄºÊòØ 5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨Êúâ‰∏Ä‰∏™<code>MyObject</code>Á±ªÔºåÂÆÉÊúâ‰∏Ä‰∏™Êé•ÂèóÂè≥ÂÄºÂºïÁî®ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇÂú®<code>main</code>ÂáΩÊï∞‰∏≠ÔºåÊàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™<code>MyObject</code>ÂØπË±°<code>obj1</code>ÔºåÁÑ∂ÂêéÊàë‰ª¨‰ΩøÁî®<code>std::move(obj1)</code>Â∞Ü<code>obj1</code>ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂‰º†ÈÄíÁªô<code>obj2</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøôÊ†∑Ôºå<code>obj2</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞Â∞±ÂèØ‰ª•Áõ¥Êé•Êé•Êî∂<code>obj1</code>ÁöÑÊâÄÊúâÊùÉÔºåËÄå‰∏çÈúÄË¶ÅÂ§çÂà∂<code>obj1</code>„ÄÇ</p>
<p>ÂõûÂà∞ÂéüÂßãÈóÆÈ¢òÔºå<code>explicit TCPSocket( FileDescriptor&amp;&amp; fd ) : Socket( std::move(fd), AF_INET, SOCK_STREAM, IPPROTO_TCP ) {}</code>‰∏≠ÁöÑ<code>std::move(fd)</code>‰πüÊòØÁ±ª‰ººÁöÑ‰ΩúÁî®„ÄÇÂÆÉÂ∞Ü<code>fd</code>Ëøô‰∏™Â∑¶ÂÄºÂºïÁî®ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™‰∏¥Êó∂ÁöÑ<code>FileDescriptor</code>ÂØπË±°ÔºåËÄå‰∏çÈúÄË¶ÅÂàõÂª∫ÂÆÉÁöÑ‰∏Ä‰∏™ÂâØÊú¨„ÄÇËøôÂèØ‰ª•ÊèêÈ´òÊÄßËÉΩÔºåÂõ†‰∏∫Êàë‰ª¨ÈÅøÂÖç‰∫Ü‰∏çÂøÖË¶ÅÁöÑÂØπË±°Â§çÂà∂„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">FileDescriptor</span> <span class="nf">fd1</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">TCPSocket</span> <span class="nf">socket</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">fd1</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÊÆµ‰ª£Á†Å‰∏≠Ôºå<code>std::move(fd1)</code>Â∞Ü<code>fd1</code>ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂‰º†ÈÄíÁªô<code>TCPSocket</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞„ÄÇËøôÊ†∑Ôºå<code>TCPSocket</code>ÁöÑÊûÑÈÄ†ÂáΩÊï∞Â∞±ÂèØ‰ª•Áõ¥Êé•Êé•Êî∂<code>fd1</code>ÁöÑÊâÄÊúâÊùÉÔºåËÄå‰∏çÈúÄË¶ÅÂ§çÂà∂<code>fd1</code>„ÄÇÊ≥®ÊÑèÔºå‰∏ÄÊó¶‰Ω†ËøôÊ†∑ÂÅö‰∫ÜÔºå‰Ω†Â∞±‰∏çÂ∫îÂÜç‰ΩøÁî®<code>fd1</code>‰∫ÜÔºåÂõ†‰∏∫ÂÆÉÁöÑÂÄºÂèØËÉΩÂ∑≤ÁªèË¢´&quot;Á™ÉÂèñ&quot;‰∫Ü„ÄÇ</p>
<h3 id="34-writing-webget">3.4 Writing webget</h3>
<p>ËØØ‰ºö‰∫ÜÁé∞Âú®ÊâçÂà∞ÂÜôÁöÑÊó∂ÂÄô„ÄÇ„ÄÇ„ÄÇ</p>
<ol>
<li>Âú®ÊûÑÂª∫ÁõÆÂΩï‰∏≠Ôºå‰ΩøÁî®ÊñáÊú¨ÁºñËæëÂô®ÊàñÈõÜÊàêÂºÄÂèëÁéØÂ¢ÉÊâìÂºÄ‚Ä¶/apps/webget.ccÊñá‰ª∂„ÄÇ</li>
<li>Âú®get URLÂáΩÊï∞‰∏≠ÔºåÂÆûÁé∞Â¶ÇÊñá‰ª∂‰∏≠ÊâÄËø∞ÁöÑÁÆÄÂçïWebÂÆ¢Êà∑Á´ØÔºå‰ΩøÁî®‰πãÂâç‰ΩøÁî®ÁöÑHTTPÔºàWebÔºâËØ∑Ê±ÇÊ†ºÂºè„ÄÇ‰ΩøÁî®TCPSocketÂíåAddressÁ±ª„ÄÇ</li>
<li>ÊèêÁ§∫Ôºö
<ol>
<li>ËØ∑Ê≥®ÊÑèÔºåÂú®HTTP‰∏≠ÔºåÊØèË°åÂøÖÈ°ª‰ª•‚Äú\r\n‚ÄùÁªìÊùüÔºà‰ªÖ‰ΩøÁî®‚Äú\n‚ÄùÊàñendlÊòØ‰∏çÂ§üÁöÑÔºâ„ÄÇ</li>
<li>‰∏çË¶ÅÂøòËÆ∞Âú®‰Ω†ÁöÑÂÆ¢Êà∑Á´ØËØ∑Ê±Ç‰∏≠ÂåÖÂê´‚ÄúConnection: close‚ÄùË°å„ÄÇËøôÂëäËØâÊúçÂä°Âô®Âú®ÂèëÈÄÅÂÆåËøô‰∏™ËØ∑Ê±ÇÂêéÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖ‰Ω†ÁöÑÂÆ¢Êà∑Á´ØÂèëÈÄÅÊõ¥Â§öÁöÑËØ∑Ê±Ç„ÄÇÁõ∏ÂèçÔºåÊúçÂä°Âô®Â∞ÜÂèëÈÄÅ‰∏Ä‰∏™ÂõûÂ§çÔºåÁÑ∂Âêé‰ºöÁ´ãÂç≥ÁªìÊùüÂÖ∂ÂèëÈÄÅÁöÑÂ≠óËäÇÊµÅÔºà‰ªéÊúçÂä°Âô®Â•óÊé•Â≠óÂà∞‰Ω†ÁöÑÂ•óÊé•Â≠óÔºâ„ÄÇ‰Ω†‰ºöÂèëÁé∞‰Ω†ÁöÑ‰º†ÂÖ•Â≠óËäÇÊµÅÂ∑≤ÁªèÁªìÊùüÔºåÂõ†‰∏∫ÂΩì‰Ω†ÁöÑÂ•óÊé•Â≠óËØªÂèñÂÆå‰ªéÊúçÂä°Âô®‰º†Êù•ÁöÑÊï¥‰∏™Â≠óËäÇÊµÅÊó∂Ôºå‰ºöËææÂà∞‚ÄúEOF‚ÄùÔºàÊñá‰ª∂ÁªìÊùüÔºâ„ÄÇËøôÂ∞±ÊòØ‰Ω†ÁöÑÂÆ¢Êà∑Á´ØÁü•ÈÅìÊúçÂä°Âô®Â∑≤ÁªèÂÆåÊàêÂõûÂ§çÁöÑÊñπÂºè„ÄÇ</li>
<li>Á°Æ‰øùËØªÂèñÂπ∂ÊâìÂç∞ÊúçÂä°Âô®ÊâÄÊúâËæìÂá∫Áõ¥Âà∞Â•óÊé•Â≠óËææÂà∞‚ÄúEOF‚ÄùÔºàÊñá‰ª∂ÁªìÊùüÔºâ‚Äî‚Äî‰∏ÄÊ¨°ËØªÂèñË∞ÉÁî®ÊòØ‰∏çÂ§üÁöÑ„ÄÇ</li>
<li>Êàë‰ª¨È¢ÑËÆ°‰Ω†Â∞ÜÈúÄË¶ÅÁºñÂÜôÂ§ßÁ∫¶ÂçÅË°å‰ª£Á†Å</li>
</ol>
</li>
</ol>
<p>Êàë‰πãÂâçËøòÂ∞ùËØïÂàÜÊûê‰∫Ü‰∏Ä‰∏ãÊ∫êÁ†ÅÔºå<del>ÂêéÊù•ÂèëÁé∞ÊòØÊàëÊÉ≥Â§ö‰∫Ü„ÄÇ</del></p>
<p>Âú®ÂÜô‰ª£Á†Å‰πãÂâçÔºåÈ¶ñÂÖàÊù•ÂõûÈ°æ‰∏Ä‰∏ãTCPÂçèËÆÆÁöÑSocketÂ•óÊé•Â≠óÁºñÁ®ã„ÄÇÊõ¥Âü∫Á°ÄÁöÑÔºåËÆ©Êàë‰ª¨ÂõûÈ°æ‰∏Ä‰∏ã‰∏Ä‰∫õÂü∫Á°ÄÊ¶ÇÂøµÔºö</p>
<h4 id="Â•óÊé•Â≠ó">Â•óÊé•Â≠ó</h4>
<p><del>ÂÖ∂ÂÆûËøô‰∏™Ê¶ÇÂøµÊàëËá≥‰ªäÈÉΩËßâÂæóÂæàÊäΩË±°Ôºå‰∏çËøá‰ªñÁ°ÆÂÆûÈùûÂ∏∏ÈáçË¶Å</del></p>
<p>È¶ñÂÖàÂÖàÈóÆ‰∏™ÈóÆÈ¢òÔºåËØ∑ÈóÆSocketÂíåsocketÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü
‰Ω†ÂèØËÉΩÂíåÊàë‰∏ÄÊ†∑Êúâ‰∫õ‰∫ëÈáåÈõæÈáåÔºåÂú®‰∏çÂêåÊïôÊùêÊàñËÄÖcsdn‰∏äÂè´Ê≥ïÈÉΩ‰∏çÂ§™Áªü‰∏ÄÔºå<strong>ËøôÁé©ÊÑèÈöæÈÅì‰∏çÊòØÂêå‰∏Ä‰∏™‰∏úË•øÔºü</strong></p>
<p>‰ª•‰∏ãÊòØÁªìÂêàÊàë‰∏™‰∫∫ÁöÑÁêÜËß£ÂíågptËÄÅÂ∏àÁöÑÁ≠îÊ°àÔºö</p>
<p>Âú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå‚ÄúSocket‚ÄùÂíå‚Äúsocket‚ÄùÊåáÁöÑÊòØÂêå‰∏Ä‰ª∂‰∫ãÔºöËÆ°ÁÆóÊú∫ÁΩëÁªúÁºñÁ®ã‰∏≠Áî®‰∫éÈÄö‰ø°ÁöÑ‰∏ÄÁßçÊäΩË±°Ê¶ÇÂøµÔºåÂç≥Â•óÊé•Â≠ó„ÄÇÂ•óÊé•Â≠óÊòØÁΩëÁªúÈÄö‰ø°ÁöÑÁ´ØÁÇπÔºåÂÖÅËÆ∏‰∏çÂêåËøõÁ®ãÂú®ÁΩëÁªú‰∏äËøõË°åÈÄö‰ø°„ÄÇÊó†ËÆ∫ÊòØÂ§ßÂÜôËøòÊòØÂ∞èÂÜôÔºåÂÆÉ‰ª¨ÈÉΩÊòØÊåáÂêå‰∏Ä‰∏™Ê¶ÇÂøµÔºåÂè™ÊòØ‰π¶ÂÜôÊó∂ÁöÑÂ§ßÂ∞èÂÜô‰∏çÂêå„ÄÇÂú®‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®ÄÊàñÊñáÊ°£‰∏≠ÂèØËÉΩ‰ºöÊúâ‰∏çÂêåÁöÑÁ∫¶ÂÆöÔºå‰ΩÜÂú®ÈÄöÁî®ÁöÑÁΩëÁªúÁºñÁ®ãÊúØËØ≠‰∏≠ÔºåÂÆÉ‰ª¨ÊòØÁ≠â‰ª∑ÁöÑ„ÄÇ</p>
<ol>
<li><strong>SocketÔºàÈ¶ñÂ≠óÊØçÂ§ßÂÜôÔºâ</strong>Ôºö
<ul>
<li>ËøôÈÄöÂ∏∏ÊòØÊåáÊìç‰ΩúÁ≥ªÁªüÊèê‰æõÁöÑ‰∏Ä‰∏™ÊäΩË±°Â±ÇÔºåÂÆÉÂÖÅËÆ∏ÁΩëÁªú‰∏≠ÁöÑ‰∏çÂêå‰∏ªÊú∫Èó¥ËøõË°åÈÄö‰ø°„ÄÇ</li>
<li>Âú®ÁºñÁ®ãËØ≠Â¢É‰∏≠Ôºå‰∏Ä‰∏™Socket‰ª£Ë°®‰∏Ä‰∏™ÁΩëÁªúËøûÊé•ÁöÑÁ´ØÁÇπÔºåÂèØ‰ª•Áúã‰ΩúÊòØ‰∏çÂêåËÆ°ÁÆóÊú∫ËøõÁ®ãÈó¥ÊàñÂêå‰∏ÄËÆ°ÁÆóÊú∫‰∏ä‰∏çÂêåËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑ‰∏Ä‰∏™Èó®Êà∑„ÄÇ</li>
<li>Âú®UnixÂíåLinuxÁ≥ªÁªü‰∏≠ÔºåSocketÊòØÂÆûÁé∞ËøõÁ®ãÈó¥ÈÄö‰ø°ÔºàIPCÔºâÂíåÁΩëÁªúÈÄö‰ø°ÁöÑ‰∏ÄÁßçÊú∫Âà∂„ÄÇ</li>
</ul>
</li>
<li><strong>socketÔºàÈ¶ñÂ≠óÊØçÂ∞èÂÜôÔºâ</strong>Ôºö
<ul>
<li>socket ÊòØ‰∏ÄÁªÑÁî®‰∫é<strong>ÁΩëÁªúÈÄö‰ø°ÁöÑ API</strong>Ôºå<strong>Êèê‰æõ‰∫Ü‰∏ÄÁßçÁªü‰∏ÄÁöÑÊé•Âè£</strong>Ôºå‰ΩøÂæóÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÈÄöËøáÁΩëÁªúËøõË°åÈÄö‰ø°„ÄÇÂú®‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªü‰∏≠Ôºåsocket ÁöÑÂÆûÁé∞ÊñπÂºèÂèØËÉΩ‰∏çÂêåÔºå‰ΩÜÂÆÉ‰ª¨ÈÉΩÈÅµÂæ™Áõ∏ÂêåÁöÑËßÑËåÉÂíåÂçèËÆÆÔºå<strong>ÂèØ‰ª•ÂÆûÁé∞Ë∑®Âπ≥Âè∞ÁöÑÁΩëÁªúÈÄö‰ø°</strong>„ÄÇ</li>
<li>Âú®‰ΩøÁî®CËØ≠Ë®ÄÁºñÂÜôÁΩëÁªúÁ®ãÂ∫èÊó∂Ôºå<code>socket()</code>ÂáΩÊï∞ÊòØÁî®Êù•ÂàõÂª∫‰∏Ä‰∏™SocketËøûÊé•ÁöÑ‰∏Ä‰∏™Á≥ªÁªüË∞ÉÁî®„ÄÇ</li>
<li>Âú®PythonÁ≠âÁºñÁ®ãËØ≠Ë®Ä‰∏≠Ôºå<code>socket</code>Ê®°ÂùóÊèê‰æõ‰∫Ü‰∏Ä‰∏™Áî®‰∫éÁΩëÁªúÈÄö‰ø°ÁöÑÊé•Âè£ÔºåÈÄöËøáËøô‰∏™Ê®°ÂùóÂèØ‰ª•ÂàõÂª∫SocketËøûÊé•ÔºåËøõË°åÊï∞ÊçÆÁöÑÂèëÈÄÅÂíåÊé•Êî∂„ÄÇ</li>
</ul>
</li>
</ol>
<h4 id="Â•óÊé•Â≠ó‰∏éÊúçÂä°Á´ØËøõË°åÈÄö‰ø°ÊµÅÁ®ã">Â•óÊé•Â≠ó‰∏éÊúçÂä°Á´ØËøõË°åÈÄö‰ø°ÊµÅÁ®ã</h4>
<p><del>ÂÖ∂ÂÆûÊàëËßâÂæó‰ª•‰∏äÈÉΩÊòØÂ∫üËØù</del>ÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÂ•óÊé•Â≠óÂ∞±ÂÉèÊòØ‰∏Ä‰∏™ÈÄö‰ø°ÁöÑÊ°•Ê¢ÅÔºåÂÆÉÂÖÅËÆ∏‰∏çÂêåËÆæÂ§á‰∏äÁöÑÂ∫îÁî®Á®ãÂ∫èËøõË°åÊï∞ÊçÆ‰∫§Êç¢„ÄÇÂú®ÁºñÁ®ã‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÂ•óÊé•Â≠óÂèØ‰ª•ÂÆûÁé∞ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®‰πãÈó¥ÁöÑÈÄö‰ø°„ÄÇ</p>
<p>‰∏æ‰æãÊù•ËØ¥ÔºåÂΩì‰Ω†‰ΩøÁî®ÊµèËßàÂô®ËÆøÈóÆ‰∏Ä‰∏™ÁΩëÁ´ôÊó∂Ôºå‰Ω†ÁöÑÁîµËÑëÔºà‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÔºâÂíåÁΩëÁ´ôÊúçÂä°Âô®‰πãÈó¥Â∞±ÈúÄË¶ÅÈÄöËøáÂ•óÊé•Â≠óÊù•‰º†ËæìÊï∞ÊçÆ„ÄÇËøô‰∏™ËøáÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÔºö</p>
<ol>
<li>ÊúçÂä°Âô®Á®ãÂ∫èÈ¶ñÂÖàÂú®Ëá™Â∑±ÁöÑËÆ°ÁÆóÊú∫‰∏äÂàõÂª∫‰∏Ä‰∏™Â•óÊé•Â≠óÔºåÂπ∂‰∏îÂëäËØâÁΩëÁªúÊìç‰ΩúÁ≥ªÁªüÂÆÉÈúÄË¶ÅÁõëÂê¨Âì™‰∏™Á´ØÂè£ÔºàPortÔºâÔºåËøô‰∏™ËøáÁ®ãÂèØ‰ª•Áúã‰ΩúÊòØÊúçÂä°Âô®Âú®ÂëäËØâÂ§ñÁïåÔºö‚ÄúÊàëÁé∞Âú®Âú®Ëøô‰∏™Âú∞ÂùÄÔºàÁ´ØÂè£Ôºâ‰∏äÁ≠âÂæÖËøûÊé•„ÄÇ‚Äù</li>
<li>‰Ω†ÁöÑÁîµËÑëÔºàÂÆ¢Êà∑Á´ØÔºâÂú®ÊµèËßàÂô®‰∏≠ËæìÂÖ•ÁΩëÂùÄÂêéÔºåÊµèËßàÂô®‰ºöÂêëÊúçÂä°Âô®ÂèëËµ∑‰∏Ä‰∏™ËøûÊé•ËØ∑Ê±ÇÔºåËøô‰∏™ËØ∑Ê±Ç‰ºöÈÄöËøá‰Ω†ÁöÑÁîµËÑëÂàõÂª∫‰∏Ä‰∏™Â•óÊé•Â≠óÔºåÂπ∂‰∏îÈÄöËøáÁΩëÁªúÊâæÂà∞ÊúçÂä°Âô®ÁöÑÂ•óÊé•Â≠ó„ÄÇ</li>
<li>ÊúçÂä°Âô®Êé•Êî∂Âà∞ËøûÊé•ËØ∑Ê±ÇÂêéÔºå‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂ•óÊé•Â≠ó‰∏é‰Ω†ÁöÑÁîµËÑëÁöÑÂ•óÊé•Â≠óËøõË°åËøûÊé•Ôºå‰ªéËÄåÂª∫Á´ãËµ∑‰∏Ä‰∏™Êï∞ÊçÆ‰º†ËæìÁöÑÈÄöÈÅì„ÄÇ</li>
<li>‰∏ÄÊó¶ËøûÊé•Âª∫Á´ãÔºåÊï∞ÊçÆÂ∞±ÂèØ‰ª•Âú®‰Ω†ÁöÑÁîµËÑëÂíåÊúçÂä°Âô®‰πãÈó¥ÂèåÂêë‰º†Ëæì„ÄÇÊØîÂ¶ÇÔºåÊúçÂä°Âô®‰ºöÈÄöËøáËøô‰∏™ËøûÊé•ÂèëÈÄÅÁΩëÈ°µÁöÑÊï∞ÊçÆÁªô‰Ω†ÁöÑÁîµËÑëÔºå‰Ω†ÁöÑÁîµËÑëÊé•Êî∂Âà∞Êï∞ÊçÆÂêéÔºåÊµèËßàÂô®Â∞ÜÂÖ∂Ê∏≤ÊüìÊàê‰Ω†ÁúãÂà∞ÁöÑÁΩëÈ°µ„ÄÇ</li>
</ol>
<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂ•óÊé•Â≠óÁöÑ‰ΩúÁî®Â∞±ÊòØ‰ΩøÂæóÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Âô®ËÉΩÂ§üÂª∫Á´ã‰∏Ä‰∏™ÂèØÈù†ÁöÑÈÄö‰ø°ÈÄöÈÅìÔºå‰ªéËÄåÂÆûÁé∞Êï∞ÊçÆÁöÑ‰º†Ëæì„ÄÇÊó†ËÆ∫ÊòØWebÊµèËßà„ÄÅÊñá‰ª∂‰º†Ëæì„ÄÅÂç≥Êó∂ÈÄöËÆØÁ≠âÁΩëÁªúÂ∫îÁî®ÔºåÈÉΩÁ¶ª‰∏çÂºÄÂ•óÊé•Â≠óÊäÄÊúØÁöÑÊîØÊåÅ„ÄÇ</p>
<p>Êîæ‰∏ÄÂº†ÈôàÂπ¥ÁªèÂÖ∏ËÄÅÂõæ‰æø‰∫éÁêÜËß£ÂÖ∑‰ΩìËøáÁ®ãÔºö
<img src="https://raw.githubusercontent.com/Anonymity-0/Picgo/main/img/202403291741844.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="cÂ•óÊé•Â≠óÁºñÁ®ãÁõ∏ÂÖ≥ÂáΩÊï∞">c++Â•óÊé•Â≠óÁºñÁ®ãÁõ∏ÂÖ≥ÂáΩÊï∞</h4>
<p>cs144ÁöÑlabÊòØÁî®c++ÂÜôÁöÑÔºåÈÇ£Â∞±ËÆ©Êàë‰ª¨Êù•ÁúãÁúãÁõ∏ÂÖ≥ÁöÑÁ±ªÂíåÊàêÂëòÂáΩÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//! A wrapper around [TCP sockets](\ref man7::tcp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">TCPSocket</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Socket</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! \brief Construct from FileDescriptor (used by accept())
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//! \param[in] fd is the FileDescriptor from which to construct
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">explicit</span> <span class="n">TCPSocket</span><span class="p">(</span> <span class="n">FileDescriptor</span><span class="o">&amp;&amp;</span> <span class="n">fd</span> <span class="p">)</span> <span class="o">:</span> <span class="n">Socket</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span> <span class="n">fd</span> <span class="p">),</span> <span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="n">IPPROTO_TCP</span> <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//! Default: construct an unbound, unconnected TCP socket
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">TCPSocket</span><span class="p">()</span> <span class="o">:</span> <span class="n">Socket</span><span class="p">(</span> <span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span> <span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Mark a socket as listening for incoming connections
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">listen</span><span class="p">(</span> <span class="kt">int</span> <span class="n">backlog</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//! Accept a new incoming connection
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">TCPSocket</span> <span class="nf">accept</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>TCPSocket()</code>¬†ÊòØ‰∏Ä‰∏™ÂÖ¨ÊúâÊûÑÈÄ†ÂáΩÊï∞ÔºåÁî®‰∫éÂàõÂª∫‰∏Ä‰∏™Êú™ÁªëÂÆöÔºåÊú™ËøûÊé•ÁöÑ TCP Â•óÊé•Â≠ó„ÄÇ</p>
</li>
<li>
<p><code>listen( int backlog = 16 )</code>¬†ÂáΩÊï∞Áî®‰∫éÂ∞ÜÂ•óÊé•Â≠óÊ†áËÆ∞‰∏∫ÁõëÂê¨Áä∂ÊÄÅÔºåÂáÜÂ§áÊé•Êî∂ËøõÊù•ÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ<code>backlog</code>¬†ÂèÇÊï∞ÊåáÂÆö‰∫ÜÁ≠âÂæÖËøûÊé•ÈòüÂàóÁöÑÂ§ßÂ∞è„ÄÇ</p>
</li>
<li>
<p><code>accept()</code>¬†ÂáΩÊï∞Áî®‰∫éÊé•Âèó‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇÂΩìÊúâÊñ∞ÁöÑËøûÊé•ËØ∑Ê±ÇÂà∞Êù•Êó∂ÔºåÂÆÉ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êù•Â§ÑÁêÜËøô‰∏™ËøûÊé•ÔºåÁÑ∂Âêé‰ΩøÁî®Ëøô‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÊûÑÈÄ†‰∏Ä‰∏™¬†<code>TCPSocket</code>¬†ÂØπË±°Âπ∂ËøîÂõû„ÄÇ</p>
</li>
</ul>
<p>ÂàõÂª∫Â•óÊé•Â≠óÔºåÁõëÂê¨ÂáΩÊï∞ÔºåÊé•ÂèóÂáΩÊï∞ÈÉΩÊúâ‰∫ÜÔºåÂÖ∂‰ªñÂáΩÊï∞Âë¢Ôºü‰Ω†ÂèØËÉΩ‰ºöÂ•áÊÄ™ËØ∂‰∏∫‰ªÄ‰πà<code>TCPSocket</code>Á±ªÈáåÊ≤°ÊúâÂÆö‰πâÔºüÊòØ‰∏çÊòØÂú®Áà∂Á±ª<code>Socket</code>ÈáåÔºåÂú®<code>socket.hh</code>Â§¥Êñá‰ª∂‰∏ÄÊâæÔºåÂóØÊâæÂà∞‰∫ÜËøûÊé•ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">  <span class="c1">//! Connect a socket to a specified peer address with [connect(2)](\ref man2::connect)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">connect</span><span class="p">(</span> <span class="k">const</span> <span class="n">Address</span><span class="o">&amp;</span> <span class="n">address</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>void connect( const Address&amp; address )</code>ÔºöËøô‰∏™ÂáΩÊï∞Áî®‰∫éÂ∞ÜÂ•óÊé•Â≠óËøûÊé•Âà∞‰∏Ä‰∏™ÊåáÂÆöÁöÑÂú∞ÂùÄ„ÄÇ
ËøòÊòØÊ≤°ÁúãÂà∞ËØªÂÜôÂáΩÊï∞ÂíåÂÖ≥Èó≠ÂáΩÊï∞ÔºåËøôÊó∂ÂÄô‰Ω†ÂèëÁé∞<code>Socket</code>‰πüÊúâÁà∂Á±ª<code>FileDescriptor</code>ÔºåÁªßÁª≠Â•óÂ®ÉÔºå‰Ω†ÂèëÁé∞ÂéüÊù•Âú®<code>file_descriptor.hh</code>ÈáåÂ£∞Êòé‰∫ÜÔºåÂ•ΩÂÆ∂‰ºôÁúüÊòØËøûÁéØÂ•ó„ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Read into `buffer`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">read</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">buffer</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">read</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">buffers</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Attempt to write a buffer
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// returns number of bytes written
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">size_t</span> <span class="nf">write</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">buffer</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">size_t</span> <span class="nf">write</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="o">&gt;&amp;</span> <span class="n">buffers</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">size_t</span> <span class="nf">write</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">buffers</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Close the underlying file descriptor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">close</span><span class="p">()</span> <span class="p">{</span> <span class="n">internal_fd_</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">();</span> <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>void read( std::string&amp; buffer )</code>¬†Âíå¬†<code>void read( std::vector&lt;std::string&gt;&amp; buffers )</code>ÔºöËøô‰∏§‰∏™ÂáΩÊï∞Áî®‰∫é‰ªéÊñá‰ª∂ÊèèËø∞Á¨¶ËØªÂèñÊï∞ÊçÆ„ÄÇÁ¨¨‰∏Ä‰∏™ÂáΩÊï∞Â∞ÜËØªÂèñÁöÑÊï∞ÊçÆÂ≠òÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÁ¨¨‰∫å‰∏™ÂáΩÊï∞Â∞ÜËØªÂèñÁöÑÊï∞ÊçÆÂ≠òÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂêëÈáè„ÄÇ</li>
<li><code>size_t write( std::string_view buffer )</code>„ÄÅ<code>size_t write( const std::vector&lt;std::string_view&gt;&amp; buffers )</code>¬†Âíå¬†<code>size_t write( const std::vector&lt;std::string&gt;&amp; buffers )</code>ÔºöËøô‰∏â‰∏™ÂáΩÊï∞Áî®‰∫éÂêëÊñá‰ª∂ÊèèËø∞Á¨¶ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÁ¨¨‰∏Ä‰∏™ÂáΩÊï∞ÂÜôÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÁ¨¨‰∫å‰∏™ÂáΩÊï∞ÂÜôÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂêëÈáèÔºåÁ¨¨‰∏â‰∏™ÂáΩÊï∞‰πüÂÜôÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂêëÈáè„ÄÇËøô‰∏â‰∏™ÂáΩÊï∞ÈÉΩËøîÂõûÂÜôÂÖ•ÁöÑÂ≠óËäÇÊï∞„ÄÇ</li>
<li><code>void close()</code>ÔºöËøô‰∏™ÂáΩÊï∞Áî®‰∫éÂÖ≥Èó≠Êñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ</li>
</ul>
<h4 id="httpÊä•ÊñáÊ†ºÂºè">httpÊä•ÊñáÊ†ºÂºè</h4>
<p>ËøôÈÉ®ÂàÜ‰∏çÊòØ‰ª£Á†ÅÁöÑÈáçÁÇπÔºå‰∏çËøáËøòÊòØÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãÊàë‰ª¨ËøôÊ¨°ÈúÄË¶ÅÂ°´ÂÜôÁöÑGETËØ∑Ê±ÇÊä•ÊñáÔºåËØ¶ÊÉÖËØ∑ÂèÇËÄÉÁõ∏ÂÖ≥‰∏ì‰∏ö‰π¶Á±ç‰ª•ÂèäËøô‰∏™<a class="link" href="https://blog.csdn.net/csdnlijingran/article/details/88909370"  target="_blank" rel="noopener"
    >ÂçöÂÆ¢</a>„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">GET path HTTP/1.1
</span></span><span class="line"><span class="cl">Host: host
</span></span><span class="line"><span class="cl">Connection: close
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÊúÄÂêéËøòÊúâ‰∏Ä‰∏™Á©∫Ë°å„ÄÇ
Áî®cppÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">string</span> <span class="n">request</span> <span class="p">{</span> <span class="s">&#34;GET &#34;</span> <span class="o">+</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&#34; HTTP/1.1</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="o">+</span> <span class="s">&#34;Host: &#34;</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">&#34;</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="o">+</span> <span class="s">&#34;Connection: close</span><span class="se">\r\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="o">+</span> <span class="s">&#34;</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÆûÁé∞‰ª£Á†Å">ÂÆûÁé∞‰ª£Á†Å</h4>
<p>Ëøô‰∏ãÔºå‰Ω†Áªà‰∫éÊâæÈΩê‰∫ÜÂõæ‰∏äÊâÄÊúâÂáΩÊï∞ÔºåÂ°´ÂÜôÂ•ΩÁÆÄÂçïËØ∑Ê±ÇÊä•Êñá„ÄÇÂèØ‰ª•ÂºÄÂßãÁºñÁ®ã‰∫ÜÔºÅÁªìÂêà‰∏äÈù¢ÁöÑÊµÅÁ®ãÂõæÂíåÂáΩÊï∞Ôºå‰Ω†ÂèØ‰ª•Â°´Ë°•get_URLÂáΩÊï∞Ê®°ÊãüÁΩëÈ°µËÆøÈóÆ‰∫Ü„ÄÇÂÆûÈôÖ‰∏ä‰ª£Á†ÅÁ°ÆÂÆûÂæàÁü≠Ôºå‰Ω†Âè™ÈúÄË¶ÅÂÆûÁé∞TCPÂ•óÊé•Â≠óÁºñÁ®ãÁöÑÂÆ¢Êà∑Á´ØÈÉ®ÂàÜ„ÄÇ</p>
<ol>
<li>ÂàõÂª∫socket</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">TCPSocket</span> <span class="n">socket</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Âª∫Á´ãËøûÊé•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">const</span> <span class="n">string</span> <span class="n">service</span> <span class="p">{</span> <span class="s">&#34;http&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span> <span class="n">Address</span><span class="p">(</span> <span class="n">host</span><span class="p">,</span> <span class="n">service</span> <span class="p">)</span> <span class="p">);</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÂèëÈÄÅËØ∑Ê±Ç</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">string</span> <span class="n">request</span> <span class="p">{</span> <span class="s">&#34;GET &#34;</span> <span class="o">+</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&#34; HTTP/1.1</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="o">+</span> <span class="s">&#34;Host: &#34;</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">&#34;</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="o">+</span> <span class="s">&#34;Connection: close</span><span class="se">\r\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">                         <span class="o">+</span> <span class="s">&#34;</span><span class="se">\r\n</span><span class="s">&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="n">socket</span><span class="p">.</span><span class="n">write</span><span class="p">(</span> <span class="n">request</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>ËØªÂèñÂìçÂ∫îÂπ∂ËæìÂá∫</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">  <span class="n">string</span> <span class="n">response</span><span class="p">,</span> <span class="n">buffer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span> <span class="p">(</span> <span class="n">socket</span><span class="p">.</span><span class="n">read</span><span class="p">(</span> <span class="n">buffer</span> <span class="p">),</span> <span class="o">!</span><span class="n">buffer</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span><span class="p">.</span><span class="n">append</span><span class="p">(</span> <span class="n">buffer</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">response</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>ÂÖ≥Èó≠ËøûÊé•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">  <span class="n">socket</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â•ΩÁöÑ‰ª•‰∏äÂ∞±ÊòØÊâÄÊúâ‰ª£Á†ÅÔºåËøôÊ¨°Â∞èÂÆûÈ™å‰∏ªË¶ÅÊòØËÆ©Êàë‰ª¨ÂàùÊ≠•‰∏äÊâãÂ•óÊé•Â≠óÁºñÁ®ã„ÄÇÊé•‰∏ãÊù•ËÆ©Êàë‰ª¨Êù•ÊµãËØï‰∏Ä‰∏ãÔºö</p>
<h4 id="‰ª£Á†ÅÊµãËØï">‰ª£Á†ÅÊµãËØï</h4>
<p>Âú®ÁªàÁ´ØÊâßË°å‰ª•‰∏ã‰ª£Á†ÅËøõË°åÊµãËØï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmake --build build --target check_webget
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú‰Ω†ÁöÑ‰ª£Á†ÅËøòÊ≤°ÂÆåÊàê/Âá∫Áé∞ÈîôËØØÔºåÈÇ£‰πàÂ∞Ü‰ºöÂá∫Áé∞Á±ª‰ºº‰ª•‰∏ãÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Test project /home/cs144/minnow/build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Start 1: compile with bug-checkers
</span></span><span class="line"><span class="cl">1/2 Test <span class="c1">#1: compile with bug-checkers ........</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Passed
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1.02 sec
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Start 2: t_webget
</span></span><span class="line"><span class="cl">2/2 Test <span class="c1">#2: t_webget .........................***Failed</span>
</span></span><span class="line"><span class="cl">Function called: get_URL<span class="o">(</span>cs144.keithw.org, /nph-hasher/xyzzy<span class="o">)</span>
</span></span><span class="line"><span class="cl">Warning: get_URL<span class="o">()</span> has not been implemented yet.
</span></span><span class="line"><span class="cl">ERROR: webget returned output that did not match the test<span class="err">&#39;</span>s expectations
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊàêÂäüÔºåÂ∞±‰ºöÂá∫Áé∞Â¶Ç‰∏ãÁ±ª‰ººÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cs144@vm:~/minnow$ cmake --build build --target check_webget
</span></span><span class="line"><span class="cl">Test project /home/cs144/minnow/build
</span></span><span class="line"><span class="cl">    Start 1: compile with bug-checkers
</span></span><span class="line"><span class="cl">1/2 Test <span class="c1">#1: compile with bug-checkers ........   Passed    0.15 sec</span>
</span></span><span class="line"><span class="cl">    Start 2: t_webget
</span></span><span class="line"><span class="cl">2/2 Test <span class="c1">#2: t_webget .........................   Passed    3.26 sec</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">100% tests passed, <span class="m">0</span> tests failed out of <span class="m">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total Test <span class="nb">time</span> <span class="o">(</span>real<span class="o">)</span> <span class="o">=</span>   3.41 sec
</span></span><span class="line"><span class="cl">Built target check_webget
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊó∂ÂÄô‰Ω†ÂèëÁé∞‰ªñÂ•ΩÂÉèÊúâÁÇπÊÖ¢ÔºåÂÆòÊñπÊñáÊ°£Èáåt_webgetÊâç0.72s„ÄÇËØ∂ÊòØÊÄé‰πà‰∏ÄÂõû‰∫ãÂë¢Ôºü
Âú®ËøôÈáåÊåñ‰∏Ä‰∏™ÂùëÂæÖÂ°´~~ÔºàÂõ†‰∏∫ÊàëÁöÑc++Â≠¶ÁöÑÁúüÊòØÂ§™Â∑Æ‰∫ÜÔºâ~~</p>
<h2 id="4an-in-memory-reliable-byte-stream">4.An in-memory reliable byte stream</h2>
<p>Ê≠£ÂΩìÊàë‰ª•‰∏∫lab0Â∞±Â§ßÂäüÂëäÊàêÔºåÁúüÊòØÊòìÂ¶ÇÂèçÊéåÔºåÊòìÂ¶ÇÂèçÊéåÂïäÁöÑÊó∂ÂÄôÔºåÊàëÊÉäÂñúÂú∞ÂèëÁé∞ÈÇ£Âè™ÊòØÂâçËèúÔºåÊé•‰∏ãÊù•ÁöÑÂ≠óËäÇÊµÅÁºñÁ®ãÊõ¥ÊòØÊäòÁ£®„ÄÇ</p>
<p>ÂÖàËØªÈ¢òÁõÆÔºö</p>
<h3 id="ÂÆûÈ™åÁõÆÁöÑ">ÂÆûÈ™åÁõÆÁöÑÔºö</h3>
<ul>
<li>ÂÆûÁé∞‰∏Ä‰∏™ÊäΩË±°ÁöÑÂèØÈù†Â≠óËäÇÊµÅÂØπË±°ÔºåÂç≥‰ΩøÂ∫ïÂ±ÇÁΩëÁªúÂè™Êèê‰æõ‚ÄúÂ∞ΩÂäõËÄå‰∏∫‚ÄùÔºà‰∏çÂèØÈù†ÔºâÁöÑÊï∞ÊçÆÊä•ÊúçÂä°„ÄÇ</li>
<li>Â≠óËäÇÊµÅÊòØÊúâÁïåÁöÑÔºöÂÜôÂÖ•Á´ØÂèØ‰ª•ÁªìÊùüËæìÂÖ•Ôºå‰πãÂêé‰∏çËÉΩÂÜçÂÜôÂÖ•Êõ¥Â§öÂ≠óËäÇÔºõËØªÂèñÁ´ØËØªÂà∞ÊµÅÁöÑÊú´Â∞æÊó∂Ôºå‰ºöÂà∞Ëææ‚ÄúEOF‚ÄùÔºàÊñá‰ª∂ÁªìÊùüÔºâÔºå‰πãÂêé‰∏çËÉΩÂÜçËØªÂèñÊõ¥Â§öÂ≠óËäÇ„ÄÇ</li>
</ul>
<h3 id="ÂÆûÈ™åË¶ÅÊ±Ç">ÂÆûÈ™åË¶ÅÊ±ÇÔºö</h3>
<ul>
<li>Â≠óËäÇÊµÅÈúÄË¶ÅÊúâÊµÅÈáèÊéßÂà∂‰ª•ÈôêÂà∂‰ªª‰ΩïÁªôÂÆöÊó∂Èó¥ÁöÑÂÜÖÂ≠òÊ∂àËÄó„ÄÇ</li>
<li>Â≠óËäÇÊµÅÂØπË±°ÂàùÂßãÂåñÊó∂‰ºöÊåáÂÆö‰∏Ä‰∏™‚ÄúÂÆπÈáè‚ÄùÂèÇÊï∞ÔºåÂç≥ÂÆÉÊÑøÊÑèÂú®‰ªª‰ΩïÁªôÂÆöÊó∂ÂàªÂ≠òÂÇ®Âú®Ëá™Ë∫´ÂÜÖÂ≠ò‰∏≠ÁöÑÊúÄÂ§ßÂ≠óËäÇÊï∞„ÄÇ</li>
<li>ÂÜôÂÖ•Á´ØÂú®‰ªª‰ΩïÁªôÂÆöÊó∂ÂàªËÉΩÂÜôÂÖ•ÁöÑÈáèÂèóÂà∞ÈôêÂà∂Ôºå‰ª•Á°Æ‰øùÊµÅ‰∏ç‰ºöË∂ÖËøáÂÖ∂Â≠òÂÇ®ÂÆπÈáè„ÄÇ</li>
<li>ËØªÂèñÁ´ØËØªÂèñÂ≠óËäÇÂπ∂‰ªéÊµÅ‰∏≠Ê∏ÖÈô§ÂÆÉ‰ª¨Êó∂ÔºåÂÜôÂÖ•Á´ØË¢´ÂÖÅËÆ∏ÂÜôÂÖ•Êõ¥Â§öÊï∞ÊçÆ„ÄÇ</li>
<li>Â≠óËäÇÊµÅÁî®‰∫éÂçïÁ∫øÁ®ãÁéØÂ¢ÉÔºå‰∏çÈúÄË¶ÅÊãÖÂøÉÂπ∂ÂèëÂÜôÂÖ•/ËØªÂèñ„ÄÅÈîÅÂÆöÊàñÁ´ûÊÄÅÊù°‰ª∂„ÄÇ</li>
</ul>
<h3 id="ÂÆûÈ™åÁªÜËäÇ">ÂÆûÈ™åÁªÜËäÇÔºö</h3>
<ul>
<li>Â≠óËäÇÊµÅÊòØÊúâÁïåÁöÑÔºå‰ΩÜÂú®ÂÜôÂÖ•Á´ØÁªìÊùüËæìÂÖ•Âπ∂ÂÆåÊàêÊµÅ‰πãÂâçÔºåÂÆÉÂèØ‰ª•Âá†‰πé‰ªªÊÑèÈïø„ÄÇ</li>
<li>ÂÆûÁé∞ÂøÖÈ°ªËÉΩÂ§üÂ§ÑÁêÜÊØîÂÆπÈáèÈïøÂæóÂ§öÁöÑÊµÅ„ÄÇ</li>
<li>ÂÆπÈáèÈôêÂà∂‰∫ÜÂú®‰ªª‰ΩïÁªôÂÆöÊó∂Âàª‰øùÁïôÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠óËäÇÊï∞ÔºàÂ∑≤ÂÜôÂÖ•‰ΩÜÂ∞öÊú™ËØªÂèñÔºâÔºå‰ΩÜ‰∏çÈôêÂà∂ÊµÅÁöÑÈïøÂ∫¶„ÄÇ</li>
<li>Âç≥‰ΩøÊòØÂÆπÈáè‰ªÖ‰∏∫‰∏Ä‰∏™Â≠óËäÇÁöÑÂØπË±°ÔºåÂè™Ë¶ÅÂÜôÂÖ•Á´Ø‰∏ÄÊ¨°ÂÜôÂÖ•‰∏Ä‰∏™Â≠óËäÇÔºåÂπ∂‰∏îËØªÂèñÁ´ØÂú®ÂÜôÂÖ•‰∏ã‰∏Ä‰∏™Â≠óËäÇ‰πãÂâçËØªÂèñÊØè‰∏™Â≠óËäÇÔºåÂÆÉ‰ªçÁÑ∂ÂèØ‰ª•Êê∫Â∏¶ÈïøËææÊï∞TBÁöÑÊµÅ„ÄÇ</li>
</ul>
<h3 id="ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊé•Âè£ÂÆö‰πâ">ÈúÄË¶ÅÂÆûÁé∞ÁöÑÊé•Âè£ÂÆö‰πâÔºö</h3>
<ul>
<li>
<p>ÂØπ‰∫éÂÜôÂÖ•Á´ØÔºö</p>
<ul>
<li><code>void push(std::string data)</code>ÔºöÂ∞ÜÊï∞ÊçÆÊé®ÈÄÅÂà∞ÊµÅ‰∏≠Ôºå‰ΩÜÂè™ËÉΩÊé®ÈÄÅÂèØÁî®ÂÆπÈáèÂÖÅËÆ∏ÁöÑÊï∞ÊçÆÈáè„ÄÇ</li>
<li><code>void close()</code>Ôºö‰ø°Âè∑Ë°®Á§∫ÊµÅÂ∑≤Âà∞ËææÁªìÂ∞æ„ÄÇ‰∏ç‰ºöÂÜçÂÜôÂÖ•‰ªª‰ΩïÂÜÖÂÆπ„ÄÇ</li>
<li><code>bool is_closed() const</code>ÔºöÊµÅÊòØÂê¶Â∑≤Ë¢´ÂÖ≥Èó≠Ôºü</li>
<li><code>uint64_t available_capacity() const</code>ÔºöÂΩìÂâçÂèØ‰ª•Êé®ÈÄÅÂà∞ÊµÅ‰∏≠ÁöÑÂ≠óËäÇÊï∞„ÄÇ</li>
<li><code>uint64_t bytes_pushed() const</code>ÔºöÁ¥ØËÆ°Êé®ÈÄÅÂà∞ÊµÅ‰∏≠ÁöÑÊÄªÂ≠óËäÇÊï∞„ÄÇ</li>
</ul>
</li>
<li>
<p>ÂØπ‰∫éËØªÂèñÁ´ØÔºö</p>
<ul>
<li><code>std::string_view peek() const</code>ÔºöÊü•ÁúãÁºìÂÜ≤Âå∫‰∏≠ÁöÑ‰∏ã‰∏Ä‰∫õÂ≠óËäÇ„ÄÇ</li>
<li><code>void pop(uint64_t len)</code>Ôºö‰ªéÁºìÂÜ≤Âå∫‰∏≠ÁßªÈô§<code>len</code>‰∏™Â≠óËäÇ„ÄÇ</li>
<li><code>bool is_finished() const</code>ÔºöÊµÅÊòØÂê¶Â∑≤ÂÆåÊàêÔºàÂ∑≤ÂÖ≥Èó≠Âπ∂ÂÆåÂÖ®ÂºπÂá∫ÔºâÔºü</li>
<li><code>bool has_error() const</code>ÔºöÊµÅÊòØÂê¶Âá∫Áé∞ÈîôËØØÔºü</li>
<li><code>uint64_t bytes_buffered() const</code>ÔºöÂΩìÂâçÁºìÂÜ≤ÁöÑÂ≠óËäÇÊï∞ÔºàÂ∑≤Êé®ÈÄÅ‰∏îÂ∞öÊú™ÂºπÂá∫Ôºâ„ÄÇ</li>
<li><code>uint64_t bytes_popped() const</code>Ôºö‰ªéÊµÅ‰∏≠Á¥ØËÆ°ÂºπÂá∫ÁöÑÊÄªÂ≠óËäÇÊï∞„ÄÇ</li>
</ul>
</li>
</ul>
<h3 id="ÈùûÂ∏∏Êó†ËÅäÁöÑ‰ª£Á†ÅËß£ËØª">ÈùûÂ∏∏Êó†ËÅäÁöÑ‰ª£Á†ÅËß£ËØª</h3>
<p>ËÆ©Êàë‰ª¨Êù•ÁúãÁúãbyte_stream.hhÂ§¥Êñá‰ª∂ÁöÑÊ∫êÁ†Å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#pragma once </span><span class="c1">// Á°Æ‰øùËøô‰∏™Â§¥Êñá‰ª∂Âè™Ë¢´ÂåÖÂê´‰∏ÄÊ¨°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cstdint&gt;</span><span class="cp"> </span><span class="c1">// ÂºïÂÖ•Ê†áÂáÜÂ∫ìÔºåÂåÖÂê´Âü∫Êú¨ÁöÑÊï¥Êï∞Á±ªÂûãÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">  </span><span class="c1">// ÂºïÂÖ•Ê†áÂáÜÂ∫ìÔºåÂåÖÂê´Â≠óÁ¨¶‰∏≤Á±ªÁöÑÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;string_view&gt;</span><span class="cp"> </span><span class="c1">// ÂºïÂÖ•Ê†áÂáÜÂ∫ìÔºåÂåÖÂê´ÂØπÂ≠óÁ¨¶‰∏≤ÁöÑÈùûÊã•ÊúâÔºànon-owningÔºâËßÜÂõæÁöÑÂÆö‰πâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ByteStreamÁ±ªÊòØWriterÂíåReaderÁöÑÂü∫Á±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ByteStream</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàùÂßãÂåñÊó∂‰º†ÂÖ•ÊµÅÁöÑÂÆπÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">explicit</span> <span class="n">ByteStream</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">capacity</span><span class="p">)</span> <span class="o">:</span> <span class="n">capacity_</span><span class="p">(</span><span class="n">capacity</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Êèê‰æõÂØπReaderÂíåWriterÊé•Âè£ÁöÑËÆøÈóÆÁöÑËæÖÂä©ÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Reader</span><span class="o">&amp;</span> <span class="n">reader</span><span class="p">();</span> <span class="c1">// ËøîÂõûReaderÂØπË±°ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">const</span> <span class="n">Reader</span><span class="o">&amp;</span> <span class="n">reader</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> <span class="c1">// ËøîÂõûconst ReaderÂØπË±°ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Writer</span><span class="o">&amp;</span> <span class="n">writer</span><span class="p">();</span> <span class="c1">// ËøîÂõûWriterÂØπË±°ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">const</span> <span class="n">Writer</span><span class="o">&amp;</span> <span class="n">writer</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> <span class="c1">// ËøîÂõûconst WriterÂØπË±°ÁöÑÂºïÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËÆæÁΩÆÊµÅÈîôËØØÁä∂ÊÄÅÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ÊñπÊ≥ïÊù•Ê£ÄÊü•ÊµÅÊòØÂê¶ÂèëÁîüËøáÈîôËØØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">set_error</span><span class="p">()</span> <span class="p">{</span> <span class="n">error_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kt">bool</span> <span class="nf">has_error</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">error_</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">protected</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøôÈáåÊ∑ªÂä†ByteStreamÁöÑ‰ªª‰ΩïÈ¢ùÂ§ñÁä∂ÊÄÅÔºå‰∏çË¶ÅÊ∑ªÂä†Âà∞WriterÂíåReaderÊé•Âè£‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="n">capacity_</span><span class="p">;</span> <span class="c1">// ÊµÅÁöÑÂÆπÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="n">error_</span> <span class="p">{};</span> <span class="c1">// ÊµÅÊòØÂê¶ÂèëÁîüËøáÈîôËØØÁöÑÊ†áÂøó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// WriterÁ±ªÁªßÊâøËá™ByteStreamÔºåÁî®‰∫éÂÜôÂÖ•Êï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Writer</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ByteStream</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÂêëÊµÅ‰∏≠Êé®ÈÄÅÊï∞ÊçÆÔºå‰ΩÜÂè™ËÉΩÊé®ÈÄÅÂΩìÂâçÂèØÁî®ÂÆπÈáèÂÖÅËÆ∏ÁöÑÊï∞ÊçÆÈáè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê†áËÆ∞ÊµÅÂ∑≤ÁªèÁªìÊùüÔºå‰πãÂêé‰∏çÂÜçÂÜôÂÖ•Êï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê£ÄÊü•ÊµÅÊòØÂê¶Â∑≤ÁªèË¢´ÂÖ≥Èó≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="nf">is_closed</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøîÂõûÂΩìÂâçÂèØ‰ª•Êé®ÈÄÅÂà∞ÊµÅ‰∏≠ÁöÑÂ≠óËäÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="nf">available_capacity</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøîÂõûÁ¥ØËÆ°Êé®ÈÄÅÂà∞ÊµÅ‰∏≠ÁöÑÊÄªÂ≠óËäÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="nf">bytes_pushed</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ReaderÁ±ªÁªßÊâøËá™ByteStreamÔºåÁî®‰∫éËØªÂèñÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Reader</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ByteStream</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Êü•ÁúãÁºìÂÜ≤Âå∫‰∏≠ÁöÑ‰∏ã‰∏Ä‰∫õÂ≠óËäÇÔºå‰ΩÜ‰∏çÁßªÈô§ÂÆÉ‰ª¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">std</span><span class="o">::</span><span class="n">string_view</span> <span class="n">peek</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ‰ªéÁºìÂÜ≤Âå∫ÁßªÈô§len‰∏™Â≠óËäÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">void</span> <span class="nf">pop</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">len</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Ê£ÄÊü•ÊµÅÊòØÂê¶Â∑≤ÁªèÁªìÊùüÔºàÂ∑≤ÂÖ≥Èó≠Âπ∂‰∏îÊâÄÊúâÊï∞ÊçÆÈÉΩÂ∑≤ÂºπÂá∫Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="nf">is_finished</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøîÂõûÂΩìÂâçÁºìÂÜ≤ÁöÑÂ≠óËäÇÊï∞ÔºàÂ∑≤Êé®ÈÄÅ‰∏îÂ∞öÊú™ÂºπÂá∫Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="nf">bytes_buffered</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ËøîÂõû‰ªéÊµÅ‰∏≠Á¥ØËÆ°ÂºπÂá∫ÁöÑÊÄªÂ≠óËäÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="nf">bytes_popped</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// readÂáΩÊï∞ÊòØ‰∏Ä‰∏™ËæÖÂä©ÂáΩÊï∞ÔºåÁî®‰∫é‰ªéByteStreamÁöÑReader‰∏≠peekÂπ∂popÊúÄÂ§ölen‰∏™Â≠óËäÇÂà∞‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">read</span><span class="p">(</span><span class="n">Reader</span><span class="o">&amp;</span> <span class="n">reader</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">len</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏∫‰∫ÜÂÆûÁé∞ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠óËäÇÊµÅÔºåÈúÄË¶Å‰∏Ä‰∫õÊàêÂëòÂèòÈáèÊù•Áª¥Êä§ÊµÅÁöÑÁä∂ÊÄÅ„ÄÇ‰ª•‰∏ãÊòØÂú®ByteStreamÁ±ªÈáåË°•ÂÖÖÁöÑÊàêÂëòÂèòÈáèÔºö</p>
<ol>
<li>
<p><code>std::deque&lt;char&gt; buffer_;</code></p>
<ul>
<li><code>buffer_</code>ÊòØ‰∏Ä‰∏™ÂèåÁ´ØÈòüÂàóÔºåÁî®‰∫éÂ≠òÂÇ®Â≠óËäÇÊµÅ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ‰ΩøÁî®<code>std::deque</code>ÔºàÂèåÁ´ØÈòüÂàóÔºâÊòØÂõ†‰∏∫ÂÆÉÊîØÊåÅÈ´òÊïàÁöÑ‰∏§Á´ØÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºåËøôÂØπ‰∫éÊ®°ÊãüÂ≠óËäÇÊµÅÁöÑÂÜôÂÖ•ÔºàpushÔºâÂíåËØªÂèñÔºàpopÔºâÊìç‰ΩúÈùûÂ∏∏ÂêàÈÄÇ„ÄÇ</li>
</ul>
</li>
<li>
<p><code>bool closed_ {};</code></p>
<ul>
<li><code>closed_</code>ÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåÁî®Êù•Ê†áËÆ∞Â≠óËäÇÊµÅÊòØÂê¶Â∑≤ÁªèË¢´ÂÖ≥Èó≠„ÄÇ‰∏ÄÊó¶ÊµÅË¢´ÂÖ≥Èó≠ÔºåÂ∞±‰∏çÂ∫îËØ•ÂÜçÊúâÊï∞ÊçÆÂÜôÂÖ•„ÄÇËøô‰∏™Áä∂ÊÄÅÂØπ‰∫é<code>Writer</code>Á±ªÁâπÂà´ÈáçË¶ÅÔºåÂõ†‰∏∫ÂÆÉÈúÄË¶ÅÁü•ÈÅì‰ΩïÊó∂ÂÅúÊ≠¢Êé•ÂèóÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇ</li>
</ul>
</li>
<li>
<p><code>uint64_t bytes_pushed_ {};</code></p>
<ul>
<li><code>bytes_pushed_</code>ËøôÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞ÔºåÁî®‰∫éËÆ∞ÂΩïÂ∑≤ÁªèÊé®ÈÄÅÂà∞Â≠óËäÇÊµÅ‰∏≠ÁöÑÂ≠óËäÇÊï∞„ÄÇÊØèÊ¨°Ë∞ÉÁî®¬†<code>push</code>¬†ÊñπÊ≥ïÊó∂ÔºåÈÉΩ‰ºöÊõ¥Êñ∞Ëøô‰∏™ÂÄº„ÄÇ</li>
</ul>
</li>
<li>
<p><code>uint64_t bytes_popped_ {};</code></p>
<ul>
<li>ËøôÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞ÔºåÁî®‰∫éËÆ∞ÂΩïÂ∑≤Áªè‰ªéÂ≠óËäÇÊµÅ‰∏≠ÂºπÂá∫ÁöÑÂ≠óËäÇÊï∞„ÄÇÊØèÊ¨°Ë∞ÉÁî®¬†<code>pop</code>¬†ÊñπÊ≥ïÊó∂ÔºåÈÉΩ‰ºöÊõ¥Êñ∞Ëøô‰∏™ÂÄº„ÄÇ</li>
</ul>
</li>
</ol>
<h3 id="ÂÆûÁé∞Êé•Âè£">ÂÆûÁé∞Êé•Âè£</h3>
<p>Êé•‰∏ãÊù•ËÆ©Êàë‰ª¨ÂºÄÂßã‰∏ÄÊ≠•‰∏ÄÊ≠•ÂÆûÁé∞Êé•Âè£ÂêßÔºÅ
È¶ñÂÖàÊòØÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">Writer</span><span class="o">::</span><span class="n">is_closed</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">closed_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>¬†Ëøô‰∏™ÂáΩÊï∞ÈùûÂ∏∏ÁÆÄÂçïÔºåÂÆÉÂè™ÊòØËøîÂõû¬†<code>closed_</code>¬†ÊàêÂëòÂèòÈáèÁöÑÂÄº„ÄÇ<code>closed_</code>¬†ÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåÁî®‰∫éÊ†áËÆ∞Â≠óËäÇÊµÅÊòØÂê¶Â∑≤ÁªèÂÖ≥Èó≠„ÄÇÂ¶ÇÊûú¬†<code>closed_</code>¬†‰∏∫¬†<code>true</code>ÔºåÂàôË°®Á§∫Â≠óËäÇÊµÅÂ∑≤ÁªèÂÖ≥Èó≠Ôºå‰∏çÂÜçÂÖÅËÆ∏ÂêëÂÖ∂‰∏≠ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÊòØÂæàÈáçË¶ÅÁöÑpushÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Writer</span><span class="o">::</span><span class="n">push</span><span class="p">(</span><span class="n">string</span> <span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Â¶ÇÊûúÊµÅÂ∑≤ÁªèÂÖ≥Èó≠ÔºåÁõ¥Êé•ËøîÂõûÔºå‰∏çÂÜçËøõË°åÂêéÁª≠Êìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">closed_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ËÆ°ÁÆóË¶ÅÊé®ÈÄÅÁöÑÂ≠óËäÇÊï∞ÔºåËøô‰∏™Êï∞ÊòØËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ßÂ∞èÂíåÊµÅÁöÑÂèØÁî®ÂÆπÈáè‰πãÈó¥ÁöÑËæÉÂ∞èÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">uint64_t</span> <span class="n">to_push</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">available_capacity</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Â¶ÇÊûúË¶ÅÊé®ÈÄÅÁöÑÂ≠óËäÇÊï∞‰∏∫0ÔºåË°®Á§∫Ê≤°ÊúâÂèØÁî®ÁöÑÂÆπÈáèÔºåÂõ†Ê≠§‰∏çÊé®ÈÄÅ‰ªª‰ΩïÊï∞ÊçÆÔºåÁõ¥Êé•ËøîÂõû
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="n">to_push</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ‰ΩøÁî®Âæ™ÁéØÂ∞ÜË¶ÅÊé®ÈÄÅÁöÑÊï∞ÊçÆÊ∑ªÂä†Âà∞ÊµÅ‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">for</span> <span class="p">(</span><span class="kt">uint64_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">to_push</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">buffer_</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> <span class="c1">// Â∞ÜÊï∞ÊçÆÊ∑ªÂä†Âà∞ÊµÅÁöÑÊú´Â∞æ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Êõ¥Êñ∞Â∑≤Êé®ÈÄÅÁöÑÂ≠óËäÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">bytes_pushed_</span> <span class="o">+=</span> <span class="n">to_push</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>È¶ñÂÖàÔºåÊ£ÄÊü•¬†<code>closed_</code>¬†ÊòØÂê¶‰∏∫¬†<code>true</code>„ÄÇÂ¶ÇÊûú‰∏∫¬†<code>true</code>ÔºåÂàôË°®Á§∫Â≠óËäÇÊµÅÂ∑≤ÁªèÂÖ≥Èó≠Ôºå‰∏çÂÜçÂÖÅËÆ∏ÂÜôÂÖ•Êï∞ÊçÆÔºåÂõ†Ê≠§Áõ¥Êé•ËøîÂõû„ÄÇ</p>
</li>
<li>
<p>ÁÑ∂ÂêéÔºåËÆ°ÁÆóË¶ÅÊé®ÈÄÅÁöÑÂ≠óËäÇÊï∞<code>to_push</code>„ÄÇËøô‰∏™Êï∞ÊòØ¬†<code>data.size()</code>ÔºàÂç≥ËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ßÂ∞èÔºâÂíå¬†<code>available_capacity()</code>ÔºàÂç≥Â≠óËäÇÊµÅÁöÑÂèØÁî®ÂÆπÈáèÔºâ‰πãÈó¥ÁöÑËæÉÂ∞èÂÄº„ÄÇÂ¶ÇÊûú<code>to_push</code>‰∏∫¬†<code>0</code>ÔºåÂàôË°®Á§∫Ê≤°ÊúâÂèØÁî®ÁöÑÂÆπÈáèÔºåÂõ†Ê≠§‰∏çÊé®ÈÄÅ‰ªª‰ΩïÊï∞ÊçÆÔºåÁõ¥Êé•ËøîÂõû„ÄÇ</p>
</li>
<li>
<p>ÊúÄÂêéÔºå‰ΩøÁî®Âæ™ÁéØÂ∞ÜË¶ÅÊé®ÈÄÅÁöÑÊï∞ÊçÆÊ∑ªÂä†Âà∞¬†<code>buffer_</code>¬†‰∏≠„ÄÇ<code>buffer_</code>¬†ÊòØ‰∏Ä‰∏™¬†<code>std::deque&lt;char&gt;</code>ÔºåÁî®‰∫éÂ≠òÂÇ®Â≠óËäÇÊµÅ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇÂæ™ÁéØÁöÑÊ¨°Êï∞ÊòØË¶ÅÊé®ÈÄÅÁöÑÂ≠óËäÇÊï∞ÔºåÊØèÊ¨°Âæ™ÁéØÈÉΩÂ∞Ü‰∏Ä‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆÊ∑ªÂä†Âà∞¬†<code>buffer_</code>¬†ÁöÑÊú´Â∞æ„ÄÇ</p>
</li>
</ul>
<p>ÂèàÊòØÂá†‰∏™ÂæàÁÆÄÂçïÁöÑÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Writer</span><span class="o">::</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">closed_</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ÊñπÊ≥ïÁöÑÊÄùË∑ØÈùûÂ∏∏ÁÆÄÂçïÔºöÂ∞±ÊòØÂ∞Ü¬†<code>closed_</code>¬†ËÆæÁΩÆ‰∏∫¬†<code>true</code>Ôºå‰ª•Ê†áËÆ∞Â≠óËäÇÊµÅÂ∑≤ÁªèÂÖ≥Èó≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">Reader</span><span class="o">::</span><span class="n">is_finished</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">buffer_</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="n">closed_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>buffer_.empty()</code>¬†ÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåË°®Á§∫¬†<code>buffer_</code>ÔºàÂ≠óËäÇÊµÅÁöÑÁºìÂÜ≤Âå∫ÔºâÊòØÂê¶‰∏∫Á©∫„ÄÇÂ¶ÇÊûú¬†<code>buffer_</code>¬†‰∏∫Á©∫ÔºåË°®Á§∫Ê≤°ÊúâÊõ¥Â§öÁöÑÊï∞ÊçÆÂèØ‰ª•‰ªéÂ≠óËäÇÊµÅ‰∏≠ËØªÂèñ„ÄÇ</p>
<p><code>closed_</code>¬†ÊòØ‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåÁî®‰∫éÊ†áËÆ∞Â≠óËäÇÊµÅÊòØÂê¶Â∑≤ÁªèÂÖ≥Èó≠„ÄÇÂ¶ÇÊûú¬†<code>closed_</code>¬†‰∏∫¬†<code>true</code>ÔºåË°®Á§∫Â≠óËäÇÊµÅÂ∑≤ÁªèÂÖ≥Èó≠Ôºå‰∏çÂÜçÂÖÅËÆ∏ÂêëÂÖ∂‰∏≠ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂ¶ÇÊûú¬†<code>buffer_</code>¬†‰∏∫Á©∫Âπ∂‰∏î¬†<code>closed_</code>¬†‰∏∫¬†<code>true</code>ÔºåÂàôË°®Á§∫Â≠óËäÇÊµÅÂ∑≤ÂÆåÊàê„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">uint64_t</span> <span class="n">Writer</span><span class="o">::</span><span class="n">available_capacity</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">capacity_</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&#34;Buffer size exceeds capacity.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">capacity_</span> <span class="o">-</span> <span class="n">buffer_</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™ÊñπÊ≥ïÊòØÊ£ÄÊü•buffer_ÁöÑÂèØÁî®ÂÆπÈáèÁöÑ‰ª£Á†Å„ÄÇÈ¶ñÂÖàÊ£ÄÊü• buffer_ ÁöÑÂ§ßÂ∞èÊòØÂê¶Ë∂ÖËøá‰∫Ü capacity_ÔºåÂ¶ÇÊûúË∂ÖËøá‰∫ÜÂ∞±ÊäõÂá∫ÈîôËØØÔºõÊ≤°Ë∂ÖËøáÂ∞±ËøîÂõûÂ≠óËäÇÊµÅÁöÑÂèØÁî®ÂÆπÈáè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">uint64_t</span> <span class="n">Writer</span><span class="o">::</span><span class="n">bytes_pushed</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">bytes_pushed_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">uint64_t</span> <span class="n">Reader</span><span class="o">::</span><span class="n">bytes_popped</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">bytes_popped_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰ø©ÊñπÊ≥ïÁöÑÊÄùË∑ØÈùûÂ∏∏ÁÆÄÂçïÔºöÂ∞±ÊòØËøîÂõû¬†<code>bytes_popped_</code>¬†Âíå<code>bytes_pushed_</code>¬†ÁöÑÂÄºÔºåÂç≥Â∑≤Áªè‰ªéÂ≠óËäÇÊµÅ‰∏≠ÂºπÂá∫ÁöÑÂ≠óËäÇÊï∞ÂíåÂ∑≤ÁªèÊé®ÈÄÅÂà∞Â≠óËäÇÊµÅ‰∏≠ÁöÑÂ≠óËäÇÊï∞„ÄÇ</p>
<p>ÈÇ£Âà∞Â∫ïÂú®Âì™ÈáåÊõ¥Êñ∞Ëøô‰ø©ÂÄºÂë¢Ôºü<code>bytes_pushed_</code>Âú®ÂâçÈù¢ÁöÑ<code>push</code>ÂáΩÊï∞‰∏≠Ë¢´Êõ¥Êñ∞ÔºõËÄå<code>bytes_popped_</code>È°æÂêçÊÄù‰πâÂàôÂú®‰∏ãÈù¢ÁöÑ<code>pop</code>ÂáΩÊï∞‰∏≠Êõ¥Êñ∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Reader</span><span class="o">::</span><span class="n">pop</span><span class="p">(</span> <span class="kt">uint64_t</span> <span class="n">len</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">buffer_</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&#34;Cannot pop more data than available in the buffer.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">len</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="n">buffer_</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>  <span class="c1">// Á°Æ‰øù‰∏ç‰ºöÂà†Èô§Ë∂ÖËøá buffer_ Â§ßÂ∞èÁöÑÂÖÉÁ¥†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">for</span> <span class="p">(</span><span class="kt">uint64_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">buffer_</span><span class="p">.</span><span class="n">pop_front</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> 
</span></span><span class="line"><span class="cl">  <span class="n">bytes_popped_</span> <span class="o">+=</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Âú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÈ¶ñÂÖàÊ£ÄÊü•Ë¶ÅÂºπÂá∫ÁöÑÊï∞ÊçÆÈáè¬†<code>len</code>¬†ÊòØÂê¶Ë∂ÖËøá‰∫Ü¬†<code>buffer_</code>ÔºàÂ≠óËäÇÊµÅÁöÑÁºìÂÜ≤Âå∫ÔºâÁöÑÂ§ßÂ∞è„ÄÇÂ¶ÇÊûúË∂ÖËøá‰∫ÜÔºåÂ∞±ÊäõÂá∫‰∏Ä‰∏™ËøêË°åÊó∂ÈîôËØØ„ÄÇ</li>
<li>ÁÑ∂ÂêéÔºåÂ∞Ü¬†<code>len</code>¬†ËÆæÁΩÆ‰∏∫¬†<code>len</code>¬†Âíå¬†<code>buffer_.size()</code>¬†‰πãÈó¥ÁöÑËæÉÂ∞èÂÄºÔºå‰ª•Á°Æ‰øù‰∏ç‰ºöÂà†Èô§Ë∂ÖËøá¬†<code>buffer_</code>¬†Â§ßÂ∞èÁöÑÂÖÉÁ¥†„ÄÇ</li>
<li>==‰Ω†ÂèØËÉΩ‰ºöÂ•áÊÄ™ÔºåÂâçÈù¢Â∑≤ÁªèÂà§Êñ≠Ëøá‰∫ÜÔºå<code>len</code>¬†Â∑≤ÁªèË¢´Á°ÆËÆ§‰∏ç‰ºöÂ§ß‰∫é¬†<code>buffer_.size()</code>Ôºå‰∏∫‰ªÄ‰πàËøòË¶ÅÂÜçÂèñÂÄº‰∏ÄÈÅçÔºüÂú®ËøôÊÆµ‰ª£Á†Å‰∏≠ÔºåÂõ†‰∏∫Âú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠ÔºåÂ¶ÇÊûúÂú®Ê£ÄÊü•¬†<code>len &gt; buffer_.size()</code>¬†‰πãÂêéÂíåÊâßË°å¬†<code>len = std::min(len, buffer_.size());</code>¬†‰πãÂâçÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπ‰∫Ü¬†<code>buffer_</code>ÔºåÈÇ£‰πà¬†<code>len</code>¬†ÂèØËÉΩ‰ºöÂ§ß‰∫é¬†<code>buffer_.size()</code>„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå<code>std::min</code>¬†Ë∞ÉÁî®ÂèØ‰ª•Èò≤Ê≠¢Â∞ùËØïÂºπÂá∫Ë∂ÖËøá¬†<code>buffer_</code>¬†Â§ßÂ∞èÁöÑÂÖÉÁ¥†„ÄÇ==</li>
<li>Êé•ÁùÄÔºå‰ΩøÁî®Âæ™ÁéØ‰ªé¬†<code>buffer_</code>¬†‰∏≠ÂºπÂá∫¬†<code>len</code>¬†‰∏™ÂÖÉÁ¥†„ÄÇÊØèÊ¨°Âæ™ÁéØÈÉΩË∞ÉÁî®¬†<code>buffer_.pop_front()</code>ÔºåËøô‰∏™ÊñπÊ≥ï‰ºöÂà†Èô§¬†<code>buffer_</code>¬†ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</li>
<li>ÊúÄÂêéÔºåÊõ¥Êñ∞¬†<code>bytes_popped_</code>¬†ÁöÑÂÄºÔºåÂ∞ÜÂÖ∂Â¢ûÂä†¬†<code>len</code>„ÄÇ<code>bytes_popped_</code>¬†ÊòØ‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞ÔºåÁî®‰∫éËÆ∞ÂΩïÂ∑≤Áªè‰ªéÂ≠óËäÇÊµÅ‰∏≠ÂºπÂá∫ÁöÑÂ≠óËäÇÊï∞„ÄÇ</li>
</ul>
<p>ÁÑ∂ÂêéÂ∞±ÊòØÊúÄÂêé‰∏Ä‰∏™<code>peek</code>¬†ÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇËøô‰∏™ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÈ¢ÑËßàÂ≠óËäÇÊµÅ‰∏≠ÁöÑÊï∞ÊçÆÔºå‰ΩÜ‰∏ç‰ªéÂ≠óËäÇÊµÅ‰∏≠Âà†Èô§Ëøô‰∫õÊï∞ÊçÆ„ÄÇ
Ëøô‰∏™ÊñπÊ≥ïÁúüÁöÑËÆ©ÊàëÈîô‰∫ÜÂæàÂ§öÈÅçÔºåÊµãËØïÈ∫ª‰∫ÜÈÉΩ„ÄÇ‰∏ÄÂºÄÂßãÁöÑ‰ª£Á†ÅÊòØËøôÊ†∑ÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">string_view</span> <span class="n">Reader</span><span class="o">::</span><span class="n">peek</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ËøîÂõû‰∏Ä‰∏™ÈùûÁ©∫‰ΩÜÂÜÖÂÆπ‰∏∫Á©∫ÁöÑËßÜÂõæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nf">string_view</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âè™ËøîÂõûÁºìÂÜ≤Âå∫‰∏≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØÊï¥‰∏™ÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buffer_</span><span class="p">.</span><span class="n">front</span><span class="p">(),</span> <span class="n">bytes_buffered</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêéÊù•ÊÄé‰πàÊµãËØïÈÉΩÊµãËØï‰∏çËøáÔºåÊâçÂèëÁé∞Âì¶Ôºå<code>peek</code>¬†ÊñπÊ≥ïÁöÑÁõÆÁöÑÊòØÂè™Êü•Áúã¬†<code>buffer_</code>¬†ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåËÄå‰∏çÊòØÊâÄÊúâÂÖÉÁ¥†ÔºåÊîπ‰∫Ü‰πãÂêéÁªà‰∫éÈÄöËøá‰∫ÜËÄ∂ÔºÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">string_view</span> <span class="n">Reader</span><span class="o">::</span><span class="n">peek</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">buffer_</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nf">string_view</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>  <span class="c1">// ËøîÂõû‰∏Ä‰∏™Á©∫ËßÜÂõæ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âè™ËøîÂõûÁºìÂÜ≤Âå∫‰∏≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØÊï¥‰∏™ÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buffer_</span><span class="p">.</span><span class="n">front</span><span class="p">(),</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ÂÖàÊù•Ëß£Èáä‰∏Ä‰∏ã<code>std::string_view</code>¬†ÔºåÂÆÉÊòØ C++17 ÂºïÂÖ•ÁöÑ‰∏Ä‰∏™Êñ∞ÁâπÊÄßÔºåÂÆÉÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑ„ÄÅÈùûÊã•ÊúâÁöÑÂè™ËØªÂ≠óÁ¨¶Â∫èÂàóËßÜÂõæ„ÄÇÂÆÉÂèØ‰ª•Áúã‰ΩúÊòØÊåáÂêëÂ≠óÁ¨¶Êï∞ÁªÑÁöÑÊåáÈíàÂíåÈïøÂ∫¶ÁöÑÁªÑÂêàÔºå‰ΩÜÂπ∂‰∏çÊã•ÊúâÂÆÉÊâÄÊåáÂêëÁöÑÂ≠óÁ¨¶Êï∞ÁªÑ„ÄÇ<code>std::string_view</code>¬†ÁöÑ‰∏ªË¶ÅÁî®ÈÄîÊòØ‰Ωú‰∏∫ÂáΩÊï∞ÁöÑÂèÇÊï∞Á±ªÂûãÔºåÁâπÂà´ÊòØÂΩìÂáΩÊï∞ÈúÄË¶ÅÊé•Âèó‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜ‰∏çÈúÄË¶ÅÊã•ÊúâÂÆÉÊó∂„ÄÇ‰ΩøÁî®¬†<code>std::string_view</code>¬†ÂèØ‰ª•<strong>ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂ≠óÁ¨¶‰∏≤Â§çÂà∂ÔºåÊèêÈ´òÊÄßËÉΩ</strong>„ÄÇ</p>
</li>
<li>
<p>Âú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÈ¶ñÂÖàÔºåÊ£ÄÊü•¬†<code>buffer_</code>¬†ÊòØÂê¶‰∏∫Á©∫„ÄÇËøôÊòØÈÄöËøáË∞ÉÁî®¬†<code>buffer_.empty()</code>¬†Êù•ÂÆåÊàêÁöÑ„ÄÇÂ¶ÇÊûú¬†<code>buffer_</code>¬†‰∏∫Á©∫ÔºàÂç≥Ê≤°ÊúâÊï∞ÊçÆÂèØ‰ª•ËØªÂèñÔºâÔºåÈÇ£‰πàÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™Á©∫ÁöÑ¬†<code>std::string_view</code>„ÄÇËøôÊòØÈÄöËøá¬†<code>string_view(nullptr, 0)</code>¬†ÂÆûÁé∞ÁöÑÔºåÂÆÉÂàõÂª∫‰∫Ü‰∏Ä‰∏™Ê≤°ÊúâÊï∞ÊçÆÁöÑ¬†<code>std::string_view</code>„ÄÇ</p>
</li>
<li>
<p>Â¶ÇÊûú¬†<code>buffer_</code>¬†‰∏ç‰∏∫Á©∫ÔºåÈÇ£‰πàÊñπÊ≥ïËøîÂõû‰∏Ä‰∏™¬†<code>std::string_view</code>ÔºåÂÆÉË°®Á§∫¬†<code>buffer_</code>¬†ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇËøôÊòØÈÄöËøá¬†<code>std::string_view(&amp;buffer_.front(), 1)</code>¬†ÂÆûÁé∞ÁöÑ„ÄÇËøôÈáåÔºå<code>&amp;buffer_.front()</code>¬†Ëé∑Âèñ¬†<code>buffer_</code>¬†Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂú∞ÂùÄÔºå<code>1</code>¬†Ë°®Á§∫Êàë‰ª¨Âè™ÂÖ≥ÂøÉ‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</p>
</li>
</ul>
<p>ÊúÄÂêéÊâßË°å<code>cmake --build build --target check0</code>ÊµãËØï
ÊµãËØïÁªìÊûúÂ¶Ç‰∏ãÔºåÁªà‰∫éÊàêÂäü‰∫ÜÔºåÁ¨¨‰∏Ä‰∏™ÂÆûÈ™åÂÆåÁªìÊííËä±üéâÔºÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cs144@vm:~/minnow$ cmake --build build --target check0 
</span></span><span class="line"><span class="cl">Test project /home/cs144/minnow/build
</span></span><span class="line"><span class="cl">      Start  1: compile with bug-checkers
</span></span><span class="line"><span class="cl"> 1/10 Test  <span class="c1">#1: compile with bug-checkers ........   Passed    0.20 sec</span>
</span></span><span class="line"><span class="cl">      Start  2: t_webget
</span></span><span class="line"><span class="cl"> 2/10 Test  <span class="c1">#2: t_webget .........................   Passed    1.37 sec</span>
</span></span><span class="line"><span class="cl">      Start  3: byte_stream_basics
</span></span><span class="line"><span class="cl"> 3/10 Test  <span class="c1">#3: byte_stream_basics ...............   Passed    0.04 sec</span>
</span></span><span class="line"><span class="cl">      Start  4: byte_stream_capacity
</span></span><span class="line"><span class="cl"> 4/10 Test  <span class="c1">#4: byte_stream_capacity .............   Passed    0.02 sec</span>
</span></span><span class="line"><span class="cl">      Start  5: byte_stream_one_write
</span></span><span class="line"><span class="cl"> 5/10 Test  <span class="c1">#5: byte_stream_one_write ............   Passed    0.02 sec</span>
</span></span><span class="line"><span class="cl">      Start  6: byte_stream_two_writes
</span></span><span class="line"><span class="cl"> 6/10 Test  <span class="c1">#6: byte_stream_two_writes ...........   Passed    0.01 sec</span>
</span></span><span class="line"><span class="cl">      Start  7: byte_stream_many_writes
</span></span><span class="line"><span class="cl"> 7/10 Test  <span class="c1">#7: byte_stream_many_writes ..........   Passed    0.07 sec</span>
</span></span><span class="line"><span class="cl">      Start  8: byte_stream_stress_test
</span></span><span class="line"><span class="cl"> 8/10 Test  <span class="c1">#8: byte_stream_stress_test ..........   Passed    0.25 sec</span>
</span></span><span class="line"><span class="cl">      Start 37: compile with optimization
</span></span><span class="line"><span class="cl"> 9/10 Test <span class="c1">#37: compile with optimization ........   Passed    0.07 sec</span>
</span></span><span class="line"><span class="cl">      Start 38: byte_stream_speed_test
</span></span><span class="line"><span class="cl">             ByteStream throughput: 0.85 Gbit/s
</span></span><span class="line"><span class="cl">10/10 Test <span class="c1">#38: byte_stream_speed_test ...........   Passed    0.16 sec</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">100% tests passed, <span class="m">0</span> tests failed out of <span class="m">10</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total Test <span class="nb">time</span> <span class="o">(</span>real<span class="o">)</span> <span class="o">=</span>   2.21 sec
</span></span><span class="line"><span class="cl">Built target check0
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/lab/">lab</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%AC%94%E8%AE%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP„ÄÅIPÁΩëÁªúÁºñÁ®ãÁ¨¨‰∏âÁ´†Á¨îËÆ∞</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0%E7%AC%94%E8%AE%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP„ÄÅIPÁΩëÁªúÁºñÁ®ãÁ¨¨‰∫åÁ´†Á¨îËÆ∞</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%80%E7%AB%A0%E7%AC%94%E8%AE%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">TCP„ÄÅIPÁΩëÁªúÁºñÁ®ãÁ¨¨‰∏ÄÁ´†Á¨îËÆ∞</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/%E7%BD%91%E7%BB%9C%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">ÁΩëÁªúÂ±Ç</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">
        
        

        <div class="article-details">
            <h2 class="article-title">Êï∞ÊçÆÈìæË∑ØÂ±Ç</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="Anonymity-0/Anonymity-0.github.io"
    data-repo-id="R_kgDOKsFzXQ"
    data-category="Announcements"
    data-category-id="DIC_kwDOKsFzXc4Ca3tc"
    data-mapping="url"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="dark_high_contrast"
    data-lang="en"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('dark_high_contrast');
            } else {
                setGiscusTheme('0');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2024 AGA
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.21.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
