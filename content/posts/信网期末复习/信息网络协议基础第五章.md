---
title: "信息网络协议基础第五章复习"
description: 
date: 2024-01-02T18:27:05+08:00
image: 
math: 
license: 
hidden: false
comments: true
draft: false
categories:
    - 信息网络协议基础
tags:
    - 学习笔记
---


•基本概念

–QoS度量参数；流、行为集合、服务等级协议


## 基本概念
### QoS度量参数
常用的描述QoS需求的参数包括：带宽、延迟、延迟抖动、突发（峰值）速率、最大突发长度、丢包率
- 带宽 ：给定介质、协议或连接的额定吞吐量，实际上指应用程序在网络中通信所需要的“管道大小”，也可以认为是用户对网络传输速率的要求
	- 最小带宽（最小分组速率）：传输中的最小瞬时速率，可用产生两个相邻分组的最大时间间隔的倒数来表示
	- 峰值带宽（峰值分组速率）：传输中的最大瞬时速率，可用产生两个相邻分组的最短时间间隔的倒数来表示
	- 平均带宽（平均分组速率）：一段时间内分组传输的平均速率
- 延迟：分组从发送端到达接收端的时间间隔
	- 传输延迟：发送分组的第一个比特到发送最后一个比特的时间间隔，取决于发送接口的速率和分组的大小
	- 传播延迟：发送分组的一个比特到接收端接收到该比特的时间间隔，取决于传输介质和传输距离
	- 处理延迟：分组从到达节点到进入输出队列的时间间隔，包括对分组头标处理，路由查找等，取决于节点的处理能力和分组处理的复杂度
	- <font color="#ff0000">排队延迟：分组从进入输出队列到开始输出的时间间隔，取决于队列长度和调度策略</font>
	- ![[Pasted image 20240102164138.png]]
- 延迟抖动：端到端延迟的变化特性，由延迟的可变部分的变化导致的，流量的突发、不公平的队列调度算法都可能导致较大的延迟抖动

### 流
- 从一个源到一个目的的有序分组集合被称为一个流（Flow)
- 一般来说，流是由特定于具体应用并且具有相同QoS需求的分组所组成
- 一个流和一个应用会话（Session）相对应，所以在后面叙述中有时将流的概念和会话的概念等同
- ==IP网络中通常用五元组<源IP地址、目的IP地址、源端口号、目的端口号、协议>来标识一个流==
- 在面向连接的网络中，属于同一个流的所有分组将会走相同的路径到达目的地 ，在无连接的网络中，属于同一个流的分组可能会走不同的路径到达目的地
### 行为集合
- 在路由器上执行相同QoS操作的分组的集合
- 多个流如果具有相同的QoS操作，则在路由器上可以汇聚成一个行为集合
- ==行为集合有时与类（Class）的概念等同，流可以看作是只有1个流的行为集合或者类==


## 支持QoS操作的路由器功能
1. 接纳控制
	当应用要求QoS服务时，判断其要求是否能够得到满足，应该是放在每个网络的入口路由器上
2. 流量调节
	检查到达的分组是否满足SLA中设定的QoS水平，如果不满足，实施事先指定的整形操作，包括丢弃、延迟、重标记等
3. 流量控制
	为了满足QoS需求（带宽、丢包率、延迟、延迟抖动等），选择是否向输出链路输出分组以及控制分组的输出顺序（即队列管理和调度），该功能设置在输出端口处

## 两个服务质量模型

### 综合服务原理
1. 资源预留
	1. 发送应用通过<font color="#ff0000">建立消息</font>将想发送流的流量特性发送给路径上的每个路由器和接收主机
	2. 路径上路由器在<font color="#ff0000">建立消息</font>中附加上可以提供的QoS信息（例如预测的延迟等）送给接收主机
	3. 接收应用接收<font color="#ff0000">预留建立</font>消息中的QoS信息，决定数据传输所需QoS参数，并将其通过预留消息沿相反路径通知给沿途路由器和发送主机
	4. 路径上的路由器根据<font color="#ff0000">预留消息</font>预留所需网络资源
2. 数据流传输
	-  发送主机发送遵循预留规定的数据流
3. 流量调节
- 中间路由器监测数据流是否满足预留规定，如果不满足
	- 对于保证型服务，采用整形
	- 对于受控负载型服务，将不符合的分组转为尽力服务
4. 流量控制
	- 路由器根据指定的服务类型，对每个流的分组进行调度和队列管理，实现指定QoS（带宽、延迟等）

### 综合服务类型
![[Pasted image 20240102171144.png]]


### 综合服务缺点
- 基于流的细粒度资源分配，存在可扩展性问题
- <font color="#ff0000">带宽、存储、处理开销随着流的数量的增加而急剧增长</font>

### 区分服务原理
1. 预先设置PHB
	在支持区分服务的网络中，由网络管理员事先在每个路由器上设置行为集合（DSCP）所对应的PHB
2. 数据传输
	应用P直接向接收主机B发送分组，分组到达R1首先进行分类，标记其DSCP为101110，判断其速率是否大于1Mbps，如果是，则进行丢弃整形。R2、R3根据分组DSCP执行相应的PHB，即以1Mbps的速率转发分组
•


### PHB（逐跳行为）：
在每个节点上描述根据DSCP对特定行为集合（类）进行资源分配的方式，具体由相应的流量控制（队列管理和调度）来实现

####  EFPHB，加速转发型PHB
- 提供低丢失率、低延时和低延时抖动的服务
- 严格限制EF分组到达路由器的速率小于设定的路由器转发EF分组的速率
- 通过在位于网络入口的路由器上限制进入的EF分组不超过某一最大速率，从而实现对EF分组速率的限制
- EF由具体的调度算法来实现
- 推荐DSCP为101110（46）

#### AF确定转发型PHB
- 比尽力更好的PHB，为用户提供不同级别的转发保证,定义了四个等级，每个等级定义了3个丢弃优先级
- DSCP
   
| 服务等级/丢弃优先级 | 等级 1 | 等级 2 | 等级 3 | 等级 4 |
| -------------------------- | ------ | ------ | ------ | ------ |
| 低                         | 001010 | 010010 | 011010 | 100010 |
| 中                         | 001100 | 010100 | 011100 | 100100 |
| 高                         | 001110 | 010110 | 011110 | 100110 |
- IP分组转发保证取决于:
	- 多少资源分配给此分组所属的AF等级,以及此AF等级当前的负载和拥塞情况
	- 分组的丢弃优先级
![[Pasted image 20240102171449.png]]



试图结合综合服务和区分服务的优点
- 综合服务提供细粒度的以流（Flow）为单位的QoS，并且通过资源预留能够保证端到端的QoS,<font color="#ff0000">适用于规模较小的接入网络</font>
- 区分服务通过对流进行聚类（BA），并且在路由器上事先设置分组的处理规则（PHB），具有更好的可扩展性,<font color="#ff0000">适用于业务流量大的核心网</font>


在6to4网络中，IPv6地址的前32位是固定的2002，接下来的32位是IPv4地址的16进制表示。因此，路由器R的IPv4地址238.136.16.1对应的16进制表示为EE88:1001。所以，我们可以给子网W1和W2分配的6to4子网前缀如下：
- 子网W1的6to4子网前缀：2002:EE88:1001:1::/64
- 子网W2的6to4子网前缀：2002:EE88:1001:2::/64